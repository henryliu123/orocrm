/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.8 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/*!
 * jQuery JavaScript Library v2.0.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-05-30T21:25Z
 */

/*!
 * Sizzle CSS Selector Engine v1.9.4-pre
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-05-27
 */

/**
 * Portions of this code are from the Google Closure Library,
 * received from the Closure Authors under the Apache 2.0 license.
 *
 * All other code is (C) 2011 FriendsOfSymfony and subject to the MIT license.
 */

//     Underscore.js 1.5.1
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*!
 * Chaplin 1.0.0
 *
 * Chaplin may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://chaplinjs.org
 */

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*!
 * William DURAND <william.durand1@gmail.com>
 * MIT Licensed
 */

//! moment.js
//! version : 2.3.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*! jQuery UI - v1.10.4 - 2014-01-17
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */

/*
 * jQuery timepicker addon
 * By: Trent Richardson [http://trentrichardson.com]
 * Version 1.2
 * Last Modified: 02/02/2013
 *
 * Copyright 2013 Trent Richardson
 * You may use this project under MIT or GPL licenses.
 * http://trentrichardson.com/Impromptu/GPL-LICENSE.txt
 * http://trentrichardson.com/Impromptu/MIT-LICENSE.txt
 */

/*!
 * OuterHTML v2.1.0
 *
 * http://www.darlesson.com/
 *
 * Copyright 2012, Darlesson Oliveira
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * @requires jQuery v1.4.0 or above
 *
 * Reporting bugs, comments or suggestions: http://darlesson.com/contact/
 * Documentation and other jQuery plug-ins: http://darlesson.com/jquery/
 * Donations are welcome: http://darlesson.com/donate/
 */

/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */

/*
 *
 * Copyright (c) 2006-2014 Sam Collett (http://www.texotela.co.uk)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 * 
 * Version 1.4
 * Demo: http://www.texotela.co.uk/code/jquery/numeric/
 *
 */

/*
Copyright 2012 Igor Vaynberg

Version: 3.4.1 Timestamp: Thu Jun 27 18:02:10 PDT 2013

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/

/*
 * jsTree 1.0-rc3
 * http://jstree.com/
 *
 * Copyright (c) 2010 Ivan Bozhanov (vakata.com)
 *
 * Licensed same as jquery - under the terms of either the MIT License or the GPL Version 2 License
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * $Date: 2011-02-09 01:17:14 +0200 (ср, 09 февр 2011) $
 * $Revision: 236 $
 */

/*! jQuery Ajax Queue v0.1.2pre | (c) 2013 Corey Frang | Licensed MIT */

/**
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

/*
 * jQuery Hotkeys Plugin
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based upon the plugin by Tzury Bar Yochay:
 * http://github.com/tzuryby/hotkeys
 *
 * Original idea by:
 * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
*/

/*!
* Bootstrap.js by @fat & @mdo
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/

/*!
 * jQuery Form Plugin
 * version: 3.32.0-2013.04.09
 * @requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */

/*!
 * Autolinker.js
 * 0.11.0
 *
 * Copyright(c) 2014 Gregory Jacobs <greg@greg-jacobs.com>
 * MIT Licensed. http://www.opensource.org/licenses/mit-license.php
 *
 * https://github.com/gregjacobs/Autolinker.js
 */

/*!
 * jQuery Extended Dialog 2.0
 *
 * Copyright (c) 2013 Oro Inc
 * Inspired by DialogExtend Copyright (c) 2010 Shum Ting Hin http://code.google.com/p/jquery-dialogextend/
 *
 * Licensed under MIT
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Depends:
 *   jQuery 1.7.2
 *   jQuery UI Dialog 1.10.2
 *
 */

/*!
 * FullCalendar v1.6.4
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */

/*!
  * bean.js - copyright Jacob Thornton 2011
  * https://github.com/fat/bean
  * MIT License
  * special thanks to:
  * dean edwards: http://dean.edwards.name/
  * dperini: https://github.com/dperini/nwevents
  * the entire mootools team: github.com/mootools/mootools-core
  */

/**
 * Flotr2 (c) 2012 Carl Sutherland
 * MIT License
 * Special thanks to:
 * Flotr: http://code.google.com/p/flotr/ (fork)
 * Flot: https://github.com/flot/flot (original fork)
 */

/*!
 * numeral.js
 * version : 1.5.1
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */

/*
  backbone-pageable 1.2.3
  http://github.com/wyuenho/backbone-pageable

  Copyright (c) 2013 Jimmy Yuen Ho Wong
  Licensed under the MIT @license.
*/

/*
 * jQuery MultiSelect UI Widget 1.14pre
 * Copyright (c) 2012 Eric Hynds
 *
 * http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/
 *
 * Depends:
 *   - jQuery 1.4.2+
 *   - jQuery UI 1.8 widget factory
 *
 * Optional:
 *   - jQuery UI effects
 *   - jQuery UI position utility
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 */

/*
 * jQuery MultiSelect UI Widget Filtering Plugin 1.5pre
 * Copyright (c) 2012 Eric Hynds
 *
 * http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/
 *
 * Depends:
 *   - jQuery UI MultiSelect widget
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 */

/*!
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 Jörn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */

/*
CryptoJS v3.1.2
code.google.com/p/crypto-js
(c) 2009-2013 by Jeff Mott. All rights reserved.
code.google.com/p/crypto-js/wiki/License
*/

/** @license MIT License (c) copyright 2011-2013 original author or authors */

/**
 * A lightweight CommonJS Promises/A and when() implementation
 * when is part of the cujo.js family of libraries (http://cujojs.com/)
 *
 * Licensed under the MIT License at:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * @author Brian Cavalier
 * @author John Hann
 * @version 2.4.0
 */

function base64_encode(e){var t,i,n,o,s,r,a,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,h=0,u="",p=[];if(!e)return e;do t=e.charCodeAt(d++),i=e.charCodeAt(d++),n=e.charCodeAt(d++),l=t<<16|i<<8|n,o=63&l>>18,s=63&l>>12,r=63&l>>6,a=63&l,p[h++]=c.charAt(o)+c.charAt(s)+c.charAt(r)+c.charAt(a);while(d<e.length);u=p.join("");var f=e.length%3;return(f?u.slice(0,f-3):u)+"===".slice(f||3)}function base64_decode(e){var t,i,n,o,s,r,a,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,h=0,u="",p=[];if(!e)return e;e+="";do o=c.indexOf(e.charAt(d++)),s=c.indexOf(e.charAt(d++)),r=c.indexOf(e.charAt(d++)),a=c.indexOf(e.charAt(d++)),l=o<<18|s<<12|r<<6|a,t=255&l>>16,i=255&l>>8,n=255&l,p[h++]=64==r?String.fromCharCode(t):64==a?String.fromCharCode(t,i):String.fromCharCode(t,i,n);while(d<e.length);return u=p.join("")}var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var i;for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}}function eachReverse(e,t){if(e){var i;for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var i;for(i in e)if(hasProp(e,i)&&t(e[i],i))break}function mixin(e,t,i,n){return t&&eachProp(t,function(t,o){(i||!hasProp(e,o))&&(n&&"string"!=typeof t?(e[o]||(e[o]={}),mixin(e[o],t,i,n)):e[o]=t)}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,i,n){var o=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return o.requireType=e,o.requireModules=n,i&&(o.originalError=i),o}function newContext(e){function t(e){var t,i;for(t=0;e[t];t+=1)if(i=e[t],"."===i)e.splice(t,1),t-=1;else if(".."===i){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function i(e,i,n){var o,s,r,a,l,c,d,h,u,p,f,m=i&&i.split("/"),g=m,v=k.map,_=v&&v["*"];if(e&&"."===e.charAt(0)&&(i?(g=getOwn(k.pkgs,i)?m=[i]:m.slice(0,m.length-1),e=g.concat(e.split("/")),t(e),s=getOwn(k.pkgs,o=e[0]),e=e.join("/"),s&&e===o+"/"+s.main&&(e=o)):0===e.indexOf("./")&&(e=e.substring(2))),n&&v&&(m||_)){for(a=e.split("/"),l=a.length;l>0;l-=1){if(d=a.slice(0,l).join("/"),m)for(c=m.length;c>0;c-=1)if(r=getOwn(v,m.slice(0,c).join("/")),r&&(r=getOwn(r,d))){h=r,u=l;break}if(h)break;!p&&_&&getOwn(_,d)&&(p=getOwn(_,d),f=l)}!h&&p&&(h=p,u=f),h&&(a.splice(0,u,h),e=a.join("/"))}return e}function n(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===b.contextName?(t.parentNode.removeChild(t),!0):void 0})}function o(e){var t=getOwn(k.paths,e);return t&&isArray(t)&&t.length>1?(n(e),t.shift(),b.require.undef(e),b.require([e]),!0):void 0}function s(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function r(e,t,n,o){var r,a,l,c,d=null,h=t?t.name:null,u=e,p=!0,f="";return e||(p=!1,e="_@r"+(M+=1)),c=s(e),d=c[0],e=c[1],d&&(d=i(d,h,o),a=getOwn(D,d)),e&&(d?f=a&&a.normalize?a.normalize(e,function(e){return i(e,h,o)}):i(e,h,o):(f=i(e,h,o),c=s(f),d=c[0],f=c[1],n=!0,r=b.nameToUrl(f))),l=!d||a||n?"":"_unnormalized"+(A+=1),{prefix:d,name:f,parentMap:t,unnormalized:!!l,url:r,originalName:u,isDefine:p,id:(d?d+"!"+f:f)+l}}function a(e){var t=e.id,i=getOwn(C,t);return i||(i=C[t]=new b.Module(e)),i}function l(e,t,i){var n=e.id,o=getOwn(C,n);!hasProp(D,n)||o&&!o.defineEmitComplete?(o=a(e),o.error&&"error"===t?i(o.error):o.on(t,i)):"defined"===t&&i(D[n])}function c(e,t){var i=e.requireModules,n=!1;t?t(e):(each(i,function(t){var i=getOwn(C,t);i&&(i.error=e,i.events.error&&(n=!0,i.emit("error",e)))}),n||req.onError(e))}function d(){globalDefQueue.length&&(apsp.apply(S,[S.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function h(e){delete C[e],delete j[e]}function u(e,t,i){var n=e.map.id;e.error?e.emit("error",e.error):(t[n]=!0,each(e.depMaps,function(n,o){var s=n.id,r=getOwn(C,s);!r||e.depMatched[o]||i[s]||(getOwn(t,s)?(e.defineDep(o,D[s]),e.check()):u(r,t,i))}),i[n]=!0)}function p(){var e,t,i,s,r=1e3*k.waitSeconds,a=r&&b.startTime+r<(new Date).getTime(),l=[],d=[],h=!1,f=!0;if(!_){if(_=!0,eachProp(j,function(i){if(e=i.map,t=e.id,i.enabled&&(e.isDefine||d.push(i),!i.error))if(!i.inited&&a)o(t)?(s=!0,h=!0):(l.push(t),n(t));else if(!i.inited&&i.fetched&&e.isDefine&&(h=!0,!e.prefix))return f=!1}),a&&l.length)return i=makeError("timeout","Load timeout for modules: "+l,null,l),i.contextName=b.contextName,c(i);f&&each(d,function(e){u(e,{},{})}),a&&!s||!h||!isBrowser&&!isWebWorker||x||(x=setTimeout(function(){x=0,p()},50)),_=!1}}function f(e){hasProp(D,e[0])||a(r(e[0],null,!0)).init(e[1],e[2])}function m(e,t,i,n){e.detachEvent&&!isOpera?n&&e.detachEvent(n,t):e.removeEventListener(i,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return m(t,b.onScriptLoad,"load","onreadystatechange"),m(t,b.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(d();S.length;){if(e=S.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));f(e)}}var _,y,b,w,x,k={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},C={},j={},T={},S=[],D={},E={},M=1,A=1;return w={require:function(e){return e.require?e.require:e.require=b.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?e.exports:e.exports=D[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t,i=getOwn(k.pkgs,e.map.id);return t=i?getOwn(k.config,e.map.id+"/"+i.main):getOwn(k.config,e.map.id),t||{}},exports:D[e.map.id]}}},y=function(e){this.events=getOwn(T,e.id)||{},this.map=e,this.shim=getOwn(k.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,t,i,n){n=n||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=n.ignore,n.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,b.startTime=(new Date).getTime();var e=this.map;return this.shim?(b.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})),void 0):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;E[e]||(E[e]=!0,b.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id,n=this.depExports,o=this.exports,s=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(s)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{o=b.execCb(i,s,n,o)}catch(r){e=r}else o=b.execCb(i,s,n,o);if(this.map.isDefine&&(t=this.module,t&&void 0!==t.exports&&t.exports!==this.exports?o=t.exports:void 0===o&&this.usingExports&&(o=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else o=s;this.exports=o,this.map.isDefine&&!this.ignore&&(D[i]=o,req.onResourceLoad&&req.onResourceLoad(b,this.map,this.depMaps)),h(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,n=r(e.prefix);this.depMaps.push(n),l(n,"defined",bind(this,function(n){var o,s,d,u=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,f=b.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(n.normalize&&(u=n.normalize(u,function(e){return i(e,p,!0)})||""),s=r(e.prefix+"!"+u,this.map.parentMap),l(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),d=getOwn(C,s.id),d&&(this.depMaps.push(s),this.events.error&&d.on("error",bind(this,function(e){this.emit("error",e)})),d.enable()),void 0):(o=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),o.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(C,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&h(e.map.id)}),c(e)}),o.fromText=bind(this,function(i,n){var s=e.name,l=r(s),d=useInteractive;n&&(i=n),d&&(useInteractive=!1),a(l),hasProp(k.config,t)&&(k.config[s]=k.config[t]);try{req.exec(i)}catch(h){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+h,h,[t]))}d&&(useInteractive=!0),this.depMaps.push(l),b.completeLoad(s),f([s],o)}),n.load(e.name,f,o,k),void 0)})),b.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){j[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var i,n,o;if("string"==typeof e){if(e=r(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(w,e.id))return this.depExports[t]=o(this),void 0;this.depCount+=1,l(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&l(e,"error",bind(this,this.errback))}i=e.id,n=C[i],hasProp(w,i)||!n||n.enabled||b.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(C,e.id);t&&!t.enabled&&b.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},b={config:k,contextName:e,registry:C,defined:D,urlFetched:E,defQueue:S,Module:y,makeModuleMap:r,nextTick:req.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=k.pkgs,i=k.shim,n={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?"map"===t?(k.map||(k.map={}),mixin(k[t],e,!0,!0)):mixin(k[t],e,!0):k[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=b.makeShimExports(e)),i[t]=e}),k.shim=i),e.packages&&(each(e.packages,function(e){var i;e="string"==typeof e?{name:e}:e,i=e.location,t[e.name]={name:e.name,location:i||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),k.pkgs=t),eachProp(C,function(e,t){e.inited||e.map.unnormalized||(e.map=r(t))}),(e.deps||e.callback)&&b.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function o(i,s,l){var d,h,u;return n.enableBuildCallback&&s&&isFunction(s)&&(s.__requireJsBuild=!0),"string"==typeof i?isFunction(s)?c(makeError("requireargs","Invalid require call"),l):t&&hasProp(w,i)?w[i](C[t.id]):req.get?req.get(b,i,t,o):(h=r(i,t,!1,!0),d=h.id,hasProp(D,d)?D[d]:c(makeError("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),b.nextTick(function(){v(),u=a(r(null,t)),u.skipMap=n.skipMap,u.init(i,s,l,{enabled:!0}),p()}),o)}return n=n||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var n,o=e.lastIndexOf("."),s=e.split("/")[0],r="."===s||".."===s;return-1!==o&&(!r||o>1)&&(n=e.substring(o,e.length),e=e.substring(0,o)),b.nameToUrl(i(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(D,r(e,t,!1,!0).id)},specified:function(e){return e=r(e,t,!1,!0).id,hasProp(D,e)||hasProp(C,e)}}),t||(o.undef=function(e){d();var i=r(e,t,!0),n=getOwn(C,e);delete D[e],delete E[i.url],delete T[e],n&&(n.events.defined&&(T[e]=n.events),h(e))}),o},enable:function(e){var t=getOwn(C,e.id);t&&a(e).enable()},completeLoad:function(e){var t,i,n,s=getOwn(k.shim,e)||{},r=s.exports;for(d();S.length;){if(i=S.shift(),null===i[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);f(i)}if(n=getOwn(C,e),!t&&!hasProp(D,e)&&n&&!n.inited){if(!(!k.enforceDefine||r&&getGlobal(r)))return o(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));f([e,s.deps||[],s.exportsFn])}p()},nameToUrl:function(e,t,i){var n,o,s,r,a,l,c,d,h;if(req.jsExtRegExp.test(e))d=e+(t||"");else{for(n=k.paths,o=k.pkgs,a=e.split("/"),l=a.length;l>0;l-=1){if(c=a.slice(0,l).join("/"),s=getOwn(o,c),h=getOwn(n,c)){isArray(h)&&(h=h[0]),a.splice(0,l,h);break}if(s){r=e===s.name?s.location+"/"+s.main:s.location,a.splice(0,l,r);break}}d=a.join("/"),d+=t||(/\?/.test(d)||i?"":".js"),d=("/"===d.charAt(0)||d.match(/^[\w\+\.\-]+:/)?"":k.baseUrl)+d}return k.urlArgs?d+((-1===d.indexOf("?")?"?":"&")+k.urlArgs):d},load:function(e,t){req.load(b,e,t)},execCb:function(e,t,i,n){return t.apply(n,i)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);b.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);return o(t.id)?void 0:c(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},b.require=b.makeRequire(),b}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.8",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||!navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,i,n){var o,s,r=defContextName;return isArray(e)||"string"==typeof e||(s=e,isArray(t)?(e=t,t=i,i=n):e=[]),s&&s.context&&(r=s.context),o=getOwn(contexts,r),o||(o=contexts[r]=req.s.newContext(r)),s&&o.configure(s),o.require(e,t,i)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},req.load=function(e,t,i){var n,o=e&&e.config||{};if(isBrowser)return n=req.createNode(o,t,i),n.setAttribute("data-requirecontext",e.contextName),n.setAttribute("data-requiremodule",t),!n.attachEvent||n.attachEvent.toString&&n.attachEvent.toString().indexOf("[native code")<0||isOpera?(n.addEventListener("load",e.onScriptLoad,!1),n.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,n.attachEvent("onreadystatechange",e.onScriptLoad)),n.src=i,currentlyAddingScript=n,baseElement?head.insertBefore(n,baseElement):head.appendChild(n),currentlyAddingScript=null,n;if(isWebWorker)try{importScripts(i),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+i,s,[t]))}},isBrowser&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,i){var n,o;"string"!=typeof e&&(i=t,t=e,e=null),isArray(t)||(i=t,t=null),!t&&isFunction(i)&&(t=[],i.length&&(i.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,i){t.push(i)}),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(n=currentlyAddingScript||getInteractiveScript(),n&&(e||(e=n.getAttribute("data-requiremodule")),o=contexts[n.getAttribute("data-requirecontext")])),(o?o.defQueue:globalDefQueue).push([e,t,i])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("require-lib",function(){}),require({waitSeconds:0,paths:{"orosecurity/js/security-access-levels":"orosecurity/js/security-access-levels","orosecurity/js/init-organization-selector":"orosecurity/js/init-organization-selector",text:"oroui/lib/text",json:"oroui/lib/json2",base64:"oroui/lib/base64",jquery:"oroui/lib/jquery-2.0.2","jquery-ui":"oroui/lib/jquery-ui-1.10.4","jquery-ui-timepicker":"oroui/lib/jquery-ui-timepicker-addon","jquery-outer-html":"oroui/lib/outerHTML-2.1.0-min","jquery.mousewheel":"oroui/lib/jquery/jquery.mousewheel.min","jquery.numeric":"oroui/lib/jquery/jquery.numeric","jquery.uniform":"oroui/lib/jquery/jquery.uniform.min","jquery.select2":"oroui/lib/jquery/select2","jquery.jstree":"oroui/lib/jstree/jquery.jstree","jquery.ajax.queue":"oroui/lib/jquery/jquery.ajaxQueue.min","jstree/jquery.cookie":"oroui/lib/jstree/jquery.cookie","jstree/jquery.hotkeys":"oroui/lib/jstree/jquery.hotkeys",bootstrap:"oroui/lib/bootstrap.min",underscore:"oroui/lib/underscore",backbone:"oroui/lib/backbone",chaplin:"oroui/lib/chaplin-1.0.0","backbone-bootstrap-modal":"oroui/lib/backbone.bootstrap-modal","controllers/page-controller":"oroui/js/app/controllers/page-controller","oroui/js/app/modules/layout":"oroui/js/app/modules/layout","oroui/js/app/modules/views":"oroui/js/app/modules/views","oroui/js/app/modules/messenger":"oroui/js/app/modules/messenger","oroui/js/app/application":"oroui/js/app/application","oroui/js/app/routes":"oroui/js/app/routes","oroui/js/app/models/base/collection":"oroui/js/app/models/base/collection","oroui/js/app/views/page/breadcrumb-view":"oroui/js/app/views/page/breadcrumb-view","oroui/js/app/views/page/content-view":"oroui/js/app/views/page/content-view","oroui/js/app/views/page/main-menu-view":"oroui/js/app/views/page/main-menu-view","oroui/js/app/views/page/user-menu-view":"oroui/js/app/views/page/user-menu-view","oroui/js/app/views/page/loading-mask-view":"oroui/js/app/views/page/loading-mask-view","oroui/js/app/views/page/messages-view":"oroui/js/app/views/page/messages-view","oroui/js/app/views/page/debug-toolbar-view":"oroui/js/app/views/page/debug-toolbar-view","oroui/js/delete-confirmation":"oroui/js/delete-confirmation","oroui/js/error":"oroui/js/error","oroui/js/init-layout":"oroui/js/init-layout","oroui/js/jquery-ui-datepicker-l10n":"oroui/js/jquery-ui-datepicker-l10n","oroui/js/jquery-ui-timepicker-l10n":"oroui/js/jquery-ui-timepicker-l10n","oroui/js/layout":"oroui/js/layout","oroui/js/loading-mask":"oroui/js/loading-mask","oroui/js/mediator":"oroui/js/mediator","oroui/js/messenger":"oroui/js/messenger","oroui/js/modal":"oroui/js/modal","oroui/js/scrollspy":"oroui/js/scrollspy","oroui/js/widget-control-initializer":"oroui/js/widget-control-initializer","oroui/js/widget-manager":"oroui/js/widget-manager","oroui/js/widget/abstract":"oroui/js/widget/abstract","oro/block-widget":"oroui/js/widget/block","oro/page-widget":"oroui/js/widget/page","oro/buttons-widget":"oroui/js/widget/buttons","oroui/js/mobile/layout":"oroui/js/mobile/layout","oroui/js/mobile/page-header":"oroui/js/mobile/page-header","oroui/js/mobile/side-menu":"oroui/js/mobile/side-menu","oroui/js/desktop/side-menu":"oroui/js/desktop/side-menu","oroui/js/items-manager/table":"oroui/js/items-manager/table","oroui/js/items-manager/editor":"oroui/js/items-manager/editor","oroui/js/content-processor/pinned-dropdown-button":"oroui/js/content-processor/pinned-dropdown-button",autolinker:"oroui/lib/autolinker.min","oro/datagrid/action/dialog-action":"oroattachment/js/datagrid/action/dialog-action","oroentity/js/fields-loader":"oroentity/js/fields-loader","oroentity/js/field-choice":"oroentity/js/field-choice","oroentity/js/entity-field-choice-util":"oroentity/js/entity-field-choice-util","oroentity/js/entity-field-select-util":"oroentity/js/entity-field-select-util","oroentity/js/entity-field-view":"oroentity/js/entity-field-view","oroemail/js/email/template/collection":"oroemail/js/email/template/collection","oroemail/js/email/template/model":"oroemail/js/email/template/model","oroemail/js/email/template/view":"oroemail/js/email/template/view","oroemail/js/email/variable/model":"oroemail/js/email/variable/model","oroemail/js/email/variable/view":"oroemail/js/email/variable/view","orouser/js/init-user":"orouser/js/init-user","orointegration/js/channel-view":"orointegration/js/channel-view","oro/datagrid/action/schedule-sync-action":"orointegration/js/datagrid/action/schedule-sync-action","oroaddress/js/address-book":"oroaddress/js/address-book","oroaddress/js/address/collection":"oroaddress/js/address/collection","oroaddress/js/address/model":"oroaddress/js/address/model","oroaddress/js/address/view":"oroaddress/js/address/view","oroaddress/js/mapservice/googlemaps":"oroaddress/js/mapservice/googlemaps","oroaddress/js/region/collection":"oroaddress/js/region/collection","oroaddress/js/region/model":"oroaddress/js/region/model","oroaddress/js/region/view":"oroaddress/js/region/view","oroaddress/js/country/select2_handler":"oroaddress/js/country/select2-handler","jquery.fullcalendar":"orocalendar/lib/fullcalendar/fullcalendar","orocalendar/js/calendar":"orocalendar/js/calendar","orocalendar/js/calendar/connection/collection":"orocalendar/js/calendar/connection/collection","orocalendar/js/calendar/connection/model":"orocalendar/js/calendar/connection/model","orocalendar/js/calendar/connection/view":"orocalendar/js/calendar/connection/view","orocalendar/js/calendar/event/collection":"orocalendar/js/calendar/event/collection","orocalendar/js/calendar/event/model":"orocalendar/js/calendar/event/model","orocalendar/js/calendar/event/view":"orocalendar/js/calendar/event/view","orocalendar/js/form-validation":"orocalendar/js/form-validation","orocalendar/js/calendar/color-manager":"orocalendar/js/calendar/color-manager",flotr2:"orochart/lib/flotr2/flotr2.amd",bean:"orochart/lib/flotr2/bean","orochart/js/chart_form":"orochart/js/chart_form","orochart/js/data_formatter":"orochart/js/data_formatter","orochart/js/flotr2/funnel":"orochart/js/flotr2/funnel","orochart/js/app/components/base-chart-component":"orochart/js/app/components/base-chart-component","orochart/js/app/components/bar-chart-component":"orochart/js/app/components/bar-chart-component","orochart/js/app/components/flow-chart-component":"orochart/js/app/components/flow-chart-component","orochart/js/app/components/pie-chart-component":"orochart/js/app/components/pie-chart-component","orochart/js/app/components/line-chart-component":"orochart/js/app/components/line-chart-component","orochart/js/app/components/multiline-chart-component":"orochart/js/app/components/multiline-chart-component","oroconfig/js/form/state":"oroconfig/js/form/state","oroconfig/js/form/default":"oroconfig/js/form/default","orocron/js/init-job":"orocron/js/init-job","orodashboard/js/widget/dashboard-item":"orodashboard/js/widget/dashboard-item","orodashboard/js/dashboard-container":"orodashboard/js/dashboard-container","orodashboard/js/widget-picker":"orodashboard/js/widget-picker","backbone-pageable-collection":"orodatagrid/lib/backbone-pageable",backgrid:"orodatagrid/lib/backgrid/backgrid","orodatagrid/js/datagrid/action-launcher":"orodatagrid/js/datagrid/action-launcher","oro/datagrid/action/abstract-action":"orodatagrid/js/datagrid/action/abstract-action","oro/datagrid/action/delete-action":"orodatagrid/js/datagrid/action/delete-action","oro/datagrid/action/ajax-action":"orodatagrid/js/datagrid/action/ajax-action","oro/datagrid/action/ajaxdelete-action":"orodatagrid/js/datagrid/action/ajaxdelete-action","oro/datagrid/action/mass-action":"orodatagrid/js/datagrid/action/mass-action","oro/datagrid/action/delete-mass-action":"orodatagrid/js/datagrid/action/delete-mass-action","oro/datagrid/action/model-action":"orodatagrid/js/datagrid/action/model-action","oro/datagrid/action/navigate-action":"orodatagrid/js/datagrid/action/navigate-action","oro/datagrid/action/refresh-collection-action":"orodatagrid/js/datagrid/action/refresh-collection-action","oro/datagrid/action/reset-collection-action":"orodatagrid/js/datagrid/action/reset-collection-action","oro/datagrid/action/export-action":"orodatagrid/js/datagrid/action/export-action","orodatagrid/js/datagrid/actions-panel":"orodatagrid/js/datagrid/actions-panel","orodatagrid/js/datagrid/column/action-column":"orodatagrid/js/datagrid/column/action-column","orodatagrid/js/datagrid/body":"orodatagrid/js/datagrid/body","oro/datagrid/cell/action-cell":"orodatagrid/js/datagrid/cell/action-cell","oro/datagrid/cell/boolean-cell":"orodatagrid/js/datagrid/cell/boolean-cell","oro/datagrid/cell/html-cell":"orodatagrid/js/datagrid/cell/html-cell","oro/datagrid/cell/date-cell":"orodatagrid/js/datagrid/cell/date-cell","oro/datagrid/cell/datetime-cell":"orodatagrid/js/datagrid/cell/datetime-cell","oro/datagrid/cell/number-cell":"orodatagrid/js/datagrid/cell/number-cell","oro/datagrid/cell/select-cell":"orodatagrid/js/datagrid/cell/select-cell","oro/datagrid/cell/select-row-cell":"orodatagrid/js/datagrid/cell/select-row-cell","oro/datagrid/cell/string-cell":"orodatagrid/js/datagrid/cell/string-cell","oro/datagrid/cell/phone-cell":"orodatagrid/js/datagrid/cell/phone-cell","orodatagrid/js/datagrid/formatter/cell-formatter":"orodatagrid/js/datagrid/formatter/cell-formatter","orodatagrid/js/datagrid/formatter/datetime-formatter":"orodatagrid/js/datagrid/formatter/datetime-formatter","orodatagrid/js/datagrid/formatter/number-formatter":"orodatagrid/js/datagrid/formatter/number-formatter","orodatagrid/js/datagrid/grid":"orodatagrid/js/datagrid/grid","orodatagrid/js/datagrid/header-cell/header-cell":"orodatagrid/js/datagrid/header-cell/header-cell","orodatagrid/js/datagrid/header-cell/select-all-header-cell":"orodatagrid/js/datagrid/header-cell/select-all-header-cell","orodatagrid/js/datagrid/header":"orodatagrid/js/datagrid/header","orodatagrid/js/grid-views-builder":"orodatagrid/js/grid-views-builder","orodatagrid/js/totals-builder":"orodatagrid/js/totals-builder","orodatagrid/js/datagrid/footer":"orodatagrid/js/datagrid/footer","orodatagrid/js/datagrid/footer/footer-row":"orodatagrid/js/datagrid/footer/footer-row","orodatagrid/js/datagrid/footer/footer-cell":"orodatagrid/js/datagrid/footer/footer-cell","orodatagrid/js/datagrid/listener/abstract-listener":"orodatagrid/js/datagrid/listener/abstract-listener","orodatagrid/js/datagrid/listener/column-form-listener":"orodatagrid/js/datagrid/listener/column-form-listener","orodatagrid/js/datagrid/listener/callback-listener":"orodatagrid/js/datagrid/listener/callback-listener","orodatagrid/js/datagrid/page-size":"orodatagrid/js/datagrid/page-size","orodatagrid/js/datagrid/grid-views/view":"orodatagrid/js/datagrid/grid-views/view","orodatagrid/js/datagrid/grid-views/model":"orodatagrid/js/datagrid/grid-views/model","orodatagrid/js/datagrid/grid-views/collection":"orodatagrid/js/datagrid/grid-views/collection","orodatagrid/js/datagrid/pagination-input":"orodatagrid/js/datagrid/pagination-input","orodatagrid/js/datagrid/pagination":"orodatagrid/js/datagrid/pagination","orodatagrid/js/datagrid/row":"orodatagrid/js/datagrid/row","orodatagrid/js/datagrid/toolbar":"orodatagrid/js/datagrid/toolbar","orodatagrid/js/pageable-collection":"orodatagrid/js/pageable-collection","orodatagrid/js/app/components/datagrid-component":"orodatagrid/js/app/components/datagrid-component","oroembeddedform/js/embedded-form-watcher":"oroembeddedform/js/embedded-form-watcher","oroentityextend/js/init-entity-extend-apply":"oroentityextend/js/init-entity-extend-apply","oroentityextend/js/init-entity-extend-relation":"oroentityextend/js/init-entity-extend-relation","oro/datagrid/action/merge-mass-action":"oroentitymerge/js/datagrid/action/merge-mass-action","oroentitymerge/js/merge-view":"oroentitymerge/js/merge-view","jquery.multiselect":"orofilter/lib/multiselect/jquery.multiselect","jquery.multiselect.filter":"orofilter/lib/multiselect/jquery.multiselect.filter","oro/filter/abstract-filter":"orofilter/js/filter/abstract-filter","oro/filter/choice-filter":"orofilter/js/filter/choice-filter","oro/filter/date-filter":"orofilter/js/filter/date-filter","oro/filter/datetime-filter":"orofilter/js/filter/datetime-filter","oro/filter/empty-filter":"orofilter/js/filter/empty-filter","oro/filter/multiselect-filter":"orofilter/js/filter/multiselect-filter","oro/filter/none-filter":"orofilter/js/filter/none-filter","oro/filter/number-filter":"orofilter/js/filter/number-filter","oro/filter/select-filter":"orofilter/js/filter/select-filter","oro/filter/select-row-filter":"orofilter/js/filter/select-row-filter","oro/filter/text-filter":"orofilter/js/filter/text-filter","orofilter/js/formatter/abstract-formatter":"orofilter/js/formatter/abstract-formatter","orofilter/js/formatter/number-formatter":"orofilter/js/formatter/number-formatter","orofilter/js/filters-manager":"orofilter/js/filters-manager","orofilter/js/collection-filters-manager":"orofilter/js/collection-filters-manager","orofilter/js/datafilter-builder":"orofilter/js/datafilter-builder","orofilter/js/datafilter-wrapper":"orofilter/js/datafilter-wrapper","orofilter/js/multiselect-decorator":"orofilter/js/multiselect-decorator","jquery.validate":"oroform/lib/jquery.validate/jquery.validate","oroform/js/validator/count":"oroform/js/validator/count","oroform/js/validator/date":"oroform/js/validator/date","oroform/js/validator/datetime":"oroform/js/validator/datetime","oroform/js/validator/email":"oroform/js/validator/email","oroform/js/validator/length":"oroform/js/validator/length","oroform/js/validator/notblank":"oroform/js/validator/notblank","oroform/js/validator/notnull":"oroform/js/validator/notnull","oroform/js/validator/number":"oroform/js/validator/number","oroform/js/validator/range":"oroform/js/validator/range","oroform/js/validator/regex":"oroform/js/validator/regex","oroform/js/validator/repeated":"oroform/js/validator/repeated","oroform/js/validator/url":"oroform/js/validator/url","oroform/js/select2-config":"oroform/js/select2-config","oroform/js/multiple-entity":"oroform/js/multiple-entity","oroform/js/multiple-entity/view":"oroform/js/multiple-entity/view","oroform/js/multiple-entity/model":"oroform/js/multiple-entity/model","oroform/js/multiple-entity/collection":"oroform/js/multiple-entity/collection","oroform/js/select2_relevancy_order_handler":"oroform/js/select2-relevancy-order-handler","oroform/js/create-select-type-handler":"oroform/js/create-select-type-handler","oroform/js/select-create-inline-type-handler":"oroform/js/select-create-inline-type-handler","oroform/js/optional-validation-handler":"oroform/js/optional-validation-handler","oroimportexport/js/export-handler":"oroimportexport/js/export-handler",moment:"orolocale/lib/moment",numeral:"orolocale/lib/numeral","orolocale/js/locale-settings":"orolocale/js/locale-settings","orolocale/js/locale-settings/data":"../js/oro.locale_data","orolocale/js/formatter/name":"orolocale/js/formatter/name","orolocale/js/formatter/address":"orolocale/js/formatter/address","orolocale/js/formatter/number":"orolocale/js/formatter/number","orolocale/js/formatter/datetime":"orolocale/js/formatter/datetime","orolocale/js/moment-l10n":"orolocale/js/moment-l10n","oronote/js/app/components/notes-component":"oronote/js/app/components/notes-component","oroquerydesigner/js/condition-builder":"oroquerydesigner/js/condition-builder","oroquerydesigner/js/field-condition":"oroquerydesigner/js/field-condition","oroquerydesigner/js/function-choice":"oroquerydesigner/js/function-choice","oroquerydesigner/js/items-manager/grouping-model":"oroquerydesigner/js/items-manager/grouping-model","oroquerydesigner/js/items-manager/column-model":"oroquerydesigner/js/items-manager/column-model","oroquerydesigner/js/app/components/column-form":"oroquerydesigner/js/app/components/column-form","oroquerydesigner/js/app/components/condition-builder":"oroquerydesigner/js/app/components/condition-builder","oroquerydesigner/js/enum-filter-initialized":"oroquerydesigner/js/enum-filter-initialized","ororeport/js/chart-options":"ororeport/js/chart-options","orosearch/js/init-search-bar":"orosearch/js/init-search-bar","orosegment/js/app/components/refresh-button":"orosegment/js/app/components/refresh-button","orosegment/js/app/components/segment-component":"orosegment/js/app/components/segment-component","orosidebar/js/constants":"orosidebar/js/constants","orosidebar/js/model":"orosidebar/js/model","orosidebar/js/templates/template.html":"orosidebar/js/templates/template.html","orosidebar/js/view":"orosidebar/js/view","orosidebar/js/widget-container/model":"orosidebar/js/widget-container/model","orosidebar/js/widget-container/collection":"orosidebar/js/widget-container/collection","orosidebar/js/widget-container/templates/icon-template.html":"orosidebar/js/widget-container/templates/icon-template.html","orosidebar/js/widget-container/templates/widget-min-template.html":"orosidebar/js/widget-container/templates/widget-min-template.html","orosidebar/js/widget-container/templates/widget-max-template.html":"orosidebar/js/widget-container/templates/widget-max-template.html","orosidebar/js/widget-container/templates/widget-add-template.html":"orosidebar/js/widget-container/templates/widget-add-template.html","orosidebar/js/widget-container/view":"orosidebar/js/widget-container/view","orosidebar/js/widget-container/icon-view":"orosidebar/js/widget-container/icon-view","orosidebar/js/widget-container/widget-add-view":"orosidebar/js/widget-container/widget-add-view","orosidebar/js/widget-container/widget-setup-view":"orosidebar/js/widget-container/widget-setup-view","orosidebar/widget/sticky-note":"orosidebar/sidebar_widgets/sticky_note/js/widget","cryptojs/core":"orosync/lib/cryptojs/core-min","cryptojs/enc-base64":"orosync/lib/cryptojs/enc-base64-min","cryptojs/hmac":"orosync/lib/cryptojs/hmac-min","cryptojs/sha256":"orosync/lib/cryptojs/sha256-min","cryptojs/pbkdf2":"orosync/lib/cryptojs/pbkdf2-min",when:"orosync/lib/when",autobahn:"orosync/lib/autobahn","orosync/js/sync":"orosync/js/sync","orosync/js/sync/wamp":"orosync/js/sync/wamp","orotag/js/collection":"orotag/js/collection","orotag/js/model":"orotag/js/model","orotag/js/update-view":"orotag/js/update-view","orotag/js/view":"orotag/js/view",translator:"orotranslation/lib/translator","orotranslation/js/translator":"orotranslation/js/translator","orotranslation/js/translation/config-action":"orotranslation/js/translation/config-action","jquery.dialog.extended":"orowindows/lib/jquery.dialog.extended","oro/dialog-widget":"orowindows/js/widget/dialog","orowindows/js/dialog/state/collection":"orowindows/js/dialog/state/collection","orowindows/js/dialog/state/model":"orowindows/js/dialog/state/model","oroworkflow/js/transition-handler":"oroworkflow/js/transition-handler","oroworkflow/js/save-and-transit-handler":"oroworkflow/js/save-and-transit-handler","oroworkflow/js/transition-executor":"oroworkflow/js/transition-executor","oroworkflow/js/reset-handler":"oroworkflow/js/reset-handler","oroworkflow/js/activation-handler":"oroworkflow/js/activation-handler","oroworkflow/js/workflow-management":"oroworkflow/js/workflow-management/workflow-management","oroworkflow/js/workflow-management/helper":"oroworkflow/js/workflow-management/helper","oroworkflow/js/workflow-management/workflow/model":"oroworkflow/js/workflow-management/workflow/model","oroworkflow/js/workflow-management/attribute/model":"oroworkflow/js/workflow-management/attribute/model","oroworkflow/js/workflow-management/attribute/collection":"oroworkflow/js/workflow-management/attribute/collection","oroworkflow/js/workflow-management/attribute/form-option-view/list":"oroworkflow/js/workflow-management/attribute/form-option-view/list","oroworkflow/js/workflow-management/attribute/form-option-view/row":"oroworkflow/js/workflow-management/attribute/form-option-view/row","oroworkflow/js/workflow-management/attribute/form-option-view/edit":"oroworkflow/js/workflow-management/attribute/form-option-view/edit","oroworkflow/js/workflow-management/step/model":"oroworkflow/js/workflow-management/step/model","oroworkflow/js/workflow-management/step/collection":"oroworkflow/js/workflow-management/step/collection","oroworkflow/js/workflow-management/step/view/list":"oroworkflow/js/workflow-management/step/view/list","oroworkflow/js/workflow-management/step/view/row":"oroworkflow/js/workflow-management/step/view/row","oroworkflow/js/workflow-management/step/view/edit":"oroworkflow/js/workflow-management/step/view/edit","oroworkflow/js/workflow-management/transition/model":"oroworkflow/js/workflow-management/transition/model","oroworkflow/js/workflow-management/transition/collection":"oroworkflow/js/workflow-management/transition/collection","oroworkflow/js/workflow-management/transition/view/list":"oroworkflow/js/workflow-management/transition/view/list","oroworkflow/js/workflow-management/transition/view/row":"oroworkflow/js/workflow-management/transition/view/row","oroworkflow/js/workflow-management/transition/view/list-short":"oroworkflow/js/workflow-management/transition/view/list-short","oroworkflow/js/workflow-management/transition/view/row-short":"oroworkflow/js/workflow-management/transition/view/row-short","oroworkflow/js/workflow-management/transition/view/edit":"oroworkflow/js/workflow-management/transition/view/edit","oroworkflow/js/workflow-management/transition-definition/model":"oroworkflow/js/workflow-management/transition-definition/model","oroworkflow/js/workflow-management/transition-definition/collection":"oroworkflow/js/workflow-management/transition-definition/collection","oro/datagrid/action/workflow-activate-action":"oroworkflow/js/datagrid/action/workflow-activate-action",routing:"fosjsrouting/js/router","jquery.form":"oronavigation/lib/jquery.form",url:"oronavigation/lib/url.min","oronavigation/js/content/grid-builder":"oronavigation/js/content/grid-builder","oronavigation/js/shortcuts/view":"oronavigation/js/shortcuts/view","oronavigation/js/app/components/favorite-component":"oronavigation/js/app/components/favorite-component","oronavigation/js/app/components/pin-component":"oronavigation/js/app/components/pin-component","oronavigation/js/app/modules/views":"oronavigation/js/app/modules/views","oronavigation/js/app/modules/content-manager":"oronavigation/js/app/modules/content-manager","oronavigation/js/app/models/base/collection":"oronavigation/js/app/models/base/collection","oronavigation/js/app/models/base/model":"oronavigation/js/app/models/base/model","oronavigation/js/app/models/page-state-model":"oronavigation/js/app/models/page-state-model","oronavigation/js/app/views/page-state-view":"oronavigation/js/app/views/page-state-view","oronavigation/js/app/views/history-view":"oronavigation/js/app/views/history-view","oronavigation/js/app/views/most-viewed-view":"oronavigation/js/app/views/most-viewed-view","orocrm/contactphone/collection":"orocrmcontact/js/contactphone/collection","orocrm/contactphone/model":"orocrmcontact/js/contactphone/model","orocrm/contactphone/view":"orocrmcontact/js/contactphone/view","orocrm/contact/widgets/account-contacts-widget":"orocrmcontact/js/widgets/account-contacts-widget","orocrmmarketinglist/js/app/components/grid-linker":"orocrmmarketinglist/js/app/components/grid-linker","orocrmmarketinglist/js/app/components/columns-component":"orocrmmarketinglist/js/app/components/columns-component","ororeminder/js/reminder-handler":"ororeminder/js/reminder-handler","orocrmcampaign/js/app/components/email-campaign-form":"orocrmcampaign/js/app/components/email-campaign-form","orocrmchannel/js/app/components/integration-widget":"orocrmchannel/js/app/components/integration-widget","orocrmchannel/js/app/components/channel":"orocrmchannel/js/app/components/channel","orocrmchannel/js/entity-management/entity-component-view":"orocrmchannel/js/entity-management/entity-component-view","orocrmchannel/js/entity-management/model":"orocrmchannel/js/entity-management/model","orocrm/sidebar/widget/assigned_tasks":"orocrmtask/sidebar_widgets/assigned_tasks/js/widget","orocrm/magento/soap-checker":"orocrmmagento/js/soap-checker"},shim:{"jquery-ui":{deps:["jquery"]},"jquery-ui-timepicker":{deps:["jquery-ui"]},"jquery.mousewheel":{deps:["jquery"]},"jquery.numeric":{deps:["jquery"]},"jquery.uniform":{deps:["jquery"]},"jquery.select2":{deps:["jquery"]},"jquery.jstree":{deps:["jquery"]},"jstree/jquery.cookie":{deps:["jquery.jstree"]},"jstree/jquery.hotkeys":{deps:["jquery.jstree"]},bootstrap:{deps:["jquery"]},underscore:{exports:"_"},"backbone-bootstrap-modal":{deps:["jquery","underscore","backbone"]},"jquery.ajax.queue":{deps:["jquery"]},flotr2:{deps:["jquery"]},backgrid:{deps:["jquery","underscore","backbone"],exports:"Backgrid"},"backgrid/moment":{deps:["jquery","underscore","backbone","backgrid","moment"]},moment:{exports:["moment","moment"]},"jquery.multiselect":{deps:["jquery-ui"]},"jquery.multiselect.filter":{deps:["jquery.multiselect"]},"jquery.validate":{deps:["jquery"]},numeral:{exports:["numeral"]},"orolocale/js/formatter/number":{deps:["numeral","orolocale/js/locale-settings"]},"cryptojs/enc-base64":{deps:["cryptojs/core"]},"cryptojs/hmac":{deps:["cryptojs/core"]},"cryptojs/sha256":{deps:["cryptojs/core"]},"cryptojs/pbkdf2":{deps:["cryptojs/core"]},autobahn:{deps:["when","cryptojs/core","cryptojs/enc-base64","cryptojs/hmac","cryptojs/sha256","cryptojs/pbkdf2"],exports:"ab"},translator:{exports:"Translator"},"jquery.dialog.extended":{deps:["jquery-ui"]},routing:{exports:"window.Routing"},"jquery.form":{deps:["jquery"]},url:{exports:"Url"}},map:{"*":{jquery:"oroui/js/extend/jquery","jquery.select2":"oroui/js/extend/select2",chaplin:"oroui/js/extend/chaplin",backbone:"oroui/js/extend/backbone",bootstrap:"oroui/js/extend/bootstrap","jquery-ui":"oroui/js/jquery-ui-datepicker-l10n","jquery-ui-timepicker":"oroui/js/jquery-ui-timepicker-l10n","oro/dashboard-item-widget":"orodashboard/js/widget/dashboard-item","jquery.multiselect":"orofilter/js/extend/multiselect","jquery.multiselect.filter":"orofilter/js/extend/multiselect-filter","jquery.validate":"oroform/js/extend/validate",moment:"orolocale/js/moment-l10n"},"oroui/js/extend/jquery":{jquery:"jquery"},"oroui/js/extend/select2":{"jquery.select2":"jquery.select2"},"oroui/js/extend/jquery-ui":{"jquery-ui":"jquery-ui"},"oroui/js/extend/chaplin":{chaplin:"chaplin"},"oroui/js/extend/backbone":{backbone:"backbone"},"oroui/js/extend/bootstrap":{bootstrap:"bootstrap"},"oroui/js/jquery-ui-datepicker-l10n":{"jquery-ui":"oroui/js/extend/jquery-ui"},"oroui/js/jquery-ui-timepicker-l10n":{"jquery-ui-timepicker":"jquery-ui-timepicker"},"orofilter/js/extend/multiselect":{"jquery.multiselect":"jquery.multiselect"},"orofilter/js/extend/multiselect-filter":{"jquery.multiselect.filter":"jquery.multiselect.filter"},"oroform/js/extend/validate":{"jquery.validate":"jquery.validate"},"orolocale/js/moment-l10n":{moment:"moment"},autobahn:{when:"orosync/js/extend/when"}},appmodules:["oroui/js/app/modules/layout","oroui/js/app/modules/views","oroui/js/app/modules/messenger","oronavigation/js/app/modules/views","oronavigation/js/app/modules/content-manager"]}),define("require-config",function(){}),function(e,t){function i(e){var t=e.length,i=st.type(e);
return st.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||"function"!==i&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function n(e){var t=ft[e]={};return st.each(e.match(at)||[],function(e,i){t[i]=!0}),t}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=st.expando+Math.random()}function s(e,i,n){var o;if(n===t&&1===e.nodeType)if(o="data-"+i.replace(_t,"-$1").toLowerCase(),n=e.getAttribute(o),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:vt.test(n)?JSON.parse(n):n}catch(s){}mt.set(e,i,n)}else n=t;return n}function r(){return!0}function a(){return!1}function l(){try{return V.activeElement}catch(e){}}function c(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function d(e,t,i){if(st.isFunction(t))return st.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return st.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(Dt.test(t))return st.filter(t,e,i);t=st.filter(t,e)}return st.grep(e,function(e){return tt.call(t,e)>=0!==i})}function h(e,t){return st.nodeName(e,"table")&&st.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function u(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function p(e){var t=$t.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function f(e,t){for(var i=e.length,n=0;i>n;n++)gt.set(e[n],"globalEval",!t||gt.get(t[n],"globalEval"))}function m(e,t){var i,n,o,s,r,a,l,c;if(1===t.nodeType){if(gt.hasData(e)&&(s=gt.access(e),r=gt.set(t,s),c=s.events)){delete r.handle,r.events={};for(o in c)for(i=0,n=c[o].length;n>i;i++)st.event.add(t,o,c[o][i])}mt.hasData(e)&&(a=mt.access(e),l=st.extend({},a),mt.set(t,l))}}function g(e,i){var n=e.getElementsByTagName?e.getElementsByTagName(i||"*"):e.querySelectorAll?e.querySelectorAll(i||"*"):[];return i===t||i&&st.nodeName(e,i)?st.merge([e],n):n}function v(e,t){var i=t.nodeName.toLowerCase();"input"===i&&zt.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}function _(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,o=Qt.length;o--;)if(t=Qt[o]+i,t in e)return t;return n}function y(e,t){return e=t||e,"none"===st.css(e,"display")||!st.contains(e.ownerDocument,e)}function b(t){return e.getComputedStyle(t,null)}function w(e,t){for(var i,n,o,s=[],r=0,a=e.length;a>r;r++)n=e[r],n.style&&(s[r]=gt.get(n,"olddisplay"),i=n.style.display,t?(s[r]||"none"!==i||(n.style.display=""),""===n.style.display&&y(n)&&(s[r]=gt.access(n,"olddisplay",j(n.nodeName)))):s[r]||(o=y(n),(i&&"none"!==i||!o)&&gt.set(n,"olddisplay",o?i:st.css(n,"display"))));for(r=0;a>r;r++)n=e[r],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?s[r]||"":"none"));return e}function x(e,t,i){var n=Ut.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function k(e,t,i,n,o){for(var s=i===(n?"border":"content")?4:"width"===t?1:0,r=0;4>s;s+=2)"margin"===i&&(r+=st.css(e,i+Zt[s],!0,o)),n?("content"===i&&(r-=st.css(e,"padding"+Zt[s],!0,o)),"margin"!==i&&(r-=st.css(e,"border"+Zt[s]+"Width",!0,o))):(r+=st.css(e,"padding"+Zt[s],!0,o),"padding"!==i&&(r+=st.css(e,"border"+Zt[s]+"Width",!0,o)));return r}function C(e,t,i){var n=!0,o="width"===t?e.offsetWidth:e.offsetHeight,s=b(e),r=st.support.boxSizing&&"border-box"===st.css(e,"boxSizing",!1,s);if(0>=o||null==o){if(o=qt(e,t,s),(0>o||null==o)&&(o=e.style[t]),Yt.test(o))return o;n=r&&(st.support.boxSizingReliable||o===e.style[t]),o=parseFloat(o)||0}return o+k(e,t,i||(r?"border":"content"),n,s)+"px"}function j(e){var t=V,i=Kt[e];return i||(i=T(e,t),"none"!==i&&i||(Wt=(Wt||st("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Wt[0].contentWindow||Wt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),i=T(e,t),Wt.detach()),Kt[e]=i),i}function T(e,t){var i=st(t.createElement(e)).appendTo(t.body),n=st.css(i[0],"display");return i.remove(),n}function S(e,t,i,n){var o;if(st.isArray(t))st.each(t,function(t,o){i||ti.test(e)?n(e,o):S(e+"["+("object"==typeof o?t:"")+"]",o,i,n)});else if(i||"object"!==st.type(t))n(e,t);else for(o in t)S(e+"["+o+"]",t[o],i,n)}function D(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,s=t.toLowerCase().match(at)||[];if(st.isFunction(i))for(;n=s[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function E(e,t,i,n){function o(a){var l;return s[a]=!0,st.each(e[a]||[],function(e,a){var c=a(t,i,n);return"string"!=typeof c||r||s[c]?r?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}var s={},r=e===_i;return o(t.dataTypes[0])||!s["*"]&&o("*")}function M(e,i){var n,o,s=st.ajaxSettings.flatOptions||{};for(n in i)i[n]!==t&&((s[n]?e:o||(o={}))[n]=i[n]);return o&&st.extend(!0,e,o),e}function A(e,i,n){for(var o,s,r,a,l=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),o===t&&(o=e.mimeType||i.getResponseHeader("Content-Type"));if(o)for(s in l)if(l[s]&&l[s].test(o)){c.unshift(s);break}if(c[0]in n)r=c[0];else{for(s in n){if(!c[0]||e.converters[s+" "+c[0]]){r=s;break}a||(a=s)}r=r||a}return r?(r!==c[0]&&c.unshift(r),n[r]):void 0}function F(e,t,i,n){var o,s,r,a,l,c={},d=e.dataTypes.slice();if(d[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(s=d.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=d.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(r=c[l+" "+s]||c["* "+s],!r)for(o in c)if(a=o.split(" "),a[1]===s&&(r=c[l+" "+a[0]]||c["* "+a[0]])){r===!0?r=c[o]:c[o]!==!0&&(s=a[0],d.unshift(a[1]));break}if(r!==!0)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(h){return{state:"parsererror",error:r?h:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}function O(){return setTimeout(function(){Si=t}),Si=st.now()}function P(e,t,i){for(var n,o=(Oi[t]||[]).concat(Oi["*"]),s=0,r=o.length;r>s;s++)if(n=o[s].call(i,t,e))return n}function I(e,t,i){var n,o,s=0,r=Fi.length,a=st.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Si||O(),i=Math.max(0,c.startTime+c.duration-t),n=i/c.duration||0,s=1-n,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(s);return a.notifyWith(e,[c,s,i]),1>s&&l?i:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:st.extend({},t),opts:st.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Si||O(),duration:i.duration,tweens:[],createTween:function(t,i){var n=st.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(o)return this;for(o=!0;n>i;i++)c.tweens[i].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),d=c.props;for(z(d,c.opts.specialEasing);r>s;s++)if(n=Fi[s].call(c,e,d,c.opts))return n;return st.map(d,P,c),st.isFunction(c.opts.start)&&c.opts.start.call(e,c),st.fx.timer(st.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function z(e,t){var i,n,o,s,r;for(i in e)if(n=st.camelCase(i),o=t[n],s=e[i],st.isArray(s)&&(o=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),r=st.cssHooks[n],r&&"expand"in r){s=r.expand(s),delete e[n];for(i in s)i in e||(e[i]=s[i],t[i]=o)}else t[n]=o}function N(e,i,n){var o,s,r,a,l,c,d=this,h={},u=e.style,p=e.nodeType&&y(e),f=gt.get(e,"fxshow");n.queue||(l=st._queueHooks(e,"fx"),null==l.unqueued&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,d.always(function(){d.always(function(){l.unqueued--,st.queue(e,"fx").length||l.empty.fire()})})),1===e.nodeType&&("height"in i||"width"in i)&&(n.overflow=[u.overflow,u.overflowX,u.overflowY],"inline"===st.css(e,"display")&&"none"===st.css(e,"float")&&(u.display="inline-block")),n.overflow&&(u.overflow="hidden",d.always(function(){u.overflow=n.overflow[0],u.overflowX=n.overflow[1],u.overflowY=n.overflow[2]}));for(o in i)if(s=i[o],Ei.exec(s)){if(delete i[o],r=r||"toggle"===s,s===(p?"hide":"show")){if("show"!==s||!f||f[o]===t)continue;p=!0}h[o]=f&&f[o]||st.style(e,o)}if(!st.isEmptyObject(h)){f?"hidden"in f&&(p=f.hidden):f=gt.access(e,"fxshow",{}),r&&(f.hidden=!p),p?st(e).show():d.done(function(){st(e).hide()}),d.done(function(){var t;gt.remove(e,"fxshow");for(t in h)st.style(e,t,h[t])});for(o in h)a=P(p?f[o]:0,o,d),o in f||(f[o]=a.start,p&&(a.end=a.start,a.start="width"===o||"height"===o?1:0))}}function R(e,t,i,n,o){return new R.prototype.init(e,t,i,n,o)}function $(e,t){var i,n={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)i=Zt[o],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function L(e){return st.isWindow(e)?e:9===e.nodeType&&e.defaultView}var H,q,W=typeof t,B=e.location,V=e.document,U=V.documentElement,Y=e.jQuery,G=e.$,K={},X=[],J="2.0.2",Z=X.concat,Q=X.push,et=X.slice,tt=X.indexOf,it=K.toString,nt=K.hasOwnProperty,ot=J.trim,st=function(e,t){return new st.fn.init(e,t,H)},rt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,at=/\S+/g,lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ct=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,dt=/^-ms-/,ht=/-([\da-z])/gi,ut=function(e,t){return t.toUpperCase()},pt=function(){V.removeEventListener("DOMContentLoaded",pt,!1),e.removeEventListener("load",pt,!1),st.ready()};st.fn=st.prototype={jquery:J,constructor:st,init:function(e,i,n){var o,s;if(!e)return this;if("string"==typeof e){if(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:lt.exec(e),!o||!o[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(o[1]){if(i=i instanceof st?i[0]:i,st.merge(this,st.parseHTML(o[1],i&&i.nodeType?i.ownerDocument||i:V,!0)),ct.test(o[1])&&st.isPlainObject(i))for(o in i)st.isFunction(this[o])?this[o](i[o]):this.attr(o,i[o]);return this}return s=V.getElementById(o[2]),s&&s.parentNode&&(this.length=1,this[0]=s),this.context=V,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):st.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),st.makeArray(e,this))},selector:"",length:0,toArray:function(){return et.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=st.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return st.each(this,e,t)},ready:function(e){return st.ready.promise().done(e),this},slice:function(){return this.pushStack(et.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},map:function(e){return this.pushStack(st.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:[].sort,splice:[].splice},st.fn.init.prototype=st.fn,st.extend=st.fn.extend=function(){var e,i,n,o,s,r,a=arguments[0]||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof a&&(d=a,a=arguments[1]||{},l=2),"object"==typeof a||st.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(e=arguments[l]))for(i in e)n=a[i],o=e[i],a!==o&&(d&&o&&(st.isPlainObject(o)||(s=st.isArray(o)))?(s?(s=!1,r=n&&st.isArray(n)?n:[]):r=n&&st.isPlainObject(n)?n:{},a[i]=st.extend(d,r,o)):o!==t&&(a[i]=o));return a},st.extend({expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===st&&(e.$=G),t&&e.jQuery===st&&(e.jQuery=Y),st},isReady:!1,readyWait:1,holdReady:function(e){e?st.readyWait++:st.ready(!0)},ready:function(e){(e===!0?--st.readyWait:st.isReady)||(st.isReady=!0,e!==!0&&--st.readyWait>0||(q.resolveWith(V,[st]),st.fn.trigger&&st(V).trigger("ready").off("ready")))},isFunction:function(e){return"function"===st.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?K[it.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==st.type(e)||e.nodeType||st.isWindow(e))return!1;try{if(e.constructor&&!nt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||V;var n=ct.exec(e),o=!i&&[];return n?[t.createElement(n[1])]:(n=st.buildFragment([e],t,o),o&&st(o).remove(),st.merge([],n.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var i,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,i=n.parseFromString(e,"text/xml")}catch(o){i=t}return(!i||i.getElementsByTagName("parsererror").length)&&st.error("Invalid XML: "+e),i},noop:function(){},globalEval:function(e){var t,i=eval;e=st.trim(e),e&&(1===e.indexOf("use strict")?(t=V.createElement("script"),t.text=e,V.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(dt,"ms-").replace(ht,ut)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var o,s=0,r=e.length,a=i(e);if(n){if(a)for(;r>s&&(o=t.apply(e[s],n),o!==!1);s++);else for(s in e)if(o=t.apply(e[s],n),o===!1)break}else if(a)for(;r>s&&(o=t.call(e[s],s,e[s]),o!==!1);s++);else for(s in e)if(o=t.call(e[s],s,e[s]),o===!1)break;return e},trim:function(e){return null==e?"":ot.call(e)},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?st.merge(n,"string"==typeof e?[e]:e):Q.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:tt.call(t,e,i)},merge:function(e,i){var n=i.length,o=e.length,s=0;if("number"==typeof n)for(;n>s;s++)e[o++]=i[s];else for(;i[s]!==t;)e[o++]=i[s++];return e.length=o,e},grep:function(e,t,i){var n,o=[],s=0,r=e.length;for(i=!!i;r>s;s++)n=!!t(e[s],s),i!==n&&o.push(e[s]);return o},map:function(e,t,n){var o,s=0,r=e.length,a=i(e),l=[];if(a)for(;r>s;s++)o=t(e[s],s,n),null!=o&&(l[l.length]=o);else for(s in e)o=t(e[s],s,n),null!=o&&(l[l.length]=o);return Z.apply([],l)},guid:1,proxy:function(e,i){var n,o,s;return"string"==typeof i&&(n=e[i],i=e,e=n),st.isFunction(e)?(o=et.call(arguments,2),s=function(){return e.apply(i||this,o.concat(et.call(arguments)))},s.guid=e.guid=e.guid||st.guid++,s):t},access:function(e,i,n,o,s,r,a){var l=0,c=e.length,d=null==n;if("object"===st.type(n)){s=!0;for(l in n)st.access(e,i,l,n[l],!0,r,a)}else if(o!==t&&(s=!0,st.isFunction(o)||(a=!0),d&&(a?(i.call(e,o),i=null):(d=i,i=function(e,t,i){return d.call(st(e),i)})),i))for(;c>l;l++)i(e[l],n,a?o:o.call(e[l],l,i(e[l],n)));return s?e:d?i.call(e):c?i(e[0],n):r},now:Date.now,swap:function(e,t,i,n){var o,s,r={};for(s in t)r[s]=e.style[s],e.style[s]=t[s];o=i.apply(e,n||[]);for(s in t)e.style[s]=r[s];return o}}),st.ready.promise=function(t){return q||(q=st.Deferred(),"complete"===V.readyState?setTimeout(st.ready):(V.addEventListener("DOMContentLoaded",pt,!1),e.addEventListener("load",pt,!1))),q.promise(t)},st.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()}),H=st(V),function(e,t){function i(e,t,i,n){var o,s,r,a,l,c,d,h,u,p;if((t?t.ownerDocument||t:B)!==z&&I(t),t=t||z,i=i||[],!e||"string"!=typeof e)return i;if(1!==(a=t.nodeType)&&9!==a)return[];if(R&&!n){if(o=kt.exec(e))if(r=o[1]){if(9===a){if(s=t.getElementById(r),!s||!s.parentNode)return i;if(s.id===r)return i.push(s),i}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(r))&&q(t,s)&&s.id===r)return i.push(s),i}else{if(o[2])return ot.apply(i,t.getElementsByTagName(e)),i;if((r=o[3])&&S.getElementsByClassName&&t.getElementsByClassName)return ot.apply(i,t.getElementsByClassName(r)),i}if(S.qsa&&(!$||!$.test(e))){if(h=d=W,u=t,p=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=m(e),(d=t.getAttribute("id"))?h=d.replace(Tt,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+g(c[l]);u=vt.test(e)&&t.parentNode||t,p=c.join(",")}if(p)try{return ot.apply(i,u.querySelectorAll(p)),i}catch(f){}finally{d||t.removeAttribute("id")}}}return C(e.replace(ft,"$1"),t,i,n)}function n(e){return xt.test(e+"")}function o(){function e(i,n){return t.push(i+=" ")>E.cacheLength&&delete e[t.shift()],e[i]=n}var t=[];return e}function s(e){return e[W]=!0,e}function r(e){var t=z.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t,i){e=e.split("|");for(var n,o=e.length,s=i?null:t;o--;)(n=E.attrHandle[e[o]])&&n!==t||(E.attrHandle[e[o]]=s)}function l(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:e[t]===!0?t.toLowerCase():null}function c(e,t){return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}function d(e){return"input"===e.nodeName.toLowerCase()?e.defaultValue:void 0}function h(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Q)-(~e.sourceIndex||Q);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function u(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function p(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function f(e){return s(function(t){return t=+t,s(function(i,n){for(var o,s=e([],i.length,t),r=s.length;r--;)i[o=s[r]]&&(i[o]=!(n[o]=i[o]))})})}function m(e,t){var n,o,s,r,a,l,c,d=G[e+" "];if(d)return t?0:d.slice(0);for(a=e,l=[],c=E.preFilter;a;){(!n||(o=mt.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(s=[])),n=!1,(o=gt.exec(a))&&(n=o.shift(),s.push({value:n,type:o[0].replace(ft," ")}),a=a.slice(n.length));for(r in E.filter)!(o=wt[r].exec(a))||c[r]&&!(o=c[r](o))||(n=o.shift(),s.push({value:n,type:r,matches:o}),a=a.slice(n.length));if(!n)break}return t?a.length:a?i.error(e):G(e,l).slice(0)}function g(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function v(e,t,i){var n=t.dir,o=i&&"parentNode"===n,s=U++;return t.first?function(t,i,s){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,s)}:function(t,i,r){var a,l,c,d=V+" "+s;if(r){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,r))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(c=t[W]||(t[W]={}),(l=c[n])&&l[0]===d){if((a=l[1])===!0||a===D)return a===!0}else if(l=c[n]=[d],l[1]=e(t,i,r)||D,l[1]===!0)return!0}}function _(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function y(e,t,i,n,o){for(var s,r=[],a=0,l=e.length,c=null!=t;l>a;a++)(s=e[a])&&(!i||i(s,n,o))&&(r.push(s),c&&t.push(a));return r}function b(e,t,i,n,o,r){return n&&!n[W]&&(n=b(n)),o&&!o[W]&&(o=b(o,r)),s(function(s,r,a,l){var c,d,h,u=[],p=[],f=r.length,m=s||k(t||"*",a.nodeType?[a]:a,[]),g=!e||!s&&t?m:y(m,u,e,a,l),v=i?o||(s?e:f||n)?[]:r:g;if(i&&i(g,v,a,l),n)for(c=y(v,p),n(c,[],a,l),d=c.length;d--;)(h=c[d])&&(v[p[d]]=!(g[p[d]]=h));if(s){if(o||e){if(o){for(c=[],d=v.length;d--;)(h=v[d])&&c.push(g[d]=h);o(null,v=[],c,l)}for(d=v.length;d--;)(h=v[d])&&(c=o?at.call(s,h):u[d])>-1&&(s[c]=!(r[c]=h))}}else v=y(v===r?v.splice(f,v.length):v),o?o(null,r,v,l):ot.apply(r,v)})}function w(e){for(var t,i,n,o=e.length,s=E.relative[e[0].type],r=s||E.relative[" "],a=s?1:0,l=v(function(e){return e===t},r,!0),c=v(function(e){return at.call(t,e)>-1},r,!0),d=[function(e,i,n){return!s&&(n||i!==O)||((t=i).nodeType?l(e,i,n):c(e,i,n))}];o>a;a++)if(i=E.relative[e[a].type])d=[v(_(d),i)];else{if(i=E.filter[e[a].type].apply(null,e[a].matches),i[W]){for(n=++a;o>n&&!E.relative[e[n].type];n++);return b(a>1&&_(d),a>1&&g(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ft,"$1"),i,n>a&&w(e.slice(a,n)),o>n&&w(e=e.slice(n)),o>n&&g(e))}d.push(i)}return _(d)}function x(e,t){var n=0,o=t.length>0,r=e.length>0,a=function(s,a,l,c,d){var h,u,p,f=[],m=0,g="0",v=s&&[],_=null!=d,b=O,w=s||r&&E.find.TAG("*",d&&a.parentNode||a),x=V+=null==b?1:Math.random()||.1;for(_&&(O=a!==z&&a,D=n);null!=(h=w[g]);g++){if(r&&h){for(u=0;p=e[u++];)if(p(h,a,l)){c.push(h);break}_&&(V=x,D=++n)}o&&((h=!p&&h)&&m--,s&&v.push(h))}if(m+=g,o&&g!==m){for(u=0;p=t[u++];)p(v,f,a,l);if(s){if(m>0)for(;g--;)v[g]||f[g]||(f[g]=it.call(c));f=y(f)}ot.apply(c,f),_&&!s&&f.length>0&&m+t.length>1&&i.uniqueSort(c)}return _&&(V=x,O=b),v};return o?s(a):a}function k(e,t,n){for(var o=0,s=t.length;s>o;o++)i(e,t[o],n);return n}function C(e,t,i,n){var o,s,r,a,l,c=m(e);if(!n&&1===c.length){if(s=c[0]=c[0].slice(0),s.length>2&&"ID"===(r=s[0]).type&&S.getById&&9===t.nodeType&&R&&E.relative[s[1].type]){if(t=(E.find.ID(r.matches[0].replace(St,Dt),t)||[])[0],!t)return i;e=e.slice(s.shift().value.length)}for(o=wt.needsContext.test(e)?0:s.length;o--&&(r=s[o],!E.relative[a=r.type]);)if((l=E.find[a])&&(n=l(r.matches[0].replace(St,Dt),vt.test(s[0].type)&&t.parentNode||t))){if(s.splice(o,1),e=n.length&&g(s),!e)return ot.apply(i,n),i;break}}return F(e,c)(n,t,!R,i,vt.test(e)),i}function j(){}var T,S,D,E,M,A,F,O,P,I,z,N,R,$,L,H,q,W="sizzle"+-new Date,B=e.document,V=0,U=0,Y=o(),G=o(),K=o(),X=!1,J=function(){return 0},Z=typeof t,Q=1<<31,et={}.hasOwnProperty,tt=[],it=tt.pop,nt=tt.push,ot=tt.push,rt=tt.slice,at=tt.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},lt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ct="[\\x20\\t\\r\\n\\f]",dt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ht=dt.replace("w","w#"),ut="\\["+ct+"*("+dt+")"+ct+"*(?:([*^$|!~]?=)"+ct+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ht+")|)|)"+ct+"*\\]",pt=":("+dt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ut.replace(3,8)+")*)|.*)\\)|)",ft=new RegExp("^"+ct+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ct+"+$","g"),mt=new RegExp("^"+ct+"*,"+ct+"*"),gt=new RegExp("^"+ct+"*([>+~]|"+ct+")"+ct+"*"),vt=new RegExp(ct+"*[+~]"),_t=new RegExp("="+ct+"*([^\\]'\"]*)"+ct+"*\\]","g"),yt=new RegExp(pt),bt=new RegExp("^"+ht+"$"),wt={ID:new RegExp("^#("+dt+")"),CLASS:new RegExp("^\\.("+dt+")"),TAG:new RegExp("^("+dt.replace("w","w*")+")"),ATTR:new RegExp("^"+ut),PSEUDO:new RegExp("^"+pt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ct+"*(even|odd|(([+-]|)(\\d*)n|)"+ct+"*(?:([+-]|)"+ct+"*(\\d+)|))"+ct+"*\\)|)","i"),bool:new RegExp("^(?:"+lt+")$","i"),needsContext:new RegExp("^"+ct+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ct+"*((?:-\\d)?\\d*)"+ct+"*\\)|)(?=[^-]|$)","i")},xt=/^[^{]+\{\s*\[native \w/,kt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ct=/^(?:input|select|textarea|button)$/i,jt=/^h\d$/i,Tt=/'|\\/g,St=new RegExp("\\\\([\\da-f]{1,6}"+ct+"?|("+ct+")|.)","ig"),Dt=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{ot.apply(tt=rt.call(B.childNodes),B.childNodes),tt[B.childNodes.length].nodeType}catch(Et){ot={apply:tt.length?function(e,t){nt.apply(e,rt.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}A=i.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},S=i.support={},I=i.setDocument=function(e){var t=e?e.ownerDocument||e:B,i=t.parentWindow;return t!==z&&9===t.nodeType&&t.documentElement?(z=t,N=t.documentElement,R=!A(t),i&&i.frameElement&&i.attachEvent("onbeforeunload",function(){I()}),S.attributes=r(function(e){return e.innerHTML="<a href='#'></a>",a("type|href|height|width",c,"#"===e.firstChild.getAttribute("href")),a(lt,l,null==e.getAttribute("disabled")),e.className="i",!e.getAttribute("className")}),S.input=r(function(e){return e.innerHTML="<input>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}),a("value",d,S.attributes&&S.input),S.getElementsByTagName=r(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),S.getElementsByClassName=r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),S.getById=r(function(e){return N.appendChild(e).id=W,!t.getElementsByName||!t.getElementsByName(W).length}),S.getById?(E.find.ID=function(e,t){if(typeof t.getElementById!==Z&&R){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},E.filter.ID=function(e){var t=e.replace(St,Dt);return function(e){return e.getAttribute("id")===t}}):(delete E.find.ID,E.filter.ID=function(e){var t=e.replace(St,Dt);return function(e){var i=typeof e.getAttributeNode!==Z&&e.getAttributeNode("id");return i&&i.value===t}}),E.find.TAG=S.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Z?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],o=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[o++];)1===i.nodeType&&n.push(i);return n}return s},E.find.CLASS=S.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Z&&R?t.getElementsByClassName(e):void 0},L=[],$=[],(S.qsa=n(t.querySelectorAll))&&(r(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||$.push("\\["+ct+"*(?:value|"+lt+")"),e.querySelectorAll(":checked").length||$.push(":checked")}),r(function(e){var i=t.createElement("input");i.setAttribute("type","hidden"),e.appendChild(i).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&$.push("[*^$]="+ct+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||$.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),$.push(",.*:")})),(S.matchesSelector=n(H=N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&r(function(e){S.disconnectedMatch=H.call(e,"div"),H.call(e,"[s!='']:x"),L.push("!=",pt)}),$=$.length&&new RegExp($.join("|")),L=L.length&&new RegExp(L.join("|")),q=n(N.contains)||N.compareDocumentPosition?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},S.sortDetached=r(function(e){return 1&e.compareDocumentPosition(t.createElement("div"))}),J=N.compareDocumentPosition?function(e,i){if(e===i)return X=!0,0;var n=i.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(i);return n?1&n||!S.sortDetached&&i.compareDocumentPosition(e)===n?e===t||q(B,e)?-1:i===t||q(B,i)?1:P?at.call(P,e)-at.call(P,i):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,i){var n,o=0,s=e.parentNode,r=i.parentNode,a=[e],l=[i];if(e===i)return X=!0,0;if(!s||!r)return e===t?-1:i===t?1:s?-1:r?1:P?at.call(P,e)-at.call(P,i):0;if(s===r)return h(e,i);for(n=e;n=n.parentNode;)a.unshift(n);for(n=i;n=n.parentNode;)l.unshift(n);for(;a[o]===l[o];)o++;return o?h(a[o],l[o]):a[o]===B?-1:l[o]===B?1:0},t):z},i.matches=function(e,t){return i(e,null,null,t)},i.matchesSelector=function(e,t){if((e.ownerDocument||e)!==z&&I(e),t=t.replace(_t,"='$1']"),!(!S.matchesSelector||!R||L&&L.test(t)||$&&$.test(t)))try{var n=H.call(e,t);if(n||S.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(o){}return i(t,z,null,[e]).length>0},i.contains=function(e,t){return(e.ownerDocument||e)!==z&&I(e),q(e,t)},i.attr=function(e,i){(e.ownerDocument||e)!==z&&I(e);var n=E.attrHandle[i.toLowerCase()],o=n&&et.call(E.attrHandle,i.toLowerCase())?n(e,i,!R):t;return o===t?S.attributes||!R?e.getAttribute(i):(o=e.getAttributeNode(i))&&o.specified?o.value:null:o},i.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},i.uniqueSort=function(e){var t,i=[],n=0,o=0;if(X=!S.detectDuplicates,P=!S.sortStable&&e.slice(0),e.sort(J),X){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return e},M=i.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=M(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n];n++)i+=M(t);return i},E=i.selectors={cacheLength:50,createPseudo:s,match:wt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(St,Dt),e[3]=(e[4]||e[5]||"").replace(St,Dt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||i.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&i.error(e[0]),e},PSEUDO:function(e){var i,n=!e[5]&&e[2];return wt.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:n&&yt.test(n)&&(i=m(n,!0))&&(i=n.indexOf(")",n.length-i)-n.length)&&(e[0]=e[0].slice(0,i),e[2]=n.slice(0,i)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(St,Dt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Y[e+" "];return t||(t=new RegExp("(^|"+ct+")"+e+"("+ct+"|$)"))&&Y(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Z&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(o){var s=i.attr(o,e);return null==s?"!="===t:t?(s+="","="===t?s===n:"!="===t?s!==n:"^="===t?n&&0===s.indexOf(n):"*="===t?n&&s.indexOf(n)>-1:"$="===t?n&&s.slice(-n.length)===n:"~="===t?(" "+s+" ").indexOf(n)>-1:"|="===t?s===n||s.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,o){var s="nth"!==e.slice(0,3),r="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var c,d,h,u,p,f,m=s!==r?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),_=!l&&!a;if(g){if(s){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[r?g.firstChild:g.lastChild],r&&_){for(d=g[W]||(g[W]={}),c=d[e]||[],p=c[0]===V&&c[1],u=c[0]===V&&c[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(u=p=0)||f.pop();)if(1===h.nodeType&&++u&&h===t){d[e]=[V,p,u];break}}else if(_&&(c=(t[W]||(t[W]={}))[e])&&c[0]===V)u=c[1];else for(;(h=++p&&h&&h[m]||(u=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++u||(_&&((h[W]||(h[W]={}))[e]=[V,u]),h!==t)););return u-=o,u===n||0===u%n&&u/n>=0}}},PSEUDO:function(e,t){var n,o=E.pseudos[e]||E.setFilters[e.toLowerCase()]||i.error("unsupported pseudo: "+e);return o[W]?o(t):o.length>1?(n=[e,e,"",t],E.setFilters.hasOwnProperty(e.toLowerCase())?s(function(e,i){for(var n,s=o(e,t),r=s.length;r--;)n=at.call(e,s[r]),e[n]=!(i[n]=s[r])}):function(e){return o(e,0,n)}):o}},pseudos:{not:s(function(e){var t=[],i=[],n=F(e.replace(ft,"$1"));return n[W]?s(function(e,t,i,o){for(var s,r=n(e,null,o,[]),a=e.length;a--;)(s=r[a])&&(e[a]=!(t[a]=s))}):function(e,o,s){return t[0]=e,n(t,null,s,i),!i.pop()}}),has:s(function(e){return function(t){return i(e,t).length>0}}),contains:s(function(e){return function(t){return(t.textContent||t.innerText||M(t)).indexOf(e)>-1}}),lang:s(function(e){return bt.test(e||"")||i.error("unsupported lang: "+e),e=e.replace(St,Dt).toLowerCase(),function(t){var i;do if(i=R?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===N},focus:function(e){return e===z.activeElement&&(!z.hasFocus||z.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!E.pseudos.empty(e)},header:function(e){return jt.test(e.nodeName)},input:function(e){return Ct.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();
return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:f(function(){return[0]}),last:f(function(e,t){return[t-1]}),eq:f(function(e,t,i){return[0>i?i+t:i]}),even:f(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:f(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:f(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:f(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}};for(T in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[T]=u(T);for(T in{submit:!0,reset:!0})E.pseudos[T]=p(T);F=i.compile=function(e,t){var i,n=[],o=[],s=K[e+" "];if(!s){for(t||(t=m(e)),i=t.length;i--;)s=w(t[i]),s[W]?n.push(s):o.push(s);s=K(e,x(o,n))}return s},E.pseudos.nth=E.pseudos.eq,j.prototype=E.filters=E.pseudos,E.setFilters=new j,S.sortStable=W.split("").sort(J).join("")===W,I(),[0,0].sort(J),S.detectDuplicates=X,st.find=i,st.expr=i.selectors,st.expr[":"]=st.expr.pseudos,st.unique=i.uniqueSort,st.text=i.getText,st.isXMLDoc=i.isXML,st.contains=i.contains}(e);var ft={};st.Callbacks=function(e){e="string"==typeof e?ft[e]||n(e):st.extend({},e);var i,o,s,r,a,l,c=[],d=!e.once&&[],h=function(t){for(i=e.memory&&t,o=!0,l=r||0,r=0,a=c.length,s=!0;c&&a>l;l++)if(c[l].apply(t[0],t[1])===!1&&e.stopOnFalse){i=!1;break}s=!1,c&&(d?d.length&&h(d.shift()):i?c=[]:u.disable())},u={add:function(){if(c){var t=c.length;!function n(t){st.each(t,function(t,i){var o=st.type(i);"function"===o?e.unique&&u.has(i)||c.push(i):i&&i.length&&"string"!==o&&n(i)})}(arguments),s?a=c.length:i&&(r=t,h(i))}return this},remove:function(){return c&&st.each(arguments,function(e,t){for(var i;(i=st.inArray(t,c,i))>-1;)c.splice(i,1),s&&(a>=i&&a--,l>=i&&l--)}),this},has:function(e){return e?st.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=d=i=t,this},disabled:function(){return!c},lock:function(){return d=t,i||u.disable(),this},locked:function(){return!d},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||o&&!d||(s?d.push(t):h(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},st.extend({Deferred:function(e){var t=[["resolve","done",st.Callbacks("once memory"),"resolved"],["reject","fail",st.Callbacks("once memory"),"rejected"],["notify","progress",st.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return st.Deferred(function(i){st.each(t,function(t,s){var r=s[0],a=st.isFunction(e[t])&&e[t];o[s[1]](function(){var e=a&&a.apply(this,arguments);e&&st.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r+"With"](this===n?i.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?st.extend(e,n):n}},o={};return n.pipe=n.then,st.each(t,function(e,s){var r=s[2],a=s[3];n[s[1]]=r.add,a&&r.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),o[s[0]]=function(){return o[s[0]+"With"](this===o?n:this,arguments),this},o[s[0]+"With"]=r.fireWith}),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,i,n,o=0,s=et.call(arguments),r=s.length,a=1!==r||e&&st.isFunction(e.promise)?r:0,l=1===a?e:st.Deferred(),c=function(e,i,n){return function(o){i[e]=this,n[e]=arguments.length>1?et.call(arguments):o,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(r>1)for(t=new Array(r),i=new Array(r),n=new Array(r);r>o;o++)s[o]&&st.isFunction(s[o].promise)?s[o].promise().done(c(o,n,s)).fail(l.reject).progress(c(o,i,t)):--a;return a||l.resolveWith(n,s),l.promise()}}),st.support=function(t){var i=V.createElement("input"),n=V.createDocumentFragment(),o=V.createElement("div"),s=V.createElement("select"),r=s.appendChild(V.createElement("option"));return i.type?(i.type="checkbox",t.checkOn=""!==i.value,t.optSelected=r.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,i.checked=!0,t.noCloneChecked=i.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!r.disabled,i=V.createElement("input"),i.value="t",i.type="radio",t.radioValue="t"===i.value,i.setAttribute("checked","t"),i.setAttribute("name","t"),n.appendChild(i),t.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===o.style.backgroundClip,st(function(){var i,n,s="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",r=V.getElementsByTagName("body")[0];r&&(i=V.createElement("div"),i.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(i).appendChild(o),o.innerHTML="",o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",st.swap(r,null!=r.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===o.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(o,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(o,null)||{width:"4px"}).width,n=o.appendChild(V.createElement("div")),n.style.cssText=o.style.cssText=s,n.style.marginRight=n.style.width="0",o.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight)),r.removeChild(i))}),t):t}({});var mt,gt,vt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,_t=/([A-Z])/g;o.uid=1,o.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},o.prototype={key:function(e){if(!o.accepts(e))return 0;var t={},i=e[this.expando];if(!i){i=o.uid++;try{t[this.expando]={value:i},Object.defineProperties(e,t)}catch(n){t[this.expando]=i,st.extend(e,t)}}return this.cache[i]||(this.cache[i]={}),i},set:function(e,t,i){var n,o=this.key(e),s=this.cache[o];if("string"==typeof t)s[t]=i;else if(st.isEmptyObject(s))st.extend(this.cache[o],t);else for(n in t)s[n]=t[n];return s},get:function(e,i){var n=this.cache[this.key(e)];return i===t?n:n[i]},access:function(e,i,n){return i===t||i&&"string"==typeof i&&n===t?this.get(e,i):(this.set(e,i,n),n!==t?n:i)},remove:function(e,i){var n,o,s,r=this.key(e),a=this.cache[r];if(i===t)this.cache[r]={};else{st.isArray(i)?o=i.concat(i.map(st.camelCase)):(s=st.camelCase(i),i in a?o=[i,s]:(o=s,o=o in a?[o]:o.match(at)||[])),n=o.length;for(;n--;)delete a[o[n]]}},hasData:function(e){return!st.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},mt=new o,gt=new o,st.extend({acceptData:o.accepts,hasData:function(e){return mt.hasData(e)||gt.hasData(e)},data:function(e,t,i){return mt.access(e,t,i)},removeData:function(e,t){mt.remove(e,t)},_data:function(e,t,i){return gt.access(e,t,i)},_removeData:function(e,t){gt.remove(e,t)}}),st.fn.extend({data:function(e,i){var n,o,r=this[0],a=0,l=null;if(e===t){if(this.length&&(l=mt.get(r),1===r.nodeType&&!gt.get(r,"hasDataAttrs"))){for(n=r.attributes;a<n.length;a++)o=n[a].name,0===o.indexOf("data-")&&(o=st.camelCase(o.slice(5)),s(r,o,l[o]));gt.set(r,"hasDataAttrs",!0)}return l}return"object"==typeof e?this.each(function(){mt.set(this,e)}):st.access(this,function(i){var n,o=st.camelCase(e);if(r&&i===t){if(n=mt.get(r,e),n!==t)return n;if(n=mt.get(r,o),n!==t)return n;if(n=s(r,o,t),n!==t)return n}else this.each(function(){var n=mt.get(this,o);mt.set(this,o,i),-1!==e.indexOf("-")&&n!==t&&mt.set(this,e,i)})},null,i,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){mt.remove(this,e)})}}),st.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=gt.get(e,t),i&&(!n||st.isArray(i)?n=gt.access(e,t,st.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=st.queue(e,t),n=i.length,o=i.shift(),s=st._queueHooks(e,t),r=function(){st.dequeue(e,t)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete s.stop,o.call(e,r,s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return gt.get(e,i)||gt.access(e,i,{empty:st.Callbacks("once memory").add(function(){gt.remove(e,[t+"queue",i])})})}}),st.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),arguments.length<n?st.queue(this[0],e):i===t?this:this.each(function(){var t=st.queue(this,e,i);st._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&st.dequeue(this,e)})},dequeue:function(e){return this.each(function(){st.dequeue(this,e)})},delay:function(e,t){return e=st.fx?st.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,o=1,s=st.Deferred(),r=this,a=this.length,l=function(){--o||s.resolveWith(r,[r])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";a--;)n=gt.get(r[a],e+"queueHooks"),n&&n.empty&&(o++,n.empty.add(l));return l(),s.promise(i)}});var yt,bt,wt=/[\t\r\n\f]/g,xt=/\r/g,kt=/^(?:input|select|textarea|button)$/i;st.fn.extend({attr:function(e,t){return st.access(this,st.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){st.removeAttr(this,e)})},prop:function(e,t){return st.access(this,st.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[st.propFix[e]||e]})},addClass:function(e){var t,i,n,o,s,r=0,a=this.length,l="string"==typeof e&&e;if(st.isFunction(e))return this.each(function(t){st(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(at)||[];a>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(wt," "):" ")){for(s=0;o=t[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");i.className=st.trim(n)}return this},removeClass:function(e){var t,i,n,o,s,r=0,a=this.length,l=0===arguments.length||"string"==typeof e&&e;if(st.isFunction(e))return this.each(function(t){st(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(at)||[];a>r;r++)if(i=this[r],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(wt," "):"")){for(s=0;o=t[s++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");i.className=e?st.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return st.isFunction(e)?this.each(function(i){st(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var o,s=0,r=st(this),a=t,l=e.match(at)||[];o=l[s++];)a=n?a:!r.hasClass(o),r[a?"addClass":"removeClass"](o);else(i===W||"boolean"===i)&&(this.className&&gt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":gt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(wt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,n,o,s=this[0];{if(arguments.length)return o=st.isFunction(e),this.each(function(n){var s;1===this.nodeType&&(s=o?e.call(this,n,st(this).val()):e,null==s?s="":"number"==typeof s?s+="":st.isArray(s)&&(s=st.map(s,function(e){return null==e?"":e+""})),i=st.valHooks[this.type]||st.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,s,"value")!==t||(this.value=s))});if(s)return i=st.valHooks[s.type]||st.valHooks[s.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace(xt,""):null==n?"":n)}}}),st.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,i,n=e.options,o=e.selectedIndex,s="select-one"===e.type||0>o,r=s?null:[],a=s?o+1:n.length,l=0>o?a:s?o:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==o||(st.support.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&st.nodeName(i.parentNode,"optgroup"))){if(t=st(i).val(),s)return t;r.push(t)}return r},set:function(e,t){for(var i,n,o=e.options,s=st.makeArray(t),r=o.length;r--;)n=o[r],(n.selected=st.inArray(st(n).val(),s)>=0)&&(i=!0);return i||(e.selectedIndex=-1),s}}},attr:function(e,i,n){var o,s,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return typeof e.getAttribute===W?st.prop(e,i,n):(1===r&&st.isXMLDoc(e)||(i=i.toLowerCase(),o=st.attrHooks[i]||(st.expr.match.bool.test(i)?bt:yt)),n===t?o&&"get"in o&&null!==(s=o.get(e,i))?s:(s=st.find.attr(e,i),null==s?t:s):null!==n?o&&"set"in o&&(s=o.set(e,n,i))!==t?s:(e.setAttribute(i,n+""),n):(st.removeAttr(e,i),void 0))},removeAttr:function(e,t){var i,n,o=0,s=t&&t.match(at);if(s&&1===e.nodeType)for(;i=s[o++];)n=st.propFix[i]||i,st.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)},attrHooks:{type:{set:function(e,t){if(!st.support.radioValue&&"radio"===t&&st.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,i,n){var o,s,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return r=1!==a||!st.isXMLDoc(e),r&&(i=st.propFix[i]||i,s=st.propHooks[i]),n!==t?s&&"set"in s&&(o=s.set(e,n,i))!==t?o:e[i]=n:s&&"get"in s&&null!==(o=s.get(e,i))?o:e[i]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||kt.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),bt={set:function(e,t,i){return t===!1?st.removeAttr(e,i):e.setAttribute(i,i),i}},st.each(st.expr.match.bool.source.match(/\w+/g),function(e,i){var n=st.expr.attrHandle[i]||st.find.attr;st.expr.attrHandle[i]=function(e,i,o){var s=st.expr.attrHandle[i],r=o?t:(st.expr.attrHandle[i]=t)!=n(e,i,o)?i.toLowerCase():null;return st.expr.attrHandle[i]=s,r}}),st.support.optSelected||(st.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),st.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){st.propFix[this.toLowerCase()]=this}),st.each(["radio","checkbox"],function(){st.valHooks[this]={set:function(e,t){return st.isArray(t)?e.checked=st.inArray(st(e).val(),t)>=0:void 0}},st.support.checkOn||(st.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Ct=/^key/,jt=/^(?:mouse|contextmenu)|click/,Tt=/^(?:focusinfocus|focusoutblur)$/,St=/^([^.]*)(?:\.(.+)|)$/;st.event={global:{},add:function(e,i,n,o,s){var r,a,l,c,d,h,u,p,f,m,g,v=gt.get(e);if(v){for(n.handler&&(r=n,n=r.handler,s=r.selector),n.guid||(n.guid=st.guid++),(c=v.events)||(c=v.events={}),(a=v.handle)||(a=v.handle=function(e){return typeof st===W||e&&st.event.triggered===e.type?t:st.event.dispatch.apply(a.elem,arguments)},a.elem=e),i=(i||"").match(at)||[""],d=i.length;d--;)l=St.exec(i[d])||[],f=g=l[1],m=(l[2]||"").split(".").sort(),f&&(u=st.event.special[f]||{},f=(s?u.delegateType:u.bindType)||f,u=st.event.special[f]||{},h=st.extend({type:f,origType:g,data:o,handler:n,guid:n.guid,selector:s,needsContext:s&&st.expr.match.needsContext.test(s),namespace:m.join(".")},r),(p=c[f])||(p=c[f]=[],p.delegateCount=0,u.setup&&u.setup.call(e,o,m,a)!==!1||e.addEventListener&&e.addEventListener(f,a,!1)),u.add&&(u.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),s?p.splice(p.delegateCount++,0,h):p.push(h),st.event.global[f]=!0);e=null}},remove:function(e,t,i,n,o){var s,r,a,l,c,d,h,u,p,f,m,g=gt.hasData(e)&&gt.get(e);if(g&&(l=g.events)){for(t=(t||"").match(at)||[""],c=t.length;c--;)if(a=St.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(h=st.event.special[p]||{},p=(n?h.delegateType:h.bindType)||p,u=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=s=u.length;s--;)d=u[s],!o&&m!==d.origType||i&&i.guid!==d.guid||a&&!a.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(u.splice(s,1),d.selector&&u.delegateCount--,h.remove&&h.remove.call(e,d));r&&!u.length&&(h.teardown&&h.teardown.call(e,f,g.handle)!==!1||st.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)st.event.remove(e,p+t[c],i,n,!0);st.isEmptyObject(l)&&(delete g.handle,gt.remove(e,"events"))}},trigger:function(i,n,o,s){var r,a,l,c,d,h,u,p=[o||V],f=nt.call(i,"type")?i.type:i,m=nt.call(i,"namespace")?i.namespace.split("."):[];if(a=l=o=o||V,3!==o.nodeType&&8!==o.nodeType&&!Tt.test(f+st.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),d=f.indexOf(":")<0&&"on"+f,i=i[st.expando]?i:new st.Event(f,"object"==typeof i&&i),i.isTrigger=s?2:3,i.namespace=m.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=t,i.target||(i.target=o),n=null==n?[i]:st.makeArray(n,[i]),u=st.event.special[f]||{},s||!u.trigger||u.trigger.apply(o,n)!==!1)){if(!s&&!u.noBubble&&!st.isWindow(o)){for(c=u.delegateType||f,Tt.test(c+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),l=a;l===(o.ownerDocument||V)&&p.push(l.defaultView||l.parentWindow||e)}for(r=0;(a=p[r++])&&!i.isPropagationStopped();)i.type=r>1?c:u.bindType||f,h=(gt.get(a,"events")||{})[i.type]&&gt.get(a,"handle"),h&&h.apply(a,n),h=d&&a[d],h&&st.acceptData(a)&&h.apply&&h.apply(a,n)===!1&&i.preventDefault();return i.type=f,s||i.isDefaultPrevented()||u._default&&u._default.apply(p.pop(),n)!==!1||!st.acceptData(o)||d&&st.isFunction(o[f])&&!st.isWindow(o)&&(l=o[d],l&&(o[d]=null),st.event.triggered=f,o[f](),st.event.triggered=t,l&&(o[d]=l)),i.result}},dispatch:function(e){e=st.event.fix(e);var i,n,o,s,r,a=[],l=et.call(arguments),c=(gt.get(this,"events")||{})[e.type]||[],d=st.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!d.preDispatch||d.preDispatch.call(this,e)!==!1){for(a=st.event.handlers.call(this,e,c),i=0;(s=a[i++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,n=0;(r=s.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,o=((st.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,l),o!==t&&(e.result=o)===!1&&(e.preventDefault(),e.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,e),e.result}},handlers:function(e,i){var n,o,s,r,a=[],l=i.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==e.type){for(o=[],n=0;l>n;n++)r=i[n],s=r.selector+" ",o[s]===t&&(o[s]=r.needsContext?st(s,this).index(c)>=0:st.find(s,this,null,[c]).length),o[s]&&o.push(r);o.length&&a.push({elem:c,handlers:o})}return l<i.length&&a.push({elem:this,handlers:i.slice(l)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,o,s,r=i.button;return null==e.pageX&&null!=i.clientX&&(n=e.target.ownerDocument||V,o=n.documentElement,s=n.body,e.pageX=i.clientX+(o&&o.scrollLeft||s&&s.scrollLeft||0)-(o&&o.clientLeft||s&&s.clientLeft||0),e.pageY=i.clientY+(o&&o.scrollTop||s&&s.scrollTop||0)-(o&&o.clientTop||s&&s.clientTop||0)),e.which||r===t||(e.which=1&r?1:2&r?3:4&r?2:0),e}},fix:function(e){if(e[st.expando])return e;var t,i,n,o=e.type,s=e,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=jt.test(o)?this.mouseHooks:Ct.test(o)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,e=new st.Event(s),t=n.length;t--;)i=n[t],e[i]=s[i];return e.target||(e.target=V),3===e.target.nodeType&&(e.target=e.target.parentNode),r.filter?r.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&st.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return st.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var o=st.extend(new st.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?st.event.trigger(o,null,t):st.event.dispatch.call(t,o),o.isDefaultPrevented()&&i.preventDefault()}},st.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)},st.Event=function(e,t){return this instanceof st.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?r:a):this.type=e,t&&st.extend(this,t),this.timeStamp=e&&e.timeStamp||st.now(),this[st.expando]=!0,void 0):new st.Event(e,t)},st.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=r,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=r,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()}},st.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){st.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,s=e.handleObj;return(!o||o!==n&&!st.contains(n,o))&&(e.type=s.origType,i=s.handler.apply(this,arguments),e.type=t),i}}}),st.support.focusinBubbles||st.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){st.event.simulate(t,e.target,st.event.fix(e),!0)};st.event.special[t]={setup:function(){0===i++&&V.addEventListener(e,n,!0)},teardown:function(){0===--i&&V.removeEventListener(e,n,!0)}}}),st.fn.extend({on:function(e,i,n,o,s){var r,l;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(l in e)this.on(l,i,n,e[l],s);return this}if(null==n&&null==o?(o=i,n=i=t):null==o&&("string"==typeof i?(o=n,n=t):(o=n,n=i,i=t)),o===!1)o=a;else if(!o)return this;return 1===s&&(r=o,o=function(e){return st().off(e),r.apply(this,arguments)},o.guid=r.guid||(r.guid=st.guid++)),this.each(function(){st.event.add(this,e,o,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var o,s;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,st(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(s in e)this.off(s,i,e[s]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=a),this.each(function(){st.event.remove(this,e,n,i)})},trigger:function(e,t){return this.each(function(){st.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?st.event.trigger(e,t,i,!0):void 0}});var Dt=/^.[^:#\[\.,]*$/,Et=/^(?:parents|prev(?:Until|All))/,Mt=st.expr.match.needsContext,At={children:!0,contents:!0,next:!0,prev:!0};st.fn.extend({find:function(e){var t,i=[],n=this,o=n.length;if("string"!=typeof e)return this.pushStack(st(e).filter(function(){for(t=0;o>t;t++)if(st.contains(n[t],this))return!0}));for(t=0;o>t;t++)st.find(e,n[t],i);return i=this.pushStack(o>1?st.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},has:function(e){var t=st(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(st.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(d(this,e||[],!0))},filter:function(e){return this.pushStack(d(this,e||[],!1))},is:function(e){return!!d(this,"string"==typeof e&&Mt.test(e)?st(e):e||[],!1).length},closest:function(e,t){for(var i,n=0,o=this.length,s=[],r=Mt.test(e)||"string"!=typeof e?st(e,t||this.context):0;o>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&st.find.matchesSelector(i,e))){i=s.push(i);break}return this.pushStack(s.length>1?st.unique(s):s)},index:function(e){return e?"string"==typeof e?tt.call(st(e),this[0]):tt.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var i="string"==typeof e?st(e,t):st.makeArray(e&&e.nodeType?[e]:e),n=st.merge(this.get(),i);return this.pushStack(st.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),st.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return st.dir(e,"parentNode")},parentsUntil:function(e,t,i){return st.dir(e,"parentNode",i)},next:function(e){return c(e,"nextSibling")},prev:function(e){return c(e,"previousSibling")},nextAll:function(e){return st.dir(e,"nextSibling")},prevAll:function(e){return st.dir(e,"previousSibling")},nextUntil:function(e,t,i){return st.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return st.dir(e,"previousSibling",i)},siblings:function(e){return st.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return st.sibling(e.firstChild)},contents:function(e){return e.contentDocument||st.merge([],e.childNodes)}},function(e,t){st.fn[e]=function(i,n){var o=st.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=st.filter(n,o)),this.length>1&&(At[e]||st.unique(o),Et.test(e)&&o.reverse()),this.pushStack(o)}}),st.extend({filter:function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?st.find.matchesSelector(n,e)?[n]:[]:st.find.matches(e,st.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,i,n){for(var o=[],s=n!==t;(e=e[i])&&9!==e.nodeType;)if(1===e.nodeType){if(s&&st(e).is(n))break;o.push(e)}return o},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var Ft=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ot=/<([\w:]+)/,Pt=/<|&#?\w+;/,It=/<(?:script|style|link)/i,zt=/^(?:checkbox|radio)$/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,Rt=/^$|\/(?:java|ecma)script/i,$t=/^true\/(.*)/,Lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ht={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ht.optgroup=Ht.option,Ht.tbody=Ht.tfoot=Ht.colgroup=Ht.caption=Ht.thead,Ht.th=Ht.td,st.fn.extend({text:function(e){return st.access(this,function(e){return e===t?st.text(this):this.empty().append((this[0]&&this[0].ownerDocument||V).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?st.filter(e,this):this,o=0;null!=(i=n[o]);o++)t||1!==i.nodeType||st.cleanData(g(i)),i.parentNode&&(t&&st.contains(i.ownerDocument,i)&&f(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(st.cleanData(g(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return st.clone(this,e,t)})},html:function(e){return st.access(this,function(e){var i=this[0]||{},n=0,o=this.length;if(e===t&&1===i.nodeType)return i.innerHTML;if("string"==typeof e&&!It.test(e)&&!Ht[(Ot.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ft,"<$1></$2>");try{for(;o>n;n++)i=this[n]||{},1===i.nodeType&&(st.cleanData(g(i,!1)),i.innerHTML=e);i=0}catch(s){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=st.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(i){var n=e[t++],o=e[t++];o&&(n&&n.parentNode!==o&&(n=this.nextSibling),st(this).remove(),o.insertBefore(i,n))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,i){e=Z.apply([],e);var n,o,s,r,a,l,c=0,d=this.length,h=this,f=d-1,m=e[0],v=st.isFunction(m);if(v||!(1>=d||"string"!=typeof m||st.support.checkClone)&&Nt.test(m))return this.each(function(n){var o=h.eq(n);v&&(e[0]=m.call(this,n,o.html())),o.domManip(e,t,i)});if(d&&(n=st.buildFragment(e,this[0].ownerDocument,!1,!i&&this),o=n.firstChild,1===n.childNodes.length&&(n=o),o)){for(s=st.map(g(n,"script"),u),r=s.length;d>c;c++)a=n,c!==f&&(a=st.clone(a,!0,!0),r&&st.merge(s,g(a,"script"))),t.call(this[c],a,c);if(r)for(l=s[s.length-1].ownerDocument,st.map(s,p),c=0;r>c;c++)a=s[c],Rt.test(a.type||"")&&!gt.access(a,"globalEval")&&st.contains(l,a)&&(a.src?st._evalUrl(a.src):st.globalEval(a.textContent.replace(Lt,"")))}return this}}),st.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){st.fn[e]=function(e){for(var i,n=[],o=st(e),s=o.length-1,r=0;s>=r;r++)i=r===s?this:this.clone(!0),st(o[r])[t](i),Q.apply(n,i.get());return this.pushStack(n)}}),st.extend({clone:function(e,t,i){var n,o,s,r,a=e.cloneNode(!0),l=st.contains(e.ownerDocument,e);if(!(st.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||st.isXMLDoc(e)))for(r=g(a),s=g(e),n=0,o=s.length;o>n;n++)v(s[n],r[n]);if(t)if(i)for(s=s||g(e),r=r||g(a),n=0,o=s.length;o>n;n++)m(s[n],r[n]);else m(e,a);return r=g(a,"script"),r.length>0&&f(r,!l&&g(e,"script")),a},buildFragment:function(e,t,i,n){for(var o,s,r,a,l,c,d=0,h=e.length,u=t.createDocumentFragment(),p=[];h>d;d++)if(o=e[d],o||0===o)if("object"===st.type(o))st.merge(p,o.nodeType?[o]:o);else if(Pt.test(o)){for(s=s||u.appendChild(t.createElement("div")),r=(Ot.exec(o)||["",""])[1].toLowerCase(),a=Ht[r]||Ht._default,s.innerHTML=a[1]+o.replace(Ft,"<$1></$2>")+a[2],c=a[0];c--;)s=s.firstChild;st.merge(p,s.childNodes),s=u.firstChild,s.textContent=""}else p.push(t.createTextNode(o));for(u.textContent="",d=0;o=p[d++];)if((!n||-1===st.inArray(o,n))&&(l=st.contains(o.ownerDocument,o),s=g(u.appendChild(o),"script"),l&&f(s),i))for(c=0;o=s[c++];)Rt.test(o.type||"")&&i.push(o);return u},cleanData:function(e){for(var i,n,s,r,a,l,c=st.event.special,d=0;(n=e[d])!==t;d++){if(o.accepts(n)&&(a=n[gt.expando],a&&(i=gt.cache[a]))){if(s=Object.keys(i.events||{}),s.length)for(l=0;(r=s[l])!==t;l++)c[r]?st.event.remove(n,r):st.removeEvent(n,r,i.handle);gt.cache[a]&&delete gt.cache[a]}delete mt.cache[n[mt.expando]]}},_evalUrl:function(e){return st.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),st.fn.extend({wrapAll:function(e){var t;return st.isFunction(e)?this.each(function(t){st(this).wrapAll(e.call(this,t))}):(this[0]&&(t=st(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return st.isFunction(e)?this.each(function(t){st(this).wrapInner(e.call(this,t))}):this.each(function(){var t=st(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=st.isFunction(e);return this.each(function(i){st(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){st.nodeName(this,"body")||st(this).replaceWith(this.childNodes)}).end()}});var qt,Wt,Bt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,Ut=new RegExp("^("+rt+")(.*)$","i"),Yt=new RegExp("^("+rt+")(?!px)[a-z%]+$","i"),Gt=new RegExp("^([+-])=("+rt+")","i"),Kt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Jt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],Qt=["Webkit","O","Moz","ms"];st.fn.extend({css:function(e,i){return st.access(this,function(e,i,n){var o,s,r={},a=0;if(st.isArray(i)){for(o=b(e),s=i.length;s>a;a++)r[i[a]]=st.css(e,i[a],!1,o);
return r}return n!==t?st.style(e,i,n):st.css(e,i)},e,i,arguments.length>1)},show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:y(this))?st(this).show():st(this).hide()})}}),st.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=qt(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,i,n,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,r,a,l=st.camelCase(i),c=e.style;return i=st.cssProps[l]||(st.cssProps[l]=_(c,l)),a=st.cssHooks[i]||st.cssHooks[l],n===t?a&&"get"in a&&(s=a.get(e,!1,o))!==t?s:c[i]:(r=typeof n,"string"===r&&(s=Gt.exec(n))&&(n=(s[1]+1)*s[2]+parseFloat(st.css(e,i)),r="number"),null==n||"number"===r&&isNaN(n)||("number"!==r||st.cssNumber[l]||(n+="px"),st.support.clearCloneStyle||""!==n||0!==i.indexOf("background")||(c[i]="inherit"),a&&"set"in a&&(n=a.set(e,n,o))===t||(c[i]=n)),void 0)}},css:function(e,i,n,o){var s,r,a,l=st.camelCase(i);return i=st.cssProps[l]||(st.cssProps[l]=_(e.style,l)),a=st.cssHooks[i]||st.cssHooks[l],a&&"get"in a&&(s=a.get(e,!0,n)),s===t&&(s=qt(e,i,o)),"normal"===s&&i in Jt&&(s=Jt[i]),""===n||n?(r=parseFloat(s),n===!0||st.isNumeric(r)?r||0:s):s}}),qt=function(e,i,n){var o,s,r,a=n||b(e),l=a?a.getPropertyValue(i)||a[i]:t,c=e.style;return a&&(""!==l||st.contains(e.ownerDocument,e)||(l=st.style(e,i)),Yt.test(l)&&Vt.test(i)&&(o=c.width,s=c.minWidth,r=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=o,c.minWidth=s,c.maxWidth=r)),l},st.each(["height","width"],function(e,t){st.cssHooks[t]={get:function(e,i,n){return i?0===e.offsetWidth&&Bt.test(st.css(e,"display"))?st.swap(e,Xt,function(){return C(e,t,n)}):C(e,t,n):void 0},set:function(e,i,n){var o=n&&b(e);return x(e,i,n?k(e,t,n,st.support.boxSizing&&"border-box"===st.css(e,"boxSizing",!1,o),o):0)}}}),st(function(){st.support.reliableMarginRight||(st.cssHooks.marginRight={get:function(e,t){return t?st.swap(e,{display:"inline-block"},qt,[e,"marginRight"]):void 0}}),!st.support.pixelPosition&&st.fn.position&&st.each(["top","left"],function(e,t){st.cssHooks[t]={get:function(e,i){return i?(i=qt(e,t),Yt.test(i)?st(e).position()[t]+"px":i):void 0}}})}),st.expr&&st.expr.filters&&(st.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},st.expr.filters.visible=function(e){return!st.expr.filters.hidden(e)}),st.each({margin:"",padding:"",border:"Width"},function(e,t){st.cssHooks[e+t]={expand:function(i){for(var n=0,o={},s="string"==typeof i?i.split(" "):[i];4>n;n++)o[e+Zt[n]+t]=s[n]||s[n-2]||s[0];return o}},Vt.test(e)||(st.cssHooks[e+t].set=x)});var ei=/%20/g,ti=/\[\]$/,ii=/\r?\n/g,ni=/^(?:submit|button|image|reset|file)$/i,oi=/^(?:input|select|textarea|keygen)/i;st.fn.extend({serialize:function(){return st.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=st.prop(this,"elements");return e?st.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!st(this).is(":disabled")&&oi.test(this.nodeName)&&!ni.test(e)&&(this.checked||!zt.test(e))}).map(function(e,t){var i=st(this).val();return null==i?null:st.isArray(i)?st.map(i,function(e){return{name:t.name,value:e.replace(ii,"\r\n")}}):{name:t.name,value:i.replace(ii,"\r\n")}}).get()}}),st.param=function(e,i){var n,o=[],s=function(e,t){t=st.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=st.ajaxSettings&&st.ajaxSettings.traditional),st.isArray(e)||e.jquery&&!st.isPlainObject(e))st.each(e,function(){s(this.name,this.value)});else for(n in e)S(n,e[n],i,s);return o.join("&").replace(ei,"+")},st.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){st.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),st.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var si,ri,ai=st.now(),li=/\?/,ci=/#.*$/,di=/([?&])_=[^&]*/,hi=/^(.*?):[ \t]*([^\r\n]*)$/gm,ui=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pi=/^(?:GET|HEAD)$/,fi=/^\/\//,mi=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,gi=st.fn.load,vi={},_i={},yi="*/".concat("*");try{ri=B.href}catch(bi){ri=V.createElement("a"),ri.href="",ri=ri.href}si=mi.exec(ri.toLowerCase())||[],st.fn.load=function(e,i,n){if("string"!=typeof e&&gi)return gi.apply(this,arguments);var o,s,r,a=this,l=e.indexOf(" ");return l>=0&&(o=e.slice(l),e=e.slice(0,l)),st.isFunction(i)?(n=i,i=t):i&&"object"==typeof i&&(s="POST"),a.length>0&&st.ajax({url:e,type:s,dataType:"html",data:i}).done(function(e){r=arguments,a.html(o?st("<div>").append(st.parseHTML(e)).find(o):e)}).complete(n&&function(e,t){a.each(n,r||[e.responseText,t,e])}),this},st.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){st.fn[t]=function(e){return this.on(t,e)}}),st.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ri,type:"GET",isLocal:ui.test(si[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":yi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":st.parseJSON,"text xml":st.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?M(M(e,st.ajaxSettings),t):M(st.ajaxSettings,e)},ajaxPrefilter:D(vi),ajaxTransport:D(_i),ajax:function(e,i){function n(e,i,n,a){var c,h,_,y,w,k=i;2!==b&&(b=2,l&&clearTimeout(l),o=t,r=a||"",x.readyState=e>0?4:0,c=e>=200&&300>e||304===e,n&&(y=A(u,x,n)),y=F(u,y,x,c),c?(u.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(st.lastModified[s]=w),w=x.getResponseHeader("etag"),w&&(st.etag[s]=w)),204===e||"HEAD"===u.type?k="nocontent":304===e?k="notmodified":(k=y.state,h=y.data,_=y.error,c=!_)):(_=k,(e||!k)&&(k="error",0>e&&(e=0))),x.status=e,x.statusText=(i||k)+"",c?m.resolveWith(p,[h,k,x]):m.rejectWith(p,[x,k,_]),x.statusCode(v),v=t,d&&f.trigger(c?"ajaxSuccess":"ajaxError",[x,u,c?h:_]),g.fireWith(p,[x,k]),d&&(f.trigger("ajaxComplete",[x,u]),--st.active||st.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var o,s,r,a,l,c,d,h,u=st.ajaxSetup({},i),p=u.context||u,f=u.context&&(p.nodeType||p.jquery)?st(p):st.event,m=st.Deferred(),g=st.Callbacks("once memory"),v=u.statusCode||{},_={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!a)for(a={};t=hi.exec(r);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?r:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return b||(e=y[i]=y[i]||e,_[e]=t),this},overrideMimeType:function(e){return b||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return o&&o.abort(t),n(0,t),this}};if(m.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,u.url=((e||u.url||ri)+"").replace(ci,"").replace(fi,si[1]+"//"),u.type=i.method||i.type||u.method||u.type,u.dataTypes=st.trim(u.dataType||"*").toLowerCase().match(at)||[""],null==u.crossDomain&&(c=mi.exec(u.url.toLowerCase()),u.crossDomain=!(!c||c[1]===si[1]&&c[2]===si[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(si[3]||("http:"===si[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=st.param(u.data,u.traditional)),E(vi,u,i,x),2===b)return x;d=u.global,d&&0===st.active++&&st.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!pi.test(u.type),s=u.url,u.hasContent||(u.data&&(s=u.url+=(li.test(s)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=di.test(s)?s.replace(di,"$1_="+ai++):s+(li.test(s)?"&":"?")+"_="+ai++)),u.ifModified&&(st.lastModified[s]&&x.setRequestHeader("If-Modified-Since",st.lastModified[s]),st.etag[s]&&x.setRequestHeader("If-None-Match",st.etag[s])),(u.data&&u.hasContent&&u.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",u.contentType),x.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+yi+"; q=0.01":""):u.accepts["*"]);for(h in u.headers)x.setRequestHeader(h,u.headers[h]);if(u.beforeSend&&(u.beforeSend.call(p,x,u)===!1||2===b))return x.abort();w="abort";for(h in{success:1,error:1,complete:1})x[h](u[h]);if(o=E(_i,u,i,x)){x.readyState=1,d&&f.trigger("ajaxSend",[x,u]),u.async&&u.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},u.timeout));try{b=1,o.send(_,n)}catch(k){if(!(2>b))throw k;n(-1,k)}}else n(-1,"No Transport");return x},getJSON:function(e,t,i){return st.get(e,t,i,"json")},getScript:function(e,i){return st.get(e,t,i,"script")}}),st.each(["get","post"],function(e,i){st[i]=function(e,n,o,s){return st.isFunction(n)&&(s=s||o,o=n,n=t),st.ajax({url:e,type:i,dataType:s,data:n,success:o})}}),st.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return st.globalEval(e),e}}}),st.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),st.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,o){t=st("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&o("error"===e.type?404:200,e.type)}),V.head.appendChild(t[0])},abort:function(){i&&i()}}}});var wi=[],xi=/(=)\?(?=&|$)|\?\?/;st.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=wi.pop()||st.expando+"_"+ai++;return this[e]=!0,e}}),st.ajaxPrefilter("json jsonp",function(i,n,o){var s,r,a,l=i.jsonp!==!1&&(xi.test(i.url)?"url":"string"==typeof i.data&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&xi.test(i.data)&&"data");return l||"jsonp"===i.dataTypes[0]?(s=i.jsonpCallback=st.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,l?i[l]=i[l].replace(xi,"$1"+s):i.jsonp!==!1&&(i.url+=(li.test(i.url)?"&":"?")+i.jsonp+"="+s),i.converters["script json"]=function(){return a||st.error(s+" was not called"),a[0]},i.dataTypes[0]="json",r=e[s],e[s]=function(){a=arguments},o.always(function(){e[s]=r,i[s]&&(i.jsonpCallback=n.jsonpCallback,wi.push(s)),a&&st.isFunction(r)&&r(a[0]),a=r=t}),"script"):void 0}),st.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var ki=st.ajaxSettings.xhr(),Ci={0:200,1223:204},ji=0,Ti={};e.ActiveXObject&&st(e).on("unload",function(){for(var e in Ti)Ti[e]();Ti=t}),st.support.cors=!!ki&&"withCredentials"in ki,st.support.ajax=ki=!!ki,st.ajaxTransport(function(e){var i;return st.support.cors||ki&&!e.crossDomain?{send:function(n,o){var s,r,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(s in n)a.setRequestHeader(s,n[s]);i=function(e){return function(){i&&(delete Ti[r],i=a.onload=a.onerror=null,"abort"===e?a.abort():"error"===e?o(a.status||404,a.statusText):o(Ci[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:t,a.getAllResponseHeaders()))}},a.onload=i(),a.onerror=i("error"),i=Ti[r=ji++]=i("abort"),a.send(e.hasContent&&e.data||null)},abort:function(){i&&i()}}:void 0});var Si,Di,Ei=/^(?:toggle|show|hide)$/,Mi=new RegExp("^(?:([+-])=|)("+rt+")([a-z%]*)$","i"),Ai=/queueHooks$/,Fi=[N],Oi={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),o=Mi.exec(t),s=o&&o[3]||(st.cssNumber[e]?"":"px"),r=(st.cssNumber[e]||"px"!==s&&+n)&&Mi.exec(st.css(i.elem,e)),a=1,l=20;if(r&&r[3]!==s){s=s||r[3],o=o||[],r=+n||1;do a=a||".5",r/=a,st.style(i.elem,e,r+s);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return o&&(r=i.start=+r||+n||0,i.unit=s,i.end=o[1]?r+(o[1]+1)*o[2]:+o[2]),i}]};st.Animation=st.extend(I,{tweener:function(e,t){st.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,o=e.length;o>n;n++)i=e[n],Oi[i]=Oi[i]||[],Oi[i].unshift(t)},prefilter:function(e,t){t?Fi.unshift(e):Fi.push(e)}}),st.Tween=R,R.prototype={constructor:R,init:function(e,t,i,n,o,s){this.elem=e,this.prop=i,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(st.cssNumber[i]?"":"px")},cur:function(){var e=R.propHooks[this.prop];return e&&e.get?e.get(this):R.propHooks._default.get(this)},run:function(e){var t,i=R.propHooks[this.prop];return this.pos=t=this.options.duration?st.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=st.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){st.fx.step[e.prop]?st.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[st.cssProps[e.prop]]||st.cssHooks[e.prop])?st.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},st.each(["toggle","show","hide"],function(e,t){var i=st.fn[t];st.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate($(t,!0),e,n,o)}}),st.fn.extend({fadeTo:function(e,t,i,n){return this.filter(y).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=st.isEmptyObject(e),s=st.speed(t,i,n),r=function(){var t=I(this,st.extend({},e),s);(o||gt.get(this,"finish"))&&t.stop(!0)};return r.finish=r,o||s.queue===!1?this.each(r):this.queue(s.queue,r)},stop:function(e,i,n){var o=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=st.timers,r=gt.get(this);if(i)r[i]&&r[i].stop&&o(r[i]);else for(i in r)r[i]&&r[i].stop&&Ai.test(i)&&o(r[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&st.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=gt.get(this),n=i[e+"queue"],o=i[e+"queueHooks"],s=st.timers,r=n?n.length:0;for(i.finish=!0,st.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;r>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),st.each({slideDown:$("show"),slideUp:$("hide"),slideToggle:$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){st.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),st.speed=function(e,t,i){var n=e&&"object"==typeof e?st.extend({},e):{complete:i||!i&&t||st.isFunction(e)&&e,duration:e,easing:i&&t||t&&!st.isFunction(t)&&t};return n.duration=st.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in st.fx.speeds?st.fx.speeds[n.duration]:st.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){st.isFunction(n.old)&&n.old.call(this),n.queue&&st.dequeue(this,n.queue)},n},st.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},st.timers=[],st.fx=R.prototype.init,st.fx.tick=function(){var e,i=st.timers,n=0;for(Si=st.now();n<i.length;n++)e=i[n],e()||i[n]!==e||i.splice(n--,1);i.length||st.fx.stop(),Si=t},st.fx.timer=function(e){e()&&st.timers.push(e)&&st.fx.start()},st.fx.interval=13,st.fx.start=function(){Di||(Di=setInterval(st.fx.tick,st.fx.interval))},st.fx.stop=function(){clearInterval(Di),Di=null},st.fx.speeds={slow:600,fast:200,_default:400},st.fx.step={},st.expr&&st.expr.filters&&(st.expr.filters.animated=function(e){return st.grep(st.timers,function(t){return e===t.elem}).length}),st.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){st.offset.setOffset(this,e,t)});var i,n,o=this[0],s={top:0,left:0},r=o&&o.ownerDocument;if(r)return i=r.documentElement,st.contains(i,o)?(typeof o.getBoundingClientRect!==W&&(s=o.getBoundingClientRect()),n=L(r),{top:s.top+n.pageYOffset-i.clientTop,left:s.left+n.pageXOffset-i.clientLeft}):s},st.offset={setOffset:function(e,t,i){var n,o,s,r,a,l,c,d=st.css(e,"position"),h=st(e),u={};"static"===d&&(e.style.position="relative"),a=h.offset(),s=st.css(e,"top"),l=st.css(e,"left"),c=("absolute"===d||"fixed"===d)&&(s+l).indexOf("auto")>-1,c?(n=h.position(),r=n.top,o=n.left):(r=parseFloat(s)||0,o=parseFloat(l)||0),st.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(u.top=t.top-a.top+r),null!=t.left&&(u.left=t.left-a.left+o),"using"in t?t.using.call(e,u):h.css(u)}},st.fn.extend({position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===st.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),st.nodeName(e[0],"html")||(n=e.offset()),n.top+=st.css(e[0],"borderTopWidth",!0),n.left+=st.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-st.css(i,"marginTop",!0),left:t.left-n.left-st.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||U;e&&!st.nodeName(e,"html")&&"static"===st.css(e,"position");)e=e.offsetParent;return e||U})}}),st.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(i,n){var o="pageYOffset"===n;st.fn[i]=function(s){return st.access(this,function(i,s,r){var a=L(i);return r===t?a?a[n]:i[s]:(a?a.scrollTo(o?e.pageXOffset:r,o?r:e.pageYOffset):i[s]=r,void 0)},i,s,arguments.length,null)}}),st.each({Height:"height",Width:"width"},function(e,i){st.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,o){st.fn[o]=function(o,s){var r=arguments.length&&(n||"boolean"!=typeof o),a=n||(o===!0||s===!0?"margin":"border");return st.access(this,function(i,n,o){var s;return st.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(s=i.documentElement,Math.max(i.body["scroll"+e],s["scroll"+e],i.body["offset"+e],s["offset"+e],s["client"+e])):o===t?st.css(i,n,a):st.style(i,n,o,a)},i,r?o:t,r,null)}})}),st.fn.size=function(){return this.length},st.fn.andSelf=st.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=st:"function"==typeof define&&define.amd&&define("jquery",[],function(){return st}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=st)}(window),define("oroui/js/extend/jquery",["jquery"],function(e){return e.ajaxSetup({headers:{"X-CSRF-Header":1}}),e.expr[":"].parents=function(t,i,n){return e(t).parents(n[3]).length<1},e.isActive=e.proxy(function(t){return"undefined"!==e.type(t)&&(this.active=t),e.active||this.active},{active:!1}),e.fn.focusAndSetCaretAtEnd=function(){if(this.length){var t=this[0],i=t.value.length;if(document.selection){e(t).focus();var n=document.selection.createRange();n.moveStart("character",-i),n.moveStart("character",i),n.moveEnd("character",0),n.select()}else(t.selectionStart||"0"==t.selectionStart)&&(t.selectionStart=i,t.selectionEnd=i,e(t).focus())}},e}),function(){function e(e,t){var i=e.split("."),n=c;!(i[0]in n)&&n.execScript&&n.execScript("var "+i[0]);for(var o;i.length&&(o=i.shift());)i.length||void 0===t?n=n[o]?n[o]:n[o]={}:n[o]=t}function t(e){this.c={},this.a=[];var n=arguments.length;if(n>1){if(n%2)throw Error("Uneven number of arguments");for(var o=0;n>o;o+=2)this.set(arguments[o],arguments[o+1])}else if(e){var s;if(e instanceof t)for(i(e),o=e.a.concat(),i(e),s=[],n=0;n<e.a.length;n++)s.push(e.c[e.a[n]]);else{var n=[],r=0;for(o in e)n[r++]=o;o=n,n=[],r=0;for(s in e)n[r++]=e[s];s=n}for(n=0;n<o.length;n++)this.set(o[n],s[n])}}function i(e){if(e.f!=e.a.length){for(var t=0,i=0;t<e.a.length;){var o=e.a[t];n(e.c,o)&&(e.a[i++]=o),t++}e.a.length=i}if(e.f!=e.a.length){for(var s={},i=t=0;t<e.a.length;)o=e.a[t],n(s,o)||(e.a[i++]=o,s[o]=1),t++;e.a.length=i}}function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(){return c.navigator?c.navigator.userAgent:null}function s(e,t){this.b=e||{e:"",prefix:"",host:"",scheme:""},this.h(t||{})}function r(e,t,i,n){var o,s=RegExp(/\[\]$/);if(i instanceof Array)h(i,function(i,o){s.test(t)?n(t,i):r(e,t+"["+("object"==typeof i?o:"")+"]",i,n)});else if("object"==typeof i)for(o in i)r(e,t+"["+o+"]",i[o],n);else n(t,i)}var a,l=!1,c=this,d=Array.prototype,h=d.forEach?function(e,t,i){d.forEach.call(e,t,i)}:function(e,t,i){for(var n=e.length,o="string"==typeof e?e.split(""):e,s=0;n>s;s++)s in o&&t.call(i,o[s],s,e)};t.prototype.f=0,t.prototype.p=0,t.prototype.get=function(e,t){return n(this.c,e)?this.c[e]:t},t.prototype.set=function(e,t){n(this.c,e)||(this.f++,this.a.push(e),this.p++),this.c[e]=t};var u,p,f,m;m=f=p=u=l;var g;if(g=o()){var v=c.navigator;u=0==g.indexOf("Opera"),p=!u&&-1!=g.indexOf("MSIE"),f=!u&&-1!=g.indexOf("WebKit"),m=!u&&!f&&"Gecko"==v.product}var _,y=p,b=m,w=f;if(u&&c.opera){var x=c.opera.version;"function"==typeof x&&x()}else b?_=/rv\:([^\);]+)(\)|;)/:y?_=/MSIE\s+([^\);]+)(\)|;)/:w&&(_=/WebKit\/(\S+)/),_&&_.exec(o());s.g=function(){return s.j?s.j:s.j=new s},a=s.prototype,a.h=function(e){this.d=new t(e)},a.o=function(){return this.d},a.k=function(e){this.b.e=e},a.n=function(){return this.b.e},a.l=function(e){this.b.prefix=e},a.i=function(e){var t=this.b.prefix+e;if(n(this.d.c,t))e=t;else if(!n(this.d.c,e))throw Error('The route "'+e+'" does not exist.');return this.d.get(e)},a.m=function(e,t,i){var n,o=this.i(e),s=t||{},a={};for(n in s)a[n]=s[n];var c="",d=!0,u="";h(o.tokens,function(t){if("text"===t[0])c=t[1]+c,d=l;else{if("variable"!==t[0])throw Error('The token type "'+t[0]+'" is not supported.');var i=t[3]in o.defaults;if(l===d||!i||t[3]in s&&s[t[3]]!=o.defaults[t[3]]){if(t[3]in s){var i=s[t[3]],n=t[3];n in a&&delete a[n]}else{if(!i){if(d)return;throw Error('The route "'+e+'" requires the parameter "'+t[3]+'".')}i=o.defaults[t[3]]}(!0!==i&&l!==i&&""!==i||!d)&&(n=encodeURIComponent(i).replace(/%2F/g,"/"),"null"===n&&null===i&&(n=""),c=t[1]+n+c),d=l}else i&&(t=t[3],t in a&&delete a[t])}}),""===c&&(c="/"),h(o.hosttokens,function(e){var t;if("text"===e[0])u=e[1]+u;else if("variable"===e[0]){if(e[3]in s){t=s[e[3]];var i=e[3];i in a&&delete a[i]}else e[3]in o.defaults&&(t=o.defaults[e[3]]);u=e[1]+t+u}}),c=this.b.e+c,"_scheme"in o.requirements&&this.b.scheme!=o.requirements._scheme?c=o.requirements._scheme+"://"+(u||this.b.host)+c:u&&this.b.host!==u?c=this.b.scheme+"://"+u+c:!0===i&&(c=this.b.scheme+"://"+this.b.host+c);var p,t=0;for(p in a)t++;if(t>0){var f,m=[];p=function(e,t){t="function"==typeof t?t():t,m.push(encodeURIComponent(e)+"="+encodeURIComponent(null===t?"":t))};for(f in a)r(this,f,a[f],p);c=c+"?"+m.join("&").replace(/%20/g,"+")}return c},e("fos.Router",s),e("fos.Router.setData",function(e){var t=s.g();t.k(e.base_url),t.h(e.routes),"prefix"in e&&t.l(e.prefix),t.b.host=e.host,t.b.scheme=e.scheme}),s.getInstance=s.g,s.prototype.setRoutes=s.prototype.h,s.prototype.getRoutes=s.prototype.o,s.prototype.setBaseUrl=s.prototype.k,s.prototype.getBaseUrl=s.prototype.n,s.prototype.generate=s.prototype.m,s.prototype.setPrefix=s.prototype.l,s.prototype.getRoute=s.prototype.i,window.Routing=s.g()}(),define("routing",function(e){return function(){var t;return t||e.window.Routing}}(this)),require(["jquery","routing"],function(e,t){var i=".access_level_value a",n=".access_level_value_choice",o="access_level_value_link",s="oro_security_access_levels",r="data-identity",a="data-selector-name",l="data-selector-id",c="data-value";e(function(){e(document).on("click",i,function(){var i=e(this),d=i.parent().parent(),h=d.find(n),u=d.find(o);i.hide();var p=d.attr(r);return p=p.replace(/\\/g,"_"),e.ajax({url:t.generate(s,{oid:p}),success:function(t){var i=e("<select>");i.attr("name",d.attr(a)),i.attr("id",d.attr(l)),i.attr("class","security-permission"),e.each(t,function(t,n){if("template_name"!==t){var o=e("<option>").attr("value",t).text(n);d.attr(c)==t&&o.attr("selected","selected"),i.append(o)}}),h.append(i),h.show(),u.remove(),e("select").uniform("update")},error:function(){i.show()}}),!1})})}),define("orosecurity/js/security-access-levels",function(){}),function(){var e=this,t=e._,i={},n=Array.prototype,o=Object.prototype,s=Function.prototype,r=n.push,a=n.slice,l=n.concat,c=o.toString,d=o.hasOwnProperty,h=n.forEach,u=n.map,p=n.reduce,f=n.reduceRight,m=n.filter,g=n.every,v=n.some,_=n.indexOf,y=n.lastIndexOf,b=Array.isArray,w=Object.keys,x=s.bind,k=function(e){return e instanceof k?e:this instanceof k?(this._wrapped=e,void 0):new k(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):e._=k,k.VERSION="1.5.1";var C=k.each=k.forEach=function(e,t,n){if(null!=e)if(h&&e.forEach===h)e.forEach(t,n);else if(e.length===+e.length){for(var o=0,s=e.length;s>o;o++)if(t.call(n,e[o],o,e)===i)return}else for(var r=k.keys(e),o=0,s=r.length;s>o;o++)if(t.call(n,e[r[o]],r[o],e)===i)return};k.map=k.collect=function(e,t,i){var n=[];return null==e?n:u&&e.map===u?e.map(t,i):(C(e,function(e,o,s){n.push(t.call(i,e,o,s))}),n)};var j="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,i,n){var o=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return n&&(t=k.bind(t,n)),o?e.reduce(t,i):e.reduce(t);if(C(e,function(e,s,r){o?i=t.call(n,i,e,s,r):(i=e,o=!0)}),!o)throw new TypeError(j);return i},k.reduceRight=k.foldr=function(e,t,i,n){var o=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return n&&(t=k.bind(t,n)),o?e.reduceRight(t,i):e.reduceRight(t);var s=e.length;if(s!==+s){var r=k.keys(e);s=r.length}if(C(e,function(a,l,c){l=r?r[--s]:--s,o?i=t.call(n,i,e[l],l,c):(i=e[l],o=!0)}),!o)throw new TypeError(j);return i},k.find=k.detect=function(e,t,i){var n;return T(e,function(e,o,s){return t.call(i,e,o,s)?(n=e,!0):void 0}),n},k.filter=k.select=function(e,t,i){var n=[];return null==e?n:m&&e.filter===m?e.filter(t,i):(C(e,function(e,o,s){t.call(i,e,o,s)&&n.push(e)}),n)},k.reject=function(e,t,i){return k.filter(e,function(e,n,o){return!t.call(i,e,n,o)},i)},k.every=k.all=function(e,t,n){t||(t=k.identity);var o=!0;return null==e?o:g&&e.every===g?e.every(t,n):(C(e,function(e,s,r){return(o=o&&t.call(n,e,s,r))?void 0:i}),!!o)};var T=k.some=k.any=function(e,t,n){t||(t=k.identity);var o=!1;return null==e?o:v&&e.some===v?e.some(t,n):(C(e,function(e,s,r){return o||(o=t.call(n,e,s,r))?i:void 0}),!!o)};k.contains=k.include=function(e,t){return null==e?!1:_&&e.indexOf===_?-1!=e.indexOf(t):T(e,function(e){return e===t})},k.invoke=function(e,t){var i=a.call(arguments,2),n=k.isFunction(t);return k.map(e,function(e){return(n?t:e[t]).apply(e,i)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.where=function(e,t,i){return k.isEmpty(t)?i?void 0:[]:k[i?"find":"filter"](e,function(e){for(var i in t)if(t[i]!==e[i])return!1;return!0})},k.findWhere=function(e,t){return k.where(e,t,!0)},k.max=function(e,t,i){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&k.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return C(e,function(e,o,s){var r=t?t.call(i,e,o,s):e;r>n.computed&&(n={value:e,computed:r})}),n.value},k.min=function(e,t,i){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&k.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return C(e,function(e,o,s){var r=t?t.call(i,e,o,s):e;r<n.computed&&(n={value:e,computed:r})}),n.value},k.shuffle=function(e){var t,i=0,n=[];return C(e,function(e){t=k.random(i++),n[i-1]=n[t],n[t]=e}),n};var S=function(e){return k.isFunction(e)?e:function(t){return t[e]}};k.sortBy=function(e,t,i){var n=S(t);return k.pluck(k.map(e,function(e,t,o){return{value:e,index:t,criteria:n.call(i,e,t,o)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index<t.index?-1:1}),"value")};var D=function(e){return function(t,i,n){var o={},s=null==i?k.identity:S(i);return C(t,function(i,r){var a=s.call(n,i,r,t);e(o,a,i)}),o}};k.groupBy=D(function(e,t,i){(k.has(e,t)?e[t]:e[t]=[]).push(i)}),k.indexBy=D(function(e,t,i){e[t]=i}),k.countBy=D(function(e,t){k.has(e,t)?e[t]++:e[t]=1}),k.sortedIndex=function(e,t,i,n){i=null==i?k.identity:S(i);for(var o=i.call(n,t),s=0,r=e.length;r>s;){var a=s+r>>>1;i.call(n,e[a])<o?s=a+1:r=a}return s},k.toArray=function(e){return e?k.isArray(e)?a.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:a.call(e,0,t)},k.initial=function(e,t,i){return a.call(e,0,e.length-(null==t||i?1:t))},k.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,i){return a.call(e,null==t||i?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var E=function(e,t,i){return t&&k.every(e,k.isArray)?l.apply(i,e):(C(e,function(e){k.isArray(e)||k.isArguments(e)?t?r.apply(i,e):E(e,t,i):i.push(e)}),i)};k.flatten=function(e,t){return E(e,t,[])},k.without=function(e){return k.difference(e,a.call(arguments,1))},k.uniq=k.unique=function(e,t,i,n){k.isFunction(t)&&(n=i,i=t,t=!1);var o=i?k.map(e,i,n):e,s=[],r=[];return C(o,function(i,n){(t?n&&r[r.length-1]===i:k.contains(r,i))||(r.push(i),s.push(e[n]))}),s},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(e){var t=a.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.indexOf(t,e)>=0})})},k.difference=function(e){var t=l.apply(n,a.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=k.max(k.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=k.pluck(arguments,""+i);return t},k.object=function(e,t){if(null==e)return{};for(var i={},n=0,o=e.length;o>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},k.indexOf=function(e,t,i){if(null==e)return-1;var n=0,o=e.length;if(i){if("number"!=typeof i)return n=k.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,o+i):i}if(_&&e.indexOf===_)return e.indexOf(t,i);for(;o>n;n++)if(e[n]===t)return n;return-1},k.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(y&&e.lastIndexOf===y)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var o=n?i:e.length;o--;)if(e[o]===t)return o;return-1},k.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),o=0,s=new Array(n);n>o;)s[o++]=e,e+=i;return s};var M=function(){};k.bind=function(e,t){var i,n;if(x&&e.bind===x)return x.apply(e,a.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(a.call(arguments)));M.prototype=e.prototype;var o=new M;M.prototype=null;var s=e.apply(o,i.concat(a.call(arguments)));return Object(s)===s?s:o}},k.partial=function(e){var t=a.call(arguments,1);return function(){return e.apply(this,t.concat(a.call(arguments)))}},k.bindAll=function(e){var t=a.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return C(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var i={};return t||(t=k.identity),function(){var n=t.apply(this,arguments);
return k.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},k.delay=function(e,t){var i=a.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(a.call(arguments,1)))},k.throttle=function(e,t,i){var n,o,s,r=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:new Date,r=null,s=e.apply(n,o)};return function(){var c=new Date;a||i.leading!==!1||(a=c);var d=t-(c-a);return n=this,o=arguments,0>=d?(clearTimeout(r),r=null,a=c,s=e.apply(n,o)):r||i.trailing===!1||(r=setTimeout(l,d)),s}},k.debounce=function(e,t,i){var n,o=null;return function(){var s=this,r=arguments,a=function(){o=null,i||(n=e.apply(s,r))},l=i&&!o;return clearTimeout(o),o=setTimeout(a,t),l&&(n=e.apply(s,r)),n}},k.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return function(){var i=[e];return r.apply(i,arguments),t.apply(this,i)}},k.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},k.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},k.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)k.has(e,i)&&t.push(i);return t},k.values=function(e){for(var t=k.keys(e),i=t.length,n=new Array(i),o=0;i>o;o++)n[o]=e[t[o]];return n},k.pairs=function(e){for(var t=k.keys(e),i=t.length,n=new Array(i),o=0;i>o;o++)n[o]=[t[o],e[t[o]]];return n},k.invert=function(e){for(var t={},i=k.keys(e),n=0,o=i.length;o>n;n++)t[e[i[n]]]=i[n];return t},k.functions=k.methods=function(e){var t=[];for(var i in e)k.isFunction(e[i])&&t.push(i);return t.sort()},k.extend=function(e){return C(a.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},k.pick=function(e){var t={},i=l.apply(n,a.call(arguments,1));return C(i,function(i){i in e&&(t[i]=e[i])}),t},k.omit=function(e){var t={},i=l.apply(n,a.call(arguments,1));for(var o in e)k.contains(i,o)||(t[o]=e[o]);return t},k.defaults=function(e){return C(a.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var A=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var o=c.call(e);if(o!=c.call(t))return!1;switch(o){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=i.length;s--;)if(i[s]==e)return n[s]==t;var r=e.constructor,a=t.constructor;if(r!==a&&!(k.isFunction(r)&&r instanceof r&&k.isFunction(a)&&a instanceof a))return!1;i.push(e),n.push(t);var l=0,d=!0;if("[object Array]"==o){if(l=e.length,d=l==t.length)for(;l--&&(d=A(e[l],t[l],i,n)););}else{for(var h in e)if(k.has(e,h)&&(l++,!(d=k.has(t,h)&&A(e[h],t[h],i,n))))break;if(d){for(h in t)if(k.has(t,h)&&!l--)break;d=!l}}return i.pop(),n.pop(),d};k.isEqual=function(e,t){return A(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=b||function(e){return"[object Array]"==c.call(e)},k.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return d.call(e,t)},k.noConflict=function(){return e._=t,this},k.identity=function(e){return e},k.times=function(e,t,i){for(var n=Array(Math.max(0,e)),o=0;e>o;o++)n[o]=t.call(i,o);return n},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};F.unescape=k.invert(F.escape);var O={escape:new RegExp("["+k.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(F.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(O[e],function(t){return F[e][t]})}}),k.result=function(e,t){if(null==e)return void 0;var i=e[t];return k.isFunction(i)?i.call(e):i},k.mixin=function(e){C(k.functions(e),function(t){var i=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return r.apply(e,arguments),R.call(this,i.apply(k,e))}})};var P=0;k.uniqueId=function(e){var t=++P+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,i){var n;i=k.defaults({},i,k.templateSettings);var o=new RegExp([(i.escape||I).source,(i.interpolate||I).source,(i.evaluate||I).source].join("|")+"|$","g"),s=0,r="__p+='";e.replace(o,function(t,i,n,o,a){return r+=e.slice(s,a).replace(N,function(e){return"\\"+z[e]}),i&&(r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(r+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(r+="';\n"+o+"\n__p+='"),s=a+t.length,t}),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{n=new Function(i.variable||"obj","_",r)}catch(a){throw a.source=r,a}if(t)return n(t,k);var l=function(e){return n.call(this,e,k)};return l.source="function("+(i.variable||"obj")+"){\n"+r+"}",l},k.chain=function(e){return k(e).chain()};var R=function(e){return this._chain?k(e).chain():e};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];k.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],R.call(this,i)}}),C(["concat","join","slice"],function(e){var t=n[e];k.prototype[e]=function(){return R.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t;return t||e._}}(this)),function(e,t){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(i,n,o){e.Backbone=t(e,o,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");t(e,exports,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,i,n){var o=e.Backbone,s=[];s.push;var r=s.slice;s.splice,t.VERSION="1.1.2",t.$=n,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=t.Events={on:function(e,t,i){if(!c(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var o=this,s=i.once(function(){o.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,n)},off:function(e,t,n){var o,s,r,a,l,d,h,u;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(a=e?[e]:i.keys(this._events),l=0,d=a.length;d>l;l++)if(e=a[l],r=this._events[e]){if(this._events[e]=o=[],t||n)for(h=0,u=r.length;u>h;h++)s=r[h],(t&&t!==s.callback&&t!==s.callback._callback||n&&n!==s.context)&&o.push(s);o.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!c(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&d(i,t),n&&d(n,arguments),this},stopListening:function(e,t,n){var o=this._listeningTo;if(!o)return this;var s=!t&&!n;n||"object"!=typeof t||(n=this),e&&((o={})[e._listenId]=e);for(var r in o)e=o[r],e.off(t,n,this),(s||i.isEmpty(e._events))&&delete this._listeningTo[r];return this}},l=/\s+/,c=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)e[t].apply(e,[o,i[o]].concat(n));return!1}if(l.test(i)){for(var s=i.split(l),r=0,a=s.length;a>r;r++)e[t].apply(e,[s[r]].concat(n));return!1}return!0},d=function(e,t){var i,n=-1,o=e.length,s=t[0],r=t[1],a=t[2];switch(t.length){case 0:for(;++n<o;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=e[n]).callback.call(i.ctx,s);return;case 2:for(;++n<o;)(i=e[n]).callback.call(i.ctx,s,r);return;case 3:for(;++n<o;)(i=e[n]).callback.call(i.ctx,s,r,a);return;default:for(;++n<o;)(i=e[n]).callback.apply(i.ctx,t);return}},h={listenTo:"on",listenToOnce:"once"};i.each(h,function(e,t){a[t]=function(t,n,o){var s=this._listeningTo||(this._listeningTo={}),r=t._listenId||(t._listenId=i.uniqueId("l"));return s[r]=t,o||"object"!=typeof n||(o=this),t[e](n,o,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(t,a);var u=t.Model=function(e,t){var n=e||{};t||(t={}),this.cid=i.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(u.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var o,s,r,a,l,c,d,h;if(null==e)return this;if("object"==typeof e?(s=e,n=t):(s={})[e]=t,n||(n={}),!this._validate(s,n))return!1;r=n.unset,l=n.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),h=this.attributes,d=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(o in s)t=s[o],i.isEqual(h[o],t)||a.push(o),i.isEqual(d[o],t)?delete this.changed[o]:this.changed[o]=t,r?delete h[o]:h[o]=t;if(!l){a.length&&(this._pending=n);for(var u=0,p=a.length;p>u;u++)this.trigger("change:"+a[u],this,h[a[u]],n)}if(c)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?i.clone(this.changed):!1;var t,n=!1,o=this._changing?this._previousAttributes:this.attributes;for(var s in e)i.isEqual(o[s],t=e[s])||((n||(n={}))[s]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),t.trigger("sync",t,i,e),void 0):!1},N(this,e),this.sync("read",this,e)},save:function(e,t,n){var o,s,r,a=this.attributes;if(null==e||"object"==typeof e?(o=e,n=t):(o={})[e]=t,n=i.extend({validate:!0},n),o&&!n.wait){if(!this.set(o,n))return!1}else if(!this._validate(o,n))return!1;o&&n.wait&&(this.attributes=i.extend({},a,o)),void 0===n.parse&&(n.parse=!0);var l=this,c=n.success;return n.success=function(e){l.attributes=a;var t=l.parse(e,n);return n.wait&&(t=i.extend(o||{},t)),i.isObject(t)&&!l.set(t,n)?!1:(c&&c(l,e,n),l.trigger("sync",l,e,n),void 0)},N(this,n),s=this.isNew()?"create":n.patch?"patch":"update","patch"===s&&(n.attrs=o),r=this.sync(s,this,n),o&&n.wait&&(this.attributes=a),r},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,o=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&o(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)},this.isNew())return e.success(),!1;N(this,e);var s=this.sync("delete",this,e);return e.wait||o(),s},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||z();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];i.each(p,function(e){u.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),i[e].apply(i,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};i.extend(f.prototype,a,{model:u,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,g))},remove:function(e,t){var n=!i.isArray(e);e=n?[e]:i.clone(e),t||(t={});var o,s,r,a;for(o=0,s=e.length;s>o;o++)a=e[o]=this.get(e[o]),a&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,t.silent||(t.index=r,a.trigger("remove",a,this,t)),this._removeReference(a,t));return n?e[0]:e},set:function(e,t){t=i.defaults({},t,m),t.parse&&(e=this.parse(e,t));var n=!i.isArray(e);e=n?e?[e]:[]:i.clone(e);var o,s,r,a,l,c,d,h=t.at,p=this.model,f=this.comparator&&null==h&&t.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=[],_=[],y={},b=t.add,w=t.merge,x=t.remove,k=!f&&b&&x?[]:!1;for(o=0,s=e.length;s>o;o++){if(l=e[o]||{},r=l instanceof u?a=l:l[p.prototype.idAttribute||"id"],c=this.get(r))x&&(y[c.cid]=!0),w&&(l=l===a?a.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),f&&!d&&c.hasChanged(g)&&(d=!0)),e[o]=c;else if(b){if(a=e[o]=this._prepareModel(l,t),!a)continue;v.push(a),this._addReference(a,t)}a=c||a,!k||!a.isNew()&&y[a.id]||k.push(a),y[a.id]=!0}if(x){for(o=0,s=this.length;s>o;++o)y[(a=this.models[o]).cid]||_.push(a);_.length&&this.remove(_,t)}if(v.length||k&&k.length)if(f&&(d=!0),this.length+=v.length,null!=h)for(o=0,s=v.length;s>o;o++)this.models.splice(h+o,0,v[o]);else{k&&(this.models.length=0);var C=k||v;for(o=0,s=C.length;s>o;o++)this.models.push(C[o])}if(d&&this.sort({silent:!0}),!t.silent){for(o=0,s=v.length;s>o;o++)(a=v[o]).trigger("add",a,this,t);(d||k&&k.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,o=this.models.length;o>n;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return r.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return i.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var o=e.reset?"reset":"set";n[o](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},N(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?i.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,o=t.success;return t.success=function(e,i){t.wait&&n.add(e,t),o&&o(e,i,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof u)return e;t=t?i.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(v,function(e){f.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),i[e].apply(i,t)}});var _=["groupBy","countBy","sortBy","indexBy"];i.each(_,function(e){f.prototype[e]=function(t,n){var o=i.isFunction(t)?t:function(e){return e.get(t)};return i[e](this.models,o,n)}});var y=t.View=function(e){this.cid=i.uniqueId("view"),e||(e={}),i.extend(this,i.pick(e,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(y.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=i.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[e[t]]),n){var o=t.match(b),s=o[1],r=o[2];n=i.bind(n,this),s+=".delegateEvents"+this.cid,""===r?this.$el.on(s,n):this.$el.on(s,r,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e["class"]=i.result(this,"className"));var n=t.$("<"+i.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,o){var s=k[e];i.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:s,dataType:"json"};if(o.url||(r.url=i.result(n,"url")||z()),null!=o.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),o.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){r.type="POST",o.emulateJSON&&(r.data._method=s);var a=o.beforeSend;o.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",s),a?a.apply(this,arguments):void 0}}"GET"===r.type||o.emulateJSON||(r.processData=!1),"PATCH"===r.type&&x&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=o.xhr=t.ajax(i.extend(r,o));return n.trigger("request",n,l,o),l};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},j=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,S=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(C.prototype,a,{initialize:function(){},route:function(e,n,o){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var s=this;return t.history.route(e,function(i){var r=s._extractParameters(e,i);s.execute(o,r),s.trigger.apply(s,["route:"+n].concat(r)),s.trigger("route",n,r),t.history.trigger("route",s,n,r)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(D,"\\$&").replace(j,"(?:$1)?").replace(T,function(e,t){return t?e:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var E=t.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,F=/msie [\w.]+/,O=/\/$/,P=/#.*$/;E.started=!1,i.extend(E.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(O,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),o=document.documentMode,s=F.exec(navigator.userAgent.toLowerCase())&&(!o||7>=o);if(this.root=("/"+this.root+"/").replace(A,"/"),s&&this._wantsHashChange){var r=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=r.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),E.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl(),void 0)},loadUrl:function(e){return e=this.fragment=this.getFragment(e),i.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!E.started)return!1;t&&t!==!0||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(P,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new E;var I=function(e,t){var n,o=this;n=e&&i.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},i.extend(n,o,t);var s=function(){this.constructor=n};return s.prototype=o.prototype,n.prototype=new s,e&&i.extend(n.prototype,e),n.__super__=o.prototype,n};u.extend=f.extend=C.extend=y.extend=E.extend=I;var z=function(){throw new Error('A "url" property or function must be specified')},N=function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}};return t}),define("oroui/js/extend/backbone",["underscore","backbone"],function(e,t){return t.View.prototype.disposed=!1,t.View.prototype.dispose=function(){var i,n,o,s,r,a,l,c;if(!this.disposed){for(c=e.toArray(this.subviews),s=0,a=c.length;a>s;s++)o=c[s],o.dispose();for(t.mediator.unsubscribe(null,null,this),this.off(),this.stopListening(),this.$el&&(this.undelegateEvents(),this.$el.removeData()),n=["el","$el","options","model","collection","subviews","subviewsByName","_callbacks"],r=0,l=n.length;l>r;r++)i=n[r],delete this[i];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t.View.prototype.eventNamespace=function(){return".delegateEvents"+this.cid},t.Model.prototype.disposed=!1,t.Model.prototype.dispose=function(){var e,i,n,o;if(!this.disposed){for(this.trigger("dispose",this),t.mediator.unsubscribe(null,null,this),this.stopListening(),this.off(),i=["collection","attributes","changed","_escapedAttributes","_previousAttributes","_silent","_pending","_callbacks"],n=0,o=i.length;o>n;n++)e=i[n],delete this[e];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t.Collection.prototype.disposed=!1,t.Collection.prototype.dispose=function(){var e,i,n,o;if(!this.disposed){for(this.trigger("dispose",this),this.reset([],{silent:!0}),t.mediator.unsubscribe(null,null,this),this.stopListening(),this.off(),i=["model","models","_byId","_byCid","_callbacks"],n=0,o=i.length;o>n;n++)e=i[n],delete this[e];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}),define("oroui/js/tools",["jquery","underscore"],function(e,t){return{debug:!1,packToQueryString:function(t){return e.param(t)},unpackFromQueryString:function(e){for(var t=function(e,i,n){if(i.length>1){var o=i.shift();"undefined"==typeof e[o]&&(e[o]=""==i[0]?[]:{}),t(e[o],i,n)}else e instanceof Array?e.push(n):e[i]=n},i=e.split("&"),n={},o=0;o<i.length;o++){var s=i[o].split("="),r=this.decodeUriComponent(s[0]),a=this.decodeUriComponent(s[1]),l=r.match(/(^[^\[]+)(\[.*\]$)?/),c=l[1];l=l[2]?l[2].match(/(?=\[(.*)\]$)/)[1].split("]["):[],l.unshift(c),t(n,l,a)}return n},decodeUriComponent:function(e){var t=e.replace("+","%20");return t=decodeURIComponent(t)},invertKeys:function(e,i){var n=t.extend({},e);for(var o in i){var s,r;r=o,s=i[o],r in n&&(n[s]=n[r],delete n[r])}return n},isEqualsLoosely:function(e,i){if(t.isObject(e)){if(t.isObject(e)){var n=t.keys(e);if(t.isObject(i)){n=t.unique(n.concat(t.keys(i)));for(var o in n){var s=n[o];if(!t.has(i,s)||!this.isEqualsLoosely(e[s],i[s]))return!1}return!0}return!1}return e==i}if(t.isNumber(e)||t.isNumber(i)){var r=function(e){return t.isString(e)&&""==e?0/0:Number(e)};return r(e)==r(i)}return(e||"")==(i||"")},deepClone:function(t){return e.extend(!0,{},t)},isMobile:function(){return e("body").hasClass("mobile-version")},loadModules:function(e,i,n){var o=t.values(e);require(o,function(){t.each(e,t.bind(function(t,i){e[i]=this[t]},t.object(o,t.toArray(arguments)))),i.call(n||null,e)})},isErrorPage:function(){return Boolean(e("meta[name=error]").length)}}}),function(){var e=function(){var e={},t={},i=function(){return function(){}},n=function(e,n){var o={id:e,exports:{}};n(o.exports,i(),o);var s=t[e]=o.exports;return s},o=function(i){if(t.hasOwnProperty(i))return t[i];if(e.hasOwnProperty(i))return n(i,e[i]);throw new Error('Cannot find module "'+i+'"')};return o.register=function(t,i){e[t]=i},o}();e.register("chaplin/application",function(t,i,n){var o,s,r,a,l,c,d,h,u;u=e("underscore"),s=e("backbone"),a=e("chaplin/dispatcher"),c=e("chaplin/views/layout"),r=e("chaplin/composer"),d=e("chaplin/lib/router"),l=e("chaplin/lib/event_broker"),h=e("chaplin/mediator"),n.exports=o=function(){function e(e){null==e&&(e={}),this.initialize(e)}return e.extend=s.Model.extend,u.extend(e.prototype,l),e.prototype.title="",e.prototype.dispatcher=null,e.prototype.layout=null,e.prototype.router=null,e.prototype.composer=null,e.prototype.started=!1,e.prototype.initialize=function(e){if(null==e&&(e={}),this.started)throw new Error("Application#initialize: App was already started");return this.initRouter(e.routes,e),this.initDispatcher(e),this.initLayout(e),this.initComposer(e),this.initMediator(),this.start()},e.prototype.initDispatcher=function(e){return this.dispatcher=new a(e)},e.prototype.initLayout=function(e){var t;return null==e&&(e={}),null==(t=e.title)&&(e.title=this.title),this.layout=new c(e)},e.prototype.initComposer=function(e){return null==e&&(e={}),this.composer=new r(e)},e.prototype.initMediator=function(){return h.seal()},e.prototype.initRouter=function(e,t){return this.router=new d(t),"function"==typeof e?e(this.router.match):void 0},e.prototype.start=function(){return this.router.startHistory(),this.started=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0},e.prototype.disposed=!1,e.prototype.dispose=function(){var e,t,i,n;if(!this.disposed){for(t=["dispatcher","layout","router","composer"],i=0,n=t.length;n>i;i++)e=t[i],null!=this[e]&&this[e].dispose();return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}()}),e.register("chaplin/mediator",function(t,i,n){var o,s,r,a,l,c,d=[].slice;o=e("backbone"),c=e("underscore"),a=e("chaplin/lib/support"),l=e("chaplin/lib/utils"),r={},r.subscribe=o.Events.on,r.unsubscribe=o.Events.off,r.publish=o.Events.trigger,r._callbacks=null,s=r._handlers={},r.setHandler=function(e,t,i){return s[e]={instance:i,method:t}},r.execute=function(){var e,t,i,n,o;if(n=arguments[0],e=2<=arguments.length?d.call(arguments,1):[],o=!1,"object"==typeof n?(o=n.silent,i=n.name):i=n,t=s[i])return t.method.apply(t.instance,e);if(!o)throw new Error("mediator.execute: "+i+" handler is not defined")},r.removeHandlers=function(e){var t,i,n,o;if(e||(r._handlers={}),l.isArray(e))for(n=0,o=e.length;o>n;n++)i=e[n],delete s[i];else for(i in s)t=s[i],t.instance===e&&delete s[i]
},l.readonly(r,"subscribe","unsubscribe","publish","setHandler","execute","removeHandlers"),r.seal=function(){return a.propertyDescriptors&&Object.seal?Object.seal(r):void 0},l.readonly(r,"seal"),n.exports=r}),e.register("chaplin/dispatcher",function(t,i,n){var o,s,r,a,l,c;c=e("underscore"),o=e("backbone"),a=e("chaplin/mediator"),l=e("chaplin/lib/utils"),r=e("chaplin/lib/event_broker"),n.exports=s=function(){function e(){this.initialize.apply(this,arguments)}return e.extend=o.Model.extend,c.extend(e.prototype,r),e.prototype.previousRoute=null,e.prototype.currentController=null,e.prototype.currentRoute=null,e.prototype.currentParams=null,e.prototype.currentQuery=null,e.prototype.initialize=function(e){return null==e&&(e={}),this.settings=c.defaults(e,{controllerPath:"controllers/",controllerSuffix:"_controller"}),this.subscribeEvent("router:match",this.dispatch)},e.prototype.dispatch=function(e,t,i){var n,o,s=this;return t=t?c.extend({},t):{},i=i?c.extend({},i):{},null==i.query&&(i.query={}),i.forceStartup!==!0&&(i.forceStartup=!1),!i.forceStartup&&(null!=(n=this.currentRoute)?n.controller:void 0)===e.controller&&(null!=(o=this.currentRoute)?o.action:void 0)===e.action&&c.isEqual(this.currentParams,t)&&c.isEqual(this.currentQuery,i.query)?void 0:this.loadController(e.controller,function(n){return s.controllerLoaded(e,t,i,n)})},e.prototype.loadController=function(e,t){var i,n;return i=e+this.settings.controllerSuffix,n=this.settings.controllerPath+i,("undefined"!=typeof define&&null!==define?define.amd:void 0)?require([n],t):setTimeout(function(){return t(require(n))},0)},e.prototype.controllerLoaded=function(e,t,i,n){var o,s,r;return(this.nextPreviousRoute=this.currentRoute)&&(r=c.extend({},this.nextPreviousRoute),null!=this.currentParams&&(r.params=this.currentParams),r.previous&&delete r.previous,s={previous:r}),this.nextCurrentRoute=c.extend({},e,s),o=new n(t,this.nextCurrentRoute,i),this.executeBeforeAction(o,this.nextCurrentRoute,t,i)},e.prototype.executeAction=function(e,t,i,n){return this.currentController&&(this.publishEvent("beforeControllerDispose",this.currentController),this.currentController.dispose(i,t,n)),this.currentController=e,this.currentParams=i,this.currentQuery=n.query,e[t.action](i,t,n),e.redirected?void 0:this.publishEvent("dispatcher:dispatch",this.currentController,i,t,n)},e.prototype.executeBeforeAction=function(e,t,i,n){var o,s,r,a=this;if(o=e.beforeAction,s=function(){return e.redirected||a.currentRoute&&t===a.currentRoute?(a.nextPreviousRoute=a.nextCurrentRoute=null,e.dispose(),void 0):(a.previousRoute=a.nextPreviousRoute,a.currentRoute=a.nextCurrentRoute,a.nextPreviousRoute=a.nextCurrentRoute=null,a.executeAction(e,t,i,n))},!o)return s(),void 0;if("function"!=typeof o)throw new TypeError("Controller#beforeAction: function expected. Old object-like form is not supported.");return r=e.beforeAction(i,t,n),r&&r.then?r.then(s):s()},e.prototype.disposed=!1,e.prototype.dispose=function(){return this.disposed?void 0:(this.unsubscribeAllEvents(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},e}()}),e.register("chaplin/composer",function(t,i,n){var o,s,r,a,l,c,d;d=e("underscore"),o=e("backbone"),l=e("chaplin/mediator"),c=e("chaplin/lib/utils"),r=e("chaplin/lib/composition"),a=e("chaplin/lib/event_broker"),n.exports=s=function(){function e(){this.initialize.apply(this,arguments)}return e.extend=o.Model.extend,d.extend(e.prototype,a),e.prototype.compositions=null,e.prototype.initialize=function(e){return null==e&&(e={}),this.compositions={},l.setHandler("composer:compose",this.compose,this),l.setHandler("composer:retrieve",this.retrieve,this),this.subscribeEvent("dispatcher:dispatch",this.cleanup)},e.prototype.compose=function(e,t,i){return"function"==typeof t?i||t.prototype.dispose?t.prototype instanceof r?this._compose(e,{composition:t,options:i}):this._compose(e,{options:i,compose:function(){var e,i;return this.item=new t(this.options),e=this.item.autoRender,i=void 0===e||!e,i&&"function"==typeof this.item.render?this.item.render():void 0}}):this._compose(e,{compose:t}):"function"==typeof i?this._compose(e,{compose:i,options:t}):this._compose(e,t)},e.prototype._compose=function(e,t){var i,n,o,s;if("function"!=typeof t.compose&&null==t.composition)throw new Error("Composer#compose was used incorrectly");return null!=t.composition?i=new t.composition(t.options):(i=new r(t.options),i.compose=t.compose,t.check&&(i.check=t.check)),n=this.compositions[e],o=!1,n&&n.check(i.options)?n.stale(!1):(n&&n.dispose(),s=i.compose(i.options),o="function"==typeof(null!=s?s.then:void 0),i.stale(!1),this.compositions[e]=i),o?s:this.compositions[e].item},e.prototype.retrieve=function(e){var t;return t=this.compositions[e],t&&!t.stale()?t.item:void 0},e.prototype.cleanup=function(){var e,t,i;i=this.compositions;for(t in i)e=i[t],e.stale()?(e.dispose(),delete this.compositions[t]):e.stale(!0)},e.prototype.dispose=function(){var e,t,i;if(!this.disposed){this.unsubscribeAllEvents(),l.removeHandlers(this),i=this.compositions;for(t in i)e=i[t],e.dispose();return delete this.compositions,this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}()}),e.register("chaplin/controllers/controller",function(t,i,n){var o,s,r,a,l,c,d=[].slice,h={}.hasOwnProperty;c=e("underscore"),o=e("backbone"),r=e("chaplin/lib/event_broker"),l=e("chaplin/lib/utils"),a=e("chaplin/mediator"),n.exports=s=function(){function e(){this.initialize.apply(this,arguments)}return e.extend=o.Model.extend,c.extend(e.prototype,o.Events),c.extend(e.prototype,r),e.prototype.view=null,e.prototype.redirected=!1,e.prototype.initialize=function(){},e.prototype.beforeAction=function(){},e.prototype.adjustTitle=function(e){return a.execute("adjustTitle",e)},e.prototype.reuse=function(){var e;return e=1===arguments.length?"retrieve":"compose",a.execute.apply(a,["composer:"+e].concat(d.call(arguments)))},e.prototype.compose=function(){throw new Error("Controller#compose was moved to Controller#reuse")},e.prototype.redirectTo=function(e,t,i){return this.redirected=!0,l.redirectTo(e,t,i)},e.prototype.disposed=!1,e.prototype.dispose=function(){var e,t;if(!this.disposed){for(t in this)h.call(this,t)&&(e=this[t],e&&"function"==typeof e.dispose&&(e.dispose(),delete this[t]));return this.unsubscribeAllEvents(),this.stopListening(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}()}),e.register("chaplin/models/collection",function(t,i,n){var o,s,r,a,l,c,d={}.hasOwnProperty,h=function(e,t){function i(){this.constructor=e}for(var n in t)d.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};c=e("underscore"),o=e("backbone"),r=e("chaplin/lib/event_broker"),a=e("chaplin/models/model"),l=e("chaplin/lib/utils"),n.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return h(t,e),c.extend(t.prototype,r),t.prototype.model=a,t.prototype.serialize=function(){return this.map(l.serialize)},t.prototype.disposed=!1,t.prototype.dispose=function(){var e,t,i,n;if(!this.disposed){for(this.trigger("dispose",this),this.reset([],{silent:!0}),this.unsubscribeAllEvents(),this.stopListening(),this.off(),t=["model","models","_byId","_byCid","_callbacks"],i=0,n=t.length;n>i;i++)e=t[i],delete this[e];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}(o.Collection)}),e.register("chaplin/models/model",function(t,i,n){var o,s,r,a,l,c,d,h={}.hasOwnProperty,u=function(e,t){function i(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};d=e("underscore"),o=e("backbone"),c=e("chaplin/lib/utils"),s=e("chaplin/lib/event_broker"),a=function(e,t,i){var n,s,r,a,d,h,u,p;n=c.beget(t),null==i&&(i={}),i[e.cid]=!0;for(s in t)if(d=t[s],d instanceof o.Model)n[s]=l(d,e,i);else if(d instanceof o.Collection){for(a=[],p=d.models,h=0,u=p.length;u>h;h++)r=p[h],a.push(l(r,e,i));n[s]=a}return delete i[e.cid],n},l=function(e,t,i){var n;return e===t||e.cid in i?null:(n="function"==typeof e.getAttributes?e.getAttributes():e.attributes,a(e,n,i))},n.exports=r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),d.extend(t.prototype,s),t.prototype.getAttributes=function(){return this.attributes},t.prototype.serialize=function(){return a(this,this.getAttributes())},t.prototype.disposed=!1,t.prototype.dispose=function(){var e,t,i,n;if(!this.disposed){for(this.trigger("dispose",this),this.unsubscribeAllEvents(),this.stopListening(),this.off(),t=["collection","attributes","changed","_escapedAttributes","_previousAttributes","_silent","_pending","_callbacks"],i=0,n=t.length;n>i;i++)e=t[i],delete this[e];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}(o.Model)}),e.register("chaplin/views/layout",function(t,i,n){var o,s,r,a,l,c,d,h,u=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty,f=function(e,t){function i(){this.constructor=e}for(var n in t)p.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};h=e("underscore"),s=e("backbone"),c=e("chaplin/mediator"),d=e("chaplin/lib/utils"),r=e("chaplin/lib/event_broker"),l=e("chaplin/views/view"),o=s.$,n.exports=a=function(e){function t(e){null==e&&(e={}),this.openLink=u(this.openLink,this),this.globalRegions=[],this.title=e.title,e.regions&&(this.regions=e.regions),this.settings=h.defaults(e,{titleTemplate:function(e){var t;return t=e.subtitle?""+e.subtitle+" – ":"",t+e.title},openExternalToBlank:!1,routeLinks:"a, .go-to",skipRouting:".noscript",scrollTo:[0,0]}),c.setHandler("region:show",this.showRegion,this),c.setHandler("region:register",this.registerRegionHandler,this),c.setHandler("region:unregister",this.unregisterRegionHandler,this),c.setHandler("region:find",this.regionByName,this),c.setHandler("adjustTitle",this.adjustTitle,this),t.__super__.constructor.apply(this,arguments),this.settings.routeLinks&&this.startLinkRouting()}return f(t,e),t.prototype.el="body",t.prototype.keepElement=!0,t.prototype.title="",t.prototype.globalRegions=null,t.prototype.listen={"beforeControllerDispose mediator":"scroll"},t.prototype.scroll=function(){var e;return e=this.settings.scrollTo,e?window.scrollTo(e[0],e[1]):void 0},t.prototype.adjustTitle=function(e){var t,i=this;return null==e&&(e=""),t=this.settings.titleTemplate({title:this.title,subtitle:e}),setTimeout(function(){return document.title=t,i.publishEvent("adjustTitle",e,t)},50),t},t.prototype.startLinkRouting=function(){var e;return(e=this.settings.routeLinks)?o?this.$el.on("click",e,this.openLink):this.delegate("click",e,this.openLink):void 0},t.prototype.stopLinkRouting=function(){var e;return e=this.settings.routeLinks,o?e?this.$el.off("click",e):void 0:this.undelegate("click",e,this.openLink)},t.prototype.isExternalLink=function(e){var t,i;return"_blank"===e.target||"external"===e.rel||"http:"!==(t=e.protocol)&&"https:"!==t&&"file:"!==t||(i=e.hostname)!==location.hostname&&""!==i},t.prototype.openLink=function(e){var t,i,n,r,a,l;if(!(d.modifierKeyPressed(e)||(t=o?e.currentTarget:e.delegateTarget,r="A"===t.nodeName,n=t.getAttribute("href")||t.getAttribute("data-href")||null,null==n||""===n||"#"===n.charAt(0)||(a=this.settings.skipRouting,l=typeof a,"function"===l&&!a(n,t)||"string"===l&&(o?o(t).is(a):s.utils.matchesSelector(t,a)))))){if(i=r&&this.isExternalLink(t))return this.settings.openExternalToBlank&&(e.preventDefault(),window.open(n)),void 0;d.redirectTo({url:n}),e.preventDefault()}},t.prototype.registerRegionHandler=function(e,t,i){return null!=t?this.registerGlobalRegion(e,t,i):this.registerGlobalRegions(e)},t.prototype.registerGlobalRegion=function(e,t,i){return this.unregisterGlobalRegion(e,t),this.globalRegions.unshift({instance:e,name:t,selector:i})},t.prototype.registerGlobalRegions=function(e){var t,i,n,o,s,r;for(r=d.getAllPropertyVersions(e,"regions"),o=0,s=r.length;s>o;o++){n=r[o];for(t in n)i=n[t],this.registerGlobalRegion(e,t,i)}},t.prototype.unregisterRegionHandler=function(e,t){return null!=t?this.unregisterGlobalRegion(e,t):this.unregisterGlobalRegions(e)},t.prototype.unregisterGlobalRegion=function(e,t){var i,n;return i=e.cid,this.globalRegions=function(){var e,o,s,r;for(s=this.globalRegions,r=[],e=0,o=s.length;o>e;e++)n=s[e],(n.instance.cid!==i||n.name!==t)&&r.push(n);return r}.call(this)},t.prototype.unregisterGlobalRegions=function(e){var t;return this.globalRegions=function(){var i,n,o,s;for(o=this.globalRegions,s=[],i=0,n=o.length;n>i;i++)t=o[i],t.instance.cid!==e.cid&&s.push(t);return s}.call(this)},t.prototype.regionByName=function(e){var t,i,n,o;for(o=this.globalRegions,i=0,n=o.length;n>i;i++)if(t=o[i],t.name===e&&!t.instance.stale)return t},t.prototype.showRegion=function(e,t){var i;if(i=this.regionByName(e),!i)throw new Error("No region registered under "+e);return t.container=""===i.selector?o?i.instance.$el:i.instance.el:i.instance.noWrap?o?o(i.instance.container).find(i.selector):i.instance.container.querySelector(i.selector):i.instance[o?"$":"find"](i.selector)},t.prototype.dispose=function(){var e,i,n,o;if(!this.disposed){for(this.stopLinkRouting(),o=["globalRegions","title","route"],i=0,n=o.length;n>i;i++)e=o[i],delete this[e];return c.removeHandlers(this),t.__super__.dispose.apply(this,arguments)}},t}(l)}),e.register("chaplin/views/view",function(t,i,n){var o,s,r,a,l,c,d,h,u,p,f={}.hasOwnProperty,m=function(e,t){function i(){this.constructor=e}for(var n in t)f.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},g=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};p=e("underscore"),s=e("backbone"),d=e("chaplin/mediator"),r=e("chaplin/lib/event_broker"),u=e("chaplin/lib/utils"),o=s.$,c=function(){return Function.prototype.bind?function(e,t){return e.bind(t)}:p.bind?p.bind:void 0}(),h=function(){return o?function(e,t){return e.html(t)}:function(e,t){return e.innerHTML=t}}(),l=function(){return o?function(e){var t;return t=o(e.container),"function"==typeof e.containerMethod?e.containerMethod(t,e.el):t[e.containerMethod](e.el)}:function(e){var t;return t="string"==typeof e.container?document.querySelector(e.container):e.container,"function"==typeof e.containerMethod?e.containerMethod(t,e.el):t[e.containerMethod](e.el)}}(),n.exports=a=function(e){function t(e){var i,n,s,r,a=this;if(e)for(i in e)n=e[i],g.call(this.optionNames,i)>=0&&(this[i]=n);r=this.render,this.render=function(){return a.disposed?!1:(r.apply(a,arguments),a.autoAttach&&a.attach.apply(a,arguments),a)},this.subviews=[],this.subviewsByName={},this.noWrap&&(this.region&&(s=d.execute("region:find",this.region),null!=s&&(this.el=null!=s.instance.container?null!=s.instance.region?o(s.instance.container).find(s.selector):s.instance.container:s.instance.$(s.selector))),this.container&&(this.el=this.container)),t.__super__.constructor.apply(this,arguments),this.delegateListeners(),this.model&&this.listenTo(this.model,"dispose",this.dispose),this.collection&&this.listenTo(this.collection,"dispose",function(e){return e&&e!==a.collection?void 0:a.dispose()}),null!=this.regions&&d.execute("region:register",this),this.autoRender&&this.render()}return m(t,e),p.extend(t.prototype,r),t.prototype.autoRender=!1,t.prototype.autoAttach=!0,t.prototype.container=null,t.prototype.containerMethod=o?"append":"appendChild",t.prototype.regions=null,t.prototype.region=null,t.prototype.stale=!1,t.prototype.noWrap=!1,t.prototype.keepElement=!1,t.prototype.subviews=null,t.prototype.subviewsByName=null,t.prototype.optionNames=["autoAttach","autoRender","container","containerMethod","region","regions","noWrap"],t.prototype.delegate=function(e,t,i){var n,o,r,a,l,d;if(s.utils)return s.utils.delegate(this,e,t,i);if("string"!=typeof e)throw new TypeError("View#delegate: first argument must be a string");if(2===arguments.length)a=t;else{if(3!==arguments.length)throw new TypeError("View#delegate: only two or three arguments are allowed");if(d=t,"string"!=typeof d)throw new TypeError("View#delegate: second argument must be a string");a=i}if("function"!=typeof a)throw new TypeError("View#delegate: handler argument must be function");return l=function(){var t,i,n,s;for(n=e.split(" "),s=[],t=0,i=n.length;i>t;t++)o=n[t],s.push(""+o+".delegate"+this.cid);return s}.call(this),r=l.join(" "),n=c(a,this),this.$el.on(r,d||null,n),n},t.prototype._delegateEvents=function(e){var t,i,n,o,r,a,l;if(2===s.View.prototype.delegateEvents.length)return s.View.prototype.delegateEvents.call(this,e,!0);for(o in e){if(l=e[o],n="function"==typeof l?l:this[l],!n)throw new Error("Method '"+l+"' does not exist");r=o.match(/^(\S+)\s*(.*)$/),i=""+r[1]+".delegateEvents"+this.cid,a=r[2],t=c(n,this),this.$el.on(i,a||null,t)}},t.prototype.delegateEvents=function(e,t){var i,n,o,s;if(t||this.undelegateEvents(),e)return this._delegateEvents(e);for(s=u.getAllPropertyVersions(this,"events"),n=0,o=s.length;o>n;n++){if(i=s[n],"function"==typeof i)throw new TypeError("View#delegateEvents: functions are not supported");this._delegateEvents(i)}},t.prototype.undelegate=function(e,t,i){var n,o,r,a,l;if(s.utils)return s.utils.undelegate(this,e,t,i);if(e){if("string"!=typeof e)throw new TypeError("View#undelegate: first argument must be a string");if(2===arguments.length)"string"==typeof t?l=t:r=t;else if(3===arguments.length){if(l=t,"string"!=typeof l)throw new TypeError("View#undelegate: second argument must be a string");r=i}return a=function(){var t,i,o,s;for(o=e.split(" "),s=[],t=0,i=o.length;i>t;t++)n=o[t],s.push(""+n+".delegate"+this.cid);return s}.call(this),o=a.join(" "),this.$el.off(o,l||null)}return this.$el.off(".delegate"+this.cid)},t.prototype.delegateListeners=function(){var e,t,i,n,o,s,r,a,l;if(this.listen)for(a=u.getAllPropertyVersions(this,"listen"),s=0,r=a.length;r>s;s++){o=a[s];for(t in o){if(i=o[t],"function"!=typeof i&&(i=this[i]),"function"!=typeof i)throw new Error("View#delegateListeners: "+(""+i+" must be function"));l=t.split(" "),e=l[0],n=l[1],this.delegateListener(e,n,i)}}},t.prototype.delegateListener=function(e,t,i){var n;"model"===t||"collection"===t?(n=this[t],n&&this.listenTo(n,e,i)):"mediator"===t?this.subscribeEvent(e,i):t||this.on(e,i,this)},t.prototype.registerRegion=function(e,t){return d.execute("region:register",this,e,t)},t.prototype.unregisterRegion=function(e){return d.execute("region:unregister",this,e)},t.prototype.unregisterAllRegions=function(){return d.execute({name:"region:unregister",silent:!0},this)},t.prototype.subview=function(e,t){var i,n;return n=this.subviews,i=this.subviewsByName,e&&t?(this.removeSubview(e),n.push(t),i[e]=t,t):e?i[e]:void 0},t.prototype.removeSubview=function(e){var t,i,n,o,s,r,a;if(e){if(r=this.subviews,t=this.subviewsByName,"string"==typeof e)n=e,a=t[n];else{a=e;for(o in t)if(s=t[o],s===a){n=o;break}}if(n&&a&&a.dispose)return a.dispose(),i=u.indexOf(r,a),-1!==i&&r.splice(i,1),delete t[n]}},t.prototype.getTemplateData=function(){var e,t;return e=this.model?u.serialize(this.model):this.collection?{items:u.serialize(this.collection),length:this.collection.length}:{},t=this.model||this.collection,t&&("function"!=typeof t.isSynced||"synced"in e||(e.synced=t.isSynced())),e},t.prototype.getTemplateFunction=function(){throw new Error("View#getTemplateFunction must be overridden")},t.prototype.render=function(){var e,t,i;if(this.disposed)return!1;if(i=this.getTemplateFunction(),"function"==typeof i)if(t=i(this.getTemplateData()),this.noWrap){if(e=document.createElement("div"),e.innerHTML=t,e.children.length>1)throw new Error("There must be a single top-level element when using `noWrap`.");this.undelegateEvents(),this.setElement(e.firstChild,!0)}else h(o?this.$el:this.el,t);return this},t.prototype.attach=function(){return null!=this.region&&d.execute("region:show",this.region,this),this.container&&!document.body.contains(this.el)?(l(this),this.trigger("addedToDOM")):void 0},t.prototype.disposed=!1,t.prototype.dispose=function(){var e,t,i,n,o,s,r,a;if(!this.disposed){for(this.unregisterAllRegions(),a=this.subviews,n=0,s=a.length;s>n;n++)i=a[n],i.dispose();for(this.unsubscribeAllEvents(),this.off(),this.keepElement?(this.undelegateEvents(),this.undelegate(),this.stopListening()):this.remove(),t=["el","$el","options","model","collection","subviews","subviewsByName","_callbacks"],o=0,r=t.length;r>o;o++)e=t[o],delete this[e];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}(s.View)}),e.register("chaplin/views/collection_view",function(t,i,n){var o,s,r,a,l,c,d,h,u,p,f,m,g=function(e,t){return function(){return e.apply(t,arguments)}},v={}.hasOwnProperty,_=function(e,t){function i(){this.constructor=e}for(var n in t)v.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};m=e("underscore"),s=e("backbone"),a=e("chaplin/views/view"),f=e("chaplin/lib/utils"),o=s.$,d=function(e,t){var i,n,o,r;if(!t)return e;for(r=[],n=0,o=e.length;o>n;n++)i=e[n],s.utils.matchesSelector(i,t)&&r.push(i);return r},p=function(){return o?function(e,t){return e.toggle(t)}:function(e,t){return e.style.display=t?"":"none"}}(),l=function(){return o?function(e,t){return e.addClass(t)}:function(e,t){return e.classList.add(t)}}(),u=function(){return o?function(e,t,i){return t?l(e,i):e.css("opacity",0)}:function(e,t,i){return t?l(e,i):e.style.opacity=0}}(),c=function(){return o?function(e,t){return e.animate({opacity:1},t)}:function(e,t){return e.style.transition="opacity "+t/1e3+"s",e.opacity=1}}(),h=function(){return o?function(e,t,i,n,o){var s,r,a,l,c;return a=i>0&&n>i,l=function(e){return 0===e||i===e},a||o?(s=e.children(o),r=s.length,s[i]!==t?l(r)?e.append(t):0===i?s.eq(i).before(t):s.eq(i-1).after(t):void 0):(c=l(n)?"append":"prepend",e[c](t))}:function(e,t,i,n,o){var s,r,a,l,c;return a=i>0&&n>i,l=function(e){return 0===e||i===e},a||o?(s=d(e.children,o),r=s.length,s[i]!==t?l(r)?e.appendChild(t):0===i?e.insertBefore(t,s[i]):(c=s[i-1],e.lastChild===c?e.appendChild(t):e.insertBefore(t,c.nextElementSibling)):void 0):l(n)?e.appendChild(t):e.insertBefore(t,e.firstChild)}}(),n.exports=r=function(e){function t(){this.renderAllItems=g(this.renderAllItems,this),this.toggleFallback=g(this.toggleFallback,this),this.itemsReset=g(this.itemsReset,this),this.itemRemoved=g(this.itemRemoved,this),this.itemAdded=g(this.itemAdded,this),this.visibleItems=[],t.__super__.constructor.apply(this,arguments)}return _(t,e),t.prototype.itemView=null,t.prototype.autoRender=!0,t.prototype.renderItems=!0,t.prototype.animationDuration=500,t.prototype.useCssAnimation=!1,t.prototype.animationStartClass="animated-item-view",t.prototype.animationEndClass="animated-item-view-end",t.prototype.listSelector=null,t.prototype.$list=null,t.prototype.fallbackSelector=null,t.prototype.$fallback=null,t.prototype.loadingSelector=null,t.prototype.$loading=null,t.prototype.itemSelector=void 0,t.prototype.filterer=null,t.prototype.filterCallback=function(e,t){return o&&e.$el.stop(!0,!0),p(o?e.$el:e.el,t)},t.prototype.visibleItems=null,t.prototype.optionNames=a.prototype.optionNames.concat(["renderItems","itemView"]),t.prototype.initialize=function(e){return null==e&&(e={}),this.addCollectionListeners(),null!=e.filterer?this.filter(e.filterer):void 0},t.prototype.addCollectionListeners=function(){return this.listenTo(this.collection,"add",this.itemAdded),this.listenTo(this.collection,"remove",this.itemRemoved),this.listenTo(this.collection,"reset sort",this.itemsReset)},t.prototype.getTemplateData=function(){var e;return e={length:this.collection.length},"function"==typeof this.collection.isSynced&&(e.synced=this.collection.isSynced()),e},t.prototype.getTemplateFunction=function(){},t.prototype.render=function(){var e;return t.__super__.render.apply(this,arguments),e=m.result(this,"listSelector"),o?this.$list=e?this.$(e):this.$el:this.list=e?this.find(this.listSelector):this.el,this.initFallback(),this.initLoadingIndicator(),this.renderItems?this.renderAllItems():void 0},t.prototype.itemAdded=function(e,t,i){return this.insertView(e,this.renderItem(e),i.at)},t.prototype.itemRemoved=function(e){return this.removeViewForItem(e)},t.prototype.itemsReset=function(){return this.renderAllItems()},t.prototype.initFallback=function(){return this.fallbackSelector?(o?this.$fallback=this.$(this.fallbackSelector):this.fallback=this.find(this.fallbackSelector),this.on("visibilityChange",this.toggleFallback),this.listenTo(this.collection,"syncStateChange",this.toggleFallback),this.toggleFallback()):void 0},t.prototype.toggleFallback=function(){var e;return e=0===this.visibleItems.length&&("function"==typeof this.collection.isSynced?this.collection.isSynced():!0),p(o?this.$fallback:this.fallback,e)},t.prototype.initLoadingIndicator=function(){return this.loadingSelector&&"function"==typeof this.collection.isSyncing?(o?this.$loading=this.$(this.loadingSelector):this.loading=this.find(this.loadingSelector),this.listenTo(this.collection,"syncStateChange",this.toggleLoadingIndicator),this.toggleLoadingIndicator()):void 0},t.prototype.toggleLoadingIndicator=function(){var e;return e=0===this.collection.length&&this.collection.isSyncing(),p(o?this.$loading:this.loading,e)},t.prototype.getItemViews=function(){var e,t,i,n;if(e={},this.subviews.length>0){n=this.subviewsByName;for(t in n)i=n[t],"itemView:"===t.slice(0,9)&&(e[t.slice(9)]=i)}return e},t.prototype.filter=function(e,t){var i,n,o,s,r,a,l,c,d=this;if(("function"==typeof e||null===e)&&(this.filterer=e),("function"==typeof t||null===t)&&(this.filterCallback=t),i=function(){var e;if(d.subviews.length>0)for(e in d.subviewsByName)if("itemView:"===e.slice(0,9))return!0;return!1}())for(c=this.collection.models,o=a=0,l=c.length;l>a;o=++a){if(s=c[o],n="function"==typeof this.filterer?this.filterer(s,o):!0,r=this.subview("itemView:"+s.cid),!r)throw new Error("CollectionView#filter: "+("no view found for "+s.cid));this.filterCallback(r,n),this.updateVisibleItems(r.model,n,!1)}return this.trigger("visibilityChange",this.visibleItems)},t.prototype.renderAllItems=function(){var e,t,i,n,o,s,r,a,l,c,d;for(n=this.collection.models,this.visibleItems=[],o={},r=0,l=n.length;l>r;r++)i=n[r],s=this.subview("itemView:"+i.cid),s&&(o[i.cid]=s);d=this.getItemViews();for(e in d)v.call(d,e)&&(s=d[e],e in o||this.removeSubview("itemView:"+e));for(t=a=0,c=n.length;c>a;t=++a)i=n[t],s=this.subview("itemView:"+i.cid),s?this.insertView(i,s,t,!1):this.insertView(i,this.renderItem(i),t);return 0===n.length?this.trigger("visibilityChange",this.visibleItems):void 0},t.prototype.renderItem=function(e){var t;return t=this.subview("itemView:"+e.cid),t||(t=this.initItemView(e),this.subview("itemView:"+e.cid,t)),t.render(),t},t.prototype.initItemView=function(e){if(this.itemView)return new this.itemView({autoRender:!1,model:e});throw new Error("The CollectionView#itemView property must be defined or the initItemView() must be overridden.")},t.prototype.insertView=function(e,t,i,n){var s,r,a,d,p=this;return null==n&&(n=!0),0===this.animationDuration&&(n=!1),"number"!=typeof i&&(i=this.collection.indexOf(e)),r="function"==typeof this.filterer?this.filterer(e,i):!0,s=o?t.$el:t.el,r&&n&&u(s,this.useCssAnimation,this.animationStartClass),this.filterer&&this.filterCallback(t,r),a=this.collection.length,d=o?this.$list:this.list,h(d,s,i,a,this.itemSelector),t.trigger("addedToParent"),this.updateVisibleItems(e,r),r&&n&&(this.useCssAnimation?setTimeout(function(){return l(s,p.animationEndClass)},0):c(s,this.animationDuration)),t},t.prototype.removeViewForItem=function(e){return this.updateVisibleItems(e,!1),this.removeSubview("itemView:"+e.cid)},t.prototype.updateVisibleItems=function(e,t,i){var n,o,s;return null==i&&(i=!0),o=!1,s=f.indexOf(this.visibleItems,e),n=-1!==s,t&&!n?(this.visibleItems.push(e),o=!0):!t&&n&&(this.visibleItems.splice(s,1),o=!0),o&&i&&this.trigger("visibilityChange",this.visibleItems),o},t.prototype.dispose=function(){var e,i,n,o;if(!this.disposed){for(i=["$list","$fallback","$loading","visibleItems"],n=0,o=i.length;o>n;n++)e=i[n],delete this[e];return t.__super__.dispose.apply(this,arguments)}},t}(a)}),e.register("chaplin/lib/route",function(t,i,n){var o,s,r,a,l,c,d=function(e,t){return function(){return e.apply(t,arguments)}},h={}.hasOwnProperty;c=e("underscore"),o=e("backbone"),r=e("chaplin/lib/event_broker"),s=e("chaplin/controllers/controller"),l=e("chaplin/lib/utils"),n.exports=a=function(){function e(e,t,i,n){var o;if(this.pattern=e,this.controller=t,this.action=i,this.handler=d(this.handler,this),this.replaceParams=d(this.replaceParams,this),this.parseOptionalPortion=d(this.parseOptionalPortion,this),"string"!=typeof this.pattern)throw new Error("Route: RegExps are not supported.        Use strings with :names and `constraints` option of route");if(this.options=n?c.extend({},n):{},null!=this.options.name&&(this.name=this.options.name),this.name&&-1!==this.name.indexOf("#"))throw new Error('Route: "#" cannot be used in name');if(null==(o=this.name)&&(this.name=this.controller+"#"+this.action),this.allParams=[],this.requiredParams=[],this.optionalParams=[],this.action in s.prototype)throw new Error("Route: You should not use existing controller properties as action names");this.createRegExp(),"function"==typeof Object.freeze&&Object.freeze(this)}var t,i,n,a;return e.extend=o.Model.extend,c.extend(e.prototype,r),t=/[\-{}\[\]+?.,\\\^$|#\s]/g,i=/\((.*?)\)/g,n=/(?::|\*)(\w+)/g,a=function(e,t){switch(t){case!0:"/"!==e.slice(-1)&&(e+="/");break;case!1:"/"===e.slice(-1)&&(e=e.slice(0,-1))}return e},e.prototype.matches=function(e){var t,i,n,o,s,r,a;if("string"==typeof e)return e===this.name;for(n=0,a=["name","action","controller"],s=0,r=a.length;r>s;s++)if(i=a[s],n++,o=e[i],o&&o!==this[i])return!1;return t=1===n&&("action"===i||"controller"===i),!t},e.prototype.reverse=function(e,t){var n,o,s,r,c,d,h,u,p,f,m;if(e=this.normalizeParams(e),e===!1)return!1;for(r=this.pattern,f=this.requiredParams,d=0,u=f.length;u>d;d++)n=f[d],c=e[n],r=r.replace(RegExp("[:*]"+n,"g"),c);for(m=this.optionalParams,h=0,p=m.length;p>h;h++)n=m[h],(c=e[n])&&(r=r.replace(RegExp("[:*]"+n,"g"),c));return s=r.replace(i,function(e,t){return t.match(/[:*]/g)?"":t}),r=a(s,this.options.trailing),t?"object"==typeof t?(o=l.queryParams.stringify(t),r+=o?"?"+o:""):r+=("?"===t[0]?"":"?")+t:r},e.prototype.normalizeParams=function(e){var t,i,n,o,s,r;if(l.isArray(e)){if(e.length<this.requiredParams.length)return!1;for(n={},r=this.requiredParams,t=o=0,s=r.length;s>o;t=++o)i=r[t],n[i]=e[t];if(!this.testConstraints(n))return!1;e=n}else if(null==e&&(e={}),!this.testParams(e))return!1;return e},e.prototype.testConstraints=function(e){var t,i,n;if(i=this.options.constraints)for(n in i)if(h.call(i,n)&&(t=i[n],!t.test(e[n])))return!1;return!0},e.prototype.testParams=function(e){var t,i,n,o;for(o=this.requiredParams,i=0,n=o.length;n>i;i++)if(t=o[i],void 0===e[t])return!1;return this.testConstraints(e)},e.prototype.createRegExp=function(){var e,n=this;return e=this.pattern,e=e.replace(t,"\\$&"),this.replaceParams(e,function(e,t){return n.allParams.push(t)}),e=e.replace(i,this.parseOptionalPortion),e=this.replaceParams(e,function(e,t){return n.requiredParams.push(t),n.paramCapturePattern(e)}),this.regExp=RegExp("^"+e+"(?=\\/?(?=\\?|$))")},e.prototype.parseOptionalPortion=function(e,t){var i,n=this;return i=this.replaceParams(t,function(e,t){return n.optionalParams.push(t),n.paramCapturePattern(e)}),"(?:"+i+")?"},e.prototype.replaceParams=function(e,t){return e.replace(n,t)},e.prototype.paramCapturePattern=function(e){return":"===e.charAt(0)?"([^/?]+)":"(.*?)"},e.prototype.test=function(e){var t,i;return(i=this.regExp.test(e))?(t=this.options.constraints,t?this.testConstraints(this.extractParams(e)):!0):!1},e.prototype.handler=function(e,t){var i,n,o,s,r,d;return t=t?c.extend({},t):{},"object"==typeof e?(s=l.queryParams.stringify(t.query),n=e,o=this.reverse(n)):(d=e.split("?"),o=d[0],s=d[1],null==s?s="":t.query=l.queryParams.parse(s),n=this.extractParams(o),o=a(o,this.options.trailing)),i=c.extend({},n,this.options.params),r={path:o,action:this.action,controller:this.controller,name:this.name,query:s},this.publishEvent("router:match",r,i,t)
},e.prototype.extractParams=function(e){var t,i,n,o,s,r,a,l;for(s={},n=this.regExp.exec(e),l=n.slice(1),t=r=0,a=l.length;a>r;t=++r)i=l[t],o=this.allParams.length?this.allParams[t]:t,s[o]=i;return s},e}()}),e.register("chaplin/lib/router",function(t,i,n){var o,s,r,a,l,c,d,h,u=function(e,t){return function(){return e.apply(t,arguments)}};h=e("underscore"),o=e("backbone"),c=e("chaplin/mediator"),s=e("chaplin/lib/event_broker"),r=e("chaplin/lib/history"),a=e("chaplin/lib/route"),d=e("chaplin/lib/utils"),n.exports=l=function(){function e(e){var t;this.options=null!=e?e:{},this.match=u(this.match,this),t="file:"!==window.location.protocol,h.defaults(this.options,{pushState:t,root:"/",trailing:!1}),this.removeRoot=new RegExp("^"+d.escapeRegExp(this.options.root)+"(#)?"),this.subscribeEvent("!router:route",this.oldEventError),this.subscribeEvent("!router:routeByName",this.oldEventError),this.subscribeEvent("!router:changeURL",this.oldURLEventError),this.subscribeEvent("dispatcher:dispatch",this.changeURL),c.setHandler("router:route",this.route,this),c.setHandler("router:reverse",this.reverse,this),this.createHistory()}return e.extend=o.Model.extend,h.extend(e.prototype,s),e.prototype.oldEventError=function(){throw new Error("!router:route and !router:routeByName events were removed.  Use `Chaplin.utils.redirectTo`")},e.prototype.oldURLEventError=function(){throw new Error("!router:changeURL event was removed.")},e.prototype.createHistory=function(){return o.history=new r},e.prototype.startHistory=function(){return o.history.start(this.options)},e.prototype.stopHistory=function(){return o.History.started?o.history.stop():void 0},e.prototype.findHandler=function(e){var t,i,n,s;for(s=o.history.handlers,i=0,n=s.length;n>i;i++)if(t=s[i],e(t))return t},e.prototype.match=function(e,t,i){var n,s,r,l;if(null==i&&(i={}),2===arguments.length&&"object"==typeof t){if(i=t,s=i.controller,n=i.action,!s||!n)throw new Error("Router#match must receive either target or options.controller & options.action")}else{if(s=i.controller,n=i.action,s||n)throw new Error("Router#match cannot use both target and options.controller / options.action");l=t.split("#"),s=l[0],n=l[1]}return h.defaults(i,{trailing:this.options.trailing}),r=new a(e,s,n,i),o.history.handlers.push({route:r,callback:r.handler}),r},e.prototype.route=function(e,t,i){var n,o;if("object"==typeof e&&(o=e.url,!t&&e.params&&(t=e.params)),t=t?d.isArray(t)?t.slice():h.extend({},t):{},null!=o?(o=o.replace(this.removeRoot,""),n=this.findHandler(function(e){return e.route.test(o)}),i=t,t=null):(i=i?h.extend({},i):{},n=this.findHandler(function(i){return i.route.matches(e)&&(t=i.route.normalizeParams(t))?!0:!1})),n)return h.defaults(i,{changeURL:!0}),n.callback(o||t,i),!0;throw new Error("Router#route: request was not routed")},e.prototype.reverse=function(e,t,i){var n,s,r,a,l,c,d;if(a=this.options.root,null!=t&&"object"!=typeof t)throw new TypeError("Router#reverse: params must be an array or an object");for(s=o.history.handlers,c=0,d=s.length;d>c;c++)if(n=s[c],n.route.matches(e)&&(r=n.route.reverse(t,i),r!==!1))return l=a?a+r:r;throw new Error("Router#reverse: invalid route specified")},e.prototype.changeURL=function(e,t,i,n){var s,r;if(null!=i.path&&n.changeURL)return r=i.path+(i.query?"?"+i.query:""),s={trigger:n.trigger===!0,replace:n.replace===!0},o.history.navigate(r,s)},e.prototype.disposed=!1,e.prototype.dispose=function(){return this.disposed?void 0:(this.stopHistory(),delete o.history,this.unsubscribeAllEvents(),c.removeHandlers(this),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},e}()}),e.register("chaplin/lib/history",function(t,i,n){var o,s,r,a,l,c,d,h={}.hasOwnProperty,u=function(e,t){function i(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};d=e("underscore"),o=e("backbone"),l=/^[#\/]|\s+$/g,a=/^\/+|\/+$/g,r=/msie [\w.]+/,c=/\/$/,s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.prototype.getFragment=function(e,t){var i;return null==e&&(this._hasPushState||!this._wantsHashChange||t?(e=this.location.pathname+this.location.search,i=this.root.replace(c,""),e.indexOf(i)||(e=e.substr(i.length))):e=this.getHash()),e.replace(l,"")},t.prototype.start=function(e){var t,i,n;if(o.History.started)throw new Error("Backbone.history has already been started");return o.History.started=!0,this.options=d.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=Boolean(this.options.pushState),this._hasPushState=Boolean(this.options.pushState&&this.history&&this.history.pushState),i=this.getFragment(),this.root=("/"+this.root+"/").replace(a,"/"),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i,n=this.location,t=n.pathname.replace(/[^\/]$/,"$&/")===this.root,this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!t?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&t&&n.hash&&(this.fragment=this.getHash().replace(l,""),this.history.replaceState({},document.title,this.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},t.prototype.navigate=function(e,t){var i,n,s;if(null==e&&(e=""),!o.History.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e),s=this.root+e,this.fragment===e)return!1;if(this.fragment=e,0===e.length&&"/"!==s&&(s=s.slice(0,-1)),this._hasPushState)i=t.replace?"replaceState":"pushState",this.history[i]({},document.title,s);else{if(!this._wantsHashChange)return this.location.assign(s);this._updateHash(this.location,e,t.replace),n=e!==this.getFragment(this.getHash(this.iframe)),null!=this.iframe&&n&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0},t}(o.History),n.exports=o.$?s:o.History}),e.register("chaplin/lib/event_broker",function(t,i,n){var o,s,r=[].slice;s=e("chaplin/mediator"),o={subscribeEvent:function(e,t){if("string"!=typeof e)throw new TypeError("EventBroker#subscribeEvent: type argument must be a string");if("function"!=typeof t)throw new TypeError("EventBroker#subscribeEvent: handler argument must be a function");return s.unsubscribe(e,t,this),s.subscribe(e,t,this)},unsubscribeEvent:function(e,t){if("string"!=typeof e)throw new TypeError("EventBroker#unsubscribeEvent: type argument must be a string");if("function"!=typeof t)throw new TypeError("EventBroker#unsubscribeEvent: handler argument must be a function");return s.unsubscribe(e,t)},unsubscribeAllEvents:function(){return s.unsubscribe(null,null,this)},publishEvent:function(){var e,t;if(t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],"string"!=typeof t)throw new TypeError("EventBroker#publishEvent: type argument must be a string");return s.publish.apply(s,[t].concat(r.call(e)))}},"function"==typeof Object.freeze&&Object.freeze(o),n.exports=o}),e.register("chaplin/lib/support",function(e,t,i){var n;n={propertyDescriptors:function(){var e;if("function"!=typeof Object.defineProperty||"function"!=typeof Object.defineProperties)return!1;try{return e={},Object.defineProperty(e,"foo",{value:"bar"}),"bar"===e.foo}catch(t){return!1}}()},i.exports=n}),e.register("chaplin/lib/composition",function(t,i,n){var o,s,r,a,l,c={}.hasOwnProperty;l=e("underscore"),o=e("backbone"),r=e("chaplin/lib/event_broker"),a=Object.prototype.hasOwnProperty,n.exports=s=function(){function e(e){null!=e&&(this.options=l.extend({},e)),this.item=this,this.initialize(this.options)}return e.extend=o.Model.extend,l.extend(e.prototype,o.Events),l.extend(e.prototype,r),e.prototype.item=null,e.prototype.options=null,e.prototype._stale=!1,e.prototype.initialize=function(){},e.prototype.compose=function(){},e.prototype.check=function(e){return l.isEqual(this.options,e)},e.prototype.stale=function(e){var t,i;if(null==e)return this._stale;this._stale=e;for(i in this)t=this[i],t&&t!==this&&"object"==typeof t&&a.call(t,"stale")&&(t.stale=e)},e.prototype.disposed=!1,e.prototype.dispose=function(){var e,t,i,n,o;if(!this.disposed){for(t in this)c.call(this,t)&&(e=this[t],e&&"function"==typeof e.dispose&&e!==this&&(e.dispose(),delete this[t]));for(this.unsubscribeAllEvents(),this.stopListening(),i=["redirected"],n=0,o=i.length;o>n;n++)t=i[n],delete this[t];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}()}),e.register("chaplin/lib/sync_machine",function(e,t,i){var n,o,s,r,a,l,c,d,h,u;for(a="unsynced",s="syncing",o="synced",n="syncStateChange",r={_syncState:a,_previousSyncState:null,syncState:function(){return this._syncState},isUnsynced:function(){return this._syncState===a},isSynced:function(){return this._syncState===o},isSyncing:function(){return this._syncState===s},unsync:function(){var e;((e=this._syncState)===s||e===o)&&(this._previousSync=this._syncState,this._syncState=a,this.trigger(this._syncState,this,this._syncState),this.trigger(n,this,this._syncState))},beginSync:function(){var e;((e=this._syncState)===a||e===o)&&(this._previousSync=this._syncState,this._syncState=s,this.trigger(this._syncState,this,this._syncState),this.trigger(n,this,this._syncState))},finishSync:function(){this._syncState===s&&(this._previousSync=this._syncState,this._syncState=o,this.trigger(this._syncState,this,this._syncState),this.trigger(n,this,this._syncState))},abortSync:function(){this._syncState===s&&(this._syncState=this._previousSync,this._previousSync=this._syncState,this.trigger(this._syncState,this,this._syncState),this.trigger(n,this,this._syncState))}},u=[a,s,o,n],c=function(e){return r[e]=function(t,i){return null==i&&(i=this),this.on(e,t,i),this._syncState===e?t.call(i):void 0}},d=0,h=u.length;h>d;d++)l=u[d],c(l);"function"==typeof Object.freeze&&Object.freeze(r),i.exports=r}),e.register("chaplin/lib/utils",function(t,i,n){var o,s,r,a=[].slice,l=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},c={}.hasOwnProperty;r=e("underscore"),o=e("chaplin/lib/support"),s={beget:function(){var e;return"function"==typeof Object.create?Object.create:(e=function(){},function(t){return e.prototype=t,new e})}(),indexOf:function(){return Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:r.indexOf?r.indexOf:void 0}(),isArray:Array.isArray||r.isArray,serialize:function(e){if("function"==typeof e.serialize)return e.serialize();if("function"==typeof e.toJSON)return e.toJSON();throw new TypeError("utils.serialize: Unknown data was passed")},readonly:function(){var e;return o.propertyDescriptors?(e={writable:!1,enumerable:!0,configurable:!1},function(){var t,i,n,o,s;for(t=arguments[0],n=2<=arguments.length?a.call(arguments,1):[],o=0,s=n.length;s>o;o++)i=n[o],e.value=t[i],Object.defineProperty(t,i,e);return!0}):function(){return!1}}(),getPrototypeChain:function(e){var t,i,n,o;for(t=[e.constructor.prototype];e=null!=(i=null!=(n=e.constructor)?n.__super__:void 0)?i:null!=(o=e.constructor)?o.superclass:void 0;)t.push(e);return t.reverse()},getAllPropertyVersions:function(e,t){var i,n,o,r,a,c;for(n=[],c=s.getPrototypeChain(e),r=0,a=c.length;a>r;r++)i=c[r],o=i[t],o&&l.call(n,o)<0&&n.push(o);return n},upcase:function(e){return e.charAt(0).toUpperCase()+e.substring(1)},escapeRegExp:function(e){return String(e||"").replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},modifierKeyPressed:function(e){return e.shiftKey||e.altKey||e.ctrlKey||e.metaKey},reverse:function(t,i,n){return e("chaplin/mediator").execute("router:reverse",t,i,n)},redirectTo:function(t,i,n){return e("chaplin/mediator").execute("router:route",t,i,n)},queryParams:{stringify:function(e){var t,i,n,o,r,a,l,d;o="",r=function(e,t){return null!=t?"&"+e+"="+encodeURIComponent(t):""};for(n in e)if(c.call(e,n))if(a=e[n],i=encodeURIComponent(n),s.isArray(a))for(l=0,d=a.length;d>l;l++)t=a[l],o+=r(i,t);else o+=r(i,a);return o&&o.substring(1)},parse:function(e){var t,i,n,o,s,r,a,l,c;if(s={},!e)return s;for(o=e.split("&"),a=0,l=o.length;l>a;a++)n=o[a],n.length&&(c=n.split("="),i=c[0],r=c[1],i.length&&(i=decodeURIComponent(i),r=decodeURIComponent(r),t=s[i],t?t.push?t.push(r):s[i]=[t,r]:s[i]=r));return s}}},"function"==typeof Object.seal&&Object.seal(s),n.exports=s}),e.register("chaplin",function(t,i,n){n.exports={Application:e("chaplin/application"),mediator:e("chaplin/mediator"),Dispatcher:e("chaplin/dispatcher"),Controller:e("chaplin/controllers/controller"),Composer:e("chaplin/composer"),Composition:e("chaplin/lib/composition"),Collection:e("chaplin/models/collection"),Model:e("chaplin/models/model"),Layout:e("chaplin/views/layout"),View:e("chaplin/views/view"),CollectionView:e("chaplin/views/collection_view"),Route:e("chaplin/lib/route"),Router:e("chaplin/lib/router"),EventBroker:e("chaplin/lib/event_broker"),support:e("chaplin/lib/support"),SyncMachine:e("chaplin/lib/sync_machine"),utils:e("chaplin/lib/utils")}});var t=function(t,i){e.register("backbone",function(e,i,n){n.exports=t}),e.register("underscore",function(e,t,n){n.exports=i})};if("function"==typeof define&&define.amd)define("chaplin",["backbone","underscore"],function(i,n){return t(i,n),e("chaplin")});else if("object"==typeof module&&module&&module.exports)t(require("backbone"),require("underscore")),module.exports=e("chaplin");else{if("function"!=typeof require)throw new Error("Chaplin requires Common.js or AMD modules");t(window.Backbone,window._||window.Backbone.utils),window.Chaplin=e("chaplin")}}(),define("oroui/js/extend/chaplin",["jquery","underscore","oroui/js/tools","chaplin"],function(e,t,i,n){var o,s;return o=n.utils,s=window.location,n.Router.prototype.route=function(e,i,n){var o,s;if("object"==typeof e&&(s=e.url,!i&&e.params&&(i=e.params)),i=i?t.isArray(i)?i.slice():t.extend({},i):{},null!=s?(s=s.replace(this.removeRoot,""),o=this.findHandler(function(e){return e.route.test(s)}),n=i,i=null):(n=n?t.extend({},n):{},o=this.findHandler(function(t){return t.route.matches(e)&&(i=t.route.normalizeParams(i))?!0:!1})),o)return t.defaults(n,{changeURL:!0}),o.callback(null!=s?s:i,n),!0;throw new Error("Router#route: request was not routed")},n.Layout.prototype.registerGlobalRegions=function(e){var t,i,n,s,r,a;for(a=o.getAllPropertyVersions(e,"regions"),e.hasOwnProperty("regions")&&a.push(e.regions),s=0,r=a.length;r>s;s++){n=a[s];for(t in n)i=n[t],this.registerGlobalRegion(e,t,i)}},n.Layout.prototype.openLink=t.wrap(n.Layout.prototype.openLink,function(t,r){var a,l,c,d,h,u,p,f,m;if(a=r.currentTarget,l=e(a),!(r.isDefaultPrevented()||l.parents(".sf-toolbar").length||i.isErrorPage())){if("A"===a.nodeName&&a.getAttribute("href")){if(c=a.getAttribute("href"),"#"===c)return r.preventDefault(),void 0;-1!==c.indexOf("://")&&a.host===s.host&&a.setAttribute("href",a.pathname+a.search+a.hash)}if(h={prevented:!1,target:a},n.mediator.publish("openLink:before",h),h.prevented!==!1)return r.preventDefault(),void 0;if(!(o.modifierKeyPressed(r)||(a=e?r.currentTarget:r.delegateTarget,p="A"===a.nodeName,c=a.getAttribute("href")||a.getAttribute("data-href")||null,null==c||""===c||"#"===c.charAt(0)||(f=this.settings.skipRouting,m=typeof f,"function"===m&&!f(c,a)||"string"===m&&(e?e(a).is(f):Backbone.utils.matchesSelector(a,f)))))){if(u=p&&this.isExternalLink(a))return this.settings.openExternalToBlank&&(r.preventDefault(),window.open(c)),void 0;d=l.data("options")||{},o.redirectTo({url:c},d),r.preventDefault()}}}),o.redirectTo=t.wrap(o.redirectTo,function(e,o,s,r){"object"==typeof o&&null!=o.url&&i.isErrorPage()?(r=s||{},r.fullRedirect=!0,n.mediator.execute("redirectTo",o,r)):e.apply(this,t.rest(arguments))}),n}),define("oroui/js/mediator",["underscore","backbone","chaplin"],function(e,t,i){return t.mediator=e.extend(i.mediator,t.Events),i.mediator}),require(["jquery","oroui/js/mediator"],function(e,t){e(function(){e(document).on("click",".organization-switcher",function(){return t.execute("showLoading"),!0})})}),define("orosecurity/js/init-organization-selector",function(){}),define("text",["module"],function(e){var t,i,n,o,s,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),h=c&&location.hostname,u=c&&(location.port||void 0),p={},f=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=r[t];try{e=new ActiveXObject(i)}catch(n){}if(e){r=[i];break}}return e},parseName:function(e){var t,i,n,o=!1,s=e.indexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==s&&(!r||s>1)?(t=e.substring(0,s),i=e.substring(s+1,e.length)):t=e,n=i||t,s=n.indexOf("!"),-1!==s&&(o="strip"===n.substring(s+1),n=n.substring(0,s),i?i=n:t=n),{moduleName:t,ext:i,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,n,o){var s,r,a,l=t.xdRegExp.exec(e);return l?(s=l[2],r=l[3],r=r.split(":"),a=r[1],r=r[0],!(s&&s!==i||r&&r.toLowerCase()!==n.toLowerCase()||(a||r)&&a!==o)):!0},finishLoad:function(e,i,n,o){n=i?t.strip(n):n,f.isBuild&&(p[e]=n),o(n)},load:function(e,i,n,o){if(o.isBuild&&!o.inlineText)return n(),void 0;f.isBuild=o.isBuild;var s=t.parseName(e),r=s.moduleName+(s.ext?"."+s.ext:""),a=i.toUrl(r),l=f.useXhr||t.useXhr;return 0===a.indexOf("empty:")?(n(),void 0):(!c||l(a,d,h,u)?t.get(a,function(i){t.finishLoad(e,s.strip,i,n)},function(e){n.error&&n.error(e)}):i([r],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,n)}),void 0)},write:function(e,i,n){if(p.hasOwnProperty(i)){var o=t.jsEscape(p[i]);n.asModule(e+"!"+i,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,i,n,o,s){var r=t.parseName(i),a=r.ext?"."+r.ext:"",l=r.moduleName+a,c=n.toUrl(r.moduleName+a)+".js";t.load(l,n,function(){var i=function(e){return o(c,e)};i.asModule=function(e,t){return o.asModule(e,c,t)},t.write(e,l,i,s)},s)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),t.get=function(e,t,n){try{var o=i.readFileSync(e,"utf8");0===o.indexOf("﻿")&&(o=o.substring(1)),t(o)}catch(s){n(s)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,i,n,o){var s,r=t.createXhr();if(r.open("GET",e,!0),o)for(s in o)o.hasOwnProperty(s)&&r.setRequestHeader(s.toLowerCase(),o[s]);f.onXhr&&f.onXhr(r,e),r.onreadystatechange=function(){var t,o;4===r.readyState&&(t=r.status,t>399&&600>t?(o=new Error(e+" HTTP status: "+t),o.xhr=r,n(o)):i(r.responseText),f.onXhrComplete&&f.onXhrComplete(r,e))},r.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,n,o="utf-8",s=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),o)),l="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=a.readLine());)i.append(r),i.append(n);l=String(i.toString())}finally{a.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in n,t.get=function(e,t){var i,r,a,l={};s&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),i.init(a,1,0,!1),r=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),r.init(i,"utf-8",i.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(i.available(),l),r.close(),i.close(),t(l.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),t}),"object"!=typeof JSON&&(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,o,s,r,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,i=0;s>i;i+=1)r[i]=str(i,l)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(s=rep.length,i=0;s>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],o=str(n,l),o&&r.push(quote(n)+(gap?": ":":")+o));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o=str(n,l),o&&r.push(quote(n)+(gap?": ":":")+o));return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var i,n,o=e[t];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n=walk(o,i),void 0!==n?o[i]=n:delete o[i]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json",function(){}),define("base64",function(){});var Translator=function(){function e(e,t){var i,n=Translator.placeHolderPrefix,o=Translator.placeHolderSuffix;for(i in t){var s=new RegExp(n+i+o,"g");s.test(e)&&(e=e.replace(s,t[i]),delete t[i])}return e}function t(e){var t,i=Translator.defaultDomains;Translator.defaultDomains.constructor!=Array&&(i=[Translator.defaultDomains]);for(t in i)if(Translator.has(i[t]+":"+e))return Translator.get(i[t]+":"+e);return void 0}function i(e,t){var i,s,c=[],d=[],h=e.split(Translator.pluralSeparator),u=[];for(i in h){var p=h[i],f=new RegExp(a),m=new RegExp(r);f.test(p)?(u=p.match(f),c[u[0]]=u[u.length-1]):m.test(p)?(u=p.match(m),d.push(u[1])):d.push(p)}for(s in c){var g=new RegExp(l);if(g.test(s))if(u=s.match(g),u[1]){var v,_=u[2].split(",");for(v in _)if(t==_[v])return c[s]}else{var y=n(u[4]),b=n(u[5]);if(("["===u[3]?t>=y:t>y)&&("]"===u[6]?b>=t:b>t))return c[s]}}return d[o(t)]||void 0}function n(e){return"-Inf"===e?Math.log(0):"+Inf"===e||"Inf"===e?-Math.log(0):parseInt(e,10)}function o(e){var t=Translator.locale||Translator.fallback;switch("pt_BR"===t&&(t="xbr"),t.length>3&&(t=t.split("_")[0]),t){case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"tr":case"vi":case"zh":return 0;case"af":case"az":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"ur":case"zu":return 1==e?0:1;case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return 0===e||1==e?0:1;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return 1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2;case"cs":case"sk":return 1==e?0:e>=2&&4>=e?1:2;case"ga":return 1==e?0:2==e?1:2;case"lt":return 1==e%10&&11!=e%100?0:e%10>=2&&(10>e%100||e%100>=20)?1:2;case"sl":return 1==e%100?0:2==e%100?1:3==e%100||4==e%100?2:3;case"mk":return 1==e%10?0:1;case"mt":return 1==e?0:0===e||e%100>1&&11>e%100?1:e%100>10&&20>e%100?2:3;case"lv":return 0===e?0:1==e%10&&11!=e%100?1:2;case"pl":return 1==e?0:e%10>=2&&4>=e%10&&(12>e%100||e%100>14)?1:2;case"cy":return 1==e?0:2==e?1:8==e||11==e?2:3;case"ro":return 1==e?0:0===e||e%100>0&&20>e%100?1:2;case"ar":return 0===e?0:1==e?1:2==e?2:e>=3&&10>=e?3:e>=11&&99>=e?4:5;default:return 0}}var s={},r=/^\w+\: +(.+)$/,a=/^\s*((\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]]))\s?(.+?)$/,l=/^\s*(\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]])/;return{locale:"",fallback:"en",placeHolderPrefix:"%",placeHolderSuffix:"%",defaultDomains:[],pluralSeparator:"|",add:function(e,t){return s[e]=t,this},get:function(n,o,r){var a=s[n],l=parseInt(r,10),c=o||{};return void 0===a&&(a=t(n)),void 0===a&&(a=n),a&&!isNaN(l)&&(a=i(a,l)),a=e(a,c)},has:function(e){return s[e]?!0:!1},fromJSON:function(e){if("string"==typeof e&&(e=JSON.parse(e)),e.locale&&(this.locale=e.locale),e.defaultDomains&&(this.defaultDomains=e.defaultDomains),e.messages){var t;for(t in e.messages){var i=e.messages[t];this.add(t,i)}}return this}}}();"function"==typeof window.define&&window.define.amd&&window.define("Translator",[],function(){return Translator}),define("translator",function(e){return function(){var t;return t||e.Translator}}(this)),define("orotranslation/js/translator",["underscore","translator","module","json"],function(e,t,i){function n(i){if(!s)return!0;var n=t.defaultDomains,r=function(e){return o.hasOwnProperty(e?e+":"+i:i)};return n=e.union([void 0],e.isArray(n)?n:[n]),e.some(n,r)?!0:(console.error("Untranslated: %s",i),!1)}var o={},s=!1,r=t.add,a=t.get,l=t.fromJSON,c=i.config();return t.placeHolderPrefix="{{ ",t.placeHolderSuffix=" }}",t.add=function(e){o[e]=1,r.apply(t,arguments)},t.get=function(e){var i=a.apply(t,arguments),o=n(e);return c.debugTranslator?o?-1==i.indexOf("]JS")?"["+i+"]JS":i:-1==i.indexOf("---!!!JS")?"!!!---"+i+"---!!!JS":i:i},t.fromJSON=function(e){return"string"==typeof e&&(e=JSON.parse(e)),s=e.debug||!1,l.call(t,e)},e.mixin({__:e.bind(t.get,t)}),e.__}),define("orolocale/js/locale-settings/data",{locale_data:{AD:{currency_code:"EUR",phone_prefix:"376",default_locale:"ca"},AE:{currency_code:"AED",phone_prefix:"971",default_locale:"ar_AE"},AF:{currency_code:"AFN",phone_prefix:"93",default_locale:"fa_AF"},AG:{currency_code:"XCD",phone_prefix:"+1-268",default_locale:"en_AG"},AL:{currency_code:"ALL",phone_prefix:"355",default_locale:"sq"},AM:{currency_code:"AMD",phone_prefix:"374",default_locale:"hy"},AO:{currency_code:"AOA",phone_prefix:"244",default_locale:"pt_AO"},AR:{currency_code:"ARS",phone_prefix:"54",default_locale:"es_AR"},AT:{currency_code:"EUR",phone_prefix:"43",default_locale:"de_AT"},AU:{currency_code:"AUD",phone_prefix:"61",default_locale:"en_AU"},AZ:{currency_code:"AZN",phone_prefix:"994",default_locale:"az"},BA:{currency_code:"BAM",phone_prefix:"387",default_locale:"bs"},BB:{currency_code:"BBD",phone_prefix:"+1-246",default_locale:"en_BB"},BD:{currency_code:"BDT",phone_prefix:"880",default_locale:"bn_BD"},BE:{currency_code:"EUR",phone_prefix:"32",default_locale:"nl_BE"},BF:{currency_code:"XOF",phone_prefix:"226",default_locale:"fr_BF"},BG:{currency_code:"BGN",phone_prefix:"359",default_locale:"bg"},BH:{currency_code:"BHD",phone_prefix:"973",default_locale:"ar_BH"},BI:{currency_code:"BIF",phone_prefix:"257",default_locale:"fr_BI"},BJ:{currency_code:"XOF",phone_prefix:"229",default_locale:"fr_BJ"},BL:{currency_code:"EUR",phone_prefix:"590",default_locale:"fr"},BN:{currency_code:"BND",phone_prefix:"673",default_locale:"ms_BN"},BO:{currency_code:"BOB",phone_prefix:"591",default_locale:"es_BO"},BR:{currency_code:"BRL",phone_prefix:"55",default_locale:"pt_BR"},BS:{currency_code:"BSD",phone_prefix:"+1-242",default_locale:"en_BS"},BT:{currency_code:"BTN",phone_prefix:"975",default_locale:"dz"},BW:{currency_code:"BWP",phone_prefix:"267",default_locale:"en_BW"},BY:{currency_code:"BYR",phone_prefix:"375",default_locale:"be"},BZ:{currency_code:"BZD",phone_prefix:"501",default_locale:"en_BZ"},CA:{currency_code:"CAD",phone_prefix:"1",default_locale:"en_CA"},CD:{currency_code:"CDF",phone_prefix:"243",default_locale:"fr_CD"},CF:{currency_code:"XAF",phone_prefix:"236",default_locale:"fr_CF"},CG:{currency_code:"XAF",phone_prefix:"242",default_locale:"fr_CG"},CH:{currency_code:"CHF",phone_prefix:"41",default_locale:"de_CH"},CI:{currency_code:"XOF",phone_prefix:"225",default_locale:"fr_CI"},CL:{currency_code:"CLP",phone_prefix:"56",default_locale:"es_CL"},CM:{currency_code:"XAF",phone_prefix:"237",default_locale:"en_CM"},CN:{currency_code:"CNY",phone_prefix:"86",default_locale:"zh_CN"},CO:{currency_code:"COP",phone_prefix:"57",default_locale:"es_CO"},CR:{currency_code:"CRC",phone_prefix:"506",default_locale:"es_CR"},CU:{currency_code:"CUP",phone_prefix:"53",default_locale:"es_CU"},CV:{currency_code:"CVE",phone_prefix:"238",default_locale:"pt_CV"},CY:{currency_code:"EUR",phone_prefix:"357",default_locale:"el_CY"},CZ:{currency_code:"CZK",phone_prefix:"420",default_locale:"cs"},DE:{currency_code:"EUR",phone_prefix:"49",default_locale:"de"},DJ:{currency_code:"DJF",phone_prefix:"253",default_locale:"fr_DJ"},DK:{currency_code:"DKK",phone_prefix:"45",default_locale:"da_DK"},DM:{currency_code:"XCD",phone_prefix:"+1-767",default_locale:"en_DM"},DO:{currency_code:"DOP",phone_prefix:"+1-809",default_locale:"es_DO"},DZ:{currency_code:"DZD",phone_prefix:"213",default_locale:"ar_DZ"},EC:{currency_code:"USD",phone_prefix:"593",default_locale:"es_EC"},EE:{currency_code:"EUR",phone_prefix:"372",default_locale:"et"},EG:{currency_code:"EGP",phone_prefix:"20",default_locale:"ar_EG"},ER:{currency_code:"ERN",phone_prefix:"291",default_locale:"ti_ER"},ES:{currency_code:"EUR",phone_prefix:"34",default_locale:"es_ES"},ET:{currency_code:"ETB",phone_prefix:"251",default_locale:"am"},FI:{currency_code:"EUR",phone_prefix:"358",default_locale:"fi_FI"},FJ:{currency_code:"FJD",phone_prefix:"679",default_locale:"en_FJ"},FM:{currency_code:"USD",phone_prefix:"691",default_locale:"en_FM"},FR:{currency_code:"EUR",phone_prefix:"33",default_locale:"fr_FR"},GA:{currency_code:"XAF",phone_prefix:"241",default_locale:"fr_GA"},GB:{currency_code:"GBP",phone_prefix:"44",default_locale:"en_GB"},GD:{currency_code:"XCD",phone_prefix:"+1-473",default_locale:"en_GD"},GE:{currency_code:"GEL",phone_prefix:"995",default_locale:"ka"},GG:{currency_code:"GBP",phone_prefix:"+44-1481",default_locale:"en"},GH:{currency_code:"GHS",phone_prefix:"233",default_locale:"en_GH"},GL:{currency_code:"DKK",phone_prefix:"299",default_locale:"kl"},GM:{currency_code:"GMD",phone_prefix:"220",default_locale:"en_GM"},GN:{currency_code:"GNF",phone_prefix:"224",default_locale:"fr_GN"},GQ:{currency_code:"XAF",phone_prefix:"240",default_locale:"es_GQ"},GR:{currency_code:"EUR",phone_prefix:"30",default_locale:"el_GR"},GT:{currency_code:"GTQ",phone_prefix:"502",default_locale:"es_GT"},GW:{currency_code:"XOF",phone_prefix:"245",default_locale:"pt_GW"},GY:{currency_code:"GYD",phone_prefix:"592",default_locale:"en_GY"},HN:{currency_code:"HNL",phone_prefix:"504",default_locale:"es_HN"},HR:{currency_code:"HRK",phone_prefix:"385",default_locale:"hr_HR"},HT:{currency_code:"HTG",phone_prefix:"509",default_locale:"fr"},HU:{currency_code:"HUF",phone_prefix:"36",default_locale:"hu_HU"},ID:{currency_code:"IDR",phone_prefix:"62",default_locale:"id"},IE:{currency_code:"EUR",phone_prefix:"353",default_locale:"en_IE"},IL:{currency_code:"ILS",phone_prefix:"972",default_locale:"he"},IM:{currency_code:"GBP",phone_prefix:"+44-1624",default_locale:"en"},IN:{currency_code:"INR",phone_prefix:"91",default_locale:"en_IN"},IQ:{currency_code:"IQD",phone_prefix:"964",default_locale:"ar_IQ"},IR:{currency_code:"IRR",phone_prefix:"98",default_locale:"fa_IR"},IS:{currency_code:"ISK",phone_prefix:"354",default_locale:"is"},IT:{currency_code:"EUR",phone_prefix:"39",default_locale:"it_IT"},JE:{currency_code:"GBP",phone_prefix:"+44-1534",default_locale:"en"},JM:{currency_code:"JMD",phone_prefix:"+1-876",default_locale:"en_JM"},JO:{currency_code:"JOD",phone_prefix:"962",default_locale:"ar_JO"},JP:{currency_code:"JPY",phone_prefix:"81",default_locale:"ja"},KE:{currency_code:"KES",phone_prefix:"254",default_locale:"en_KE"},KG:{currency_code:"KGS",phone_prefix:"996",default_locale:"ru"},KH:{currency_code:"KHR",phone_prefix:"855",default_locale:"km"},KI:{currency_code:"AUD",phone_prefix:"686",default_locale:"en_KI"},KM:{currency_code:"KMF",phone_prefix:"269",default_locale:"ar"},KN:{currency_code:"XCD",phone_prefix:"+1-869",default_locale:"en_KN"},KP:{currency_code:"KPW",phone_prefix:"850",default_locale:"ko_KP"},KR:{currency_code:"KRW",phone_prefix:"82",default_locale:"ko_KR"},KW:{currency_code:"KWD",phone_prefix:"965",default_locale:"ar_KW"},KZ:{currency_code:"KZT",phone_prefix:"7",default_locale:"kk"},LA:{currency_code:"LAK",phone_prefix:"856",default_locale:"lo"},LB:{currency_code:"LBP",phone_prefix:"961",default_locale:"ar_LB"},LI:{currency_code:"CHF",phone_prefix:"423",default_locale:"de_LI"},LK:{currency_code:"LKR",phone_prefix:"94",default_locale:"si"},LR:{currency_code:"LRD",phone_prefix:"231",default_locale:"en_LR"},LS:{currency_code:"LSL",phone_prefix:"266",default_locale:"en_LS"},LT:{currency_code:"LTL",phone_prefix:"370",default_locale:"lt"},LU:{currency_code:"EUR",phone_prefix:"352",default_locale:"fr"},LV:{currency_code:"LVL",phone_prefix:"371",default_locale:"lv"},LY:{currency_code:"LYD",phone_prefix:"218",default_locale:"ar_LY"},MA:{currency_code:"MAD",phone_prefix:"212",default_locale:"ar_MA"},MD:{currency_code:"MDL",phone_prefix:"373",default_locale:"ro"},ME:{currency_code:"EUR",phone_prefix:"382",default_locale:"sr"},MF:{currency_code:"EUR",phone_prefix:"590",default_locale:"fr"},MG:{currency_code:"MGA",phone_prefix:"261",default_locale:"fr_MG"},MH:{currency_code:"USD",phone_prefix:"692",default_locale:"en"},MK:{currency_code:"MKD",phone_prefix:"389",default_locale:"mk"},ML:{currency_code:"XOF",phone_prefix:"223",default_locale:"fr_ML"},MM:{currency_code:"MMK",phone_prefix:"95",default_locale:"my"},MN:{currency_code:"MNT",phone_prefix:"976",default_locale:"mn"},MO:{currency_code:"MOP",phone_prefix:"853",default_locale:"zh"},MR:{currency_code:"MRO",phone_prefix:"222",default_locale:"ar_MR"},MT:{currency_code:"EUR",phone_prefix:"356",default_locale:"mt"},MU:{currency_code:"MUR",phone_prefix:"230",default_locale:"en_MU"},MV:{currency_code:"MVR",phone_prefix:"960",default_locale:"en"},MW:{currency_code:"MWK",phone_prefix:"265",default_locale:"en"},MX:{currency_code:"MXN",phone_prefix:"52",default_locale:"es_MX"},MY:{currency_code:"MYR",phone_prefix:"60",default_locale:"ms_MY"},MZ:{currency_code:"MZN",phone_prefix:"258",default_locale:"pt_MZ"},NA:{currency_code:"NAD",phone_prefix:"264",default_locale:"en_NA"},NE:{currency_code:"XOF",phone_prefix:"227",default_locale:"fr_NE"},NG:{currency_code:"NGN",phone_prefix:"234",default_locale:"en_NG"},NI:{currency_code:"NIO",phone_prefix:"505",default_locale:"es_NI"},NL:{currency_code:"EUR",phone_prefix:"31",default_locale:"nl_NL"},NO:{currency_code:"NOK",phone_prefix:"47",default_locale:"no"},NP:{currency_code:"NPR",phone_prefix:"977",default_locale:"ne"},NR:{currency_code:"AUD",phone_prefix:"674",default_locale:"en"},NZ:{currency_code:"NZD",phone_prefix:"64",default_locale:"en_NZ"},OM:{currency_code:"OMR",phone_prefix:"968",default_locale:"ar_OM"},PA:{currency_code:"PAB",phone_prefix:"507",default_locale:"es_PA"},PE:{currency_code:"PEN",phone_prefix:"51",default_locale:"es_PE"},PG:{currency_code:"PGK",phone_prefix:"675",default_locale:"en_PG"},PH:{currency_code:"PHP",phone_prefix:"63",default_locale:"tl"},PK:{currency_code:"PKR",phone_prefix:"92",default_locale:"ur_PK"},PL:{currency_code:"PLN",phone_prefix:"48",default_locale:"pl"},PS:{currency_code:"ILS",phone_prefix:"970",default_locale:"ar_PS"},PT:{currency_code:"EUR",phone_prefix:"351",default_locale:"pt_PT"},PW:{currency_code:"USD",phone_prefix:"680",default_locale:"en"},PY:{currency_code:"PYG",phone_prefix:"595",default_locale:"es_PY"},QA:{currency_code:"QAR",phone_prefix:"974",default_locale:"ar_QA"},RO:{currency_code:"RON",phone_prefix:"40",default_locale:"ro"},RS:{currency_code:"RSD",phone_prefix:"381",default_locale:"sr"},RU:{currency_code:"RUB",phone_prefix:"7",default_locale:"ru"},RW:{currency_code:"RWF",phone_prefix:"250",default_locale:"rw"},SA:{currency_code:"SAR",phone_prefix:"966",default_locale:"ar_SA"},SB:{currency_code:"SBD",phone_prefix:"677",default_locale:"en_SB"},SC:{currency_code:"SCR",phone_prefix:"248",default_locale:"en_SC"},SD:{currency_code:"SDG",phone_prefix:"249",default_locale:"ar_SD"},SE:{currency_code:"SEK",phone_prefix:"46",default_locale:"sv_SE"},SG:{currency_code:"SGD",phone_prefix:"65",default_locale:"en"},SH:{currency_code:"SHP",phone_prefix:"290",default_locale:"en"},SI:{currency_code:"EUR",phone_prefix:"386",default_locale:"sl"},SK:{currency_code:"EUR",phone_prefix:"421",default_locale:"sk"},SL:{currency_code:"SLL",phone_prefix:"232",default_locale:"en_SL"},SM:{currency_code:"EUR",phone_prefix:"378",default_locale:"it_SM"},SN:{currency_code:"XOF",phone_prefix:"221",default_locale:"fr_SN"},SO:{currency_code:"SOS",phone_prefix:"252",default_locale:"so_SO"},SR:{currency_code:"SRD",phone_prefix:"597",default_locale:"nl_SR"},ST:{currency_code:"STD",phone_prefix:"239",default_locale:"pt_ST"},SV:{currency_code:"USD",phone_prefix:"503",default_locale:"es_SV"},SY:{currency_code:"SYP",phone_prefix:"963",default_locale:"ar_SY"},SZ:{currency_code:"SZL",phone_prefix:"268",default_locale:"en_SZ"},TD:{currency_code:"XAF",phone_prefix:"235",default_locale:"fr_TD"},TG:{currency_code:"XOF",phone_prefix:"228",default_locale:"fr_TG"},TH:{currency_code:"THB",phone_prefix:"66",default_locale:"th"},TJ:{currency_code:"TJS",phone_prefix:"992",default_locale:"fr"},TL:{currency_code:"USD",phone_prefix:"670",default_locale:"pt"},TM:{currency_code:"TMT",phone_prefix:"993",default_locale:"ru"},TN:{currency_code:"TND",phone_prefix:"216",default_locale:"ar_TN"},TO:{currency_code:"TOP",phone_prefix:"676",default_locale:"to"},TR:{currency_code:"TRY",phone_prefix:"90",default_locale:"tr_TR"},TT:{currency_code:"TTD",phone_prefix:"+1-868",default_locale:"en_TT"},TV:{currency_code:"AUD",phone_prefix:"688",default_locale:"en"},TW:{currency_code:"TWD",phone_prefix:"886",default_locale:"zh_TW"},TZ:{currency_code:"TZS",phone_prefix:"255",default_locale:"sw_TZ"},UA:{currency_code:"UAH",phone_prefix:"380",default_locale:"uk"},UG:{currency_code:"UGX",phone_prefix:"256",default_locale:"en_UG"},UM:{currency_code:"USD",phone_prefix:"1",default_locale:"en_UM"},US:{currency_code:"USD",phone_prefix:"1",default_locale:"en_US"},UY:{currency_code:"UYU",phone_prefix:"598",default_locale:"es_UY"},UZ:{currency_code:"UZS",phone_prefix:"998",default_locale:"uz"},VC:{currency_code:"XCD",phone_prefix:"+1-784",default_locale:"en_VC"},VE:{currency_code:"VEF",phone_prefix:"58",default_locale:"es_VE"},VN:{currency_code:"VND",phone_prefix:"84",default_locale:"vi"},VU:{currency_code:"VUV",phone_prefix:"678",default_locale:"fr"},WS:{currency_code:"WST",phone_prefix:"685",default_locale:"en"},YE:{currency_code:"YER",phone_prefix:"967",default_locale:"ar_YE"},ZA:{currency_code:"ZAR",phone_prefix:"27",default_locale:"zu"},ZM:{currency_code:"ZMK",phone_prefix:"260",default_locale:"en_ZM"},ZW:{currency_code:"ZWL",phone_prefix:"263",default_locale:"en_ZW"},AI:{currency_code:"XCD",phone_prefix:"+1-264",default_locale:"en"},AS:{currency_code:"USD",phone_prefix:"+1-684",default_locale:"en_AS"},AW:{currency_code:"AWG",phone_prefix:"297",default_locale:"nl_AW"},AX:{currency_code:"EUR",phone_prefix:"+358-18",default_locale:"sv_AX"},BM:{currency_code:"BMD",phone_prefix:"+1-441",default_locale:"en_BM"},CC:{currency_code:"AUD",phone_prefix:"61",default_locale:"ms"},CK:{currency_code:"NZD",phone_prefix:"682",default_locale:"en"},CX:{currency_code:"AUD",phone_prefix:"61",default_locale:"en"},EH:{currency_code:"MAD",phone_prefix:"212",default_locale:"ar"},FK:{currency_code:"FKP",phone_prefix:"500",default_locale:"en"},FO:{currency_code:"DKK",phone_prefix:"298",default_locale:"fo"},GF:{currency_code:"EUR",phone_prefix:"594",default_locale:"fr_GF"},GI:{currency_code:"GIP",phone_prefix:"350",default_locale:"en_GI"},GP:{currency_code:"EUR",phone_prefix:"590",default_locale:"fr_GP"},GS:{currency_code:"GBP",default_locale:"en"},GU:{currency_code:"USD",phone_prefix:"+1-671",default_locale:"en_GU"},HK:{currency_code:"HKD",phone_prefix:"852",default_locale:"zh_HK"},IO:{currency_code:"USD",phone_prefix:"246",default_locale:"en"},KY:{currency_code:"KYD",phone_prefix:"+1-345",default_locale:"en_KY"},LC:{currency_code:"XCD",phone_prefix:"+1-758",default_locale:"en_LC"},MC:{currency_code:"EUR",phone_prefix:"377",default_locale:"fr_MC"},MP:{currency_code:"USD",phone_prefix:"+1-670",default_locale:"fil"},MQ:{currency_code:"EUR",phone_prefix:"596",default_locale:"fr_MQ"},MS:{currency_code:"XCD",phone_prefix:"+1-664",default_locale:"en"},NC:{currency_code:"XPF",phone_prefix:"687",default_locale:"fr_NC"},NF:{currency_code:"AUD",phone_prefix:"672",default_locale:"en"},NU:{currency_code:"NZD",phone_prefix:"683",default_locale:"en"},PF:{currency_code:"XPF",phone_prefix:"689",default_locale:"fr_PF"},PM:{currency_code:"EUR",phone_prefix:"508",default_locale:"fr"},PN:{currency_code:"NZD",phone_prefix:"870",default_locale:"en"},PR:{currency_code:"USD",phone_prefix:"+1-787",default_locale:"en_PR"},RE:{currency_code:"EUR",phone_prefix:"262",default_locale:"fr_RE"},SJ:{currency_code:"NOK",phone_prefix:"47",default_locale:"no"},TC:{currency_code:"USD",phone_prefix:"+1-649",default_locale:"en_TC"},TF:{currency_code:"EUR",default_locale:"fr"},TK:{currency_code:"NZD",phone_prefix:"690",default_locale:"en"},VA:{currency_code:"EUR",phone_prefix:"379",default_locale:"it"},VG:{currency_code:"USD",phone_prefix:"+1-284",default_locale:"en_VG"},VI:{currency_code:"USD",phone_prefix:"+1-340",default_locale:"en_VI"},WF:{currency_code:"XPF",phone_prefix:"681",default_locale:"fr"},YT:{currency_code:"EUR",phone_prefix:"262",default_locale:"fr_YT"},AN:{currency_code:"ANG",phone_prefix:"599",default_locale:"nl"}},currency_data:{AED:{symbol:"د.إ.‏"},AFN:{symbol:"؋"},ALL:{symbol:"Lek"},AMD:{symbol:"դր."},AOA:{symbol:"Kz"},ARS:{symbol:"$"},AUD:{symbol:"AU$"},AZN:{symbol:"man."},BAM:{symbol:"KM"},BBD:{symbol:"$"},BDT:{symbol:"৳"},BGN:{symbol:"лв."},BHD:{symbol:"د.ب.‏"},BIF:{symbol:"FBu"},BND:{symbol:"$"},BOB:{symbol:"Bs"},BRL:{symbol:"R$"},BSD:{symbol:"BSD"},BTN:{symbol:"BTN"},BWP:{symbol:"P"},BYR:{symbol:"BYR"},BZD:{symbol:"$"},CAD:{symbol:"$"},CDF:{symbol:"FrCD"},CHF:{symbol:"CHF"},CLP:{symbol:"$"},CNY:{symbol:"￥"},COP:{symbol:"$"},CRC:{symbol:"₡"},CUP:{symbol:"CUP"},CVE:{symbol:"CVE"},CZK:{symbol:"Kč"},DJF:{symbol:"Fdj"},DKK:{symbol:"kr"},DOP:{symbol:"$"},DZD:{symbol:"د.ج.‏"},EGP:{symbol:"ج.م.‏"},ERN:{symbol:"Nfk"},ETB:{symbol:"ብር"},EUR:{symbol:"€"},FJD:{symbol:"FJD"},GBP:{symbol:"£"},GEL:{symbol:"GEL"},GHS:{symbol:"GHS"},GMD:{symbol:"GMD"},GNF:{symbol:"FG"},GTQ:{symbol:"Q"},GYD:{symbol:"GYD"},HNL:{symbol:"L"},HRK:{symbol:"kn"},HTG:{symbol:"HTG"},HUF:{symbol:"Ft"},IDR:{symbol:"Rp"},ILS:{symbol:"₪"},INR:{symbol:"₹"},IQD:{symbol:"د.ع.‏"},IRR:{symbol:"﷼"},ISK:{symbol:"kr"},JMD:{symbol:"$"},JOD:{symbol:"د.أ.‏"},JPY:{symbol:"￥"},KES:{symbol:"KES"},KGS:{symbol:"KGS"},KHR:{symbol:"៛"},KMF:{symbol:"ف.ج.ق.‏"},KPW:{symbol:"KPW"},KRW:{symbol:"₩"},KWD:{symbol:"د.ك.‏"},KZT:{symbol:"тңг."},LAK:{symbol:"LAK"},LBP:{symbol:"ل.ل.‏"},LKR:{symbol:"රු."},LRD:{symbol:"LRD"},LSL:{symbol:"LSL"},LTL:{symbol:"Lt"},LVL:{symbol:"Ls"},LYD:{symbol:"د.ل.‏"},MAD:{symbol:"د.م.‏"},MDL:{symbol:"MDL"},MGA:{symbol:"MGA"},MKD:{symbol:"MKD"},MMK:{symbol:"K"},MNT:{symbol:"MNT"},MOP:{symbol:"MOP"},MRO:{symbol:"أ.م.‏"},MUR:{symbol:"MUR"},MVR:{symbol:"Rf."},MWK:{symbol:"MWK"},MXN:{symbol:"$"},MYR:{symbol:"RM"},MZN:{symbol:"MTn"},NAD:{symbol:"$"},NGN:{symbol:"NGN"},NIO:{symbol:"C$"},NOK:{symbol:"kr"},NPR:{symbol:"नेरू "},NZD:{symbol:"NZ$"},OMR:{symbol:"ر.ع.‏"},PAB:{symbol:"B/."},PEN:{symbol:"S/."},PGK:{symbol:"PGK"},PHP:{symbol:"₱"},PKR:{symbol:"PKRs"},PLN:{symbol:"zł"},PYG:{symbol:"₲"},QAR:{symbol:"ر.ق.‏"},RON:{symbol:"RON"},RSD:{symbol:"дин."},RUB:{symbol:"руб."},RWF:{symbol:"RF"},SAR:{symbol:"ر.س.‏"},SBD:{symbol:"SBD"},SCR:{symbol:"SCR"},SDG:{symbol:"SDG"},SEK:{symbol:"kr"},SGD:{symbol:"SGD"},SHP:{symbol:"SHP"},SLL:{symbol:"SLL"},SOS:{symbol:"SOS"},SRD:{symbol:"SRD"},STD:{symbol:"Db"},SYP:{symbol:"ل.س.‏"},SZL:{symbol:"SZL"},THB:{symbol:"฿"},TJS:{symbol:"TJS"},TMT:{symbol:"TMT"},TND:{symbol:"د.ت.‏"},TOP:{symbol:"T$"},TRY:{symbol:"TL"},TTD:{symbol:"$"},TWD:{symbol:"NT$"},TZS:{symbol:"TSh"},UAH:{symbol:"₴"},UGX:{symbol:"UGX"},USD:{symbol:"$"},UYU:{symbol:"$"},UZS:{symbol:"UZS"},VEF:{symbol:"Bs.F."},VND:{symbol:"₫"},VUV:{symbol:"VUV"},WST:{symbol:"WST"},XAF:{symbol:"FCFA"},XCD:{symbol:"EC$"},XOF:{symbol:"CFA"},YER:{symbol:"ر.ي.‏"},ZAR:{symbol:"R"},ZMK:{symbol:"ZMK"},ZWL:{symbol:"ZWL"},ANG:{symbol:"ANG"},AWG:{symbol:"Afl."},BMD:{symbol:"$"},FKP:{symbol:"FKP"},GIP:{symbol:"GIP"},HKD:{symbol:"$"},KYD:{symbol:"KYD"},XPF:{symbol:"FCFP"}},format:{address:{AD:"%name%\\n%organization%\\n%street%\\n%postal_code% %REGION%\\n%COUNTRY%",AE:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%",AG:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%",AM:"%name%\\n%organization%\\n%street%\\n%postal_code%\\n%city%\\n%region%\\n%country%",AR:"%name%\\n%organization%\\n%STREET%\\n%POSTAL_CODE% %CITY%\\n%region%\\n%country%",AT:"%organization%\\n%name%\\n%street%\\n%postal_code% %city%\\n%country%",AU:"%organization%\\n%name%\\n%street%\\n%CITY% %REGION% %COUNTRY% %postal_code%",AZ:"%name%\\n%organization%\\n%street%\\nAZ %postal_code% %city%\\n%country%",BA:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",BB:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%",BD:"%name%\\n%organization%\\n%street%\\n%city% - %postal_code%\\n%country%",BE:"%organization%\\n%name%\\n%street%\\n%postal_code% %city%\\n%country%",BF:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%",BG:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",BH:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",BL:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",BN:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",BR:"%organization%\\n%name%\\n%street%\\n%CITY%-%REGION%\\n%COUNTRY%\\n%postal_code%",BS:"%name%\\n%organization%\\n%street%\\n%city%, %region%\\n%country%",BY:"%country%\\n%region%\\n%postal_code% %city% %street%\\n%organization%\\n%name%",CA:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %REGION%, %COUNTRY% %POSTAL_CODE%",CD:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%",CH:"%organization%\\n%name%\\n%street%\\nCH-%postal_code% %city%\\n%country%",CI:"%name%\\n%organization% %street% %city%\\n%country%",CL:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%region%\\n%country%",CN:"%postal_code%\\n%COUNTRY%\\n%REGION%%city%\\n%street%\\n%organization%\\n%name%",CO:"%name%\\n%organization%\\n%street%\\n%city%, %region%\\n%country%",CR:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",CV:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%region%\\n%country%",CY:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",CZ:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",DE:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",DK:"%organization%\\n%name%\\n%street%\\n%postal_code% %city%\\n%country%",DO:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",DZ:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",EC:"%name%\\n%organization%\\n%street%\\n%POSTAL_CODE%\\n%CITY%\\n%COUNTRY%",EE:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",EG:"%name%\\n%organization%\\n%street%\\n%city%\\n%region%\\n%country%\\n%postal_code%",ES:"%name%\\n%organization%\\n%street%\\n%postal_code% %CITY% %REGION%\\n%COUNTRY%",ET:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",FI:"%organization%\\n%name%\\n%street%\\nFI-%postal_code% %city%\\n%country%",FM:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %COUNTRY% %REGION% %postal_code%",FR:"%organization%\\n%name%\\n%street%\\n%postal_code% %CITY%\\n%COUNTRY%",GB:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%region%\\n%country%\\n%POSTAL_CODE%",GE:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",GG:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\nGUERNSEY\\n%POSTAL_CODE%",GL:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",GN:"%name%\\n%organization%\\n%postal_code% %street% %city%\\n%country%",GR:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",GT:"%name%\\n%organization%\\n%street%\\n%postal_code%- %city%\\n%country%",GW:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",HN:"%name%\\n%organization%\\n%street%\\n%city%, %region%\\n%country%\\n%postal_code%",HR:"%name%\\n%organization%\\n%street%\\nHR-%postal_code% %city%\\n%country%",HT:"%name%\\n%organization%\\n%street%\\nHT%postal_code% %city%\\n%country%",HU:"%NAME%\\n%ORGANIZATION%\\n%CITY%\\n%STREET%\\n%COUNTRY%\\n%postal_code%",ID:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%region%\\n%country%",IE:"%name%\\n%organization%\\n%street%\\n%city%\\n%region%\\n%country%",IL:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",IM:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",IN:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%region%\\n%country%",IQ:"%organization%\\n%name%\\n%street%\\n%CITY%, %REGION%\\n%COUNTRY%\\n%postal_code%",IS:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",IT:"%name%\\n%organization%\\n%street%\\n%postal_code% %CITY% %REGION%\\n%COUNTRY%",JE:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\nJERSEY\\n%POSTAL_CODE%",JM:"%name%\\n%organization%\\n%street%\\n%city%\\n%region%\\n%country%",JO:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",JP:"〒%postal_code%\\n%REGION%%city%\\n%street%\\n%organization%\\n%name%",KE:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%\\n%postal_code%",KG:"%postal_code% %country% %city% %street%\\n%organization%\\n%name%",KH:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",KI:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%REGION%\\n%CITY%\\n%COUNTRY%",KN:"%name%\\n%organization%\\n%street%\\n%city%, %region%\\n%country%",KR:"%country%\\n%region% %city%\\n%street%\\n%organization%\\n%name%\\nSEOUL %POSTAL_CODE%",KW:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",KZ:"%postal_code%\\n%country%\\n%region%\\n%city%\\n%street%\\n%organization%\\n%name%",LA:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",LB:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",LI:"%organization%\\n%name%\\n%street%\\nFL-%postal_code% %city%\\n%country%",LK:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%\\n%postal_code%",LR:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",LS:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",LT:"%organization%\\n%name%\\n%street%\\nLT-%postal_code% %city%\\n%country%",LU:"%organization%\\n%name%\\n%street%\\nL-%postal_code% %city%\\n%country%",LV:"%name%\\n%organization%\\n%street%\\n%city% %country%, %postal_code%",MA:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",MD:"%name%\\n%organization%\\n%street%\\nMD-%postal_code% %city%\\n%country%",ME:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",MF:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",MG:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",MH:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %COUNTRY% %REGION% %postal_code%",MK:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",MN:"%name%\\n%organization%\\n%street%\\n%region% %city%\\n%country%\\n%postal_code%",MO:"%street%\\n%organization%\\n%name%",MT:"%name%\\n%organization%\\n%street%\\n%CITY% %POSTAL_CODE%\\n%COUNTRY%",MU:"%name%\\n%organization%\\n%street%\\n%POSTAL_CODE%\\n%CITY%\\n%COUNTRY%",MV:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",MW:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%",MX:"%name%\\n%organization%\\n%street%\\n%POSTAL_CODE% %CITY%, %REGION%\\n%COUNTRY%",MY:"%name%\\n%organization%\\n%street%\\n%postal_code% %CITY%, %REGION%\\n%COUNTRY%",MZ:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%",NE:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",NG:"%name%\\n%organization%\\n%street%\\n%CITY% %postal_code%\\n%REGION%\\n%COUNTRY%",NI:"%name%\\n%organization%\\n%street%\\n%postal_code%\\n%CITY%, %REGION%\\n%COUNTRY%",NL:"%organization%\\n%name%\\n%street%\\n%postal_code% %city%\\n%country%",NO:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",NP:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",NR:"%name%\\n%organization%\\n%street%\\n%region%\\n%country%",NZ:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",OM:"%name%\\n%organization%\\n%street%\\n%postal_code%\\n%city%\\n%country%",PA:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%REGION%\\n%COUNTRY%",PG:"%name%\\n%organization%\\n%street%\\n%city% %postal_code% %region%\\n%country%",PH:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%region%\\n%country%",PK:"%name%\\n%organization%\\n%street%\\n%city%-%postal_code%\\n%country%",PL:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",PT:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",PW:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %COUNTRY% %REGION% %postal_code%",PY:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",RO:"%name%\\n%organization%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",RS:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",RU:"%postal_code% %COUNTRY% %CITY%\\n%STREET%\\n%organization%\\n%name%",SA:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",SC:"%name%\\n%organization%\\n%street%\\n%city%\\n%REGION%\\n%COUNTRY%",SE:"%organization%\\n%name%\\n%street%\\nSE-%postal_code% %city%\\n%country%",SG:"%name%\\n%organization%\\n%street%\\nSINGAPORE %postal_code%",SH:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",SI:"%name%\\n%organization%\\n%street%\\nSI- %postal_code% %city%\\n%country%",SK:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",SM:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",SN:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",SO:"%name%\\n%organization%\\n%STREET%\\n%CITY%, %REGION% %COUNTRY% %postal_code%",SR:"%name%\\n%organization%\\n%STREET%\\n%city% %REGION%\\n%COUNTRY%",ST:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%",SV:"%name%\\n%organization%\\n%street%\\n%POSTAL_CODE%-%CITY%\\n%REGION%\\n%COUNTRY%",SZ:"%name%\\n%organization%\\n%STREET%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",TH:"%name%\\n%organization%\\n%street%\\n%city%\\n%REGION% %COUNTRY% %postal_code%",TJ:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",TM:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",TN:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",TR:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%/%region%\\n%country%",TV:"%name%\\n%organization%\\n%STREET%\\n%CITY%\\n%REGION%\\n%COUNTRY%",TW:"%postal_code%\\n%country%\\n%region%%city%\\n%street%\\n%organization%\\n%name%",UA:"%postal_code% %country% %city%\\n%street%\\n%organization%\\n%name%",UM:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %REGION% %COUNTRY% %postal_code%",US:"%name%\\n%organization%\\n%street%\\n%CITY% %REGION_CODE% %COUNTRY_ISO2% %postal_code%",UY:"%name%\\n%organization%\\n%street%\\n%postal_code% %CITY% %REGION%\\n%COUNTRY%",UZ:"%name%\\n%organization%\\n%street%\\n%postal_code% %CITY%\\n%REGION%\\n%COUNTRY%",VE:"%name%\\n%organization%\\n%street%\\n%CITY% %postal_code%, %REGION%\\n%COUNTRY%",VN:"%name%\\n%organization%\\n%street%\\n%city%\\n%region%\\n%country%",YE:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%",ZA:"%name%\\n%organization%\\n%street%\\n%city%\\n%country%\\n%postal_code%",ZM:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",AS:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %REGION% %COUNTRY% %postal_code%",AX:"%organization%\\n%name%\\n%street%\\nAX-%postal_code% %city%\\n%country%\\nÅLAND",BM:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",CC:"%organization%\\n%name%\\n%street%\\n%CITY% %REGION% %COUNTRY% %postal_code%",CK:"%name%\\n%organization%\\n%street%\\n%city% %postal_code%\\n%country%",CX:"%organization%\\n%name%\\n%street%\\n%CITY% %REGION% %COUNTRY% %postal_code%",FK:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",FO:"%name%\\n%organization%\\n%street%\\nFO%postal_code% %city%\\n%country%",GF:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",GI:"%name%\\n%organization%\\n%street%\\n%country%",GP:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",GS:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",GU:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %REGION% %COUNTRY% %postal_code%",HK:"%REGION%\\n%street%\\n%organization%\\n%name%",HM:"%organization%\\n%name%\\n%street%\\n%CITY% %REGION% %COUNTRY% %postal_code%",IO:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",KY:"%name%\\n%organization%\\n%street%\\n%region%\\n%country%",MC:"%name%\\n%organization%\\n%street%\\nMC-%postal_code% %city%\\n%country%",MP:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %COUNTRY% %REGION% %postal_code%",MQ:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",NC:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",NF:"%organization%\\n%name%\\n%street%\\n%CITY% %REGION% %postal_code%",PF:"%name%\\n%organization%\\n%street%\\n%postal_code% %CITY% %REGION%\\n%COUNTRY%",PM:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",PN:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",PR:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% PR %postal_code%\\n%COUNTRY%",RE:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",SJ:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",TC:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%\\n%POSTAL_CODE%",VA:"%name%\\n%organization%\\n%street%\\n%postal_code% %city%\\n%country%",VG:"%name%\\n%organization%\\n%street%\\n%CITY%\\n%COUNTRY%",VI:"%NAME%\\n%ORGANIZATION%\\n%STREET%\\n%CITY% %REGION% %COUNTRY% %postal_code%",WF:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%",YT:"%organization%\\n%name%\\n%STREET%\\n%postal_code% %CITY%\\n%COUNTRY%"},name:{en:"%prefix% %first_name% %middle_name% %last_name% %suffix%",en_US:"%prefix% %first_name% %middle_name% %last_name% %suffix%",ru:"%last_name% %first_name% %middle_name%",ru_RU:"%last_name% %first_name% %middle_name%"}}}),define("orolocale/js/locale-settings",["underscore","orolocale/js/locale-settings/data"],function(e,t){var i={defaults:{locale:"en_US",language:"en",country:"US",currency:"USD",timezone:"UTC",timezone_offset:"+00:00"},settings:{locale:"en_US",language:"en",country:"US",currency:"USD",datetime_separator:!1,timezone:"UTC",timezone_offset:"+00:00",format_address_by_address_country:!0,unit:{temperature:"fahrenheit",wind_speed:"miles_per_hour"},locale_data:{US:{phone_prefix:"1",default_locale:"en_US",currency_code:"USD"}},currency_data:{USD:{symbol:"$"}},format:{datetime:{moment:{date:"YYYY-MM-DD",time:"HH:mms",datetime:"YYYY-MM-DD HH:mm"}},address:{US:"%name%\n%organization%\n%street%\n%CITY% %REGION% %COUNTRY% %postal_code%"},name:{en_US:"%prefix% %first_name% %middle_name% %last_name% %suffix%"}},calendar:{dow:{wide:{1:"Sunday",2:"Monday",3:"Tuesday",4:"Wednesday",5:"Thursday",6:"Friday",7:"Saturday"},abbreviated:{1:"Sun",2:"Mon",3:"Tue",4:"Wed",5:"Thu",6:"Fri",7:"Sat"},"short":{1:"Su",2:"Mo",3:"Tu",4:"We",5:"Th",6:"Fr",7:"Sa"},narrow:{1:"S",2:"M",3:"T",4:"W",5:"T",6:"F",7:"S"}},months:{wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"}},first_dow:1}},_deepExtend:function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=e.isObject(t[n])?this._deepExtend(t[n],i[n]):i[n]);
return t},extendSettings:function(e){this.settings=this._deepExtend(this.settings,e)},extendDefaults:function(e){this.defaults=this._deepExtend(this.defaults,e)},getLocale:function(){return this.settings.locale},getCountry:function(){return this.settings.country},getCurrency:function(){return this.settings.currency},getCurrencySymbol:function(e){return e||(e=this.settings.currency),this.settings.currency_data.hasOwnProperty(e)?this.settings.currency_data[e].symbol:e},getTimeZoneOffset:function(){return this.settings.timezone_offset},getTimeZoneShift:function(){var e=i.getTimeZoneOffset(),t=e.match(/^(\+|\-)(\d{2}):?(\d{2})$/),n=Number(t[1]+"1"),o=Number(t[2]),s=Number(t[3]);return n*(60*o+s)},getNameFormats:function(){return this.settings.format.name},getAddressFormats:function(){return this.settings.format.address},getNumberFormats:function(e){return this.settings.format.number[e]},getCountryLocale:function(e){return this.getLocaleData(e,"default_locale")||this.settings.locale},getVendorDateTimeFormat:function(e,t,i){return this.settings.format.datetime.hasOwnProperty(e)?(t=t&&this.settings.format.datetime[e].hasOwnProperty(t)?t:"datetime",this.settings.format.datetime[e][t]):i},getDateTimeFormatSeparator:function(){return this.settings.datetime_separator||(this.settings.datetime_separator=this.getVendorDateTimeFormat("jquery_ui","datetime","").replace(i.getVendorDateTimeFormat("jquery_ui","date"),"").replace(i.getVendorDateTimeFormat("jquery_ui","time"),"")),this.settings.datetime_separator},getLocaleData:function(e,t){return this.settings.locale_data.hasOwnProperty(e)?this.settings.locale_data[e][t]:null},isFormatAddressByAddressCountry:function(){return this.settings.format_address_by_address_country},getCalendarMonthNames:function(t,i){t=t&&this.settings.calendar.months.hasOwnProperty(t)?t:"wide";var n=this.settings.calendar.months[t];return i&&(n=e.map(n,function(e){return e})),n},getCalendarDayOfWeekNames:function(t,i){t=t&&this.settings.calendar.dow.hasOwnProperty(t)?t:"wide";var n=this.settings.calendar.dow[t];return i&&(n=e.map(n,function(e){return e})),n},getCalendarFirstDayOfWeek:function(){return this.settings.calendar.first_dow},getLocaleFallback:function(e){for(var t=[e,this.settings.locale,this.defaults.locale],i=function(e){return e?e.split("_")[0]:e},n=[],o=0;o<t.length;o++)t[o]&&(n.push(t[o]),n.push(i(t[o])));return n}};return i.extendSettings(t),i}),function(e){function t(e,t){return function(i){return l(e.call(this,i),t)}}function i(e,t){return function(i){return this.lang().ordinal(e.call(this,i),t)}}function n(){}function o(e){b(e),r(this,e)}function s(e){var t=f(e),i=t.year||0,n=t.month||0,o=t.week||0,s=t.day||0,r=t.hour||0,a=t.minute||0,l=t.second||0,c=t.millisecond||0;this._input=e,this._milliseconds=+c+1e3*l+6e4*a+36e5*r,this._days=+s+7*o,this._months=+n+12*i,this._data={},this._bubble()}function r(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function a(e){return 0>e?Math.ceil(e):Math.floor(e)}function l(e,t){for(var i=e+"";i.length<t;)i="0"+i;return i}function c(e,t,i,n){var o,s,r=t._milliseconds,a=t._days,l=t._months;r&&e._d.setTime(+e._d+r*i),(a||l)&&(o=e.minute(),s=e.hour()),a&&e.date(e.date()+a*i),l&&e.month(e.month()+l*i),r&&!n&&tt.updateOffset(e),(a||l)&&(e.minute(o),e.hour(s))}function d(e){return"[object Array]"===Object.prototype.toString.call(e)}function h(e){return"[object Date]"===Object.prototype.toString.call(e)}function u(e,t,i){var n,o=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0;for(n=0;o>n;n++)(i&&e[n]!==t[n]||!i&&g(e[n])!==g(t[n]))&&r++;return r+s}function p(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=It[e]||zt[t]||t}return e}function f(e){var t,i,n={};for(i in e)e.hasOwnProperty(i)&&(t=p(i),t&&(n[t]=e[i]));return n}function m(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}tt[t]=function(o,s){var r,a,l=tt.fn._lang[t],c=[];if("number"==typeof o&&(s=o,o=e),a=function(e){var t=tt().utc().set(n,e);return l.call(tt.fn._lang,t,o||"")},null!=s)return a(s);for(r=0;i>r;r++)c.push(a(r));return c}}function g(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function v(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function _(e){return y(e)?366:365}function y(e){return 0===e%4&&0!==e%100||0===e%400}function b(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[rt]<0||e._a[rt]>11?rt:e._a[at]<1||e._a[at]>v(e._a[st],e._a[rt])?at:e._a[lt]<0||e._a[lt]>23?lt:e._a[ct]<0||e._a[ct]>59?ct:e._a[dt]<0||e._a[dt]>59?dt:e._a[ht]<0||e._a[ht]>999?ht:-1,e._pf._overflowDayOfYear&&(st>t||t>at)&&(t=at),e._pf.overflow=t)}function w(e){e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function x(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function k(e){return e?e.toLowerCase().replace("_","-"):e}function C(e,t){return t.abbr=e,ut[e]||(ut[e]=new n),ut[e].set(t),ut[e]}function j(e){delete ut[e]}function T(e){var t,i,n,o,s=0,r=function(e){if(!ut[e]&&pt)try{require("./lang/"+e)}catch(t){}return ut[e]};if(!e)return tt.fn._lang;if(!d(e)){if(i=r(e))return i;e=[e]}for(;s<e.length;){for(o=k(e[s]).split("-"),t=o.length,n=k(e[s+1]),n=n?n.split("-"):null;t>0;){if(i=r(o.slice(0,t).join("-")))return i;if(n&&n.length>=t&&u(o,n,!0)>=t-1)break;t--}s++}return tt.fn._lang}function S(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function D(e){var t,i,n=e.match(vt);for(t=0,i=n.length;i>t;t++)n[t]=Lt[n[t]]?Lt[n[t]]:S(n[t]);return function(o){var s="";for(t=0;i>t;t++)s+=n[t]instanceof Function?n[t].call(o,e):n[t];return s}}function E(e,t){return e.isValid()?(t=M(t,e.lang()),Nt[t]||(Nt[t]=D(t)),Nt[t](e)):e.lang().invalidDate()}function M(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(_t.lastIndex=0;n>=0&&_t.test(e);)e=e.replace(_t,i),_t.lastIndex=0,n-=1;return e}function A(e,t){var i;switch(e){case"DDDD":return wt;case"YYYY":case"GGGG":case"gggg":return xt;case"YYYYY":case"GGGGG":case"ggggg":return kt;case"S":case"SS":case"SSS":case"DDD":return bt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ct;case"a":case"A":return T(t._l)._meridiemParse;case"X":return St;case"Z":case"ZZ":return jt;case"T":return Tt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return yt;default:return i=new RegExp($(R(e.replace("\\","")),"i"))}}function F(e){var t=(jt.exec(e)||[])[0],i=(t+"").match(Ft)||["-",0,0],n=+(60*i[1])+g(i[2]);return"+"===i[0]?-n:n}function O(e,t,i){var n,o=i._a;switch(e){case"M":case"MM":null!=t&&(o[rt]=g(t)-1);break;case"MMM":case"MMMM":n=T(i._l).monthsParse(t),null!=n?o[rt]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(o[at]=g(t));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=g(t));break;case"YY":o[st]=g(t)+(g(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":o[st]=g(t);break;case"a":case"A":i._isPm=T(i._l).isPM(t);break;case"H":case"HH":case"h":case"hh":o[lt]=g(t);break;case"m":case"mm":o[ct]=g(t);break;case"s":case"ss":o[dt]=g(t);break;case"S":case"SS":case"SSS":o[ht]=g(1e3*("0."+t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=F(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=t)}}function P(e){var t,i,n,o,s,r,a,l,c,d,h=[];if(!e._d){for(n=z(e),e._w&&null==e._a[at]&&null==e._a[rt]&&(s=function(t){return t?t.length<3?parseInt(t,10)>68?"19"+t:"20"+t:t:null==e._a[st]?tt().weekYear():e._a[st]},r=e._w,null!=r.GG||null!=r.W||null!=r.E?a=K(s(r.GG),r.W||1,r.E,4,1):(l=T(e._l),c=null!=r.d?V(r.d,l):null!=r.e?parseInt(r.e,10)+l._week.dow:0,d=parseInt(r.w,10)||1,null!=r.d&&c<l._week.dow&&d++,a=K(s(r.gg),d,c,l._week.doy,l._week.dow)),e._a[st]=a.year,e._dayOfYear=a.dayOfYear),e._dayOfYear&&(o=null==e._a[st]?n[st]:e._a[st],e._dayOfYear>_(o)&&(e._pf._overflowDayOfYear=!0),i=B(o,0,e._dayOfYear),e._a[rt]=i.getUTCMonth(),e._a[at]=i.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=h[t]=n[t];for(;7>t;t++)e._a[t]=h[t]=null==e._a[t]?2===t?1:0:e._a[t];h[lt]+=g((e._tzm||0)/60),h[ct]+=g((e._tzm||0)%60),e._d=(e._useUTC?B:W).apply(null,h)}}function I(e){var t;e._d||(t=f(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],P(e))}function z(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function N(e){e._a=[],e._pf.empty=!0;var t,i,n,o,s,r=T(e._l),a=""+e._i,l=a.length,c=0;for(n=M(e._f,r).match(vt)||[],t=0;t<n.length;t++)o=n[t],i=(A(o,e).exec(a)||[])[0],i&&(s=a.substr(0,a.indexOf(i)),s.length>0&&e._pf.unusedInput.push(s),a=a.slice(a.indexOf(i)+i.length),c+=i.length),Lt[o]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(o),O(o,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=l-c,a.length>0&&e._pf.unusedInput.push(a),e._isPm&&e._a[lt]<12&&(e._a[lt]+=12),e._isPm===!1&&12===e._a[lt]&&(e._a[lt]=0),P(e),b(e)}function R(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,o){return t||i||n||o})}function $(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function L(e){var t,i,n,o,s;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(0/0),void 0;for(o=0;o<e._f.length;o++)s=0,t=r({},e),w(t),t._f=e._f[o],N(t),x(t)&&(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,(null==n||n>s)&&(n=s,i=t));r(e,i||t)}function H(e){var t,i=e._i,n=Dt.exec(i);if(n){for(e._pf.iso=!0,t=4;t>0;t--)if(n[t]){e._f=Mt[t-1]+(n[6]||" ");break}for(t=0;4>t;t++)if(At[t][1].exec(i)){e._f+=At[t][0];break}jt.exec(i)&&(e._f+="Z"),N(e)}else e._d=new Date(i)}function q(t){var i=t._i,n=ft.exec(i);i===e?t._d=new Date:n?t._d=new Date(+n[1]):"string"==typeof i?H(t):d(i)?(t._a=i.slice(0),P(t)):h(i)?t._d=new Date(+i):"object"==typeof i?I(t):t._d=new Date(i)}function W(e,t,i,n,o,s,r){var a=new Date(e,t,i,n,o,s,r);return 1970>e&&a.setFullYear(e),a}function B(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function V(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function U(e,t,i,n,o){return o.relativeTime(t||1,!!i,e,n)}function Y(e,t,i){var n=ot(Math.abs(e)/1e3),o=ot(n/60),s=ot(o/60),r=ot(s/24),a=ot(r/365),l=45>n&&["s",n]||1===o&&["m"]||45>o&&["mm",o]||1===s&&["h"]||22>s&&["hh",s]||1===r&&["d"]||25>=r&&["dd",r]||45>=r&&["M"]||345>r&&["MM",ot(r/30)]||1===a&&["y"]||["yy",a];return l[2]=t,l[3]=e>0,l[4]=i,U.apply({},l)}function G(e,t,i){var n,o=i-t,s=i-e.day();return s>o&&(s-=7),o-7>s&&(s+=7),n=tt(e).add("d",s),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function K(e,t,i,n,o){var s,r,a=new Date(Date.UTC(e,0)).getUTCDay();return i=null!=i?i:o,s=o-a+(a>n?7:0),r=7*(t-1)+(i-o)+s+1,{year:r>0?e:e-1,dayOfYear:r>0?r:_(e-1)+r}}function X(e){var t=e._i,i=e._f;return"undefined"==typeof e._pf&&w(e),null===t?tt.invalid({nullInput:!0}):("string"==typeof t&&(e._i=t=T().preparse(t)),tt.isMoment(t)?(e=r({},t),e._d=new Date(+t._d)):i?d(i)?L(e):N(e):q(e),new o(e))}function J(e,t){tt.fn[e]=tt.fn[e+"s"]=function(e){var i=this._isUTC?"UTC":"";return null!=e?(this._d["set"+i+t](e),tt.updateOffset(this),this):this._d["get"+i+t]()}}function Z(e){tt.duration.fn[e]=function(){return this._data[e]}}function Q(e,t){tt.duration.fn["as"+e]=function(){return+this/t}}function et(){"undefined"==typeof ender&&(this.moment=tt)}for(var tt,it,nt="2.3.1",ot=Math.round,st=0,rt=1,at=2,lt=3,ct=4,dt=5,ht=6,ut={},pt="undefined"!=typeof module&&module.exports,ft=/^\/?Date\((\-?\d+)/i,mt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,gt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,vt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,_t=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,yt=/\d\d?/,bt=/\d{1,3}/,wt=/\d{3}/,xt=/\d{1,4}/,kt=/[+\-]?\d{1,6}/,Ct=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,jt=/Z|[\+\-]\d\d:?\d\d/i,Tt=/T/i,St=/[\+\-]?\d+(\.\d{1,3})?/,Dt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,Et="YYYY-MM-DDTHH:mm:ssZ",Mt=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],At=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ft=/([\+\-]|\d\d)/gi,Ot="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Pt={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},It={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},zt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Nt={},Rt="DDD w W M D d".split(" "),$t="M D H h m s w W".split(" "),Lt={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return g(this.milliseconds()/100)},SS:function(){return l(g(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(g(e/60),2)+":"+l(g(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(g(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},Ht=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Rt.length;)it=Rt.pop(),Lt[it+"o"]=i(Lt[it],it);for(;$t.length;)it=$t.pop(),Lt[it+it]=t(Lt[it],2);for(Lt.DDDD=t(Lt.DDD,3),r(n.prototype,{set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,i,n;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(i=tt.utc([2e3,t]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=tt([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var i=this._calendar[e];return"function"==typeof i?i.apply(t):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(e,t,i,n):o.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return G(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),tt=function(t,i,n,o){return"boolean"==typeof n&&(o=n,n=e),X({_i:t,_f:i,_l:n,_strict:o,_isUTC:!1})},tt.utc=function(t,i,n,o){var s;return"boolean"==typeof n&&(o=n,n=e),s=X({_useUTC:!0,_isUTC:!0,_l:n,_i:t,_f:i,_strict:o}).utc()},tt.unix=function(e){return tt(1e3*e)},tt.duration=function(e,t){var i,n,o,r=tt.isDuration(e),a="number"==typeof e,l=r?e._input:a?{}:e,c=null;return a?t?l[t]=e:l.milliseconds=e:(c=mt.exec(e))?(i="-"===c[1]?-1:1,l={y:0,d:g(c[at])*i,h:g(c[lt])*i,m:g(c[ct])*i,s:g(c[dt])*i,ms:g(c[ht])*i}):(c=gt.exec(e))&&(i="-"===c[1]?-1:1,o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},l={y:o(c[2]),M:o(c[3]),d:o(c[4]),h:o(c[5]),m:o(c[6]),s:o(c[7]),w:o(c[8])}),n=new s(l),r&&e.hasOwnProperty("_lang")&&(n._lang=e._lang),n},tt.version=nt,tt.defaultFormat=Et,tt.updateOffset=function(){},tt.lang=function(e,t){var i;return e?(t?C(k(e),t):null===t?(j(e),e="en"):ut[e]||T(e),i=tt.duration.fn._lang=tt.fn._lang=T(e),i._abbr):tt.fn._lang._abbr},tt.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),T(e)},tt.isMoment=function(e){return e instanceof o},tt.isDuration=function(e){return e instanceof s},it=Ht.length-1;it>=0;--it)m(Ht[it]);for(tt.normalizeUnits=function(e){return p(e)},tt.invalid=function(e){var t=tt.utc(0/0);return null!=e?r(t._pf,e):t._pf.userInvalidated=!0,t},tt.parseZone=function(e){return tt(e).parseZone()},r(tt.fn=o.prototype,{clone:function(){return tt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return E(tt(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&u(this._a,(this._isUTC?tt.utc(this._a):tt(this._a)).toArray())>0:!1},parsingFlags:function(){return r({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=E(this,e||tt.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var i;return i="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),c(this,i,1),this},subtract:function(e,t){var i;return i="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),c(this,i,-1),this},diff:function(e,t,i){var n,o,s=this._isUTC?tt(e).zone(this._offset||0):tt(e).local(),r=6e4*(this.zone()-s.zone());return t=p(t),"year"===t||"month"===t?(n=432e5*(this.daysInMonth()+s.daysInMonth()),o=12*(this.year()-s.year())+(this.month()-s.month()),o+=(this-tt(this).startOf("month")-(s-tt(s).startOf("month")))/n,o-=6e4*(this.zone()-tt(this).startOf("month").zone()-(s.zone()-tt(s).startOf("month").zone()))/n,"year"===t&&(o/=12)):(n=this-s,o="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-r)/864e5:"week"===t?(n-r)/6048e5:n),i?o:a(o)},from:function(e,t){return tt.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(tt(),e)},calendar:function(){var e=this.diff(tt().zone(this.zone()).startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){return y(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=V(e,this.lang()),this.add({d:e-t})):t},month:function(e){var t,i=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+i+"Month"](e),this.date(Math.min(t,this.daysInMonth())),tt.updateOffset(this),this):this._d["get"+i+"Month"]()},startOf:function(e){switch(e=p(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=p(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+tt(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+tt(e).startOf(t)},isSame:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)===+tt(e).startOf(t)},min:function(e){return e=tt.apply(null,arguments),this>e?this:e},max:function(e){return e=tt.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=F(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&c(this,tt.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?tt(e).zone():0,0===(this.zone()-e)%60},daysInMonth:function(){return v(this.year(),this.month())},dayOfYear:function(e){var t=ot((tt(this).startOf("day")-tt(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},weekYear:function(e){var t=G(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=G(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=G(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=p(e),this[e]()},set:function(e,t){return e=p(e),"function"==typeof this[e]&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=T(t),this)}}),it=0;it<Ot.length;it++)J(Ot[it].toLowerCase().replace(/s$/,""),Ot[it]);J("year","FullYear"),tt.fn.days=tt.fn.day,tt.fn.months=tt.fn.month,tt.fn.weeks=tt.fn.week,tt.fn.isoWeeks=tt.fn.isoWeek,tt.fn.toJSON=tt.fn.toISOString,r(tt.duration.fn=s.prototype,{_bubble:function(){var e,t,i,n,o=this._milliseconds,s=this._days,r=this._months,l=this._data;l.milliseconds=o%1e3,e=a(o/1e3),l.seconds=e%60,t=a(e/60),l.minutes=t%60,i=a(t/60),l.hours=i%24,s+=a(i/24),l.days=s%30,r+=a(s/30),l.months=r%12,n=a(r/12),l.years=n},weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*g(this._months/12)},humanize:function(e){var t=+this,i=Y(t,!e,this.lang());return e&&(i=this.lang().pastFuture(t,i)),this.lang().postformat(i)},add:function(e,t){var i=tt.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=tt.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=p(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=p(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:tt.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),o=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||o||s?"T":"")+(n?n+"H":"")+(o?o+"M":"")+(s?s+"S":""):"P0D"}});for(it in Pt)Pt.hasOwnProperty(it)&&(Q(it,Pt[it]),Z(it.toLowerCase()));Q("Weeks",6048e5),tt.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},tt.lang("en",{ordinal:function(e){var t=e%10,i=1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),pt?(module.exports=tt,et()):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(e,t,i){return i.config().noGlobal!==!0&&et(),tt}):et()}.call(this),define("orolocale/js/moment-l10n",["moment","orotranslation/js/translator","./locale-settings"],function(e,t,i){var n=i.getLocale();return e.lang(n,{months:i.getCalendarMonthNames("wide",!0),monthsShort:i.getCalendarMonthNames("abbreviated",!0),weekdays:i.getCalendarDayOfWeekNames("wide",!0),weekdaysShort:i.getCalendarDayOfWeekNames("abbreviated",!0),weekdaysMin:i.getCalendarDayOfWeekNames("short",!0),week:{dow:i.getCalendarFirstDayOfWeek()-1},meridiem:function(e,i,n){return e>11?n?t("pm"):t("PM"):n?t("am"):t("AM")}}),e}),define("orolocale/js/formatter/datetime",["../locale-settings","moment"],function(e,t){var i="moment";return{frontendFormats:{date:e.getVendorDateTimeFormat(i,"date"),time:e.getVendorDateTimeFormat(i,"time"),datetime:e.getVendorDateTimeFormat(i,"datetime")},backendFormats:{date:"YYYY-MM-DD",time:"HH:mm:ss",datetime:"YYYY-MM-DD[T]HH:mm:ssZZ"},timezoneOffset:e.getTimeZoneOffset(),getDateFormat:function(){return this.frontendFormats.date},getTimeFormat:function(){return this.frontendFormats.time},getDateTimeFormat:function(){return this.frontendFormats.datetime},isDateValid:function(e){return t(e,this.getDateFormat(),!0).isValid()},isTimeValid:function(e){return t(e,this.getTimeFormat()).isValid()},isDateTimeValid:function(e){return t(e,this.getDateTimeFormat()).isValid()},formatDate:function(e){return this.getMomentForBackendDate(e).format(this.getDateFormat())},unformatBackendDate:function(e){return this.getMomentForBackendDate(e).toDate()},getMomentForBackendDate:function(e){var i=t.utc(e);if(!i.isValid())throw new Error("Invalid backend date "+e);return i},formatTime:function(e){return this.getMomentForBackendTime(e).format(this.getTimeFormat())},unformatBackendTime:function(e){return this.getMomentForBackendTime(e).toDate()},getMomentForBackendTime:function(e){var i=t.utc(e,["HH:mm:ss","HH:mm"]);if(!i.isValid())throw new Error("Invalid backend time "+e);return i},formatDateTime:function(e){return this.getMomentForBackendDateTime(e).format(this.getDateTimeFormat())},unformatBackendDateTime:function(e){return this.getMomentForBackendDateTime(e).toDate()},getMomentForBackendDateTime:function(e){var i=t.utc(e).zone(this.timezoneOffset);if(!i.isValid())throw new Error("Invalid backend datetime "+e);return i},convertDateToBackendFormat:function(e){return this.getMomentForFrontendDate(e).format(this.backendFormats.date)},convertTimeToBackendFormat:function(e){return this.getMomentForFrontendTime(e).format(this.backendFormats.time)},convertDateTimeToBackendFormat:function(e,t){return this.getMomentForFrontendDateTime(e,t).format(this.backendFormats.datetime)},applyTimeZoneCorrection:function(t,i){var n,o;return i=i||1,t="object"!=typeof t?new Date(t):t,n=e.getTimeZoneShift(),o=t.getTimezoneOffset(),new Date(t.getTime()+6e4*i*(n+o))},getMomentForFrontendDate:function(e){if(this.isDateObject(e))return this.formatDate(e);if(!this.isDateValid(e))throw new Error("Invalid frontend date "+e);return t.utc(e,this.getDateFormat())},unformatDate:function(e){return this.getMomentForFrontendDate(e).toDate()},getMomentForFrontendTime:function(e){if(this.isDateObject(e))e=this.formatTime(e);else if(!this.isTimeValid(e))throw new Error("Invalid frontend time "+e);return t.utc(e,this.getTimeFormat())},unformatTime:function(e){return this.getMomentForFrontendTime(e).toDate()},getMomentForFrontendDateTime:function(e,i){if(this.isDateObject(e))e=this.formatDateTime(e);else if(!this.isDateTimeValid(e))throw new Error("Invalid frontend datetime "+e);i=i||this.timezoneOffset;var n=this.getDateTimeFormat();return-1===n.indexOf("Z")&&(n+=" Z",e+=" "+i),t.utc(e,n).zone(i)},unformatDateTime:function(e,t){return this.getMomentForFrontendDateTime(e,t).toDate()},isDateObject:function(e){return"[object Date]"==Object.prototype.toString.call(e)}}}),function(e,t){function i(t,i){var o,s,r,a=t.nodeName.toLowerCase();return"area"===a?(o=t.parentNode,s=o.name,t.href&&s&&"map"===o.nodeName.toLowerCase()?(r=e("img[usemap=#"+s+"]")[0],!!r&&n(r)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var o=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))
}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,o,s=e(this[0]);s.length&&s[0]!==document;){if(n=s.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(o=parseInt(s.css("zIndex"),10),!isNaN(o)&&0!==o))return o;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),o=isNaN(n);return(o||n>=0)&&i(t,!o)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function o(t,i,n,o){return e.each(s,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var s="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(r,o(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(r,o(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var o,s=e.ui[t].prototype;for(o in n)s.plugins[o]=s.plugins[o]||[],s.plugins[o].push([i,n[o]])},call:function(e,t,i){var n,o=e.plugins[t];if(o&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<o.length;n++)e.options[o[n][0]]&&o[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return t[n]>0?!0:(t[n]=1,o=t[n]>0,t[n]=0,o)}})}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,o=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(s){}o(t)},e.widget=function(t,i,n){var o,s,r,a,l={},c=t.split(".")[0];t=t.split(".")[1],o=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[c]=e[c]||{},s=e[c][t],r=e[c][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new r(e,t)},e.extend(r,s,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},o=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=s,t}}(),void 0):(l[t]=n,void 0)}),r.prototype=e.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix||t:t},l,{constructor:r,namespace:c,widgetName:t,widgetFullName:o}),s?(e.each(s._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete s._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r)},e.widget.extend=function(i){for(var o,s,r=n.call(arguments,1),a=0,l=r.length;l>a;a++)for(o in r[a])s=r[a][o],r[a].hasOwnProperty(o)&&s!==t&&(i[o]=e.isPlainObject(s)?e.isPlainObject(i[o])?e.widget.extend({},i[o],s):e.widget.extend({},s):s);return i},e.widget.bridge=function(i,o){var s=o.prototype.widgetFullName||i;e.fn[i]=function(r){var a="string"==typeof r,l=n.call(arguments,1),c=this;return r=!a&&l.length?e.widget.extend.apply(null,[r].concat(l)):r,a?this.each(function(){var n,o=e.data(this,s);return o?e.isFunction(o[r])&&"_"!==r.charAt(0)?(n=o[r].apply(o,l),n!==o&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,s);t?t.option(r||{})._init():e.data(this,s,new o(r,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var o,s,r,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},o=i.split("."),i=o.shift(),o.length){for(s=a[i]=e.widget.extend({},this.options[i]),r=0;r<o.length-1;r++)s[o[r]]=s[o[r]]||{},s=s[o[r]];if(i=o.pop(),1===arguments.length)return s[i]===t?null:s[i];s[i]=n}else{if(1===arguments.length)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var o,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,r){function a(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?s[r]:r).apply(s,arguments):void 0}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,d=l[2];d?o.delegate(d,c,a):i.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,s,r=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(o in s)o in i||(i[o]=s[o]);return this.element.trigger(i,n),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,s){"string"==typeof o&&(o={effect:o});var r,a=o?o===!0||"number"==typeof o?i:o.effect||i:t;o=o||{},"number"==typeof o&&(o={duration:o}),r=!e.isEmptyObject(o),o.complete=s,o.delay&&n.delay(o.delay),r&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,s):n.queue(function(i){e(this)[t](),s&&s.call(n[0]),i()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,o=1===i.which,s="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return o&&!s&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;return o.containment?"window"===o.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===o.containment?(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):o.containment.constructor===Array?(this.containment=o.containment,void 0):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=e(o.containment),n=i[0],n&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,o,s,r=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),r.grid&&(o=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-r.grid[1]:o+r.grid[1]:o,s=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-r.grid[0]:s+r.grid[0]:s)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),o=n.options,s=e.extend({},i,{item:n.element});n.sortables=[],e(o.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,s))})},stop:function(t,i){var n=e(this).data("ui-draggable"),o=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,o))})},drag:function(t,i){var n=e(this).data("ui-draggable"),o=this;e.each(n.sortables,function(){var s=!1,r=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(r.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),o=e(this).data("ui-draggable").options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,o=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,o,s,r,a,l,c,d,h,u,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,_=i.offset.top,y=_+p.helperProportions.height;for(h=p.snapElements.length-1;h>=0;h--)a=p.snapElements[h].left,l=a+p.snapElements[h].width,c=p.snapElements[h].top,d=c+p.snapElements[h].height,a-m>v||g>l+m||c-m>y||_>d+m||!e.contains(p.snapElements[h].item.ownerDocument,p.snapElements[h].item)?(p.snapElements[h].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(n=Math.abs(c-y)<=m,o=Math.abs(d-_)<=m,s=Math.abs(a-v)<=m,r=Math.abs(l-g)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),o&&(i.position.top=p._convertPositionTo("relative",{top:d,left:0}).top-p.margins.top),s&&(i.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),u=n||o||s||r,"outer"!==f.snapMode&&(n=Math.abs(c-_)<=m,o=Math.abs(d-y)<=m,s=Math.abs(a-g)<=m,r=Math.abs(l-v)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),o&&(i.position.top=p._convertPositionTo("relative",{top:d-p.helperProportions.height,left:0}).top-p.margins.top),s&&(i.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[h].snapping&&(n||o||s||r||u)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=n||o||s||r||u)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),o=e(this).data("ui-draggable").options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){function t(e,t,i){return e>t&&t+i>e}e.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},e.ui.ddmanager.droppables[i.scope]=e.ui.ddmanager.droppables[i.scope]||[],e.ui.ddmanager.droppables[i.scope].push(this),i.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];t<i.length;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))
},_drop:function(t,i){var n=i||e.ui.ddmanager.current,o=!1;return n&&(n.currentItem||n.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,i,n){if(!i.offset)return!1;var o,s,r=(e.positionAbs||e.position.absolute).left,a=(e.positionAbs||e.position.absolute).top,l=r+e.helperProportions.width,c=a+e.helperProportions.height,d=i.offset.left,h=i.offset.top,u=d+i.proportions().width,p=h+i.proportions().height;switch(n){case"fit":return r>=d&&u>=l&&a>=h&&p>=c;case"intersect":return d<r+e.helperProportions.width/2&&l-e.helperProportions.width/2<u&&h<a+e.helperProportions.height/2&&c-e.helperProportions.height/2<p;case"pointer":return o=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(s,h,i.proportions().height)&&t(o,d,i.proportions().width);case"touch":return(a>=h&&p>=a||c>=h&&p>=c||h>a&&c>p)&&(r>=d&&u>=r||l>=d&&u>=l||d>r&&l>u);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n,o,s=e.ui.ddmanager.droppables[t.options.scope]||[],r=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<s.length;n++)if(!(s[n].options.disabled||t&&!s[n].accept.call(s[n].element[0],t.currentItem||t.element))){for(o=0;o<a.length;o++)if(a[o]===s[n].element[0]){s[n].proportions().height=0;continue e}s[n].visible="none"!==s[n].element.css("display"),s[n].visible&&("mousedown"===r&&s[n]._activate.call(s[n],i),s[n].offset=s[n].element.offset(),s[n].proportions({width:s[n].element[0].offsetWidth,height:s[n].element[0].offsetHeight}))}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,o,s,r=e.ui.intersect(t,this,this.options.tolerance),a=!r&&this.isover?"isout":r&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===o}),s.length&&(n=e.data(s[0],"ui-droppable"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,o,s,r=this,a=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)n=e.trim(t[i]),s="ui-resizable-"+n,o=e("<div class='ui-resizable-handle "+s+"'></div>"),o.css({zIndex:a.zIndex}),"se"===n&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(o);this._renderAxis=function(t){var i,n,o,s;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(o,s),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){r.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(e(this).removeClass("ui-resizable-autohide"),r._handles.show())}).mouseleave(function(){a.disabled||r.resizing||(e(this).addClass("ui-resizable-autohide"),r._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,o=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(i){var n,o,s,r=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),n=t(this.helper.css("left")),o=t(this.helper.css("top")),r.containment&&(n+=e(r.containment).scrollLeft()||0,o+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:o},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:o},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===s?this.axis+"-resize":s),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,n=this.helper,o={},s=this.originalMousePosition,r=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,d=this.size.height,h=t.pageX-s.left||0,u=t.pageY-s.top||0,p=this._change[r];return p?(i=p.apply(this,[t,h,u]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==a&&(o.top=this.position.top+"px"),this.position.left!==l&&(o.left=this.position.left+"px"),this.size.width!==c&&(o.width=this.size.width+"px"),this.size.height!==d&&(o.height=this.size.height+"px"),n.css(o),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(o)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,n,o,s,r,a,l,c=this.options,d=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),o=n&&e.ui.hasScroll(i[0],"left")?0:d.sizeDiff.height,s=n?0:d.sizeDiff.width,r={width:d.helper.width()-s,height:d.helper.height()-o},a=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null,c.animate||this.element.css(e.extend(r,{top:l,left:a})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,o,s,r,a=this.options;r={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,o=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,s=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),o>r.minHeight&&(r.minHeight=o),n<r.maxWidth&&(r.maxWidth=n),s<r.maxHeight&&(r.maxHeight=s)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,o=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===o&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===o&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,o=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=i(e.width)&&t.minWidth&&t.minWidth>e.width,a=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,d=/sw|nw|w/.test(n),h=/nw|ne|n/.test(n);return r&&(e.width=t.minWidth),a&&(e.height=t.minHeight),o&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),r&&d&&(e.left=l-t.minWidth),o&&d&&(e.left=l-t.maxWidth),a&&h&&(e.top=c-t.minHeight),s&&h&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,o,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(o=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],n=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);o.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,o=i._proportionallyResizeElements,s=o.length&&/textarea/i.test(o[0].nodeName),r=s&&e.ui.hasScroll(o[0],"left")?0:i.sizeDiff.height,a=s?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-r},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,d=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,d&&c?{top:d,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&e(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,n,o,s,r,a,l,c=e(this).data("ui-resizable"),d=c.options,h=c.element,u=d.containment,p=u instanceof e?u.get(0):/parent/.test(u)?h.parent().get(0):u;p&&(c.containerElement=e(p),/document/.test(u)||u===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(p),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,o){n[e]=t(i.css("padding"+o))}),c.containerOffset=i.offset(),c.containerPosition=i.position(),c.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},o=c.containerOffset,s=c.containerSize.height,r=c.containerSize.width,a=e.ui.hasScroll(p,"left")?p.scrollWidth:r,l=e.ui.hasScroll(p)?p.scrollHeight:s,c.parentData={element:p,left:o.left,top:o.top,width:a,height:l}))},resize:function(t){var i,n,o,s,r=e(this).data("ui-resizable"),a=r.options,l=r.containerOffset,c=r.position,d=r._aspectRatio||t.shiftKey,h={top:0,left:0},u=r.containerElement;u[0]!==document&&/static/.test(u.css("position"))&&(h=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-h.left),d&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=a.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),d&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?l.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,i=Math.abs((r._helper?r.offset.left-h.left:r.offset.left-h.left)+r.sizeDiff.width),n=Math.abs((r._helper?r.offset.top-h.top:r.offset.top-l.top)+r.sizeDiff.height),o=r.containerElement.get(0)===r.element.parent().get(0),s=/relative|absolute/.test(r.containerElement.css("position")),o&&s&&(i-=Math.abs(r.parentData.left)),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,d&&(r.size.height=r.size.width/r.aspectRatio)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,d&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,o=t.containerPosition,s=t.containerElement,r=e(t.helper),a=r.offset(),l=r.outerWidth()-t.sizeDiff.width,c=r.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(s.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(s.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),o=n.options,s=n.originalSize,r=n.originalPosition,a={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0},l=function(t,n){e(t).each(function(){var t=e(this),o=e(this).data("ui-resizable-alsoresize"),s={},r=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var i=(o[t]||0)+(a[t]||0);i&&i>=0&&(s[t]=i||null)}),t.css(s)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize):e.each(o.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,o=t.originalSize,s=t.originalPosition,r=t.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,d=Math.round((n.width-o.width)/l)*l,h=Math.round((n.height-o.height)/c)*c,u=o.width+d,p=o.height+h,f=i.maxWidth&&i.maxWidth<u,m=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>u,v=i.minHeight&&i.minHeight>p;i.grid=a,g&&(u+=l),v&&(p+=c),f&&(u-=l),m&&(p-=c),/^(se|s|e)$/.test(r)?(t.size.width=u,t.size.height=p):/^(ne)$/.test(r)?(t.size.width=u,t.size.height=p,t.position.top=s.top-h):/^(sw)$/.test(r)?(t.size.width=u,t.size.height=p,t.position.left=s.left-d):(p-c>0?(t.size.height=p,t.position.top=s.top-h):(t.size.height=c,t.position.top=s.top+o.height-c),u-l>0?(t.size.width=u,t.position.left=s.left-d):(t.size.width=l,t.position.left=s.left+o.width-l))}})}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().addBack().each(function(){var n,o=e.data(this,"selectable-item");return o?(n=!t.metaKey&&!t.ctrlKey||!o.$element.hasClass("ui-selected"),o.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),o.unselecting=!n,o.selecting=n,o.selected=n,n?i._trigger("selecting",t,{selecting:o.element}):i._trigger("unselecting",t,{unselecting:o.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,o=this.options,s=this.opos[0],r=this.opos[1],a=t.pageX,l=t.pageY;return s>a&&(i=a,a=s,s=i),r>l&&(i=l,l=r,r=i),this.helper.css({left:s,top:r,width:a-s,height:l-r}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),c=!1;i&&i.element!==n.element[0]&&("touch"===o.tolerance?c=!(i.left>a||i.right<s||i.top>l||i.bottom<r):"fit"===o.tolerance&&(c=i.left>s&&i.right<a&&i.top>r&&i.bottom<l),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){function t(e,t,i){return e>t&&t+i>e}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,o=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(n=e(this),!1):void 0}),e.data(t.target,s.widgetName+"-item")===s&&(n=e(t.target)),n?!this.options.handle||i||(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(o=!0)}),o)?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,n){var o,s,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",r.cursor),this.storedStylesheet=e("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(s)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,o,s,r=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-e(document).scrollTop()<r.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed)),t.pageX-e(document).scrollLeft()<r.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],o=n.item[0],s=this._intersectsWithPointer(n),s&&n.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,o=this.placeholder.offset(),s=this.options.axis,r={};s&&"x"!==s||(r.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(r.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();
for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,s=e.left,r=s+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,d=this.offset.click.left,h="x"===this.options.axis||n+c>a&&l>n+c,u="y"===this.options.axis||t+d>s&&r>t+d,p=h&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),o=i&&n,s=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return o?this.floating?r&&"right"===r||"down"===s?2:1:s&&("down"===s?2:1):!1},_intersectsWithSides:function(e){var i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&n||"left"===s&&!n:o&&("down"===o&&i||"up"===o&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){a.push(this)}var n,o,s,r,a=[],l=[],c=this._connectWith();if(c&&t)for(n=c.length-1;n>=0;n--)for(s=e(c[n]),o=s.length-1;o>=0;o--)r=e.data(s[o],this.widgetFullName),r&&r!==this&&!r.options.disabled&&l.push([e.isFunction(r.options.items)?r.options.items.call(r.element):e(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,o,s,r,a,l,c,d=this.items,h=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(i=u.length-1;i>=0;i--)for(o=e(u[i]),n=o.length-1;n>=0;n--)s=e.data(o[n],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(h.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(i=h.length-1;i>=0;i--)for(r=h[i][1],a=h[i][0],n=0,c=a.length;c>n;n++)l=e(a[n]),l.data(this.widgetName+"-item",r),d.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,o,s;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=o.outerWidth(),n.height=o.outerHeight()),s=o.offset(),n.left=s.left,n.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)s=this.containers[i].element.offset(),this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(o)}):"img"===n&&o.attr("src",t.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(e,o){(!i||n.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(n){var o,s,r,a,l,c,d,h,u,p,f=null,m=null;for(o=this.containers.length-1;o>=0;o--)if(!e.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(f&&e.contains(this.containers[o].element[0],f.element[0]))continue;f=this.containers[o],m=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",n,this._uiHash(this)),this.containers[o].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(r=1e4,a=null,p=f.floating||i(this.currentItem),l=p?"left":"top",c=p?"width":"height",d=this.positionAbs[l]+this.offset.click[l],s=this.items.length-1;s>=0;s--)e.contains(this.containers[m].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(!p||t(this.positionAbs.top+this.offset.click.top,this.items[s].top,this.items[s].height))&&(h=this.items[s].item.offset()[l],u=!1,Math.abs(h-d)>Math.abs(h+this.items[s][c]-d)&&(u=!0,h+=this.items[s][c]),Math.abs(h-d)<r&&(r=Math.abs(h-d),a=this.items[s],this.direction=u?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(n,a,null,!0):this._rearrange(n,null,this.containers[m].element,!0),this._trigger("change",n,this._uiHash()),this.containers[m]._trigger("change",n,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],i=e(o.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())*n}},_generatePosition:function(t){var i,n,o=this.options,s=t.pageX,r=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/o.grid[1])*o.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((s-this.originalPageX)/o.grid[0])*o.grid[0],s=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){function i(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}this.reverting=!1;var n,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&o.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||o.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(o.push(function(e){this._trigger("remove",e,this._uiHash())}),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||o.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(o.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;n<o.length;n++)o[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;n<o.length;n++)o[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var i="ui-effects-";e.effects={effect:{}},function(e,t){function i(e,t,i){var n=h[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=c(),n=i._rgba=[];return t=t.toLowerCase(),f(l,function(e,o){var s,r=o.re.exec(t),a=r&&o.parse(r),l=o.space||"rgba";return a?(s=i[l](a),i[d[l].cache]=s[d[l].cache],n=i._rgba=s._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&e.extend(n,s.transparent),i):s[t]}function o(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var s,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,o){return new e.Color.fn.parse(t,i,n,o)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=c.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(o,r,a,l){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=e(o).css(r),r=t);var h=this,u=e.type(o),p=this._rgba=[];return r!==t&&(o=[o,r,a,l],u="array"),"string"===u?this.parse(n(o)||s._default):"array"===u?(f(d.rgba.props,function(e,t){p[t.idx]=i(o[t.idx],t)}),this):"object"===u?(o instanceof c?f(d,function(e,t){o[t.cache]&&(h[t.cache]=o[t.cache].slice())}):f(d,function(t,n){var s=n.cache;f(n.props,function(e,t){if(!h[s]&&n.to){if("alpha"===e||null==o[e])return;h[s]=n.to(h._rgba)}h[s][t.idx]=i(o[e],t,!0)}),h[s]&&e.inArray(null,h[s].slice(0,3))<0&&(h[s][3]=1,n.from&&(h._rgba=n.from(h[s])))}),this):void 0},is:function(e){var t=c(e),i=!0,n=this;return f(d,function(e,o){var s,r=t[o.cache];return r&&(s=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(e,t){return null!=r[t.idx]?i=r[t.idx]===s[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return f(d,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=c(e),o=n._space(),s=d[o],r=0===this.alpha()?c("transparent"):this,a=r[s.cache]||s.to(r._rgba),l=a.slice();return n=n[s.cache],f(s.props,function(e,o){var s=o.idx,r=a[s],c=n[s],d=h[o.type]||{};null!==c&&(null===r?l[s]=c:(d.mod&&(c-r>d.mod/2?r+=d.mod:r-c>d.mod/2&&(r-=d.mod)),l[s]=i((c-r)*t+r,o)))}),this[o](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=c(t)._rgba;return c(e.map(i,function(e,t){return(1-n)*o[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,o=e[1]/255,s=e[2]/255,r=e[3],a=Math.max(n,o,s),l=Math.min(n,o,s),c=a-l,d=a+l,h=.5*d;return t=l===a?0:n===a?60*(o-s)/c+360:o===a?60*(s-n)/c+120:60*(n-o)/c+240,i=0===c?0:.5>=h?c/d:c/(2-d),[Math.round(t)%360,i,h,null==r?1:r]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],s=e[3],r=.5>=n?n*(1+i):n+i-n*i,a=2*n-r;return[Math.round(255*o(a,r,t+1/3)),Math.round(255*o(a,r,t)),Math.round(255*o(a,r,t-1/3)),s]},f(d,function(n,o){var s=o.props,r=o.cache,l=o.to,d=o.from;c.fn[n]=function(n){if(l&&!this[r]&&(this[r]=l(this._rgba)),n===t)return this[r].slice();var o,a=e.type(n),h="array"===a||"object"===a?n:arguments,u=this[r].slice();return f(s,function(e,t){var n=h["object"===a?e:t.idx];null==n&&(n=u[t.idx]),u[t.idx]=i(n,t)}),d?(o=c(d(u)),o[r]=u,o):c(u)},f(s,function(t,i){c.fn[t]||(c.fn[t]=function(o){var s,r=e.type(o),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),d=c[i.idx];return"undefined"===r?d:("function"===r&&(o=o.call(this,d),r=e.type(o)),null==o&&i.empty?this:("string"===r&&(s=a.exec(o),s&&(o=d+parseFloat(s[2])*("+"===s[1]?1:-1))),c[i.idx]=o,this[l](c)))})})}),c.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,o){var s,r,a="";if("transparent"!==o&&("string"!==e.type(o)||(s=n(o)))){if(o=c(s||o),!u.rgba&&1!==o._rgba[3]){for(r="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&r&&r.style;)try{a=e.css(r,"backgroundColor"),r=r.parentNode}catch(l){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{t.style[i]=o}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(r),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},s=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var i,n,o=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(o&&o.length&&o[0]&&o[o[0]])for(n=o.length;n--;)i=o[n],"string"==typeof o[i]&&(s[e.camelCase(i)]=o[i]);else for(i in o)"string"==typeof o[i]&&(s[i]=o[i]);return s}function n(t,i){var n,o,r={};for(n in i)o=i[n],t[n]!==o&&(s[n]||(e.fx.step[n]||!isNaN(parseFloat(o)))&&(r[n]=o));return r}var o=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,s,r,a){var l=e.speed(s,r,a);return this.queue(function(){var s,r=e(this),a=r.attr("class")||"",c=l.children?r.find("*").addBack():r;c=c.map(function(){var t=e(this);return{el:t,start:i(this)}}),s=function(){e.each(o,function(e,i){t[i]&&r[i+"Class"](t[i])})},s(),c=c.map(function(){return this.end=i(this.el[0]),this.diff=n(this.start,this.end),this}),r.attr("class",a),c=c.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){s(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(r[0])})})},e.fn.extend({addClass:function(t){return function(i,n,o,s){return n?e.effects.animateClass.call(this,{add:i},n,o,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,o,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,o,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(i){return function(n,o,s,r,a){return"boolean"==typeof o||o===t?s?e.effects.animateClass.call(this,o?{add:n}:{remove:n},s,r,a):i.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},o,s,r)}}(e.fn.toggleClass),switchClass:function(t,i,n,o,s){return e.effects.animateClass.call(this,{add:i,remove:t},n,o,s)}})}(),function(){function n(t,i,n,o){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(o=n,n=i,i={}),e.isFunction(n)&&(o=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=o||i.complete,t}function o(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.4",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,n){var o,s;for(s=0;s<n.length;s++)null!==n[s]&&(o=e.data(i+n[s]),o===t&&(o=""),e.css(n[s],o))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(r){s=document.body}return t.wrap(n),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,o){return o=o||{},e.each(i,function(e,i){var s=t.cssUnit(i);s[0]>0&&(o[i]=s[0]*n+s[1])}),o}}),e.fn.extend({effect:function(){function t(t){function n(){e.isFunction(s)&&s.call(o[0]),e.isFunction(t)&&t()}var o=e(this),s=i.complete,a=i.mode;(o.is(":hidden")?"hide"===a:"show"===a)?(o[a](),n()):r.call(o[0],i,n)}var i=n.apply(this,arguments),o=i.mode,s=i.queue,r=e.effects.effect[i.effect];return e.fx.off||!r?o?this[o](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):s===!1?this.each(t):this.queue(s||"fx",t)},show:function(e){return function(t){if(o(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(t){if(o(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(t){if(o(t)||"boolean"==typeof t)return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}()}(jQuery),function(e){var t=0,i={},n={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")
},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,o=this.headers.index(t.target),s=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:s=this.headers[(o+1)%n];break;case i.LEFT:case i.UP:s=this.headers[(o-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:s=this.headers[0];break;case i.END:s=this.headers[n-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,n=this.options,o=n.heightStyle,s=this.element.parent(),r=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),n=i.attr("id"),o=i.next(),s=o.attr("id");n||(n=r+"-header-"+t,i.attr("id",n)),s||(s=r+"-panel-"+t,o.attr("id",s)),i.attr("aria-controls",s),o.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===o?(i=s.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===o&&(i=0,this.headers.next().each(function(){i=Math.max(i,e(this).css("height","").height())}).height(i))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,n=this.active,o=e(t.currentTarget),s=o[0]===n[0],r=s&&i.collapsible,a=r?e():o.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:r?e():o,newPanel:a};t.preventDefault(),s&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=r?!1:this.headers.index(o),this.active=s?e():o,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),s||(o.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&o.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),o.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,o){var s,r,a,l=this,c=0,d=e.length&&(!t.length||e.index()<t.index()),h=this.options.animate||{},u=d&&h.down||h,p=function(){l._toggleComplete(o)};return"number"==typeof u&&(a=u),"string"==typeof u&&(r=u),r=r||u.easing||h.easing,a=a||u.duration||h.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(i,{duration:a,easing:r,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(n,{duration:a,easing:r,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-c),c=0)}}),void 0):t.animate(i,a,r,p):e.animate(n,a,r,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,n,o=this.element[0].nodeName.toLowerCase(),s="textarea"===o,r="input"===o;this.isMultiLine=s?!0:r?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,n=!0,i=!0,void 0;t=!1,n=!1,i=!1;var s=e.ui.keyCode;switch(o.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",o);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case s.UP:t=!0,this._keyEvent("previous",o);break;case s.DOWN:t=!0,this._keyEvent("next",o);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case s.TAB:this.menu.active&&this.menu.select(o);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(o),o.preventDefault());break;default:i=!0,this._searchTimeout(o)}},keypress:function(n){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault(),void 0;if(!i){var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0;var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,o){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,i="ui-button ui-widget ui-state-default ui-corner-all",n="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",o=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},s=function(t){var i=t.name,n=t.form,o=e([]);return i&&(i=i.replace(/'/g,"\\'"),o=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),o};e.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,o),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var n=this,r=this.options,a="checkbox"===this.type||"radio"===this.type,l=a?"":"ui-state-active";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||e(this).removeClass(l)}).bind("click"+this.eventNamespace,function(e){r.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),a&&this.element.bind("change"+this.eventNamespace,function(){n.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled)return!1;e(this).addClass("ui-state-active"),n.buttonElement.attr("aria-pressed","true");var t=n.element[0];s(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(e(this).addClass("ui-state-active"),t=this,n.document.one("mouseup",function(){t=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return r.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" ui-state-active "+n).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.element.prop("disabled",!!t),t&&this.buttonElement.removeClass("ui-state-focus"),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?s(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(n),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),o=this.options.icons,s=o.primary&&o.secondary,r=[];o.primary||o.secondary?(this.options.text&&r.push("ui-button-text-icon"+(s?"s":o.primary?"-primary":"-secondary")),o.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+o.primary+"'></span>"),o.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+o.secondary+"'></span>"),this.options.text||(r.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):r.push("ui-button-text-only"),t.addClass(r.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(s.inline?t.parent()[0]:s.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function o(t,i){e.extend(t,i);for(var n in i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"1.10.4"}});var s,r="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return o(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,o,s;n=t.nodeName.toLowerCase(),o="div"===n||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),o),s.settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,s):o&&this._inlineDatepicker(t,s)},_newInst:function(t,i){var o=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:o,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,r,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,o,s,r=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=e("<span class='"+this._appendClass+"'>"+r+"</span>"),t[a?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&t.focus(this._showDatepicker),("button"===n||"both"===n)&&(o=this._get(i,"buttonText"),s=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:o,title:o}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:o,title:o}):o)),t[a?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,o,s=new Date(2009,11,20),r=this._get(e,"dateFormat");r.match(/[DM]/)&&(t=function(e){for(i=0,n=0,o=0;o<e.length;o++)e[o].length>i&&(i=e[o].length,n=o);return n},s.setMonth(t(this._get(e,r.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,s,a){var l,c,d,h,u,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],r,p)),o(p.settings,s||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+h,d/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],r,p),this},_destroyDatepicker:function(t){var i,n=e(t),o=e.data(t,r);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,r),"input"===i?(o.append.remove(),o.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,n,o=e(t),s=e.data(t,r);o.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=o.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,o=e(t),s=e.data(t,r);o.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=o.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,r)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,s){var r,a,l,c,d=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):d?"all"===n?e.extend({},d.settings):this._get(d,n):null:(r=n||{},"string"==typeof n&&(r={},r[n]=s),d&&(this._curInst===d&&this._hideDatepicker(),a=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(d,"min"),c=this._getMinMaxDate(d,"max"),o(d.settings,r),null!==l&&r.dateFormat!==t&&r.minDate===t&&(d.settings.minDate=this._formatDate(d,l)),null!==c&&r.dateFormat!==t&&r.maxDate===t&&(d.settings.maxDate=this._formatDate(d,c)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),d),this._autoSize(d),this._setDate(d,a),this._updateAlternate(d),this._updateDatepicker(d)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,o,s=e.datepicker._getInst(t.target),r=!0,a=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),r=!1;break;case 13:return o=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),o[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,o[0]),i=e.datepicker._get(s,"onSelect"),i?(n=e.datepicker._formatDate(s),i.apply(s.input?s.input[0]:null,[n,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):r=!1;
r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,o=e.datepicker._getInst(t.target);return e.datepicker._get(o,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n)),i&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(o){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,s,r,a,l,c;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),s=n?n.apply(t,[t,i]):{},s!==!1&&(o(i.settings,s),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),r=!1,e(t).parents().each(function(){return r|="fixed"===e(this).css("position"),!r}),a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),a=e.datepicker._checkOffset(i,a,r),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,s=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(t),o=n[1],r=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&t.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",r*o+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var o=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?o-r:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+a?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+o>l&&l>o?Math.abs(i.left+o-l):0),i.top-=Math.min(i.top,i.top+s>c&&c>s?Math.abs(s+a):0),i},_findPos:function(t){for(var i,n=this._getInst(t),o=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[o?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,n,o,s,a=this._curInst;!a||t&&a!==e.data(t,r)||this._datepickerShowing&&(i=this._get(a,"showAnim"),n=this._get(a,"duration"),o=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[i]||e.effects[i])?a.dpDiv.hide(i,e.datepicker._get(a,"showOptions"),n,o):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,o),i||o(),this._datepickerShowing=!1,s=this._get(a,"onClose"),s&&s.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var o=e(t),s=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(s,i+("M"===n?this._get(s,"showCurrentAtPos"):0),n),this._updateDatepicker(s))},_gotoToday:function(t){var i,n=e(t),o=this._getInst(n[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(i=new Date,o.selectedDay=i.getDate(),o.drawMonth=o.selectedMonth=i.getMonth(),o.drawYear=o.selectedYear=i.getFullYear()),this._notifyChange(o),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var o=e(t),s=this._getInst(o[0]);s["selected"+("M"===n?"Month":"Year")]=s["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(o)},_selectDay:function(t,i,n,o){var s,r=e(t);e(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(s=this._getInst(r[0]),s.selectedDay=s.currentDay=e("a",o).html(),s.selectedMonth=s.currentMonth=i,s.selectedYear=s.currentYear=n,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,o=e(t),s=this._getInst(o[0]);i=null!=i?i:this._formatDate(s),s.input&&s.input.val(i),this._updateAlternate(s),n=this._get(s,"onSelect"),n?n.apply(s.input?s.input[0]:null,[i,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,o,s=this._get(t,"altField");s&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),o=this.formatDate(i,n,this._getFormatConfig(t)),e(s).each(function(){e(this).val(o)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?i.toString():i+"",""===i)return null;var o,s,r,a,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),h=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,u=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,_=-1,y=!1,b=function(e){var i=o+1<t.length&&t.charAt(o+1)===e;return i&&o++,i},w=function(e){var t=b(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,o=new RegExp("^\\d{1,"+n+"}"),s=i.substring(l).match(o);if(!s)throw"Missing number at position "+l;return l+=s[0].length,parseInt(s[0],10)},x=function(t,n,o){var s=-1,r=e.map(b(t)?o:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(r,function(e,t){var n=t[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(s=t[0],l+=n.length,!1):void 0}),-1!==s)return s+1;throw"Unknown name at position "+l},k=function(){if(i.charAt(l)!==t.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<t.length;o++)if(y)"'"!==t.charAt(o)||b("'")?k():y=!1;else switch(t.charAt(o)){case"d":v=w("d");break;case"D":x("D",h,u);break;case"o":_=w("o");break;case"m":g=w("m");break;case"M":g=x("M",p,f);break;case"y":m=w("y");break;case"@":a=new Date(w("@")),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"!":a=new Date((w("!")-this._ticksTo1970)/1e4),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"'":b("'")?k():y=!0;break;default:k()}if(l<i.length&&(r=i.substr(l),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=m?0:-100)),_>-1)for(g=1,v=_;;){if(s=this._getDaysInMonth(m,g-1),s>=v)break;g++,v-=s}if(a=this._daylightSavingAdjust(new Date(m,g-1,v)),a.getFullYear()!==m||a.getMonth()+1!==g||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var n,o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;return i&&n++,i},c=function(e,t,i){var n=""+t;if(l(e))for(;n.length<i;)n="0"+n;return n},d=function(e,t,i,n){return l(e)?n[t]:i[t]},h="",u=!1;if(t)for(n=0;n<e.length;n++)if(u)"'"!==e.charAt(n)||l("'")?h+=e.charAt(n):u=!1;else switch(e.charAt(n)){case"d":h+=c("d",t.getDate(),2);break;case"D":h+=d("D",t.getDay(),o,s);break;case"o":h+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=c("m",t.getMonth()+1,2);break;case"M":h+=d("M",t.getMonth(),r,a);break;case"y":h+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":u=!0;break;default:h+=e.charAt(n)}return h},_possibleChars:function(e){var t,i="",n=!1,o=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;t<e.length;t++)if(n)"'"!==e.charAt(t)||o("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":o("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,o=this._getDefaultDate(e),s=o,r=this._getFormatConfig(e);try{s=this.parseDate(i,n,r)||o}catch(a){n=t?"":n}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=n?s.getDate():0,e.currentMonth=n?s.getMonth():0,e.currentYear=n?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var o=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(n){}for(var o=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=o.getFullYear(),r=o.getMonth(),a=o.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(i);c;){switch(c[2]||"d"){case"d":case"D":a+=parseInt(c[1],10);break;case"w":case"W":a+=7*parseInt(c[1],10);break;case"m":case"M":r+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(s,r));break;case"y":case"Y":s+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(s,r))}c=l.exec(i)}return new Date(s,r,a)},r=null==i||""===i?n:"string"==typeof i?s(i):"number"==typeof i?isNaN(i)?n:o(i):new Date(i.getTime());return r=r&&"Invalid Date"===r.toString()?n:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,o=e.selectedMonth,s=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),o===e.selectedMonth&&s===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,o,s,r,a,l,c,d,h,u,p,f,m,g,v,_,y,b,w,x,k,C,j,T,S,D,E,M,A,F,O,P,I,z,N,R,$,L=new Date,H=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),q=this._get(e,"isRTL"),W=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),V=this._get(e,"navigationAsDateFormat"),U=this._getNumberOfMonths(e),Y=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),K=1!==U[0]||1!==U[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(e,"min"),Z=this._getMinMaxDate(e,"max"),Q=e.drawMonth-Y,et=e.drawYear;if(0>Q&&(Q+=12,et--),Z)for(t=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-U[0]*U[1]+1,Z.getDate())),t=J&&J>t?J:t;this._daylightSavingAdjust(new Date(et,Q,1))>t;)Q--,0>Q&&(Q=11,et--);for(e.drawMonth=Q,e.drawYear=et,i=this._get(e,"prevText"),i=V?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Q-G,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,et,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+i+"</span></a>",o=this._get(e,"nextText"),o=V?this.formatDate(o,this._daylightSavingAdjust(new Date(et,Q+G,1)),this._getFormatConfig(e)):o,s=this._canAdjustMonth(e,1,et,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+o+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+o+"</span></a>",r=this._get(e,"currentText"),a=this._get(e,"gotoCurrent")&&e.currentDay?X:H,r=V?this.formatDate(r,a,this._getFormatConfig(e)):r,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=W?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(q?l:"")+(this._isInRange(e,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(q?"":l)+"</div>":"",d=parseInt(this._get(e,"firstDay"),10),d=isNaN(d)?0:d,h=this._get(e,"showWeek"),u=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),_=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),b="",x=0;x<U[0];x++){for(k="",this.maxRows=4,C=0;C<U[1];C++){if(j=this._daylightSavingAdjust(new Date(et,Q,e.selectedDay)),T=" ui-corner-all",S="",K){if(S+="<div class='ui-datepicker-group",U[1]>1)switch(C){case 0:S+=" ui-datepicker-group-first",T=" ui-corner-"+(q?"right":"left");break;case U[1]-1:S+=" ui-datepicker-group-last",T=" ui-corner-"+(q?"left":"right");break;default:S+=" ui-datepicker-group-middle",T=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===x?q?s:n:"")+(/all|right/.test(T)&&0===x?q?n:s:"")+this._generateMonthYearHeader(e,Q,et,J,Z,x>0||C>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",D=h?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;7>w;w++)E=(w+d)%7,D+="<th"+((w+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+u[E]+"'>"+p[E]+"</span></th>";for(S+=D+"</tr></thead><tbody>",M=this._getDaysInMonth(et,Q),et===e.selectedYear&&Q===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,M)),A=(this._getFirstDayOfMonth(et,Q)-d+7)%7,F=Math.ceil((A+M)/7),O=K?this.maxRows>F?this.maxRows:F:F,this.maxRows=O,P=this._daylightSavingAdjust(new Date(et,Q,1-A)),I=0;O>I;I++){for(S+="<tr>",z=h?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"",w=0;7>w;w++)N=g?g.apply(e.input?e.input[0]:null,[P]):[!0,""],R=P.getMonth()!==Q,$=R&&!_||!N[0]||J&&J>P||Z&&P>Z,z+="<td class='"+((w+d+6)%7>=5?" ui-datepicker-week-end":"")+(R?" ui-datepicker-other-month":"")+(P.getTime()===j.getTime()&&Q===e.selectedMonth&&e._keyEvent||y.getTime()===P.getTime()&&y.getTime()===j.getTime()?" "+this._dayOverClass:"")+($?" "+this._unselectableClass+" ui-state-disabled":"")+(R&&!v?"":" "+N[1]+(P.getTime()===X.getTime()?" "+this._currentClass:"")+(P.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(R&&!v||!N[2]?"":" title='"+N[2].replace(/'/g,"&#39;")+"'")+($?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(R&&!v?"&#xa0;":$?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===H.getTime()?" ui-state-highlight":"")+(P.getTime()===X.getTime()?" ui-state-active":"")+(R?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);S+=z+"</tr>"}Q++,Q>11&&(Q=0,et++),S+="</tbody></table>"+(K?"</div>"+(U[0]>0&&C===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=S}b+=k}return b+=c,e._keyEvent=!1,b},_generateMonthYearHeader:function(e,t,i,n,o,s,r,a){var l,c,d,h,u,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),_=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",b="";if(s||!g)b+="<span class='ui-datepicker-month'>"+r[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=o&&o.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;12>d;d++)(!l||d>=n.getMonth())&&(!c||d<=o.getMonth())&&(b+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+a[d]+"</option>");b+="</select>"}if(_||(y+=b+(!s&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!v)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(h=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t},f=p(h[0]),m=Math.max(f,p(h[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=o?Math.min(m,o.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),_&&(y+=(!s&&g&&v?"":"&#xa0;")+b),y+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),o=e.drawMonth+("M"===i?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(n,o))+("D"===i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,o,s)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),o=i&&i>t?i:t;return n&&o>n?n:o},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var o=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(i,n+(0>t?t:o[0]*o[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var i,n,o=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),r=null,a=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),r=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!o||t.getTime()>=o.getTime())&&(!s||t.getTime()<=s.getTime())&&(!r||t.getFullYear()>=r)&&(!a||t.getFullYear()<=a)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var o=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),o,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.4"}(jQuery),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,n=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._destroyOverlay(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(o){}this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),o=i.filter(":last");t.target!==o[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(o.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,n){var o,s;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),o=n.click,n.click=function(){o.apply(t.element[0],arguments)},s={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(o))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(o,s){n.position=[s.position.left-i.document.scrollLeft(),s.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",o,t(s))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,o=n.resizable,s=this.uiDialog.css("position"),r="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:r,start:function(n,o){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(o))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(o,s){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",o,t(s))}}).css("position",s)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(n){var o=this,s=!1,r={};e.each(n,function(e,n){o._setOption(e,n),e in t&&(s=!0),e in i&&(r[e]=n)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)
},_setOption:function(e,t){var i,n,o=this.uiDialog;"dialogClass"===e&&o.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=o.is(":data(ui-draggable)"),i&&!t&&o.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=o.is(":data(ui-resizable)"),n&&!t&&o.resizable("destroy"),n&&"string"==typeof t&&o.resizable("option","handles",t),n||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){t._allowInteraction(n)||(n.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],o=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(n=i.split?i.split(" "):[i[0],i[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(o[e]=n[e],n[e]=t)}),i={my:n[0]+(o[0]<0?o[0]:"+"+o[0])+" "+n[1]+(o[1]<0?o[1]:"+"+o[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),function(e){var t=/up|down|vertical/,i=/up|left|vertical|horizontal/;e.effects.effect.blind=function(n,o){var s,r,a,l=e(this),c=["position","top","bottom","left","right","height","width"],d=e.effects.setMode(l,n.mode||"hide"),h=n.direction||"up",u=t.test(h),p=u?"height":"width",f=u?"top":"left",m=i.test(h),g={},v="show"===d;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),s=e.effects.createWrapper(l).css({overflow:"hidden"}),r=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?r:0,m||(l.css(u?"bottom":"right",0).css(u?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:r+a),v&&(s.css(p,0),m||s.css(f,a+r)),s.animate(g,{duration:n.duration,easing:n.easing,queue:!1,complete:function(){"hide"===d&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),o()}})}}(jQuery),function(e){e.effects.effect.bounce=function(t,i){var n,o,s,r=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(r,t.mode||"effect"),c="hide"===l,d="show"===l,h=t.direction||"up",u=t.distance,p=t.times||5,f=2*p+(d||c?1:0),m=t.duration/f,g=t.easing,v="up"===h||"down"===h?"top":"left",_="up"===h||"left"===h,y=r.queue(),b=y.length;for((d||c)&&a.push("opacity"),e.effects.save(r,a),r.show(),e.effects.createWrapper(r),u||(u=r["top"===v?"outerHeight":"outerWidth"]()/3),d&&(s={opacity:1},s[v]=0,r.css("opacity",0).css(v,_?2*-u:2*u).animate(s,m,g)),c&&(u/=Math.pow(2,p-1)),s={},s[v]=0,n=0;p>n;n++)o={},o[v]=(_?"-=":"+=")+u,r.animate(o,m,g).animate(s,m,g),u=c?2*u:u/2;c&&(o={opacity:0},o[v]=(_?"-=":"+=")+u,r.animate(o,m,g)),r.queue(function(){c&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}),b>1&&y.splice.apply(y,[1,0].concat(y.splice(b,f+1))),r.dequeue()}}(jQuery),function(e){e.effects.effect.clip=function(t,i){var n,o,s,r=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(r,t.mode||"hide"),c="show"===l,d=t.direction||"vertical",h="vertical"===d,u=h?"height":"width",p=h?"top":"left",f={};e.effects.save(r,a),r.show(),n=e.effects.createWrapper(r).css({overflow:"hidden"}),o="IMG"===r[0].tagName?n:r,s=o[u](),c&&(o.css(u,0),o.css(p,s/2)),f[u]=c?s:0,f[p]=c?0:s/2,o.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e){e.effects.effect.drop=function(t,i){var n,o=e(this),s=["position","top","bottom","left","right","opacity","height","width"],r=e.effects.setMode(o,t.mode||"hide"),a="show"===r,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l?"pos":"neg",h={opacity:a?1:0};e.effects.save(o,s),o.show(),e.effects.createWrapper(o),n=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&o.css("opacity",0).css(c,"pos"===d?-n:n),h[c]=(a?"pos"===d?"+=":"-=":"pos"===d?"-=":"+=")+n,o.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e){e.effects.effect.explode=function(t,i){function n(){y.push(this),y.length===h*u&&o()}function o(){p.css({visibility:"visible"}),e(y).remove(),m||p.hide(),i()}var s,r,a,l,c,d,h=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=h,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/u),_=Math.ceil(p.outerHeight()/h),y=[];for(s=0;h>s;s++)for(l=g.top+s*_,d=s-(h-1)/2,r=0;u>r;r++)a=g.left+r*v,c=r-(u-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*v,top:-s*_}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:_,left:a+(m?c*v:0),top:l+(m?d*_:0),opacity:m?0:1}).animate({left:a+(m?0:c*v),top:l+(m?0:d*_),opacity:m?1:0},t.duration||500,t.easing,n)}}(jQuery),function(e){e.effects.effect.fade=function(t,i){var n=e(this),o=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:o},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e){e.effects.effect.fold=function(t,i){var n,o,s=e(this),r=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(s,t.mode||"hide"),l="show"===a,c="hide"===a,d=t.size||15,h=/([0-9]+)%/.exec(d),u=!!t.horizFirst,p=l!==u,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(s,r),s.show(),n=e.effects.createWrapper(s).css({overflow:"hidden"}),o=p?[n.width(),n.height()]:[n.height(),n.width()],h&&(d=parseInt(h[1],10)/100*o[c?0:1]),l&&n.css(u?{height:0,width:d}:{height:d,width:0}),g[f[0]]=l?o[0]:d,v[f[1]]=l?o[1]:0,n.animate(g,m,t.easing).animate(v,m,t.easing,function(){c&&s.hide(),e.effects.restore(s,r),e.effects.removeWrapper(s),i()})}}(jQuery),function(e){e.effects.effect.highlight=function(t,i){var n=e(this),o=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(n,t.mode||"show"),r={backgroundColor:n.css("backgroundColor")};"hide"===s&&(r.opacity=0),e.effects.save(n,o),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&n.hide(),e.effects.restore(n,o),i()}})}}(jQuery),function(e){e.effects.effect.pulsate=function(t,i){var n,o=e(this),s=e.effects.setMode(o,t.mode||"show"),r="show"===s,a="hide"===s,l=r||"hide"===s,c=2*(t.times||5)+(l?1:0),d=t.duration/c,h=0,u=o.queue(),p=u.length;for((r||!o.is(":visible"))&&(o.css("opacity",0).show(),h=1),n=1;c>n;n++)o.animate({opacity:h},d,t.easing),h=1-h;o.animate({opacity:h},d,t.easing),o.queue(function(){a&&o.hide(),i()}),p>1&&u.splice.apply(u,[1,0].concat(u.splice(p,c+1))),o.dequeue()}}(jQuery),function(e){e.effects.effect.puff=function(t,i){var n=e(this),o=e.effects.setMode(n,t.mode||"hide"),s="hide"===o,r=parseInt(t.percent,10)||150,a=r/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:o,complete:i,percent:s?r:100,from:s?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),o=e.extend(!0,{},t),s=e.effects.setMode(n,t.mode||"effect"),r=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===s?0:100),a=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},d={y:"horizontal"!==a?r/100:1,x:"vertical"!==a?r/100:1};o.effect="size",o.queue=!1,o.complete=i,"effect"!==s&&(o.origin=l||["middle","center"],o.restore=!0),o.from=t.from||("show"===s?{height:0,width:0,outerHeight:0,outerWidth:0}:c),o.to={height:c.height*d.y,width:c.width*d.x,outerHeight:c.outerHeight*d.y,outerWidth:c.outerWidth*d.x},o.fade&&("show"===s&&(o.from.opacity=0,o.to.opacity=1),"hide"===s&&(o.from.opacity=1,o.to.opacity=0)),n.effect(o)},e.effects.effect.size=function(t,i){var n,o,s,r=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],d=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(r,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=r.css("position"),_=f?a:l,y={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&r.show(),n={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},"toggle"===t.mode&&"show"===p?(r.from=t.to||y,r.to=t.from||n):(r.from=t.from||("show"===p?y:n),r.to=t.to||("hide"===p?y:n)),s={from:{y:r.from.height/n.height,x:r.from.width/n.width},to:{y:r.to.height/n.height,x:r.to.width/n.width}},("box"===m||"both"===m)&&(s.from.y!==s.to.y&&(_=_.concat(h),r.from=e.effects.setTransition(r,h,s.from.y,r.from),r.to=e.effects.setTransition(r,h,s.to.y,r.to)),s.from.x!==s.to.x&&(_=_.concat(u),r.from=e.effects.setTransition(r,u,s.from.x,r.from),r.to=e.effects.setTransition(r,u,s.to.x,r.to))),("content"===m||"both"===m)&&s.from.y!==s.to.y&&(_=_.concat(d).concat(c),r.from=e.effects.setTransition(r,d,s.from.y,r.from),r.to=e.effects.setTransition(r,d,s.to.y,r.to)),e.effects.save(r,_),r.show(),e.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),g&&(o=e.effects.getBaseline(g,n),r.from.top=(n.outerHeight-r.outerHeight())*o.y,r.from.left=(n.outerWidth-r.outerWidth())*o.x,r.to.top=(n.outerHeight-r.to.outerHeight)*o.y,r.to.left=(n.outerWidth-r.to.outerWidth)*o.x),r.css(r.from),("content"===m||"both"===m)&&(h=h.concat(["marginTop","marginBottom"]).concat(d),u=u.concat(["marginLeft","marginRight"]),c=a.concat(h).concat(u),r.find("*[width]").each(function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,c),i.from={height:n.height*s.from.y,width:n.width*s.from.x,outerHeight:n.outerHeight*s.from.y,outerWidth:n.outerWidth*s.from.x},i.to={height:n.height*s.to.y,width:n.width*s.to.x,outerHeight:n.height*s.to.y,outerWidth:n.width*s.to.x},s.from.y!==s.to.y&&(i.from=e.effects.setTransition(i,h,s.from.y,i.from),i.to=e.effects.setTransition(i,h,s.to.y,i.to)),s.from.x!==s.to.x&&(i.from=e.effects.setTransition(i,u,s.from.x,i.from),i.to=e.effects.setTransition(i,u,s.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,c)})})),r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===r.to.opacity&&r.css("opacity",r.from.opacity),"hide"===p&&r.hide(),e.effects.restore(r,_),f||("static"===v?r.css({position:"relative",top:r.to.top,left:r.to.left}):e.each(["top","left"],function(e,t){r.css(t,function(t,i){var n=parseInt(i,10),o=e?r.to.left:r.to.top;return"auto"===i?o+"px":n+o+"px"})})),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e){e.effects.effect.shake=function(t,i){var n,o=e(this),s=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(o,t.mode||"effect"),a=t.direction||"left",l=t.distance||20,c=t.times||3,d=2*c+1,h=Math.round(t.duration/d),u="up"===a||"down"===a?"top":"left",p="up"===a||"left"===a,f={},m={},g={},v=o.queue(),_=v.length;for(e.effects.save(o,s),o.show(),e.effects.createWrapper(o),f[u]=(p?"-=":"+=")+l,m[u]=(p?"+=":"-=")+2*l,g[u]=(p?"-=":"+=")+2*l,o.animate(f,h,t.easing),n=1;c>n;n++)o.animate(m,h,t.easing).animate(g,h,t.easing);o.animate(m,h,t.easing).animate(f,h/2,t.easing).queue(function(){"hide"===r&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()}),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,d+1))),o.dequeue()}}(jQuery),function(e){e.effects.effect.slide=function(t,i){var n,o=e(this),s=["position","top","bottom","left","right","width","height"],r=e.effects.setMode(o,t.mode||"show"),a="show"===r,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l,h={};e.effects.save(o,s),o.show(),n=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(o).css({overflow:"hidden"}),a&&o.css(c,d?isNaN(n)?"-"+n:-n:n),h[c]=(a?d?"+=":"-=":d?"-=":"+=")+n,o.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e){e.effects.effect.transfer=function(t,i){var n=e(this),o=e(t.to),s="fixed"===o.css("position"),r=e("body"),a=s?r.scrollTop():0,l=s?r.scrollLeft():0,c=o.offset(),d={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},h=n.offset(),u=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:h.top-a,left:h.left-l,height:n.innerHeight(),width:n.innerWidth(),position:s?"fixed":"absolute"}).animate(d,t.duration,t.easing,function(){u.remove(),i()})}}(jQuery),function(e){e.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,o,s,r,a,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,o=this.previousFilter||"",s=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),s===o?r=!0:s=o+s,a=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())}),n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(s=String.fromCharCode(t.keyCode),a=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),o=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(o),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,o,s,r,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-i-n,s=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=t.height(),0>o?this.activeMenu.scrollTop(s+o):o+a>r&&this.activeMenu.scrollTop(s+o-r+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,o;return this.active?(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n-o<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,n,o;return this.active?(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+o>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function o(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var s,r=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,d=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t)return s;var i,n,o=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=o.children()[0];return e("body").append(o),i=r.offsetWidth,o.css("overflow","scroll"),n=r.offsetWidth,i===n&&(n=o[0].clientWidth),o.remove(),s=i-n},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,s="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var s,p,m,g,v,_,y=e(t.of),b=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(b),x=(t.collision||"flip").split(" "),k={};return _=o(y),y[0].preventDefault&&(t.at="left top"),p=_.width,m=_.height,g=_.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):d.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=d.test(n[1])?n[1]:"center",e=h.exec(n[0]),i=h.exec(n[1]),k[this]=[e?e[0]:0,i?i[0]:0],t[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),s=i(k.at,p,m),v.left+=s[0],v.top+=s[1],this.each(function(){var o,c,d=e(this),h=d.outerWidth(),u=d.outerHeight(),f=n(this,"marginLeft"),_=n(this,"marginTop"),C=h+f+n(this,"marginRight")+w.width,j=u+_+n(this,"marginBottom")+w.height,T=e.extend({},v),S=i(k.my,d.outerWidth(),d.outerHeight());"right"===t.my[0]?T.left-=h:"center"===t.my[0]&&(T.left-=h/2),"bottom"===t.my[1]?T.top-=u:"center"===t.my[1]&&(T.top-=u/2),T.left+=S[0],T.top+=S[1],e.support.offsetFractions||(T.left=l(T.left),T.top=l(T.top)),o={marginLeft:f,marginTop:_},e.each(["left","top"],function(i,n){e.ui.position[x[i]]&&e.ui.position[x[i]][n](T,{targetWidth:p,targetHeight:m,elemWidth:h,elemHeight:u,collisionPosition:o,collisionWidth:C,collisionHeight:j,offset:[s[0]+S[0],s[1]+S[1]],my:t.my,at:t.at,within:b,elem:d})}),t.using&&(c=function(e){var i=g.left-T.left,n=i+p-h,o=g.top-T.top,s=o+m-u,l={target:{element:y,left:g.left,top:g.top,width:p,height:m},element:{element:d,left:T.left,top:T.top,width:h,height:u},horizontal:0>n?"left":i>0?"right":"center",vertical:0>s?"top":o>0?"bottom":"middle"};h>p&&a(i+n)<p&&(l.horizontal="center"),u>m&&a(o+s)<m&&(l.vertical="middle"),l.important=r(a(i),a(n))>r(a(o),a(s))?"horizontal":"vertical",t.using.call(this,e,l)}),d.offset(e.extend(T,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,a=e.left-t.collisionPosition.marginLeft,l=o-a,c=a+t.collisionWidth-s-o;t.collisionWidth>s?l>0&&0>=c?(i=e.left+l+t.collisionWidth-s-o,e.left+=l-i):e.left=c>0&&0>=l?o:l>c?o+s-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=r(e.left-a,e.left)},top:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,c=a+t.collisionHeight-s-o;t.collisionHeight>s?l>0&&0>=c?(i=e.top+l+t.collisionHeight-s-o,e.top+=l-i):e.top=c>0&&0>=l?o:l>c?o+s-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=r(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,o=t.within,s=o.offset.left+o.scrollLeft,r=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,d=c-l,h=c+t.collisionWidth-r-l,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>d?(i=e.left+u+p+f+t.collisionWidth-r-s,(0>i||i<a(d))&&(e.left+=u+p+f)):h>0&&(n=e.left-t.collisionPosition.marginLeft+u+p+f-l,(n>0||a(n)<h)&&(e.left+=u+p+f))},top:function(e,t){var i,n,o=t.within,s=o.offset.top+o.scrollTop,r=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,d=c-l,h=c+t.collisionHeight-r-l,u="top"===t.my[1],p=u?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>d?(n=e.top+p+f+m+t.collisionHeight-r-s,e.top+p+f+m>d&&(0>n||n<a(d))&&(e.top+=p+f+m)):h>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>h&&(i>0||a(i)<h)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,o,s,r=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)t.style[s]=n[s];t.appendChild(a),i=r||document.documentElement,i.insertBefore(t,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",o=e(a).offset().left,e.support.offsetFractions=o>10&&11>o,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")
}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",r=[];for(i=n.values&&n.values.length||1,o.length>i&&(o.slice(i).remove(),o=o.slice(0,i)),t=o.length;i>t;t++)r.push(s);this.handles=o.add(e(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,o,s,r,a,l,c,d=this,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-d.values(t));(o>i||o===i&&(t===d._lastChangedValue||d.values(t)===h.min))&&(o=i,s=e(this),r=t)}),a=this._start(t,r),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=r,s.addClass("ui-state-active").focus(),l=s.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-s.width()/2,top:t.pageY-l.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,o,s;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),s=this._valueMin()+n*o,this._trimAlignValue(s)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,o,s;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(o=this.values(),o[t]=i,s=this._trigger("slide",e,{handle:this.handles[t],value:i,values:o}),n=this.values(t?0:1),s!==!1&&this.values(t,i))):i!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:i}),s!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var n,o,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,o=arguments[0],s=0;s<n.length;s+=1)n[s]=this._trimAlignValue(o[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,i){var n,o=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(o=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;o>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,o,s,r=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),d["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](d,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(n=this.value(),o=this._valueMin(),s=this._valueMax(),i=s!==o?100*((n-o)/(s-o)):0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](d,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(i){var n,o,s,r,a=e(i.target).data("ui-slider-handle-index");switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(i.target).addClass("ui-state-active"),n=this._start(i,a),n===!1))return}switch(r=this.options.step,o=s=this.options.values&&this.options.values.length?this.values(a):this.value(),i.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(o+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(o-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===this._valueMax())return;s=this._trimAlignValue(o+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===this._valueMin())return;s=this._trimAlignValue(o-r)}this._slide(i,a,s)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var o=i.attr(n);void 0!==o&&o.length&&(t[n]=o)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(t(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++o}function n(e){return e=e.cloneNode(!1),e.hash.length>1&&decodeURIComponent(e.href.replace(s,""))===decodeURIComponent(location.href.replace(s,""))}var o=0,s=/#.*$/;e.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each(function(i,o){return e(o).attr("aria-controls")===n?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),o=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(n),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function n(){return t>o&&(t=0),0>t&&(t=o),t}for(var o=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,o){var s,r,a,l=e(o).uniqueId().attr("id"),c=e(o).closest("li"),d=c.attr("aria-controls");n(o)?(s=o.hash,r=t.element.find(t._sanitizeSelector(s))):(a=t._tabId(c),s="#"+a,r=t.element.find(s),r.length||(r=t._createPanel(a),r.insertAfter(t.panels[i-1]||t.tablist)),r.attr("aria-live","polite")),r.length&&(t.panels=t.panels.add(r)),d&&c.data("ui-tabs-aria-controls",d),c.attr({"aria-controls":s.substring(1),"aria-labelledby":l}),r.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)t===!0||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,o=e(t.currentTarget),s=o.closest("li"),r=s[0]===n[0],a=r&&i.collapsible,l=a?e():this._getPanelForTab(s),c=n.length?this._getPanelForTab(n):e(),d={oldTab:n,oldPanel:c,newTab:a?e():s,newPanel:l};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||r&&!i.collapsible||this._trigger("beforeActivate",t,d)===!1||(i.active=a?!1:this.tabs.index(s),this.active=r?e():s,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(s),t),this._toggle(t,d))},_toggle:function(t,i){function n(){s.running=!1,s._trigger("activate",t,i)}function o(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&s.options.show?s._show(r,s.options.show,n):(r.show(),n())}var s=this,r=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),o()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),r.length&&a.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var o=this,s=this.tabs.eq(t),r=s.find(".ui-tabs-anchor"),a=this._getPanelForTab(s),l={tab:s,panel:a};n(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){a.html(e),o._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&o.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),e===o.xhr&&delete o.xhr},1)})))},_ajaxSettings:function(t,i,n){var o=this;return{url:t.attr("href"),beforeSend:function(t,s){return o._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:s},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),define("jquery-ui",["jquery"],function(){}),define("oroui/js/extend/jquery-ui",["jquery","jquery-ui"],function(e){!function(){function t(t){var i=["scroll","resize"],n="datepicker-"+t;return i=e.map(i,function(e){return e+"."+n}),i.join(" ")}function i(){var t,i,n,o,s=this;o=e.datepicker._getInst(s),e.datepicker._pos||(t=e.datepicker._findPos(s),t[1]+=s.offsetHeight),i=!1,e(s).parents().each(function(){return i|="fixed"===e(this).css("position"),!i}),n={left:t[0],top:t[1]},n=e.datepicker._checkOffset(o,n,i),o.dpDiv.css({left:n.left+"px",top:n.top+"px"})}var n=e.datepicker.constructor.prototype._showDatepicker,o=e.datepicker.constructor.prototype._hideDatepicker;e.datepicker.constructor.prototype._showDatepicker=function(o){var s,r;n.apply(this,arguments),r=o.target||o,s=t(r.id),e(r).parents().add(window).each(function(){e(this).on(s,e.proxy(i,r))})},e.datepicker.constructor.prototype._hideDatepicker=function(i){var n,s=i;if(!i){if(!e.datepicker._curInst)return;s=e.datepicker._curInst.input.get(0)}n=t(s.id),e(s).parents().add(window).each(function(){e(this).off(n)}),o.apply(this,arguments)}}()}),define("oroui/js/jquery-ui-datepicker-l10n",["jquery","orotranslation/js/translator","orolocale/js/locale-settings","orolocale/js/formatter/datetime","jquery-ui"],function(e,t,i,n){var o=i.getLocale();e.datepicker.regional[o]={closeText:t("Close"),prevText:t("Prev"),nextText:t("Next"),currentText:t("Today"),monthNames:i.getCalendarMonthNames("wide",!0),monthNamesShort:i.getCalendarMonthNames("abbreviated",!0),dayNames:i.getCalendarDayOfWeekNames("wide",!0),dayNamesShort:i.getCalendarDayOfWeekNames("abbreviated",!0),dayNamesMin:i.getCalendarDayOfWeekNames("narrow",!0),weekHeader:t("Wk"),dateFormat:i.getVendorDateTimeFormat("jquery_ui","date","mm/dd/yy"),firstDay:i.getCalendarFirstDayOfWeek()-1,gotoCurrent:!0},e.datepicker.setDefaults(e.datepicker.regional[o]),e.datepicker._orig_base_gotoToday=e.datepicker._base_gotoToday||e.datepicker._gotoToday,e.datepicker._base_gotoToday=e.datepicker._gotoToday=function(t){var i=this._getInst(e(t)[0]),o=n.applyTimeZoneCorrection(new Date);i.today=o,i.currentDay=o.getDate(),i.currentMonth=o.getMonth(),i.currentYear=o.getFullYear(),e.datepicker._orig_base_gotoToday.apply(this,arguments)}}),function($){if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.2"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:!0,showMinute:!0,showSecond:!1,showMillisec:!1,showTimezone:!1,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,hour:0,minute:0,second:0,millisec:0,timezone:null,useLocalTimezone:!1,defaultTimezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneIso8601:!1,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,timezone:null,defaultTimezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec"],control:null,setDefaults:function(e){return extendRemove(this._defaults,e||{}),this
},_newInst:function($input,o){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}overrides={beforeShow:function(e,t){return $.isFunction(tp_inst._defaults.evnts.beforeShow)?tp_inst._defaults.evnts.beforeShow.call($input[0],e,t,tp_inst):void 0},onChangeMonthYear:function(e,t,i){tp_inst._updateDateTime(i),$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],e,t,i,tp_inst)},onClose:function(e,t){tp_inst.timeDefined===!0&&""!==$input.val()&&tp_inst._updateDateTime(t),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],e,t,tp_inst)}};for(i in overrides)overrides.hasOwnProperty(i)&&(fns[i]=o[i]||null);if(tp_inst._defaults=$.extend({},this._defaults,inlineSettings,o,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(e){return e.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(e){return e.toUpperCase()}),"string"==typeof tp_inst._defaults.controlType?(void 0===$.fn[tp_inst._defaults.controlType]&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType,null===tp_inst._defaults.timezoneList){var timezoneList=["-1200","-1100","-1000","-0930","-0900","-0800","-0700","-0600","-0500","-0430","-0400","-0330","-0300","-0200","-0100","+0000","+0100","+0200","+0300","+0330","+0400","+0430","+0500","+0530","+0545","+0600","+0630","+0700","+0800","+0845","+0900","+0930","+1000","+1030","+1100","+1130","+1200","+1245","+1300","+1400"];tp_inst._defaults.timezoneIso8601&&(timezoneList=$.map(timezoneList,function(e){return"+0000"==e?"Z":e.substring(0,3)+":"+e.substring(3)})),tp_inst._defaults.timezoneList=timezoneList}return tp_inst.timezone=tp_inst._defaults.timezone,tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.ampm="",tp_inst.$input=$input,o.altField&&(tp_inst.$altInput=$(o.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),(0===tp_inst._defaults.minDate||0===tp_inst._defaults.minDateTime)&&(tp_inst._defaults.minDate=new Date),(0===tp_inst._defaults.maxDate||0===tp_inst._defaults.maxDateTime)&&(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(e){var t=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(t),this._limitMinMaxDateTime(e,!1),this._injectTimePicker()},_parseTime:function(e,t){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),t||!this._defaults.timeOnly){var i=$.datepicker._get(this.inst,"dateFormat");try{var n=parseDateTimeInternal(i,this._defaults.timeFormat,e,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!n.timeObj)return!1;$.extend(this,n.timeObj)}catch(o){return $.timepicker.log("Error parsing the date/time string: "+o+"\ndate/time string = "+e+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+i),!1}return!0}var s=$.datepicker.parseTime(this._defaults.timeFormat,e,this._defaults);return s?($.extend(this,s),!0):!1},_injectTimePicker:function(){var e=this.inst.dpDiv,t=this.inst.settings,i=this,n="",o="",s={},r={},a=null;if(0===e.find("div.ui-timepicker-div").length&&t.showTimepicker){for(var l=' style="display:none;"',c='<div class="ui-timepicker-div'+(t.isRTL?" ui-timepicker-rtl":"")+'"><dl>'+'<dt class="ui_tpicker_time_label"'+(t.showTime?"":l)+">"+t.timeText+"</dt>"+'<dd class="ui_tpicker_time"'+(t.showTime?"":l)+"></dd>",d=0,h=this.units.length;h>d;d++){if(n=this.units[d],o=n.substr(0,1).toUpperCase()+n.substr(1),s[n]=parseInt(t[n+"Max"]-(t[n+"Max"]-t[n+"Min"])%t["step"+o],10),r[n]=0,c+='<dt class="ui_tpicker_'+n+'_label"'+(t["show"+o]?"":l)+">"+t[n+"Text"]+"</dt>"+'<dd class="ui_tpicker_'+n+'"><div class="ui_tpicker_'+n+'_slider"'+(t["show"+o]?"":l)+"></div>",t["show"+o]&&t[n+"Grid"]>0){if(c+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"==n)for(var u=t[n+"Min"];u<=s[n];u+=parseInt(t[n+"Grid"],10)){r[n]++;var p=$.datepicker.formatTime(useAmpm(t.pickerTimeFormat||t.timeFormat)?"hht":"HH",{hour:u},t);c+='<td data-for="'+n+'">'+p+"</td>"}else for(var f=t[n+"Min"];f<=s[n];f+=parseInt(t[n+"Grid"],10))r[n]++,c+='<td data-for="'+n+'">'+(10>f?"0":"")+f+"</td>";c+="</tr></table></div>"}c+="</dd>"}c+='<dt class="ui_tpicker_timezone_label"'+(t.showTimezone?"":l)+">"+t.timezoneText+"</dt>",c+='<dd class="ui_tpicker_timezone" '+(t.showTimezone?"":l)+"></dd>",c+="</dl></div>";var m=$(c);t.timeOnly===!0&&(m.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+t.timeOnlyTitle+"</div>"+"</div>"),e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());for(var d=0,h=i.units.length;h>d;d++)n=i.units[d],o=n.substr(0,1).toUpperCase()+n.substr(1),i[n+"_slider"]=i.control.create(i,m.find(".ui_tpicker_"+n+"_slider"),n,i[n],t[n+"Min"],s[n],t["step"+o]),t["show"+o]&&t[n+"Grid"]>0&&(a=100*r[n]*t[n+"Grid"]/(s[n]-t[n+"Min"]),m.find(".ui_tpicker_"+n+" table").css({width:a+"%",marginLeft:t.isRTL?"0":a/(-2*r[n])+"%",marginRight:t.isRTL?a/(-2*r[n])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(){var e=$(this),t=e.html(),o=parseInt(t.replace(/[^0-9]/g),10),s=t.replace(/[^apm]/gi),r=e.data("for");"hour"==r&&(-1!==s.indexOf("p")&&12>o?o+=12:-1!==s.indexOf("a")&&12===o&&(o=0)),i.control.value(i,i[r+"_slider"],n,o),i._onTimeChange(),i._onSelectHandler()}).css({cursor:"pointer",width:100/r[n]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=m.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(t.timezoneList,function(e){return $("<option />").val("object"==typeof e?e.value:e).text("object"==typeof e?e.label:e)})),"undefined"!=typeof this.timezone&&null!==this.timezone&&""!==this.timezone){var g=new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12),v=$.timepicker.timeZoneOffsetString(g);v==this.timezone?selectLocalTimeZone(i):this.timezone_select.val(this.timezone)}else"undefined"!=typeof this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(t.defaultTimezone):selectLocalTimeZone(i);this.timezone_select.change(function(){i._defaults.useLocalTimezone=!1,i._onTimeChange(),i._onSelectHandler()});var _=e.find(".ui-datepicker-buttonpane");if(_.length?_.before(m):e.append(m),this.$timeObj=m.find(".ui_tpicker_time"),null!==this.inst){var y=this.timeDefined;this._onTimeChange(),this.timeDefined=y}if(this._defaults.addSliderAccess){var b=this._defaults.sliderAccessArgs,w=this._defaults.isRTL;b.isRTL=w,setTimeout(function(){if(0===m.find(".ui-slider-access").length){m.find(".ui-slider:visible").sliderAccess(b);var e=m.find(".ui-slider-access:eq(0)").outerWidth(!0);e&&m.find("table:visible").each(function(){var t=$(this),i=t.outerWidth(),n=t.css(w?"marginRight":"marginLeft").toString().replace("%",""),o=i-e,s=n*o/i+"%",r={width:o,marginRight:0,marginLeft:0};r[w?"marginRight":"marginLeft"]=s,t.css(r)})}},10)}}},_limitMinMaxDateTime:function(e,t){var i=this._defaults,n=new Date(e.selectedYear,e.selectedMonth,e.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(e,"minDateTime")&&void 0!==$.datepicker._get(e,"minDateTime")&&n){var o=$.datepicker._get(e,"minDateTime"),s=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0);(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal||null===this.millisecMinOriginal)&&(this.hourMinOriginal=i.hourMin,this.minuteMinOriginal=i.minuteMin,this.secondMinOriginal=i.secondMin,this.millisecMinOriginal=i.millisecMin),e.settings.timeOnly||s.getTime()==n.getTime()?(this._defaults.hourMin=o.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=o.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=o.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=o.getMilliseconds()):(this.millisec<this._defaults.millisecMin&&(this.millisec=this._defaults.millisecMin),this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)}if(null!==$.datepicker._get(e,"maxDateTime")&&void 0!==$.datepicker._get(e,"maxDateTime")&&n){var r=$.datepicker._get(e,"maxDateTime"),a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal)&&(this.hourMaxOriginal=i.hourMax,this.minuteMaxOriginal=i.minuteMax,this.secondMaxOriginal=i.secondMax,this.millisecMaxOriginal=i.millisecMax),e.settings.timeOnly||a.getTime()==n.getTime()?(this._defaults.hourMax=r.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=r.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=r.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=r.getMilliseconds()):(this.millisec>this._defaults.millisecMax&&(this.millisec=this._defaults.millisecMax),this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)}if(void 0!==t&&t===!0){var l=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),c=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),d=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),h=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:l}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:c}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:d}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:h}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec))}}},_onTimeChange:function(){var e=this.hour_slider?this.control.value(this,this.hour_slider,"hour"):!1,t=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):!1,i=this.second_slider?this.control.value(this,this.second_slider,"second"):!1,n=this.millisec_slider?this.control.value(this,this.millisec_slider,"millisec"):!1,o=this.timezone_select?this.timezone_select.val():!1,s=this._defaults,r=s.pickerTimeFormat||s.timeFormat,a=s.pickerTimeSuffix||s.timeSuffix;"object"==typeof e&&(e=!1),"object"==typeof t&&(t=!1),"object"==typeof i&&(i=!1),"object"==typeof n&&(n=!1),"object"==typeof o&&(o=!1),e!==!1&&(e=parseInt(e,10)),t!==!1&&(t=parseInt(t,10)),i!==!1&&(i=parseInt(i,10)),n!==!1&&(n=parseInt(n,10));var l=s[12>e?"amNames":"pmNames"][0],c=e!=this.hour||t!=this.minute||i!=this.second||n!=this.millisec||this.ampm.length>0&&12>e!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null===this.timezone&&o!=this.defaultTimezone||null!==this.timezone&&o!=this.timezone;c&&(e!==!1&&(this.hour=e),t!==!1&&(this.minute=t),i!==!1&&(this.second=i),n!==!1&&(this.millisec=n),o!==!1&&(this.timezone=o),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),useAmpm(s.timeFormat)&&(this.ampm=l),this.formattedTime=$.datepicker.formatTime(s.timeFormat,this,s),this.$timeObj&&(r===s.timeFormat?this.$timeObj.text(this.formattedTime+a):this.$timeObj.text($.datepicker.formatTime(r,this,s)+a)),this.timeDefined=!0,c&&this._updateDateTime()},_onSelectHandler:function(){var e=this._defaults.onSelect||this.inst.settings.onSelect,t=this.$input?this.$input[0]:null;e&&t&&e.apply(t,[this.formattedDateTime,this])},_updateDateTime:function(e){e=this.inst||e;var t=$.datepicker._daylightSavingAdjust(new Date(e.selectedYear,e.selectedMonth,e.selectedDay)),i=$.datepicker._get(e,"dateFormat"),n=$.datepicker._getFormatConfig(e),o=null!==t&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(i,null===t?new Date:t,n);var s=this.formattedDate;if(""==e.lastVal&&(e.currentYear=e.selectedYear,e.currentMonth=e.selectedMonth,e.currentDay=e.selectedDay),this._defaults.timeOnly===!0?s=this.formattedTime:this._defaults.timeOnly!==!0&&(this._defaults.alwaysSetTime||o)&&(s+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=s,this._defaults.showTimepicker)if(this.$altInput&&this._defaults.altFieldTimeOnly===!0)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(s);var r="",a=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,l=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;r=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===t?new Date:t,n):this.formattedDate,r&&(r+=a),r+=this._defaults.altTimeFormat?$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+l:this.formattedTime+l,this.$altInput.val(r)}else this.$input.val(s);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var e=$.datepicker._getInst(this.$input.get(0)),t=$.datepicker._get(e,"timepicker");if(t&&t._defaults.timeOnly&&e.input.val()!=e.lastVal)try{$.datepicker._updateDatepicker(e)}catch(i){$.timepicker.log(i)}}},_controls:{slider:{create:function(e,t,i,n,o,s,r){var a=e._defaults.isRTL;return t.prop("slide",null).slider({orientation:"horizontal",value:a?-1*n:n,min:a?-1*s:o,max:a?-1*o:s,step:r,slide:function(t,n){e.control.value(e,$(this),i,a?-1*n.value:n.value),e._onTimeChange()},stop:function(){e._onSelectHandler()}})},options:function(e,t,i,n,o){if(e._defaults.isRTL){if("string"==typeof n)return"min"==n||"max"==n?void 0!==o?t.slider(n,-1*o):Math.abs(t.slider(n)):t.slider(n);var s=n.min,r=n.max;return n.min=n.max=null,void 0!==s&&(n.max=-1*s),void 0!==r&&(n.min=-1*r),t.slider(n)}return"string"==typeof n&&void 0!==o?t.slider(n,o):t.slider(n)},value:function(e,t,i,n){return e._defaults.isRTL?void 0!==n?t.slider("value",-1*n):Math.abs(t.slider("value")):void 0!==n?t.slider("value",n):t.slider("value")}},select:{create:function(e,t,i,n,o,s,r){var a='<select class="ui-timepicker-select" data-unit="'+i+'" data-min="'+o+'" data-max="'+s+'" data-step="'+r+'">';-1!==e._defaults.timeFormat.indexOf("t")?"toLowerCase":"toUpperCase";for(var l=o;s>=l;l+=r)a+='<option value="'+l+'"'+(l==n?" selected":"")+">",a+="hour"==i&&useAmpm(e._defaults.pickerTimeFormat||e._defaults.timeFormat)?$.datepicker.formatTime("hh TT",{hour:l},e._defaults):"millisec"==i||l>=10?l:"0"+l.toString(),a+="</option>";return a+="</select>",t.children("select").remove(),$(a).appendTo(t).change(function(){e._onTimeChange(),e._onSelectHandler()}),t},options:function(e,t,i,n,o){var s={},r=t.children("select");if("string"==typeof n){if(void 0===o)return r.data(n);s[n]=o}else s=n;return e.control.create(e,t,r.data("unit"),r.val(),s.min||r.data("min"),s.max||r.data("max"),s.step||r.data("step"))},value:function(e,t,i,n){var o=t.children("select");return void 0!==n?o.val(n):o.val()}}}}),$.fn.extend({timepicker:function(e){e=e||{};var t=Array.prototype.slice.call(arguments);return"object"==typeof e&&(t[0]=$.extend(e,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),t)})},datetimepicker:function(e){e=e||{};var t=arguments;return"string"==typeof e?"getDate"==e?$.fn.datepicker.apply($(this[0]),t):this.each(function(){var e=$(this);e.datepicker.apply(e,t)}):this.each(function(){var t=$(this);t.datepicker($.timepicker._newInst(t,e)._defaults)})}}),$.datepicker.parseDateTime=function(e,t,i,n,o){var s=parseDateTimeInternal(e,t,i,n,o);if(s.timeObj){var r=s.timeObj;s.date.setHours(r.hour,r.minute,r.second,r.millisec)}return s.date},$.datepicker.parseTime=function(e,t,i){var n=extendRemove(extendRemove({},$.timepicker._defaults),i||{}),o=function(e,t,i){var n,o=function(e,t){var i=[];return e&&$.merge(i,e),t&&$.merge(i,t),i=$.map(i,function(e){return e.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")}),"("+i.join("|")+")?"},s=function(e){var t=e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|t{1,2}|z|'.*?')/g),i={h:-1,m:-1,s:-1,l:-1,t:-1,z:-1};if(t)for(var n=0;n<t.length;n++)-1==i[t[n].toString().charAt(0)]&&(i[t[n].toString().charAt(0)]=n+1);return i},r="^"+e.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[lz]|'.*?')/g,function(e){var t=e.length;switch(e.charAt(0).toLowerCase()){case"h":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"m":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"s":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"l":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return o(i.amNames,i.pmNames);default:return"("+e.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(e){return"\\"+e})+")?"}}).replace(/\s/g,"\\s?")+i.timeSuffix+"$",a=s(e),l="";n=t.match(new RegExp(r,"i"));var c={hour:0,minute:0,second:0,millisec:0};if(n){if(-1!==a.t&&(void 0===n[a.t]||0===n[a.t].length?(l="",c.ampm=""):(l=-1!==$.inArray(n[a.t].toUpperCase(),i.amNames)?"AM":"PM",c.ampm=i["AM"==l?"amNames":"pmNames"][0])),-1!==a.h&&(c.hour="AM"==l&&"12"==n[a.h]?0:"PM"==l&&"12"!=n[a.h]?parseInt(n[a.h],10)+12:Number(n[a.h])),-1!==a.m&&(c.minute=Number(n[a.m])),-1!==a.s&&(c.second=Number(n[a.s])),-1!==a.l&&(c.millisec=Number(n[a.l])),-1!==a.z&&void 0!==n[a.z]){var d=n[a.z].toUpperCase();switch(d.length){case 1:d=i.timezoneIso8601?"Z":"+0000";break;case 5:i.timezoneIso8601&&(d="0000"==d.substring(1)?"Z":d.substring(0,3)+":"+d.substring(3));break;case 6:i.timezoneIso8601?"00:00"==d.substring(1)&&(d="Z"):d="Z"==d||"00:00"==d.substring(1)?"+0000":d.replace(/:/,"")}c.timezone=d}return c}return!1},s=function(e,t,i){try{var n=new Date("2012-01-01 "+t);if(isNaN(n.getTime())&&(n=new Date("2012-01-01T"+t),isNaN(n.getTime())&&(n=new Date("01/01/2012 "+t),isNaN(n.getTime()))))throw"Unable to parse time with native Date: "+t;return{hour:n.getHours(),minute:n.getMinutes(),second:n.getSeconds(),millisec:n.getMilliseconds(),timezone:$.timepicker.timeZoneOffsetString(n)}}catch(s){try{return o(e,t,i)}catch(r){$.timepicker.log("Unable to parse \ntimeString: "+t+"\ntimeFormat: "+e)}}return!1};return"function"==typeof n.parse?n.parse(e,t,n):"loose"===n.parse?s(e,t,n):o(e,t,n)},$.datepicker.formatTime=function(e,t,i){i=i||{},i=$.extend({},$.timepicker._defaults,i),t=$.extend({hour:0,minute:0,second:0,millisec:0,timezone:"+0000"},t);var n=e,o=i.amNames[0],s=parseInt(t.hour,10);return s>11&&(o=i.pmNames[0]),n=n.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[lz]|('.*?'|".*?"))/g,function(e){switch(e){case"HH":return("0"+s).slice(-2);case"H":return s;case"hh":return("0"+convert24to12(s)).slice(-2);case"h":return convert24to12(s);case"mm":return("0"+t.minute).slice(-2);case"m":return t.minute;case"ss":return("0"+t.second).slice(-2);case"s":return t.second;case"l":return("00"+t.millisec).slice(-3);case"z":return null===t.timezone?i.defaultTimezone:t.timezone;case"T":return o.charAt(0).toUpperCase();case"TT":return o.toUpperCase();case"t":return o.charAt(0).toLowerCase();case"tt":return o.toLowerCase();default:return e.replace(/\'/g,"")||"'"}}),n=$.trim(n)},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(e,t){var i=this._getInst($(e)[0]),n=this._get(i,"timepicker");n?(n._limitMinMaxDateTime(i,!0),i.inline=i.stay_open=!0,this._base_selectDate(e,t),i.inline=i.stay_open=!1,this._notifyChange(i),this._updateDatepicker(i)):this._base_selectDate(e,t)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(e){var t=e.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!=e&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!=t||"boolean"==typeof e.stay_open&&e.stay_open!==!1)){this._base_updateDatepicker(e);var i=this._get(e,"timepicker");i&&i._addTimePicker(e)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&$.datepicker._get(t,"constrainInput")){var n=useAmpm(i._defaults.timeFormat),o=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),s=i._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,n?"APM":"").replace(/Tt/g,n?"AaPpMm":"").replace(/tT/g,n?"AaPpMm":"").replace(/T/g,n?"AP":"").replace(/tt/g,n?"apm":"").replace(/t/g,n?"ap":"")+" "+i._defaults.separator+i._defaults.timeSuffix+(i._defaults.showTimezone?i._defaults.timezoneList.join(""):"")+i._defaults.amNames.join("")+i._defaults.pmNames.join("")+o,r=String.fromCharCode(void 0===e.charCode?e.keyCode:e.charCode);return e.ctrlKey||" ">r||!o||s.indexOf(r)>-1}return $.datepicker._base_doKeyPress(e)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(e){var t=this._get(e,"timepicker");if(t){var i=t._defaults.altField;if(i){var n=(t._defaults.altFormat||t._defaults.dateFormat,this._getDate(e)),o=$.datepicker._getFormatConfig(e),s="",r=t._defaults.altSeparator?t._defaults.altSeparator:t._defaults.separator,a=t._defaults.altTimeSuffix?t._defaults.altTimeSuffix:t._defaults.timeSuffix,l=null!==t._defaults.altTimeFormat?t._defaults.altTimeFormat:t._defaults.timeFormat;s+=$.datepicker.formatTime(l,t,t._defaults)+a,t._defaults.timeOnly||t._defaults.altFieldTimeOnly||null===n||(s=t._defaults.altFormat?$.datepicker.formatDate(t._defaults.altFormat,n,o)+r+s:t.formattedDate+r+s),$(i).val(s)}}else $.datepicker._base_updateAlternate(e)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&i._defaults.timeOnly&&t.input.val()!=t.lastVal)try{$.datepicker._updateDatepicker(t)}catch(n){$.timepicker.log(n)}return $.datepicker._base_doKeyUp(e)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(e){var t=this._getInst($(e)[0]),i=t.dpDiv;this._base_gotoToday(e);var n=this._get(t,"timepicker");selectLocalTimeZone(n);var o=new Date;this._setTime(t,o),$(".ui-datepicker-today",i).click()},$.datepicker._disableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(i._defaults.showTimepicker=!1,i._updateDateTime(t))}},$.datepicker._enableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(i._defaults.showTimepicker=!0,i._addTimePicker(t),i._updateDateTime(t))}},$.datepicker._setTime=function(e,t){var i=this._get(e,"timepicker");if(i){var n=i._defaults;i.hour=t?t.getHours():n.hour,i.minute=t?t.getMinutes():n.minute,i.second=t?t.getSeconds():n.second,i.millisec=t?t.getMilliseconds():n.millisec,i._limitMinMaxDateTime(e,!0),i._onTimeChange(),i._updateDateTime(e)}},$.datepicker._setTimeDatepicker=function(e,t,i){var n=this._getInst(e);if(n){var o=this._get(n,"timepicker");if(o){this._setDateFromField(n);var s;t&&("string"==typeof t?(o._parseTime(t,i),s=new Date,s.setHours(o.hour,o.minute,o.second,o.millisec)):s=new Date(t.getTime()),"Invalid Date"==s.toString()&&(s=void 0),this._setTime(n,s))}}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(e,t){var i=this._getInst(e);if(i){var n=t instanceof Date?new Date(t.getTime()):t;this._updateDatepicker(i),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(e,n,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(e,t){var i=this._getInst(e);if(i){var n=this._get(i,"timepicker");if(n){void 0===i.lastVal&&this._setDateFromField(i,t);var o=this._getDate(i);return o&&n._parseTime($(e).val(),n.timeOnly)&&o.setHours(n.hour,n.minute,n.second,n.millisec),o}return this._base_getDateDatepicker(e,t)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(e,t,i){var n;try{n=this._base_parseDate(e,t,i)}catch(o){n=this._base_parseDate(e,t.substring(0,t.length-(o.length-o.indexOf(":")-2)),i),$.timepicker.log("Error parsing the date string: "+o+"\ndate string = "+t+"\ndate format = "+e)}return n},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(e){var t=this._get(e,"timepicker");return t?(t._updateDateTime(e),t.$input.val()):this._base_formatDate(e)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(e,t,i){var n,o=this._getInst(e);if(!o)return null;var s=this._get(o,"timepicker");if(s){var r,a=null,l=null,c=null,d=s._defaults.evnts,h={};if("string"==typeof t){if("minDate"===t||"minDateTime"===t)a=i;else if("maxDate"===t||"maxDateTime"===t)l=i;else if("onSelect"===t)c=i;else if(d.hasOwnProperty(t)){if("undefined"==typeof i)return d[t];h[t]=i,n={}}}else if("object"==typeof t){t.minDate?a=t.minDate:t.minDateTime?a=t.minDateTime:t.maxDate?l=t.maxDate:t.maxDateTime&&(l=t.maxDateTime);for(r in d)d.hasOwnProperty(r)&&t[r]&&(h[r]=t[r])}for(r in h)h.hasOwnProperty(r)&&(d[r]=h[r],n||(n=$.extend({},t)),delete n[r]);if(n&&isEmptyObject(n))return;a?(a=0===a?new Date:new Date(a),s._defaults.minDate=a,s._defaults.minDateTime=a):l?(l=0===l?new Date:new Date(l),s._defaults.maxDate=l,s._defaults.maxDateTime=l):c&&(s._defaults.onSelect=c)}return void 0===i?this._base_optionDatepicker.call($.datepicker,e,t):this._base_optionDatepicker.call($.datepicker,e,n||t,i)};var isEmptyObject=function(e){var t;for(t in e)if(e.hasOwnProperty(e))return!1;return!0},extendRemove=function(e,t){$.extend(e,t);for(var i in t)(null===t[i]||void 0===t[i])&&(e[i]=t[i]);return e},useAmpm=function(e){return-1!==e.indexOf("t")&&-1!==e.indexOf("h")},convert24to12=function(e){return e>12&&(e-=12),0==e&&(e=12),String(e)},splitDateTime=function(e,t,i,n){try{var o=n&&n.separator?n.separator:$.timepicker._defaults.separator,s=n&&n.timeFormat?n.timeFormat:$.timepicker._defaults.timeFormat,r=s.split(o),a=r.length,l=t.split(o),c=l.length;if(c>1)return[l.splice(0,c-a).join(o),l.splice(0,a).join(o)]}catch(d){if($.timepicker.log("Could not split the date from the time. Please check the following datetimepicker options\nthrown error: "+d+"\ndateTimeString"+t+"\ndateFormat = "+e+"\nseparator = "+n.separator+"\ntimeFormat = "+n.timeFormat),d.indexOf(":")>=0){var h=t.length-(d.length-d.indexOf(":")-2);return t.substring(h),[$.trim(t.substring(0,h)),$.trim(t.substring(h))]}throw d}return[t,""]},parseDateTimeInternal=function(e,t,i,n,o){var s,r=splitDateTime(e,i,n,o);if(s=$.datepicker._base_parseDate(e,r[0],n),""!==r[1]){var a=r[1],l=$.datepicker.parseTime(t,a,o);if(null===l)throw"Wrong time format";return{date:s,timeObj:l}}return{date:s}},selectLocalTimeZone=function(e,t){if(e&&e.timezone_select){e._defaults.useLocalTimezone=!0;var i="undefined"!=typeof t?t:new Date,n=$.timepicker.timeZoneOffsetString(i);e._defaults.timezoneIso8601&&(n=n.substring(0,3)+":"+n.substring(3)),e.timezone_select.val(n)}};$.timepicker=new Timepicker,$.timepicker.timeZoneOffsetString=function(e){var t=-1*e.getTimezoneOffset(),i=t%60,n=(t-i)/60;return(t>=0?"+":"-")+("0"+(101*n).toString()).slice(-2)+("0"+(101*i).toString()).slice(-2)},$.timepicker.timeRange=function(e,t,i){return $.timepicker.handleRange("timepicker",e,t,i)},$.timepicker.dateTimeRange=function(e,t,i){$.timepicker.dateRange(e,t,i,"datetimepicker")},$.timepicker.dateRange=function(e,t,i,n){n=n||"datepicker",$.timepicker.handleRange(n,e,t,i)},$.timepicker.handleRange=function(e,t,i,n){function o(e,n,o){n.val()&&new Date(t.val())>new Date(i.val())&&n.val(o)}function s(t,i,n){if($(t).val()){var o=$(t)[e].call($(t),"getDate");o.getTime&&$(i)[e].call($(i),"option",n,o)}}return $.fn[e].call(t,$.extend({onClose:function(e){o(this,i,e)},onSelect:function(){s(this,i,"minDate")}},n,n.start)),$.fn[e].call(i,$.extend({onClose:function(e){o(this,t,e)},onSelect:function(){s(this,t,"maxDate")}},n,n.end)),"timepicker"!=e&&n.reformat&&$([t,i]).each(function(){var t=$(this)[e].call($(this),"option","dateFormat"),i=new Date($(this).val());$(this).val()&&i&&$(this).val($.datepicker.formatDate(t,i))}),o(t,i,t.val()),s(t,i,"minDate"),s(i,t,"maxDate"),$([t.get(0),i.get(0)])},$.timepicker.log=function(e){window.console&&console.log(e)},$.timepicker.version="1.2"}}(jQuery),define("jquery-ui-timepicker",["jquery-ui"],function(){}),define("oroui/js/jquery-ui-timepicker-l10n",["jquery","orotranslation/js/translator","orolocale/js/locale-settings","jquery-ui-timepicker"],function(e,t,i){var n=i.locale;e.timepicker.regional[n]={currentText:t("Now"),closeText:t("Close"),amNames:[t("AM"),t("A")],pmNames:[t("PM"),t("P")],timeFormat:i.getVendorDateTimeFormat("jquery_ui","time","HH:mm"),timeSuffix:"",timeOnlyTitle:t("Choose Time"),timeText:t("Time"),hourText:t("Hour"),minuteText:t("Minute"),secondText:t("Second"),millisecText:t("Millisecond"),microsecText:t("Microsecond"),timezoneText:t("Time Zone"),timezone:i.getTimeZoneOffset().replace(":",""),separator:i.getDateTimeFormatSeparator()},e.timepicker.setDefaults(e.timepicker.regional[n]),e.datepicker._orig_gotoToday=e.datepicker._gotoToday,e.datepicker._gotoToday=function(t){var i=this._getInst(e(t)[0]);
this._base_gotoToday(t),this._setTime(i,i.today)}}),function(e){e.fn.extend({outerHTML:function(t){if(!this.length)return null;if(void 0===t){var i,n=this.length?this[0]:this;return i=n.outerHTML?n.outerHTML:e(document.createElement("div")).append(e(n).clone()).html(),"string"==typeof i&&(i=e.trim(i)),i}if(!e.isFunction(t)){for(var o,s=e(this),r=[],a=e(t),l=0;l<s.length;l++){o=a.clone(!0),s.eq(l).replaceWith(o);for(var c=0;c<o.length;c++)r.push(o[c])}return r.length?e(r):null}this.each(function(i){var n=e(this);n.outerHTML(t.call(this,i,n.outerHTML()))})}})}(jQuery),define("jquery-outer-html",function(){}),function(e){function t(t){var i=t||window.event,n=[].slice.call(arguments,1),o=0,s=0,r=0;return t=e.event.fix(i),t.type="mousewheel",i.wheelDelta&&(o=i.wheelDelta/120),i.detail&&(o=-i.detail/3),r=o,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(r=0,s=-1*o),void 0!==i.wheelDeltaY&&(r=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(s=-1*i.wheelDeltaX/120),n.unshift(t,o,s,r),(e.event.dispatch||e.event.handle).apply(this,n)}var i=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var n=i.length;n;)e.event.fixHooks[i[--n]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),define("jquery.mousewheel",["jquery"],function(){}),function(e){e.fn.numeric=function(t,i){"boolean"==typeof t&&(t={decimal:t}),t=t||{},"undefined"==typeof t.negative&&(t.negative=!0);var n=t.decimal===!1?"":t.decimal||".",o=t.negative===!0?!0:!1;return i="function"==typeof i?i:function(){},this.data("numeric.decimal",n).data("numeric.negative",o).data("numeric.callback",i).keypress(e.fn.numeric.keypress).keyup(e.fn.numeric.keyup).blur(e.fn.numeric.blur)},e.fn.numeric.keypress=function(t){var i=e.data(this,"numeric.decimal"),n=e.data(this,"numeric.negative"),o=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(13==o&&"input"==this.nodeName.toLowerCase())return!0;if(13==o)return!1;var s=!1;if(t.ctrlKey&&97==o||t.ctrlKey&&65==o)return!0;if(t.ctrlKey&&120==o||t.ctrlKey&&88==o)return!0;if(t.ctrlKey&&99==o||t.ctrlKey&&67==o)return!0;if(t.ctrlKey&&122==o||t.ctrlKey&&90==o)return!0;if(t.ctrlKey&&118==o||t.ctrlKey&&86==o||t.shiftKey&&45==o)return!0;if(48>o||o>57){var r=e(this).val();if(0!==e.inArray("-",r.split(""))&&n&&45==o&&(0===r.length||0===parseInt(e.fn.getSelectionStart(this),10)))return!0;i&&o==i.charCodeAt(0)&&-1!=e.inArray(i,r.split(""))&&(s=!1),8!=o&&9!=o&&13!=o&&35!=o&&36!=o&&37!=o&&39!=o&&46!=o?s=!1:"undefined"!=typeof t.charCode&&(t.keyCode==t.which&&0!==t.which?(s=!0,46==t.which&&(s=!1)):0!==t.keyCode&&0===t.charCode&&0===t.which&&(s=!0)),i&&o==i.charCodeAt(0)&&(s=-1==e.inArray(i,r.split(""))?!0:!1)}else s=!0;return s},e.fn.numeric.keyup=function(){var t=e(this).val();if(t&&t.length>0){var i=e.fn.getSelectionStart(this),n=e.fn.getSelectionEnd(this),o=e.data(this,"numeric.decimal"),s=e.data(this,"numeric.negative");if(""!==o&&null!==o){var r=e.inArray(o,t.split(""));0===r&&(this.value="0"+t,i++,n++),1==r&&"-"==t.charAt(0)&&(this.value="-0"+t.substring(1),i++,n++),t=this.value}for(var a=[0,1,2,3,4,5,6,7,8,9,"-",o],l=t.length,c=l-1;c>=0;c--){var d=t.charAt(c);0!==c&&"-"==d?t=t.substring(0,c)+t.substring(c+1):0!==c||s||"-"!=d||(t=t.substring(1));for(var h=!1,u=0;u<a.length;u++)if(d==a[u]){h=!0;break}h&&" "!=d||(t=t.substring(0,c)+t.substring(c+1))}var p=e.inArray(o,t.split(""));if(p>0)for(var f=l-1;f>p;f--){var m=t.charAt(f);m==o&&(t=t.substring(0,f)+t.substring(f+1))}this.value=t,e.fn.setSelection(this,[i,n])}},e.fn.numeric.blur=function(){var t=e.data(this,"numeric.decimal"),i=e.data(this,"numeric.callback"),n=this.value;if(""!==n){var o=new RegExp("^\\d+$|^\\d*"+t+"\\d+$");o.exec(n)||i.apply(this)}},e.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",e.fn.numeric.keypress).unbind("blur",e.fn.numeric.blur)},e.fn.getSelectionStart=function(e){if("number"===e.type)return void 0;if(e.createTextRange){var t;return"undefined"==typeof document.selection?t=document.getSelection():(t=document.selection.createRange().duplicate(),t.moveEnd("character",e.value.length)),""==t.text?e.value.length:e.value.lastIndexOf(t.text)}try{return e.selectionStart}catch(i){return 0}},e.fn.getSelectionEnd=function(e){if("number"===e.type)return void 0;if(e.createTextRange){var t=document.selection.createRange().duplicate();return t.moveStart("character",-e.value.length),t.text.length}return e.selectionEnd},e.fn.setSelection=function(e,t){if("number"==typeof t&&(t=[t,t]),t&&t.constructor==Array&&2==t.length)if("number"===e.type)e.focus();else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",t[0]),i.moveEnd("character",t[1]),i.select()}else{e.focus();try{e.setSelectionRange&&e.setSelectionRange(t[0],t[1])}catch(n){}}}}(jQuery),define("jquery.numeric",["jquery"],function(){}),function(e,t){function i(e){var t=Array.prototype.slice.call(arguments,1);return e.prop?e.prop.apply(e,t):e.attr.apply(e,t)}function n(e,t,i){var n,o;for(n in i)i.hasOwnProperty(n)&&(o=n.replace(/ |$/g,t.eventNamespace),e.bind(o,i[n]))}function o(e,t,i){n(e,i,{focus:function(){t.addClass(i.focusClass)},blur:function(){t.removeClass(i.focusClass),t.removeClass(i.activeClass)},mouseenter:function(){t.addClass(i.hoverClass)},mouseleave:function(){t.removeClass(i.hoverClass),t.removeClass(i.activeClass)},"mousedown touchbegin":function(){e.is(":disabled")||t.addClass(i.activeClass)},"mouseup touchend":function(){t.removeClass(i.activeClass)}})}function s(e,t){e.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass)}function r(e,t,i){i?e.addClass(t):e.removeClass(t)}function a(e,t,i){var n="checked",o=t.is(":"+n);t.prop?t.prop(n,o):o?t.attr(n,n):t.removeAttr(n),r(e,i.checkedClass,o)}function l(e,t,i){r(e,i.disabledClass,t.is(":disabled"))}function c(e,t,i){switch(i){case"after":return e.after(t),e.next();case"before":return e.before(t),e.prev();case"wrap":return e.wrap(t),e.parent()}return null}function d(t,n,o){var s,r,a;return o||(o={}),o=e.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},o),s=e("<div />"),r=e("<span />"),n.autoHide&&t.is(":hidden")&&"none"===t.css("display")&&s.hide(),o.divClass&&s.addClass(o.divClass),n.wrapperClass&&s.addClass(n.wrapperClass),o.spanClass&&r.addClass(o.spanClass),a=i(t,"id"),n.useID&&a&&i(s,"id",n.idPrefix+"-"+a),o.spanHtml&&r.html(o.spanHtml),s=c(t,s,o.divWrap),r=c(t,r,o.spanWrap),l(s,t,n),{div:s,span:r}}function h(t,i){var n;return i.wrapperClass?(n=e("<span />").addClass(i.wrapperClass),n=c(t,n,"wrap")):null}function u(){var t,i,n,o;return o="rgb(120,2,153)",i=e('<div style="width:0;height:0;color:'+o+'">'),e("body").append(i),n=i.get(0),t=window.getComputedStyle?window.getComputedStyle(n,"").color:(n.currentStyle||n.style||{}).color,i.remove(),t.replace(/ /g,"")!==o}function p(t){return t?e("<span />").text(t).html():""}function f(){return navigator.cpuClass&&!navigator.product}function m(){return void 0!==window.XMLHttpRequest?!0:!1}function g(e){var t;return e[0].multiple?!0:(t=i(e,"size"),!t||1>=t?!1:!0)}function v(){return!1}function _(e,t){var i="none";n(e,t,{"selectstart dragstart mousedown":v}),e.css({MozUserSelect:i,msUserSelect:i,webkitUserSelect:i,userSelect:i})}function y(e,t,i){var n=e.val();""===n?n=i.fileDefaultHtml:(n=n.split(/[\/\\]+/),n=n[n.length-1]),t.text(n)}function b(e,t,i){var n,o;for(n=[],e.each(function(){var e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n.push({el:this,name:e,old:this.style[e]}),this.style[e]=t[e])}),i();n.length;)o=n.pop(),o.el.style[o.name]=o.old}function w(e,t){var i;i=e.parents(),i.push(e[0]),i=i.not(":visible"),b(i,{visibility:"hidden",display:"block",position:"absolute"},t)}function x(e,t){return function(){e.unwrap().unwrap().unbind(t.eventNamespace)}}var k=!0,C=!1,j=[{match:function(e){return e.is("a, button, :submit, :reset, input[type='button']")},apply:function(e,t){var r,a,c,h,u;return a=t.submitDefaultHtml,e.is(":reset")&&(a=t.resetDefaultHtml),h=e.is("a, button")?function(){return e.html()||a}:function(){return p(i(e,"value"))||a},c=d(e,t,{divClass:t.buttonClass,spanHtml:h()}),r=c.div,o(e,r,t),u=!1,n(r,t,{"click touchend":function(){var t,n,o,s;u||e.is(":disabled")||(u=!0,e[0].dispatchEvent?(t=document.createEvent("MouseEvents"),t.initEvent("click",!0,!0),n=e[0].dispatchEvent(t),e.is("a")&&n&&(o=i(e,"target"),s=i(e,"href"),o&&"_self"!==o?window.open(s,o):document.location.href=s)):e.click(),u=!1)}}),_(r,t),{remove:function(){return r.after(e),r.remove(),e.unbind(t.eventNamespace),e},update:function(){s(r,t),l(r,e,t),e.detach(),c.span.html(h()).append(e)}}}},{match:function(e){return e.is(":checkbox")},apply:function(e,t){var i,r,c;return i=d(e,t,{divClass:t.checkboxClass}),r=i.div,c=i.span,o(e,r,t),n(e,t,{"click touchend":function(){a(c,e,t)}}),a(c,e,t),{remove:x(e,t),update:function(){s(r,t),c.removeClass(t.checkedClass),a(c,e,t),l(r,e,t)}}}},{match:function(e){return e.is(":file")},apply:function(t,r){function a(){y(t,p,r)}var h,u,p,m;return h=d(t,r,{divClass:r.fileClass,spanClass:r.fileButtonClass,spanHtml:r.fileButtonHtml,spanWrap:"after"}),u=h.div,m=h.span,p=e("<span />").html(r.fileDefaultHtml),p.addClass(r.filenameClass),p=c(t,p,"after"),i(t,"size")||i(t,"size",u.width()/10),o(t,u,r),a(),f()?n(t,r,{click:function(){t.trigger("change"),setTimeout(a,0)}}):n(t,r,{change:a}),_(p,r),_(m,r),{remove:function(){return p.remove(),m.remove(),t.unwrap().unbind(r.eventNamespace)},update:function(){s(u,r),y(t,p,r),l(u,t,r)}}}},{match:function(e){if(e.is("input")){var t=(" "+i(e,"type")+" ").toLowerCase(),n=" color date datetime datetime-local email month number password search tel text time url week ";return n.indexOf(t)>=0}return!1},apply:function(e,t){var n,s;return n=i(e,"type"),e.addClass(t.inputClass),s=h(e,t),o(e,e,t),t.inputAddTypeAsClass&&e.addClass(n),{remove:function(){e.removeClass(t.inputClass),t.inputAddTypeAsClass&&e.removeClass(n),s&&e.unwrap()},update:v}}},{match:function(e){return e.is(":radio")},apply:function(t,r){var c,h,u;return c=d(t,r,{divClass:r.radioClass}),h=c.div,u=c.span,o(t,h,r),n(t,r,{"click touchend":function(){e.uniform.update(e(':radio[name="'+i(t,"name")+'"]'))}}),a(u,t,r),{remove:x(t,r),update:function(){s(h,r),a(u,t,r),l(h,t,r)}}}},{match:function(e){return e.is("select")&&!g(e)?!0:!1},apply:function(t,i){var r,a,c,h;return i.selectAutoWidth&&w(t,function(){h=t.width()}),r=d(t,i,{divClass:i.selectClass,spanHtml:(t.find(":selected:first")||t.find("option:first")).html(),spanWrap:"before"}),a=r.div,c=r.span,i.selectAutoWidth?w(t,function(){b(e([c[0],a[0]]),{display:"block"},function(){var e;e=c.outerWidth()-c.width(),a.width(h+e),c.width(h)})}):a.addClass("fixedWidth"),o(t,a,i),n(t,i,{change:function(){c.html(t.find(":selected").html()),a.removeClass(i.activeClass)},"click touchend":function(){var e=t.find(":selected").html();c.html()!==e&&t.trigger("change")},keyup:function(){c.html(t.find(":selected").html())}}),_(c,i),{remove:function(){return c.remove(),t.unwrap().unbind(i.eventNamespace),t},update:function(){i.selectAutoWidth?(e.uniform.restore(t),t.uniform(i)):(s(a,i),c.html(t.find(":selected").html()),l(a,t,i))}}}},{match:function(e){return e.is("select")&&g(e)?!0:!1},apply:function(e,t){var i;return e.addClass(t.selectMultiClass),i=h(e,t),o(e,e,t),{remove:function(){e.removeClass(t.selectMultiClass),i&&e.unwrap()},update:v}}},{match:function(e){return e.is("textarea")},apply:function(e,t){var i;return e.addClass(t.textareaClass),i=h(e,t),o(e,e,t),{remove:function(){e.removeClass(t.textareaClass),i&&e.unwrap()},update:v}}}];f()&&!m()&&(k=!1),e.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:!0,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!0,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:!0,wrapperClass:null},elements:[]},e.fn.uniform=function(t){var i=this;return t=e.extend({},e.uniform.defaults,t),C||(C=!0,u()&&(k=!1)),k?(t.resetSelector&&e(t.resetSelector).mouseup(function(){window.setTimeout(function(){e.uniform.update(i)},10)}),this.each(function(){var i,n,o,s=e(this);if(s.data("uniformed"))return e.uniform.update(s),void 0;for(i=0;j.length>i;i+=1)if(n=j[i],n.match(s,t))return o=n.apply(s,t),s.data("uniformed",o),e.uniform.elements.push(s.get(0)),void 0})):this},e.uniform.restore=e.fn.uniform.restore=function(i){i===t&&(i=e.uniform.elements),e(i).each(function(){var t,i,n=e(this);i=n.data("uniformed"),i&&(i.remove(),t=e.inArray(this,e.uniform.elements),t>=0&&e.uniform.elements.splice(t,1),n.removeData("uniformed"))})},e.uniform.update=e.fn.uniform.update=function(i){i===t&&(i=e.uniform.elements),e(i).each(function(){var t,i=e(this);t=i.data("uniformed"),t&&t.update(i,t.options)})}}(jQuery),define("jquery.uniform",["jquery"],function(){}),function(e){"undefined"==typeof e.fn.each2&&e.fn.extend({each2:function(t){for(var i=e([0]),n=-1,o=this.length;++n<o&&(i.context=i[0]=this[n])&&t.call(i[0],n,i)!==!1;);return this}})}(jQuery),function(e,t){function i(e,t){for(var i=0,n=t.length;n>i;i+=1)if(o(e,t[i]))return i;return-1}function n(){var t=e(N);t.appendTo("body");var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}function o(e,i){return e===i?!0:e===t||i===t?!1:null===e||null===i?!1:e.constructor===String?e+""==i+"":i.constructor===String?i+""==e+"":!1}function s(t,i){var n,o,s;if(null===t||t.length<1)return[];for(n=t.split(i),o=0,s=n.length;s>o;o+=1)n[o]=e.trim(n[o]);return n}function r(e){return e.outerWidth(!1)-e.width()}function a(i){var n="keyup-change-value";i.on("keydown",function(){e.data(i,n)===t&&e.data(i,n,i.val())}),i.on("keyup",function(){var o=e.data(i,n);o!==t&&i.val()!==o&&(e.removeData(i,n),i.trigger("keyup-change"))})}function l(i){i.on("mousemove",function(i){var n=z;(n===t||n.x!==i.pageX||n.y!==i.pageY)&&e(i.target).trigger("mousemove-filtered",i)})}function c(e,i,n){n=n||t;var o;return function(){var t=arguments;window.clearTimeout(o),o=window.setTimeout(function(){i.apply(n,t)},e)}}function d(e){var t,i=!1;return function(){return i===!1&&(t=e(),i=!0),t}}function h(e,t){var n=c(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){i(e.target,t.get())>=0&&n(e)})}function u(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,i=e[0],n=e.val().length;e.focus(),e.is(":visible")&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&(t=i.createTextRange(),t.collapse(!1),t.select()))},0)}function p(t){t=e(t)[0];var i=0,n=0;if("selectionStart"in t)i=t.selectionStart,n=t.selectionEnd-i;else if("selection"in document){t.focus();var o=document.selection.createRange();n=document.selection.createRange().text.length,o.moveStart("character",-t.value.length),i=o.text.length-n}return{offset:i,length:n}}function f(e){e.preventDefault(),e.stopPropagation()}function m(e){e.preventDefault(),e.stopImmediatePropagation()}function g(t){if(!O){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);O=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),O.attr("class","select2-sizer"),e("body").append(O)}return O.text(t.val()),O.width()}function v(t,i,n){var o,s,r=[];o=t.attr("class"),o&&(o=""+o,e(o.split(" ")).each2(function(){0===this.indexOf("select2-")&&r.push(this)})),o=i.attr("class"),o&&(o=""+o,e(o.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(s=n(this),s&&r.push(this))})),t.attr("class",r.join(" "))}function _(e,t,i,n){var o=e.toUpperCase().indexOf(t.toUpperCase()),s=t.length;return 0>o?(i.push(n(e)),void 0):(i.push(n(e.substring(0,o))),i.push("<span class='select2-match'>"),i.push(n(e.substring(o,o+s))),i.push("</span>"),i.push(n(e.substring(o+s,e.length))),void 0)}function y(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function b(i){var n,o=0,s=null,r=i.quietMillis||100,a=i.url,l=this;return function(c){window.clearTimeout(n),n=window.setTimeout(function(){o+=1;var n=o,r=i.data,d=a,h=i.transport||e.fn.select2.ajaxDefaults.transport,u={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},p=e.extend({},e.fn.select2.ajaxDefaults.params,u);r=r?r.call(l,c.term,c.page,c.context):null,d="function"==typeof d?d.call(l,c.term,c.page,c.context):d,s&&s.abort(),i.params&&(e.isFunction(i.params)?e.extend(p,i.params.call(l)):e.extend(p,i.params)),e.extend(p,{url:d,dataType:i.dataType,data:r,success:function(e){if(!(o>n)){var t=i.results(e,c.page);c.callback(t)}}}),s=h.call(l,p)},r)}}function w(t){var i,n,o=t,s=function(e){return""+e.text};e.isArray(o)&&(n=o,o={results:n}),e.isFunction(o)===!1&&(n=o,o=function(){return n});var r=o();return r.text&&(s=r.text,e.isFunction(s)||(i=r.text,s=function(e){return e[i]})),function(t){var i,n=t.term,r={results:[]};return""===n?(t.callback(o()),void 0):(i=function(o,r){var a,l;if(o=o[0],o.children){a={};for(l in o)o.hasOwnProperty(l)&&(a[l]=o[l]);a.children=[],e(o.children).each2(function(e,t){i(t,a.children)}),(a.children.length||t.matcher(n,s(a),o))&&r.push(a)}else t.matcher(n,s(o),o)&&r.push(o)},e(o().results).each2(function(e,t){i(t,r.results)}),t.callback(r),void 0)}}function x(i){var n=e.isFunction(i);return function(o){var s=o.term,r={results:[]};e(n?i():i).each(function(){var e=this.text!==t,i=e?this.text:this;(""===s||o.matcher(s,i))&&r.results.push(e?this:{id:this,text:this})}),o.callback(r)}}function k(t,i){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(i+" must be a function or a falsy value")}function C(t){return e.isFunction(t)?t():t}function j(t){var i=0;return e.each(t,function(e,t){t.children?i+=j(t.children):i++}),i}function T(e,i,n,s){var r,a,l,c,d,h=e,u=!1;if(!s.createSearchChoice||!s.tokenSeparators||s.tokenSeparators.length<1)return t;for(;;){for(a=-1,l=0,c=s.tokenSeparators.length;c>l&&(d=s.tokenSeparators[l],a=e.indexOf(d),!(a>=0));l++);if(0>a)break;if(r=e.substring(0,a),e=e.substring(a+d.length),r.length>0&&(r=s.createSearchChoice.call(this,r,i),r!==t&&null!==r&&s.id(r)!==t&&null!==s.id(r))){for(u=!1,l=0,c=i.length;c>l;l++)if(o(s.id(r),s.id(i[l]))){u=!0;break}u||n(r)}}return h!==e?e:void 0}function S(t,i){var n=function(){};return n.prototype=new t,n.prototype.constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}if(window.Select2===t){var D,E,M,A,F,O,P,I,z={x:0,y:0},D={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case D.LEFT:case D.RIGHT:case D.UP:case D.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case D.SHIFT:case D.CTRL:case D.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},N="<div class='select2-measure-scrollbar'></div>";P=e(document),F=function(){var e=1;return function(){return e++}}(),P.on("mousemove",function(e){z.x=e.pageX,z.y=e.pageY}),E=S(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var o,s,r,c,u=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+F()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=d(function(){return i.element.closest("body")}),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(C(i.containerCss)),this.container.addClass(C(i.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(C(i.dropdownCssClass)),this.dropdown.data("select2",this),this.results=o=this.container.find(u),this.search=s=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),l(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",u,this.bind(this.highlightUnderEvent)),h(80,this.results),this.dropdown.on("scroll-debounced",u,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&o.mousewheel(function(e,t,i,n){var s=o.scrollTop();n>0&&0>=s-n?(o.scrollTop(0),f(e)):0>n&&o.get(0).scrollHeight-o.scrollTop()+n<=o.height()&&(o.scrollTop(o.get(0).scrollHeight-o.height()),f(e))}),a(s),s.on("keyup-change input paste",this.bind(this.updateResults)),s.on("focus",function(){s.addClass("select2-focused")}),s.on("blur",function(){s.removeClass("select2-focused")}),this.dropdown.on("mouseup",u,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var r=i.element.prop("disabled");r===t&&(r=!1),this.enable(!r);var c=i.element.prop("readonly");c===t&&(c=!1),this.readonly(c),I=I||n(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus()},destroy:function(){var e=this.opts.element,i=e.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),i!==t&&(i.container.remove(),i.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:o(e.attr("locked"),"locked")||o(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(i){var n,r,a,l,c=this;if(n=i.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=r=i.element),r&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=e.extend({},{populateResults:function(n,o,s){var r,a=this.opts.id;r=function(n,o,l){var d,h,u,p,f,m,g,v,_,y;for(n=i.sortResults(n,o,s),d=0,h=n.length;h>d;d+=1)u=n[d],f=u.disabled===!0,p=!f&&a(u)!==t,m=u.children&&u.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+l),g.addClass("select2-result"),g.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(c.opts.formatResultCssClass(u)),v=e(document.createElement("div")),v.addClass("select2-result-label"),y=i.formatResult(u,v,s,c.opts.escapeMarkup),y!==t&&v.html(y),g.append(v),m&&(_=e("<ul></ul>"),_.addClass("select2-result-sub"),r(u.children,_,l+1),g.append(_)),g.data("select2-data",u),o.append(g)},r(o,n,0)}},e.fn.select2.defaults,i),"function"!=typeof i.id&&(a=i.id,i.id=function(e){return e[a]}),e.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(r?(i.query=this.bind(function(e){var i,o,s,r={results:[],more:!1},a=e.term;s=function(t,i){var n;t.is("option")?e.matcher(a,t.text(),t)&&i.push(c.optionToData(t)):t.is("optgroup")&&(n=c.optionToData(t),t.children().each2(function(e,t){s(t,n.children)}),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==t&&i.length>0&&(o=this.getPlaceholderOption(),o&&(i=i.not(o))),i.each2(function(e,t){s(t,r.results)}),e.callback(r)}),i.id=function(e){return e.id},i.formatResultCssClass=function(e){return e.css}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=b.call(i.element,i.ajax)):"data"in i?i.query=w(i.data):"tags"in i&&(i.query=x(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(e){return{id:e,text:e}}),i.initSelection===t&&(i.initSelection=function(t,n){var r=[];e(s(t.val(),i.separator)).each(function(){var t=this,n=this,s=i.tags;e.isFunction(s)&&(s=s()),e(s).each(function(){return o(this.id,t)?(n=this.text,!1):void 0}),r.push({id:t,text:n})}),n(r)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");return i},monitorSource:function(){var e,i=this.opts.element;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e,n=i.prop("disabled");n===t&&(n=!1),this.enable(!n);var e=i.prop("readonly");e===t&&(e=!1),this.readonly(e),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(C(this.opts.containerCssClass)),v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(C(this.opts.dropdownCssClass))}),i.on("propertychange.select2 DOMAttrModified.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){return e===t&&(e=!0),this._enabled===e?!1:(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface(),!0)},readonly:function(e){return e===t&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,i,n,o,s=this.dropdown,r=this.container.offset(),a=this.container.outerHeight(!1),l=this.container.outerWidth(!1),c=s.outerHeight(!1),d=e(window).scrollLeft()+e(window).width(),h=e(window).scrollTop()+e(window).height(),u=r.top+a,p=r.left,f=h>=u+c,m=r.top-c>=this.body().scrollTop(),g=s.outerWidth(!1),v=d>=p+g,_=s.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(o=e(".select2-results",s)[0],s.addClass("select2-drop-auto-width"),s.css("width",""),g=s.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:I.width),g>l?l=g:g=l,v=d>=p+g):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(t=this.body().offset(),u-=t.top,p-=t.left),_?(i=!0,!m&&f&&(i=!1)):(i=!1,!f&&m&&(i=!0)),v||(p=r.left+l-g),i?(u=r.top-c,this.container.addClass("select2-drop-above"),s.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),s.removeClass("select2-drop-above")),n=e.extend({top:u,left:p,width:l},C(this.opts.dropdownCss)),s.css(n)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){function t(){return{width:Math.max(document.documentElement.scrollWidth,e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var i,n,o=this.containerId,s="scroll."+o,r="resize."+o,a="orientationchange."+o;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),i=e("#select2-drop-mask"),0==i.length&&(i=e(document.createElement("div")),i.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),i.hide(),i.appendTo(this.body()),i.on("mousedown touchstart click",function(t){var i,n=e("#select2-drop");n.length>0&&(i=n.data("select2"),i.opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==i[0]&&this.dropdown.before(i),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),n=t(),i.css(n).show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var l=this;this.container.parents().add(window).each(function(){e(this).on(r+" "+s+" "+a,function(){var i=t();e("#select2-drop-mask").css(i),l.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,i="scroll."+t,n="resize."+t,o="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(i).off(n).off(o)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return C(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,i,n,o,s,r,a,l=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return l.scrollTop(0),void 0;t=this.findHighlightableChoices().find(".select2-result-label"),n=e(t[i]),o=n.offset().top+n.outerHeight(!0),i===t.length-1&&(a=l.find("li.select2-more-results"),a.length>0&&(o=a.offset().top+a.outerHeight(!0))),s=l.offset().top+l.outerHeight(!0),o>s&&l.scrollTop(l.scrollTop()+(o-s)),r=n.offset().top-l.offset().top,0>r&&"none"!=n.css("display")&&l.scrollTop(l.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")
},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){n+=t;var o=e(i[n]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")&&!o.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(t){var n,o,s=this.findHighlightableChoices();return 0===arguments.length?i(s.filter(".select2-highlighted")[0],s.get()):(t>=s.length&&(t=s.length-1),0>t&&(t=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),n=e(s[t]),n.addClass("select2-highlighted"),this.ensureHighlightVisible(),o=n.data("select2-data"),o&&this.opts.element.trigger({type:"select2-highlight",val:this.id(o),choice:o}),void 0)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,i=t.find("li.select2-more-results"),n=this.resultsPage+1,o=this,s=this.search.val(),r=this.context;0!==i.length&&(e=i.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:s,page:n,context:r,matcher:this.opts.matcher,callback:this.bind(function(e){o.opened()&&(o.opts.populateResults.call(this,t,e.results,{term:s,page:n,context:r}),o.postprocessResults(e,!1,!1),e.more===!0?(i.detach().appendTo(t).text(o.opts.formatLoadMore(n+1)),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):i.remove(),o.positionDropdown(),o.resultsPage=n,o.context=e.context)})})))},tokenize:function(){},updateResults:function(i){function n(){l.removeClass("select2-active"),h.positionDropdown()}function s(e){c.html(e),n()}var r,a,l=this.search,c=this.results,d=this.opts,h=this,u=l.val(),p=e.data(this.container,"select2-last-term");if((i===!0||!p||!o(u,p))&&(e.data(this.container,"select2-last-term",u),i===!0||this.showSearchInput!==!1&&this.opened())){var f=this.getMaximumSelectionSize();if(f>=1&&(r=this.data(),e.isArray(r)&&r.length>=f&&k(d.formatSelectionTooBig,"formatSelectionTooBig")))return s("<li class='select2-selection-limit'>"+d.formatSelectionTooBig(f)+"</li>"),void 0;if(l.val().length<d.minimumInputLength)return k(d.formatInputTooShort,"formatInputTooShort")?s("<li class='select2-no-results'>"+d.formatInputTooShort(l.val(),d.minimumInputLength)+"</li>"):s(""),i&&this.showSearch&&this.showSearch(!0),void 0;if(d.maximumInputLength&&l.val().length>d.maximumInputLength)return k(d.formatInputTooLong,"formatInputTooLong")?s("<li class='select2-no-results'>"+d.formatInputTooLong(l.val(),d.maximumInputLength)+"</li>"):s(""),void 0;d.formatSearching&&0===this.findHighlightableChoices().length&&s("<li class='select2-searching'>"+d.formatSearching()+"</li>"),l.addClass("select2-active"),a=this.tokenize(),a!=t&&null!=a&&l.val(a),this.resultsPage=1,d.query({element:d.element,term:l.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(r){var a;return this.opened()?(this.context=r.context===t?null:r.context,this.opts.createSearchChoice&&""!==l.val()&&(a=this.opts.createSearchChoice.call(h,l.val(),r.results),a!==t&&null!==a&&h.id(a)!==t&&null!==h.id(a)&&0===e(r.results).filter(function(){return o(h.id(this),h.id(a))}).length&&r.results.unshift(a)),0===r.results.length&&k(d.formatNoMatches,"formatNoMatches")?(s("<li class='select2-no-results'>"+d.formatNoMatches(l.val())+"</li>"),void 0):(c.empty(),h.opts.populateResults.call(this,c,r.results,{term:l.val(),page:this.resultsPage,context:null}),r.more===!0&&k(d.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(d.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(r,i),n(),this.opts.element.trigger({type:"select2-loaded",items:r}),void 0)):(this.search.removeClass("select2-active"),void 0)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){u(this.search)},selectHighlighted:function(e){var t=this.highlight(),i=this.results.find(".select2-highlighted"),n=i.closest(".select2-result").data("select2-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children().first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},initContainerWidth:function(){function i(){var i,n,o,s,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==t)for(n=i.split(";"),s=0,r=n.length;r>s;s+=1)if(o=n[s].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==o&&o.length>=1)return o[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=i.call(this);null!==n&&this.container.css("width",n)}}),M=S(E,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,i,n;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),t=this.search.get(0),t.createTextRange?(i=t.createTextRange(),i.collapse(!1),i.select()):t.setSelectionRange&&(n=this.search.val().length,t.setSelectionRange(n,n)),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var t,i=this.container,n=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+F()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)return f(e),void 0;switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),f(e),void 0;case D.ENTER:return this.selectHighlighted(),f(e),void 0;case D.TAB:return this.selectHighlighted({noFocus:!0}),void 0;case D.ESC:return this.cancel(e),f(e),void 0}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.ESC){if(this.opts.openOnEnter===!1&&e.which===D.ENTER)return f(e),void 0;if(e.which==D.DOWN||e.which==D.UP||e.which==D.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),f(e),void 0}return e.which==D.DELETE||e.which==D.BACKSPACE?(this.opts.allowClear&&this.clear(),f(e),void 0):void 0}})),a(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),m(e),this.close(),this.selection.focus())})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),f(t)})),n.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){f(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var t=this.selection.data("select2-data");if(t){var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection([]),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return(e=this.getPlaceholderOption())!==t&&e.is(":selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=e.find(":selected");t(i.optionToData(n))}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var s=i.val(),r=null;t.query({matcher:function(e,i,n){var a=o(s,t.id(n));return a&&(r=n),a},callback:e.isFunction(n)?function(){n(r)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,i){var n=0,s=this;if(this.findHighlightableChoices().each2(function(e,t){return o(s.id(t.data("select2-data")),s.opts.element.val())?(n=e,!1):void 0}),i!==!1&&(t===!0&&n>=0?this.highlight(n):this.highlight(0)),t===!0){var r=this.opts.minimumResultsForSearch;r>=0&&this.showSearch(j(e.results)>=r)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.close(),t&&t.noFocus||this.selection.focus(),o(i,this.id(e))||this.triggerChange({added:e,removed:n})}},updateSelection:function(e){var i,n,o=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),o.empty(),i=this.opts.formatSelection(e,o,this.opts.escapeMarkup),i!==t&&o.append(i),n=this.opts.formatSelectionCssClass(e,o),n!==t&&o.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,i=!1,n=null,o=this,s=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(e).find(":selected").each2(function(e,t){return n=o.optionToData(t),!1}),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:s});else{if(!e&&0!==e)return this.clear(i),void 0;if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){o.opts.element.val(e?o.id(e):""),o.updateSelection(e),o.setPlaceholder(),i&&o.triggerChange({added:e,removed:s})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e,i){var n;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(e&&""!==e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i),void 0)}}),A=S(E,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=[];e.find(":selected").each2(function(e,t){n.push(i.optionToData(t))}),t(n)}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var r=s(i.val(),t.separator),a=[];t.query({matcher:function(i,n,s){var l=e.grep(r,function(e){return o(e,t.id(s))}).length;return l&&a.push(s),l},callback:e.isFunction(n)?function(){for(var e=[],i=0;i<r.length;i++)for(var s=r[i],l=0;l<a.length;l++){var c=a[l];if(o(s,t.id(c))){e.push(c),a.splice(l,1);break}}n(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},initContainer:function(){var t,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(i);var n=this;this.selection.on("mousedown",".select2-search-choice",function(){n.search[0].focus(),n.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+F()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),o=i.next(".select2-search-choice:not(.select2-locked)"),s=p(this.search);if(i.length&&(e.which==D.LEFT||e.which==D.RIGHT||e.which==D.BACKSPACE||e.which==D.DELETE||e.which==D.ENTER)){var r=i;return e.which==D.LEFT&&n.length?r=n:e.which==D.RIGHT?r=o.length?o:null:e.which===D.BACKSPACE?(this.unselect(i.first()),this.search.width(10),r=n.length?n:o):e.which==D.DELETE?(this.unselect(i.first()),this.search.width(10),r=o.length?o:null):e.which==D.ENTER&&(r=null),this.selectChoice(r),f(e),r&&r.length||this.open(),void 0}if((e.which===D.BACKSPACE&&1==this.keydowns||e.which==D.LEFT)&&0==s.offset&&!s.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),f(e),void 0;if(this.selectChoice(null),this.opened())switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),f(e),void 0;case D.ENTER:return this.selectHighlighted(),f(e),void 0;case D.TAB:return this.selectHighlighted({noFocus:!0}),this.close(),void 0;case D.ESC:return this.cancel(e),f(e),void 0}if(e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.BACKSPACE&&e.which!==D.ESC){if(e.which===D.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)&&f(e),e.which===D.ENTER&&f(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),i=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],o=[],s=this;e(t).each(function(){i(s.id(this),n)<0&&(n.push(s.id(this)),o.push(this))}),t=o,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){s.addSelectedChoice(this)}),s.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,o,s=!i.locked,r=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=s?r:a,c=this.id(i),d=this.getVal();n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),n!=t&&l.find("div").replaceWith("<div>"+n+"</div>"),o=this.opts.formatSelectionCssClass(i,l.find("div")),o!=t&&l.addClass(o),s&&l.find(".select2-search-choice-close").on("mousedown",f).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),f(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),d.push(c),this.setVal(d)},unselect:function(e){var t,n,o=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),t&&(n=i(this.id(t),o),n>=0&&(o.splice(n,1),this.setVal(o),this.select&&this.postprocessResults()),e.remove(),this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))},postprocessResults:function(e,t,n){var o=this.getVal(),s=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),a=this;s.each2(function(e,t){var n=a.id(t.data("select2-data"));i(n,o)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!s.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&k(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+a.opts.formatNoMatches(a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-r(this.search)},resizeSearch:function(){var e,t,i,n,o,s=r(this.search);e=g(this.search)+10,t=this.search.offset().left,i=this.selection.width(),n=this.selection.offset().left,o=i-(t-n)-s,e>o&&(o=i-s),40>o&&(o=i-s),0>=o&&(o=e),this.search.width(o)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),s(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){i(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),i=0;i<t.length;i++)for(var n=0;n<e.length;n++)o(this.opts.id(t[i]),this.opts.id(e[n]))&&(t.splice(i,1),i--,e.splice(n,1),n--);return{added:t,removed:e}},val:function(i,n){var o,s=this;if(0===arguments.length)return this.getVal();if(o=this.data(),o.length||(o=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),n&&this.triggerChange({added:this.data(),removed:o}),void 0;if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(o,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=e.map(t,s.id);s.setVal(i),s.updateSelection(t),s.clearSearch(),n&&s.triggerChange(this.buildChangeDetails(o,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,i){var n,o,s=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(o=this.data(),t||(t=[]),n=e.map(t,function(e){return s.opts.id(e)}),this.setVal(n),this.updateSelection(t),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(o,this.data())),void 0)}}),e.fn.select2=function(){var n,o,s,r,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","readonly","positionDropdown","data","search"],d=["val","opened","isFocused","container","data"],h={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])n=0===l.length?{}:e.extend({},l[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),o=a?new A:new M,o.init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(i(l[0],c)<0)throw"Unknown method: "+l[0];if(r=t,o=e(this).data("select2"),o===t)return;if(s=l[0],"container"===s?r=o.container:"dropdown"===s?r=o.dropdown:(h[s]&&(s=h[s]),r=o[s].apply(o,l.slice(1))),i(l[0],d)>=0)return!1}}),r===t?this:r},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var o=[];return _(e.text,i.term,o,n),o.join("")},formatSelection:function(e,i,n){return e?n(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatSelectionCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:T,escapeMarkup:y,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:b,local:w,tags:x},util:{debounce:c,markMatch:_,escapeMarkup:y},"class":{"abstract":E,single:M,multi:A}}}}(jQuery),define("jquery.select2",["jquery"],function(){}),define("oroui/js/extend/select2",["jquery","jquery.select2"],function(e){function t(t,i,n){var o,s=this.opts,r=s.id,a=t.parent(),l=this.val();o=function(t,i,a,c){var d,h,u,p,f,m,g,v,_,y,b,w,x;for(t=s.sortResults(t,i,n),w=i.parent(),d=0,h=t.length;h>d;d+=1)u=t[d],x=u.id,f=u.disabled===!0,p=!f&&void 0!==r(u),m=u.children&&u.children.length>0,g=e("<li></li>").addClass("select2-result").addClass("select2-results-dept-"+a).addClass(p?"select2-result-selectable":"select2-result-unselectable").addClass(s.formatResultCssClass(u)),f&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),v=e("<div></div>"),v.addClass("select2-result-label"),y=s.formatResult(u,v,n,s.escapeMarkup),void 0!==y&&v.html(y),m&&(i.addClass("accordion"),b=w.attr("id")+"_"+a+"_"+d,_=e("<ul></ul>").addClass("select2-result-sub").wrap('<div class="accordion-body collapse" id="'+b+'" />'),o(u.children,_,a+1,c.concat(_.parent())),_=_.parent(),g.addClass("accordion-group").append(_),n.term?_.addClass("in"):v.addClass("collapsed"),v=v.addClass("accordion-toggle").attr("data-toggle","collapse").attr("data-target","#"+b).attr("data-parent","#"+w.attr("id")).wrap('<div class="accordion-heading"/>').parent()),l.indexOf(x)>=0&&e.each(c,function(){this.addClass("in")}),g.prepend(v),g.data("select2-data",u),i.append(g)},a.attr("id",a.attr("id")||"select2container_"+Date.now()),t.on("click.collapse.data-api","[data-toggle=collapse]",function(){var t=e(this),i=t.attr("data-target"),n=e(i).data("collapse")?"toggle":t.data();t[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(n)}),o(i,t,0,[])}!function(i){var n=i.prepareOpts;i.prepareOpts=function(i){if(i.collapsibleResults){i.populateResults=t;var o=i.matcher||e.fn.select2.defaults.matcher;i.matcher=function(e,t,i){return!i.children&&o.apply(this,arguments)}}return n.call(this,i)}}(window.Select2["class"].abstract.prototype),function(t){var i=t.init;t.init=function(){i.apply(this,arguments),this.breadcrumbs=e('<ul class="select2-breadcrumbs"></ul>'),this.breadcrumbs.on("click",".select2-breadcrumb-item",e.proxy(function(t){var i=e(t.currentTarget).data("select2-data");this.pagePath=i.pagePath,this.search.val(""),this.updateResults(),t.stopPropagation()},this)),this.dropdown.prepend(this.breadcrumbs)},t.updateBreadcrumbs=function(){var t=this.breadcrumbs,i=this.opts;if(t.empty(),e.isFunction(i.formatBreadcrumbItem)&&e.isFunction(i.breadcrumbs)){var n=i.breadcrumbs(this.pagePath);e.each(n,function(o,s){var r=i.formatBreadcrumbItem(s,{index:o,length:n.length});r=e("<li class='select2-breadcrumb-item'>"+r+"</li>"),r.data("select2-data",{pagePath:s.pagePath}),t.append(r)})}}}(window.Select2["class"].abstract.prototype),function(e){var t=e.onSelect,i=e.updateResults,n=e.clear;e.onSelect=function(e,i){return void 0===e.id&&e.pagePath?(this.pagePath=e.pagePath,this.search.val(""),this.updateResults(),void 0):(t.apply(this,arguments),i&&i.noFocus||!(this.opts.minimumResultsForSearch>=0)||this.focusser.focus(),void 0)
},e.updateResults=function(e){i.apply(this,arguments),e===!0&&this.opts.element.val()&&(this.pagePath=this.opts.element.val()),this.updateBreadcrumbs(),this.positionDropdown()},e.clear=function(){this.pagePath="",n.apply(this,arguments)}}(window.Select2["class"].single.prototype)}),function(){if(!jQuery||!jQuery.jstree){var e=!1,t=!1,i=!1;!function(n){n.vakata={},n.vakata.css={get_css:function(e,t,i){e=e.toLowerCase();var n=i.cssRules||i.rules,o=0;do{if(n.length&&o>n.length+5)return!1;if(n[o].selectorText&&n[o].selectorText.toLowerCase()==e)return t===!0?(i.removeRule&&i.removeRule(o),i.deleteRule&&i.deleteRule(o),!0):n[o]}while(n[++o]);return!1},add_css:function(e,t){return n.jstree.css.get_css(e,!1,t)?!1:(t.insertRule?t.insertRule(e+" { }",0):t.addRule(e,null,0),n.vakata.css.get_css(e))},remove_css:function(e,t){return n.vakata.css.get_css(e,!0,t)},add_sheet:function(e){var t=!1,i=!0;if(e.str)return e.title&&(t=n("style[id='"+e.title+"-stylesheet']")[0]),t?i=!1:(t=document.createElement("style"),t.setAttribute("type","text/css"),e.title&&t.setAttribute("id",e.title+"-stylesheet")),t.styleSheet?i?(document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet.cssText=e.str):t.styleSheet.cssText=t.styleSheet.cssText+" "+e.str:(t.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(t)),t.sheet||t.styleSheet;if(e.url){if(!document.createStyleSheet)return t=document.createElement("link"),t.rel="stylesheet",t.type="text/css",t.media="all",t.href=e.url,document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet;try{t=document.createStyleSheet(e.url)}catch(o){}}}};var o=[],s=-1,r={},a={};n.fn.jstree=function(e){var t="string"==typeof e,i=Array.prototype.slice.call(arguments,1),s=this;if(t){if("_"==e.substring(0,1))return s;this.each(function(){var t=o[n.data(this,"jstree_instance_id")],r=t&&n.isFunction(t[e])?t[e].apply(t,i):t;return"undefined"!=typeof r&&(0===e.indexOf("is_")||r!==!0&&r!==!1)?(s=r,!1):void 0})}else this.each(function(){var t=n.data(this,"jstree_instance_id"),s=[],a=e?n.extend({},!0,e):{},l=n(this),c=!1,d=[];s=s.concat(i),l.data("jstree")&&s.push(l.data("jstree")),a=s.length?n.extend.apply(null,[!0,a].concat(s)):a,"undefined"!=typeof t&&o[t]&&o[t].destroy(),t=parseInt(o.push({}),10)-1,n.data(this,"jstree_instance_id",t),a.plugins=n.isArray(a.plugins)?a.plugins:n.jstree.defaults.plugins.slice(),a.plugins.unshift("core"),a.plugins=a.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),c=n.extend(!0,{},n.jstree.defaults,a),c.plugins=a.plugins,n.each(r,function(e){-1===n.inArray(e,c.plugins)?(c[e]=null,delete c[e]):d.push(e)}),c.plugins=d,o[t]=new n.jstree._instance(t,n(this).addClass("jstree jstree-"+t),c),n.each(o[t]._get_settings().plugins,function(e,i){o[t].data[i]={}}),n.each(o[t]._get_settings().plugins,function(e,i){r[i]&&r[i].__init.apply(o[t])}),setTimeout(function(){o[t]&&o[t].init()},0)});return s},n.jstree={defaults:{plugins:[]},_focused:function(){return o[s]||null},_reference:function(e){if(o[e])return o[e];var t=n(e);return t.length||"string"!=typeof e||(t=n("#"+e)),t.length?o[t.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(e,t,i){this.data={core:{}},this.get_settings=function(){return n.extend(!0,{},i)},this._get_settings=function(){return i},this.get_index=function(){return e},this.get_container=function(){return t},this.get_container_ul=function(){return t.children("ul:eq(0)")},this._set_settings=function(e){i=n.extend(!0,{},i,e)}},_fn:{},plugin:function(e,t){t=n.extend({},{__init:n.noop,__destroy:n.noop,_fn:{},defaults:!1},t),r[e]=t,n.jstree.defaults[e]=t.defaults,n.each(t._fn,function(t,i){i.plugin=e,i.old=n.jstree._fn[t],n.jstree._fn[t]=function(){var e,o=i,s=Array.prototype.slice.call(arguments),r=new n.Event("before.jstree"),a=!1;if(this.data.core.locked!==!0||"unlock"===t||"is_locked"===t){do{if(o&&o.plugin&&-1!==n.inArray(o.plugin,this._get_settings().plugins))break;o=o.old}while(o);if(o){if(0===t.indexOf("_"))e=o.apply(this,s);else{if(e=this.get_container().triggerHandler(r,{func:t,inst:this,args:s,plugin:o.plugin}),e===!1)return;"undefined"!=typeof e&&(s=e),e=o.apply(n.extend({},this,{__callback:function(e){this.get_container().triggerHandler(t+".jstree",{inst:this,args:s,rslt:e,rlbk:a})},__rollback:function(){return a=this.get_rollback()},__call_old:function(e){return o.old.apply(this,e?Array.prototype.slice.call(arguments,1):s)}}),s)}return e}}},n.jstree._fn[t].old=i.old,n.jstree._fn[t].plugin=e})},rollback:function(e){e&&(n.isArray(e)||(e=[e]),n.each(e,function(e,t){o[t.i].set_rollback(t.h,t.d)}))}},n.jstree._fn=n.jstree._instance.prototype={},n(function(){var o=navigator.userAgent.toLowerCase(),s=(o.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],r=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";if(/msie/.test(o)&&6==parseInt(s,10)){e=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}r+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(o)&&7==parseInt(s,10)&&(t=!0,r+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "),!/compatible/.test(o)&&/mozilla/.test(o)&&parseFloat(s,10)<1.9&&(i=!0,r+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "),n.vakata.css.add_sheet({str:r,title:"jstree"})}),n.jstree.plugin("core",{__init:function(){this.data.core.locked=!1,this.data.core.to_open=this.get_settings().core.initially_open,this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus(),this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl"),this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>"),this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18,this.get_container().delegate("li > ins","click.jstree",n.proxy(function(e){var t=n(e.target);this.toggle_node(t)},this)).bind("mousedown.jstree",n.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(){var e;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(t){}}}),this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",n.proxy(function(e,t){var i=this._get_node(t.rslt.obj),o=this;-1===i&&(i=this.get_container_ul()),i.length&&i.find("li").each(function(){var e=n(this);e.data("jstree")&&n.each(e.data("jstree"),function(t,i){o.data[t]&&n.isFunction(o["_"+t+"_notify"])&&o["_"+t+"_notify"].call(o,e,i)})})},this)),this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",n.proxy(function(e,t){var i=this._get_node(t.rslt.obj),o=this;-1===i&&(i=this.get_container_ul()),i.length&&i.find("li.jstree-open:not(:has(ul))").each(function(){o.load_node(this,n.noop,n.noop)})},this)),this.__callback(),this.load_node(-1,function(){this.loaded(),this.reload_nodes()})},destroy:function(){var e,t=this.get_index(),i=this._get_settings(),a=this;if(n.each(i.plugins,function(e,t){try{r[t].__destroy.apply(a)}catch(i){}}),this.__callback(),this.is_focused())for(e in o)if(o.hasOwnProperty(e)&&e!=t){o[e].set_focus();break}t===s&&(s=-1),this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),n(document).unbind(".jstree-"+t).undelegate(".jstree-"+t),o[t]=null,delete o[t]},_core_notify:function(e,t){t.opened&&this.open_node(e,!1,!0)},lock:function(){this.data.core.locked=!0,this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7"),this.__callback({})},unlock:function(){this.data.core.locked=!1,this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1"),this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var e=this;this.data.core.to_open=[],this.get_container_ul().find("li.jstree-open").each(function(){this.id&&e.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(e.data.core.to_open)},save_loaded:function(){},reload_nodes:function(e){var t=this,i=!0,o=[],s=[];e||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=n.map(n.makeArray(this.data.core.to_open),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=n.map(n.makeArray(this.data.core.to_load),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open))),this.data.core.to_load.length&&(n.each(this.data.core.to_load,function(e,t){return"#"==t?!0:(n(t).length?o.push(t):s.push(t),void 0)}),o.length&&(this.data.core.to_load=s,n.each(o,function(e,n){t._is_loaded(n)||(t.load_node(n,function(){t.reload_nodes(!0)},function(){t.reload_nodes(!0)}),i=!1)}))),this.data.core.to_open.length&&n.each(this.data.core.to_open,function(e,i){t.open_node(i,!1,!0)}),i&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){t.__callback({},t)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var e=this;this.data.core.to_open.length&&n.each(this.data.core.to_open,function(t,i){e.open_node(i,!1,!0)}),this.__callback({})},refresh:function(e){var t=this;this.save_opened(),e||(e=-1),e=this._get_node(e),e||(e=-1),-1!==e?e.children("UL").remove():this.get_container_ul().empty(),this.load_node(e,function(){t.__callback({obj:e}),t.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var e=n.jstree._focused();e&&e.unset_focus(),this.get_container().addClass("jstree-focused"),s=this.get_index(),this.__callback()}},is_focused:function(){return s==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),s=-1),this.__callback()},_get_node:function(e){var t=n(e,this.get_container());return t.is(".jstree")||-1==e?-1:(t=t.closest("li",this.get_container()),t.length?t:!1)},_get_next:function(e,t){return e=this._get_node(e),-1===e?this.get_container().find("> ul > li:first-child"):e.length?t?e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):!1:e.hasClass("jstree-open")?e.find("li:eq(0)"):e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):e.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(e,t){if(e=this._get_node(e),-1===e)return this.get_container().find("> ul > li:last-child");if(!e.length)return!1;if(t)return e.prevAll("li").length>0?e.prevAll("li:eq(0)"):!1;if(e.prev("li").length){for(e=e.prev("li").eq(0);e.hasClass("jstree-open");)e=e.children("ul:eq(0)").children("li:last");return e}var i=e.parentsUntil(".jstree","li:eq(0)");return i.length?i:!1},_get_parent:function(e){if(e=this._get_node(e),-1==e||!e.length)return!1;var t=e.parentsUntil(".jstree","li:eq(0)");return t.length?t:-1},_get_children:function(e){return e=this._get_node(e),-1===e?this.get_container().children("ul:eq(0)").children("li"):e.length?e.children("ul:eq(0)").children("li"):!1},get_path:function(e,t){var i=[],n=this;return e=this._get_node(e),-1!==e&&e&&e.length?(e.parentsUntil(".jstree","li").each(function(){i.push(t?this.id:n.get_text(this))}),i.reverse(),i.push(t?e.attr("id"):this.get_text(e)),i):!1},_get_string:function(e){return this._get_settings().core.strings[e]||e},is_open:function(e){return e=this._get_node(e),e&&-1!==e&&e.hasClass("jstree-open")},is_closed:function(e){return e=this._get_node(e),e&&-1!==e&&e.hasClass("jstree-closed")},is_leaf:function(e){return e=this._get_node(e),e&&-1!==e&&e.hasClass("jstree-leaf")},correct_state:function(e){return e=this._get_node(e),e&&-1!==e?(e.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e}),void 0):!1},open_node:function(t,i,n){if(t=this._get_node(t),!t.length)return!1;if(!t.hasClass("jstree-closed"))return i&&i.call(),!1;var o=n||e?0:this._get_settings().core.animation,s=this;this._is_loaded(t)?(this._get_settings().core.open_parents&&t.parentsUntil(".jstree",".jstree-closed").each(function(){s.open_node(this,!1,!0)}),o&&t.children("ul").css("display","none"),t.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),o?t.children("ul").stop(!0,!0).slideDown(o,function(){this.style.display="",s.after_open(t)}):s.after_open(t),this.__callback({obj:t}),i&&i.call()):(t.children("a").addClass("jstree-loading"),this.load_node(t,function(){s.open_node(t,i,n)},i))},after_open:function(e){this.__callback({obj:e})},close_node:function(t,i){t=this._get_node(t);var n=i||e?0:this._get_settings().core.animation,o=this;return t.length&&t.hasClass("jstree-open")?(n&&t.children("ul").attr("style","display:block !important"),t.removeClass("jstree-open").addClass("jstree-closed"),n?t.children("ul").stop(!0,!0).slideUp(n,function(){this.style.display="",o.after_close(t)}):o.after_close(t),this.__callback({obj:t}),void 0):!1},after_close:function(e){this.__callback({obj:e})},toggle_node:function(e){return e=this._get_node(e),e.hasClass("jstree-closed")?this.open_node(e):e.hasClass("jstree-open")?this.close_node(e):void 0},open_all:function(e,t,i){e=e?this._get_node(e):-1,e&&-1!==e||(e=this.get_container_ul()),i?e=e.find("li.jstree-closed"):(i=e,e=e.is(".jstree-closed")?e.find("li.jstree-closed").addBack():e.find("li.jstree-closed"));var n=this;e.each(function(){var e=this;n._is_loaded(this)?n.open_node(this,!1,!t):n.open_node(this,function(){n.open_all(e,t,i)},!t)}),0===i.find("li.jstree-closed").length&&this.__callback({obj:i})},close_all:function(e,t){var i=this;e=e?this._get_node(e):this.get_container(),e&&-1!==e||(e=this.get_container_ul()),e.find("li.jstree-open").addBack().each(function(){i.close_node(this,!t)}),this.__callback({obj:e})},clean_node:function(e){e=e&&-1!=e?n(e):this.get_container_ul(),e=e.is("li")?e.find("li").addBack():e.find("li"),e.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed"),e.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e})},get_rollback:function(){return this.__callback(),{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(e,t){this.get_container().empty().append(e),this.data=t,this.__callback()},load_node:function(e){this.__callback({obj:e})},_is_loaded:function(){return!0},create_node:function(e,t,i,o,s){e=this._get_node(e),t="undefined"==typeof t?"last":t;var r,a=n("<li />"),l=this._get_settings().core;if(-1!==e&&!e.length)return!1;if(!s&&!this._is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,i,o,!0)}),!1;switch(this.__rollback(),"string"==typeof i&&(i={data:i}),i||(i={}),i.attr&&a.attr(i.attr),i.metadata&&a.data(i.metadata),i.state&&a.addClass("jstree-"+i.state),i.data||(i.data=this._get_string("new_node")),n.isArray(i.data)||(r=i.data,i.data=[],i.data.push(r)),n.each(i.data,function(e,t){r=n("<a />"),n.isFunction(t)&&(t=t.call(this,i)),"string"==typeof t?r.attr("href","#")[l.html_titles?"html":"text"](t):(t.attr||(t.attr={}),t.attr.href||(t.attr.href="#"),r.attr(t.attr)[l.html_titles?"html":"text"](t.title),t.language&&r.addClass(t.language)),r.prepend("<ins class='jstree-icon'>&#160;</ins>"),!t.icon&&i.icon&&(t.icon=i.icon),t.icon&&(-1===t.icon.indexOf("/")?r.children("ins").addClass(t.icon):r.children("ins").css("background","url('"+t.icon+"') center center no-repeat")),a.append(r)}),a.prepend("<ins class='jstree-icon'>&#160;</ins>"),-1===e&&(e=this.get_container(),"before"===t&&(t="first"),"after"===t&&(t="last")),t){case"before":e.before(a),r=this._get_parent(e);break;case"after":e.after(a),r=this._get_parent(e);break;case"inside":case"first":e.children("ul").length||e.append("<ul />"),e.children("ul").prepend(a),r=e;break;case"last":e.children("ul").length||e.append("<ul />"),e.children("ul").append(a),r=e;break;default:e.children("ul").length||e.append("<ul />"),t||(t=0),r=e.children("ul").children("li").eq(t),r.length?r.before(a):e.children("ul").append(a),r=e}return(-1===r||r.get(0)===this.get_container().get(0))&&(r=-1),this.clean_node(r),this.__callback({obj:a,parent:r}),o&&o.call(this,a),a},get_text:function(e){if(e=this._get_node(e),!e.length)return!1;var t=this._get_settings().core.html_titles;return e=e.children("a:eq(0)"),t?(e=e.clone(),e.children("INS").remove(),e.html()):(e=e.contents().filter(function(){return 3==this.nodeType})[0],e.nodeValue)},set_text:function(e,t){if(e=this._get_node(e),!e.length)return!1;if(e=e.children("a:eq(0)"),this._get_settings().core.html_titles){var i=e.children("INS").clone();return e.html(t).prepend(i),this.__callback({obj:e,name:t}),!0}return e=e.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:e,name:t}),e.nodeValue=t},rename_node:function(e,t){e=this._get_node(e),this.__rollback(),e&&e.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:e,name:t})},delete_node:function(e){if(e=this._get_node(e),!e.length)return!1;this.__rollback();var t=this._get_parent(e),i=n([]),o=this;return e.each(function(){i=i.add(o._get_prev(this))}),e=e.detach(),-1!==t&&0===t.find("> ul > li").length&&t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),this.clean_node(t),this.__callback({obj:e,prev:i,parent:t}),e},prepare_move:function(e,t,i,o,s){var r={};if(r.ot=n.jstree._reference(e)||this,r.o=r.ot._get_node(e),r.r=-1===t?-1:this._get_node(t),r.p="undefined"==typeof i||i===!1?"last":i,!s&&a.o&&a.o[0]===r.o[0]&&a.r[0]===r.r[0]&&a.p===r.p)return this.__callback(a),o&&o.call(this,a),void 0;if(r.ot=n.jstree._reference(r.o)||this,r.rt=n.jstree._reference(r.r)||this,-1!==r.r&&r.r){if(!/^(before|after)$/.test(r.p)&&!this._is_loaded(r.r))return this.load_node(r.r,function(){this.prepare_move(e,t,i,o,!0)});switch(r.p){case"before":r.cp=r.r.index(),r.cr=r.rt._get_parent(r.r);break;case"after":r.cp=r.r.index()+1,r.cr=r.rt._get_parent(r.r);break;case"inside":case"first":r.cp=0,r.cr=r.r;break;case"last":r.cp=r.r.find(" > ul > li").length,r.cr=r.r;break;default:r.cp=r.p,r.cr=r.r}}else switch(r.cr=-1,r.p){case"first":case"before":case"inside":r.cp=0;break;case"after":case"last":r.cp=r.rt.get_container().find(" > ul > li").length;break;default:r.cp=r.p}r.np=-1==r.cr?r.rt.get_container():r.cr,r.op=r.ot._get_parent(r.o),r.cop=r.o.index(),-1===r.op&&(r.op=r.ot?r.ot.get_container():this.get_container()),!/^(before|after)$/.test(r.p)&&r.op&&r.np&&r.op[0]===r.np[0]&&r.o.index()<r.cp&&r.cp++,r.or=r.np.find(" > ul > li:nth-child("+(r.cp+1)+")"),a=r,this.__callback(a),o&&o.call(this,a)},check_move:function(){var e=a,t=!0,i=-1===e.r?this.get_container():e.r;if(!e||!e.o||e.or[0]===e.o[0])return!1;if(!e.cy){if(e.op&&e.np&&e.op[0]===e.np[0]&&e.cp-1===e.o.index())return!1;e.o.each(function(){return-1!==i.parentsUntil(".jstree","li").addBack().index(this)?(t=!1,!1):void 0})}return t},move_node:function(e,t,i,o,s,r){if(!s)return this.prepare_move(e,t,i,function(e){this.move_node(e,!1,!1,o,!0,r)});if(o&&(a.cy=!0),!r&&!this.check_move())return!1;this.__rollback();var l=!1;o?(l=e.o.clone(!0),l.find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)})):l=e.o,e.or.length?e.or.before(l):(e.np.children("ul").length||n("<ul />").appendTo(e.np),e.np.children("ul:eq(0)").append(l));try{e.ot.clean_node(e.op),e.rt.clean_node(e.np),e.op.find("> ul > li").length||e.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(c){}return o&&(a.cy=!0,a.oc=l),this.__callback(a),a},_get_move:function(){return a}}})}(jQuery),function(e){var t,i,n;e(function(){/msie/.test(navigator.userAgent.toLowerCase())?(i=e('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),n=e('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),t=i.width()-n.width(),i.add(n).remove()):(i=e("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),t=100-i.width(),i.parent().remove())}),e.jstree.plugin("ui",{__init:function(){this.data.ui.selected=e(),this.data.ui.last_selected=!1,this.data.ui.hovered=null,this.data.ui.to_select=this.get_settings().ui.initially_select,this.get_container().delegate("a","click.jstree",e.proxy(function(t){t.preventDefault(),t.currentTarget.blur(),e(t.currentTarget).hasClass("jstree-loading")||this.select_node(t.currentTarget,!0,t)},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){e(t.currentTarget).hasClass("jstree-loading")||this.hover_node(t.target)},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){e(t.currentTarget).hasClass("jstree-loading")||this.dehover_node(t.target)},this)).bind("reopen.jstree",e.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",e.proxy(function(){this.dehover_node(),this.save_selected()},this)).bind("set_rollback.jstree",e.proxy(function(){this.reselect()},this)).bind("close_node.jstree",e.proxy(function(t,i){var n=this._get_settings().ui,o=this._get_node(i.rslt.obj),s=o&&o.length?o.children("ul").find("a.jstree-clicked"):e(),r=this;n.selected_parent_close!==!1&&s.length&&s.each(function(){r.deselect_node(this),"select_parent"===n.selected_parent_close&&r.select_node(o)})},this)).bind("delete_node.jstree",e.proxy(function(e,t){var i=this._get_settings().ui.select_prev_on_delete,n=this._get_node(t.rslt.obj),o=n&&n.length?n.find("a.jstree-clicked"):[],s=this;o.each(function(){s.deselect_node(this)}),i&&o.length&&t.rslt.prev.each(function(){return this.parentNode?(s.select_node(this),!1):void 0})},this)).bind("move_node.jstree",e.proxy(function(e,t){t.rslt.cy&&t.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(t,i){if("undefined"==typeof t||null===t)return i?this.data.ui.selected:this.data.ui.last_selected;var n=e(t,this.get_container());return n.is(".jstree")||-1==t?-1:(n=n.closest("li",this.get_container()),n.length?n:!1)},_ui_notify:function(e,t){t.selected&&this.select_node(e,!1)},save_selected:function(){var e=this;this.data.ui.to_select=[],this.data.ui.selected.each(function(){this.id&&e.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(this.data.ui.to_select)},reselect:function(){var t=this,i=this.data.ui.to_select;i=e.map(e.makeArray(i),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),e.each(i,function(e,i){i&&"#"!==i&&t.select_node(i)}),this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode}),this.__callback()},refresh:function(){return this.save_selected(),this.__call_old()},hover_node:function(e){return e=this._get_node(e),e.length?(e.hasClass("jstree-hovered")||this.dehover_node(),this.data.ui.hovered=e.children("a").addClass("jstree-hovered").parent(),this._fix_scroll(e),this.__callback({obj:e}),void 0):!1},dehover_node:function(){var e,t=this.data.ui.hovered;return t&&t.length?(e=t.children("a").removeClass("jstree-hovered").parent(),this.data.ui.hovered[0]===e[0]&&(this.data.ui.hovered=null),this.__callback({obj:t}),void 0):!1},select_node:function(e,t,i){if(e=this._get_node(e),-1==e||!e||!e.length)return!1;var n=this._get_settings().ui,o="on"==n.select_multiple_modifier||n.select_multiple_modifier!==!1&&i&&i[n.select_multiple_modifier+"Key"],s=n.select_range_modifier!==!1&&i&&i[n.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==e[0]&&this.data.ui.last_selected.parent()[0]===e.parent()[0],r=this.is_selected(e),a=!0,l=this;if(t){if(n.disable_selecting_children&&o&&(e.parentsUntil(".jstree","li").children("a.jstree-clicked").length||e.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;switch(a=!1,!0){case s:this.data.ui.last_selected.addClass("jstree-last-selected"),e=e[e.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").addBack(),-1==n.select_limit||e.length<n.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==l.data.ui.last_selected[0]&&l.deselect_node(this)}),r=!1,a=!0):a=!1;break;case r&&!o:this.deselect_all(),r=!1,a=!0;break;case!r&&!o:(-1==n.select_limit||n.select_limit>0)&&(this.deselect_all(),a=!0);break;case r&&o:this.deselect_node(e);break;case!r&&o:(-1==n.select_limit||this.data.ui.selected.length+1<=n.select_limit)&&(a=!0)}}a&&!r&&(s||(this.data.ui.last_selected=e),e.children("a").addClass("jstree-clicked"),n.selected_parent_open&&e.parents(".jstree-closed").each(function(){l.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(e),this._fix_scroll(e.eq(0)),this.__callback({obj:e,e:i}))},_fix_scroll:function(e){var i,n=this.get_container()[0];if(n.scrollHeight>n.offsetHeight){if(e=this._get_node(e),!e||-1===e||!e.length||!e.is(":visible"))return;i=e.offset().top-this.get_container().offset().top,0>i&&(n.scrollTop=n.scrollTop+i-1),i+this.data.core.li_height+(n.scrollWidth>n.offsetWidth?t:0)>n.offsetHeight&&(n.scrollTop=n.scrollTop+(i-n.offsetHeight+this.data.core.li_height+1+(n.scrollWidth>n.offsetWidth?t:0)))}},deselect_node:function(e){return e=this._get_node(e),e.length?(this.is_selected(e)&&(e.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(e),this.data.ui.last_selected.get(0)===e.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:e})),void 0):!1},toggle_select:function(e){return e=this._get_node(e),e.length?(this.is_selected(e)?this.deselect_node(e):this.select_node(e),void 0):!1},is_selected:function(e){return this.data.ui.selected.index(this._get_node(e))>=0},get_selected:function(t){return t?e(t).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(t){var i=t?e(t).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();i.children("a.jstree-clicked").removeClass("jstree-clicked"),this.data.ui.selected=e([]),this.data.ui.last_selected=!1,this.__callback({obj:i})}}}),e.jstree.defaults.plugins.push("ui")}(jQuery),function(e){e.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",e.proxy(function(e,t){if(this._get_settings().crrm.move.open_onmove){var i=this;t.rslt.np.parentsUntil(".jstree").addBack().filter(".jstree-closed").each(function(){i.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(){return!0}}},_fn:{_show_input:function(t,i){t=this._get_node(t);var n=this._get_settings().core.rtl,o=this._get_settings().crrm.input_width_limit,s=t.children("ins").width(),r=t.find("> a:visible > ins").width()*t.find("> a:visible > ins").length,a=this.get_text(t),l=e("<div />",{css:{position:"absolute",top:"-200px",left:n?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),c=t.css("position","relative").append(e("<input />",{value:a,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:n?"auto":s+r+4+"px",right:n?s+r+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:e.proxy(function(){var e=t.children(".jstree-rename-input"),n=e.val();""===n&&(n=a),l.remove(),e.remove(),this.set_text(t,a),this.rename_node(t,n),i.call(this,t,n,a),t.css("position","")},this),keyup:function(e){var t=e.keyCode||e.which;return 27==t?(this.value=a,this.blur(),void 0):13==t?(this.blur(),void 0):(c.width(Math.min(l.text("pW"+this.value).width(),o)),void 0)},keypress:function(e){var t=e.keyCode||e.which;return 13==t?!1:void 0}})).children(".jstree-rename-input");this.set_text(t,""),l.css({fontFamily:c.css("fontFamily")||"",fontSize:c.css("fontSize")||"",fontWeight:c.css("fontWeight")||"",fontStyle:c.css("fontStyle")||"",fontStretch:c.css("fontStretch")||"",fontVariant:c.css("fontVariant")||"",letterSpacing:c.css("letterSpacing")||"",wordSpacing:c.css("wordSpacing")||""}),c.width(Math.min(l.text("pW"+c[0].value).width(),o))[0].select()},rename:function(e){e=this._get_node(e),this.__rollback();var t=this.__callback;this._show_input(e,function(e,i,n){t.call(this,{obj:e,new_name:i,old_name:n})})},create:function(t,i,n,o,s){var r,a=this;return t=this._get_node(t),t||(t=-1),this.__rollback(),r=this.create_node(t,i,n,function(t){var i=this._get_parent(t),n=e(t).index();o&&o.call(this,t),i.length&&i.hasClass("jstree-closed")&&this.open_node(i,!1,!0),s?a.__callback({obj:t,name:this.get_text(t),parent:i,position:n}):this._show_input(t,function(e,t){a.__callback({obj:e,name:t,parent:i,position:n})})})},remove:function(e){e=this._get_node(e,!0);var t=this._get_parent(e),i=this._get_prev(e);this.__rollback(),e=this.delete_node(e),e!==!1&&this.__callback({obj:e,prev:i,parent:t})},check_move:function(){if(!this.__call_old())return!1;var e=this._get_settings().crrm.move;return e.check_move.call(this,this._get_move())?!0:!1},move_node:function(e,t,i,n,o,s){var r=this._get_settings().crrm.move;return o?((r.always_copy===!0||"multitree"===r.always_copy&&e.rt.get_index()!==e.ot.get_index())&&(n=!0),this.__call_old(!0,e,t,i,n,!0,s),void 0):("undefined"==typeof i&&(i=r.default_position),"inside"!==i||r.default_position.match(/^(before|after)$/)||(i=r.default_position),this.__call_old(!0,e,t,i,n,!1,s))
},cut:function(e){return e=this._get_node(e,!0),e&&e.length?(this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=e,this.__callback({obj:e}),void 0):!1},copy:function(e){return e=this._get_node(e,!0),e&&e.length?(this.data.crrm.ct_nodes=!1,this.data.crrm.cp_nodes=e,this.__callback({obj:e}),void 0):!1},paste:function(e){if(e=this._get_node(e),!e||!e.length)return!1;var t=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;return this.data.crrm.ct_nodes||this.data.crrm.cp_nodes?(this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,e),this.data.crrm.ct_nodes=!1),this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,e,!1,!0),this.__callback({obj:e,nodes:t}),void 0):!1}}})}(jQuery),function(e){var t=[];e.jstree._themes=!1,e.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",e.proxy(function(){var e=this._get_settings().themes;this.data.themes.dots=e.dots,this.data.themes.icons=e.icons,this.set_theme(e.theme,e.url)},this)).bind("loaded.jstree",e.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(i,n){return i?(n||(n=e.jstree._themes+i+"/style.css"),-1==e.inArray(n,t)&&(e.vakata.css.add_sheet({url:n}),t.push(n)),this.data.themes.theme!=i&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=i),this.get_container().addClass("jstree-"+i),this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons(),this.__callback(),void 0):!1},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0,this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1,this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0,this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1,this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}}),e(function(){e.jstree._themes===!1&&e("script").each(function(){return this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/)?(e.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1):void 0}),e.jstree._themes===!1&&(e.jstree._themes="themes/")}),e.jstree.defaults.plugins.push("themes")}(jQuery),function(e){function t(t,i){var n,o=e.jstree._focused();return o&&o.data&&o.data.hotkeys&&o.data.hotkeys.enabled&&(n=o._get_settings().hotkeys[t])?n.call(o,i):void 0}var i=[];e.jstree.plugin("hotkeys",{__init:function(){if("undefined"==typeof e.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";e.each(this._get_settings().hotkeys,function(n,o){o!==!1&&-1==e.inArray(n,i)&&(e(document).bind("keydown",n,function(e){return t(n,e)}),i.push(n))}),this.get_container().bind("lock.jstree",e.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",e.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this)),this.enable_hotkeys()},defaults:{up:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"ctrl+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"shift+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},down:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"ctrl+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"shift+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},left:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"ctrl+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"shift+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},right:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"ctrl+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"shift+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},space:function(){return this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click(),!1},"ctrl+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},"shift+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})}(jQuery),function(e){e.jstree.plugin("json_data",{__init:function(){var e=this._get_settings().json_data;e.progressive_unload&&this.get_container().bind("after_close.jstree",function(e,t){t.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(e,t,i){var n=this;this.load_node_json(e,function(){n.__callback({obj:n._get_node(e)}),t.call(this)},i)},_is_loaded:function(t){var i=this._get_settings().json_data;return t=this._get_node(t),-1==t||!t||!i.ajax&&!i.progressive_render&&!e.isFunction(i.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").length>0},refresh:function(t){t=this._get_node(t);var i=this._get_settings().json_data;return t&&-1!==t&&i.progressive_unload&&(e.isFunction(i.data)||i.ajax)&&t.removeData("jstree_children"),this.__call_old()},load_node_json:function(t,i,n){var o,s=this.get_settings().json_data,r=function(){},a=function(){};if(t=this._get_node(t),t&&-1!==t&&(s.progressive_render||s.progressive_unload)&&!t.is(".jstree-open, .jstree-leaf")&&0===t.children("ul").children("li").length&&t.data("jstree_children"))return o=this._parse_json(t.data("jstree_children"),t),o&&(t.append(o),s.progressive_unload||t.removeData("jstree_children")),this.clean_node(t),i&&i.call(this),void 0;if(t&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!s.data&&!s.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(s.data):s.data.call(this,t,e.proxy(function(e){e=this._parse_json(e,t),e?(-1!==t&&t?(t.append(e).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),this.clean_node(t),i&&i.call(this)):(-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&this.correct_state(t)):s.correct_state&&this.get_container().children("ul").empty(),n&&n.call(this))},this));break;case!!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!t||-1===t):t&&-1!=t||(o=this._parse_json(s.data,t),o?(this.get_container().children("ul").empty().append(o.children()),this.clean_node()):s.correct_state&&this.get_container().children("ul").empty()),i&&i.call(this);break;case!s.data&&!!s.ajax||!!s.data&&!!s.ajax&&t&&-1!==t:r=function(e,i,o){var r=this.get_settings().json_data.ajax.error;r&&r.call(this,e,i,o),-1!=t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&s.correct_state&&this.correct_state(t)):"success"===i&&s.correct_state&&this.get_container().children("ul").empty(),n&&n.call(this)},a=function(n,o,a){var l=this.get_settings().json_data.ajax.success;return l&&(n=l.call(this,n,o,a)||n),""===n||n&&n.toString&&""===n.toString().replace(/^[\s\n]+$/,"")||!e.isArray(n)&&!e.isPlainObject(n)?r.call(this,a,o,""):(n=this._parse_json(n,t),n?(-1!==t&&t?(t.append(n).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()),this.clean_node(t),i&&i.call(this)):-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(t),i&&i.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)),void 0)},s.ajax.context=this,s.ajax.error=r,s.ajax.success=a,s.ajax.dataType||(s.ajax.dataType="json"),e.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,t)),e.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,t)),e.ajax(s.ajax)}},_parse_json:function(t,i,n){var o,s,r,a,l,c=!1,d=this._get_settings(),h=d.json_data,u=d.core.html_titles;if(!t)return c;if(h.progressive_unload&&i&&-1!==i&&i.data("jstree_children",c),e.isArray(t)){if(c=e("<ul>"),!t.length)return!1;for(s=0,r=t.length;r>s;s++)o=this._parse_json(t[s],i,!0),o.length&&(c=c.append(o));c=c.children()}else{if("string"==typeof t&&(t={data:t}),!t.data&&""!==t.data)return c;c=e("<li />"),t.attr&&c.attr(t.attr),t.metadata&&c.data(t.metadata),t.state&&c.addClass("jstree-"+t.state),e.isArray(t.data)||(o=t.data,t.data=[],t.data.push(o)),e.each(t.data,function(i,n){o=e("<a />"),e.isFunction(n)&&(n=n.call(this,t)),"string"==typeof n?o.attr("href","#")[u?"html":"text"](n):(n.attr||(n.attr={}),n.attr.href||(n.attr.href="#"),o.attr(n.attr)[u?"html":"text"](n.title),n.language&&o.addClass(n.language)),o.prepend("<ins class='jstree-icon'>&#160;</ins>"),!n.icon&&t.icon&&(n.icon=t.icon),n.icon&&(-1===n.icon.indexOf("/")?o.children("ins").addClass(n.icon):o.children("ins").css("background","url('"+n.icon+"') center center no-repeat")),c.append(o)}),c.prepend("<ins class='jstree-icon'>&#160;</ins>"),t.children&&(h.progressive_render&&"open"!==t.state?c.addClass("jstree-closed").data("jstree_children",t.children):(h.progressive_unload&&c.data("jstree_children",t.children),e.isArray(t.children)&&t.children.length&&(o=this._parse_json(t.children,i,!0),o.length&&(l=e("<ul />"),l.append(o),c.append(l)))))}return n||(a=e("<ul />"),a.append(c),c=a),c},get_json:function(t,i,n,o){var s,r,a,l,c,d,h=[],u=this._get_settings(),p=this;return t=this._get_node(t),t&&-1!==t||(t=this.get_container().find("> ul > li")),i=e.isArray(i)?i:["id","class"],!o&&this.data.types&&i.push(u.types.type_attr),n=e.isArray(n)?n:[],t.each(function(){a=e(this),s={data:[]},i.length&&(s.attr={}),e.each(i,function(e,t){r=a.attr(t),r&&r.length&&r.replace(/jstree[^ ]*/gi,"").length&&(s.attr[t]=(" "+r).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))}),a.hasClass("jstree-open")&&(s.state="open"),a.hasClass("jstree-closed")&&(s.state="closed"),a.data()&&(s.metadata=a.data()),l=a.children("a"),l.each(function(){c=e(this),n.length||-1!==e.inArray("languages",u.plugins)||c.children("ins").get(0).style.backgroundImage.length||c.children("ins").get(0).className&&c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").length?(d=!1,-1!==e.inArray("languages",u.plugins)&&e.isArray(u.languages)&&u.languages.length&&e.each(u.languages,function(e,t){return c.hasClass(t)?(d=t,!1):void 0}),r={attr:{},title:p.get_text(c,d)},e.each(n,function(e,t){r.attr[t]=(" "+(c.attr(t)||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")}),-1!==e.inArray("languages",u.plugins)&&e.isArray(u.languages)&&u.languages.length&&e.each(u.languages,function(e,t){return c.hasClass(t)?(r.language=t,!0):void 0}),c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(r.icon=c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")),c.children("ins").get(0).style.backgroundImage.length&&(r.icon=c.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):r=p.get_text(c),l.length>1?s.data.push(r):s.data=r}),a=a.find("> ul > li"),a.length&&(s.children=p.get_json(a,i,n,!0)),h.push(s)}),h}}})}(jQuery),function(e){var t=!1;e.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(i){var n=this._get_settings().languages,o=!1,s=".jstree-"+this.get_index()+" a";if(!e.isArray(n)||0===n.length)return!1;if(-1==e.inArray(i,n)){if(!n[i])return!1;i=n[i]}return i==this.data.languages.current_language?!0:(o=e.vakata.css.get_css(s+"."+this.data.languages.current_language,!1,t),o!==!1&&(o.style.display="none"),o=e.vakata.css.get_css(s+"."+i,!1,t),o!==!1&&(o.style.display=""),this.data.languages.current_language=i,this.__callback(i),!0)},get_lang:function(){return this.data.languages.current_language},_get_string:function(t,i){var n=this._get_settings().languages,o=this._get_settings().core.strings;return e.isArray(n)&&n.length&&(i=i&&-1!=e.inArray(i,n)?i:this.data.languages.current_language),o[i]&&o[i][t]?o[i][t]:o[t]?o[t]:t},get_text:function(t,i){if(t=this._get_node(t)||this.data.ui.last_selected,!t.size())return!1;var n=this._get_settings().languages,o=this._get_settings().core.html_titles;return e.isArray(n)&&n.length?(i=i&&-1!=e.inArray(i,n)?i:this.data.languages.current_language,t=t.children("a."+i)):t=t.children("a:eq(0)"),o?(t=t.clone(),t.children("INS").remove(),t.html()):(t=t.contents().filter(function(){return 3==this.nodeType})[0],t.nodeValue)},set_text:function(t,i,n){if(t=this._get_node(t)||this.data.ui.last_selected,!t.size())return!1;var o,s=this._get_settings().languages,r=this._get_settings().core.html_titles;return e.isArray(s)&&s.length?(n=n&&-1!=e.inArray(n,s)?n:this.data.languages.current_language,t=t.children("a."+n)):t=t.children("a:eq(0)"),r?(o=t.children("INS").clone(),t.html(i).prepend(o),this.__callback({obj:t,name:i,lang:n}),!0):(t=t.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:t,name:i,lang:n}),t.nodeValue=i)},_load_css:function(){var i,n=this._get_settings().languages,o="/* languages css */",s=".jstree-"+this.get_index()+" a";if(e.isArray(n)&&n.length){for(this.data.languages.current_language=n[0],i=0;i<n.length;i++)o+=s+"."+n[i]+" {",n[i]!=this.data.languages.current_language&&(o+=" display:none; "),o+=" } ";t=e.vakata.css.add_sheet({str:o,title:"jstree-languages"})}},create_node:function(t,i,n,o){var s=this.__call_old(!0,t,i,n,function(t){var i,n=this._get_settings().languages,s=t.children("a");if(e.isArray(n)&&n.length){for(i=0;i<n.length;i++)s.is("."+n[i])||t.append(s.eq(0).clone().removeClass(n.join(" ")).addClass(n[i]));s.not("."+n.join(", .")).remove()}o&&o.call(this,t)});return s}}})}(jQuery),function(e){e.jstree.plugin("cookies",{__init:function(){if("undefined"==typeof e.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var t,i=this._get_settings().cookies;i.save_loaded&&(t=e.cookie(i.save_loaded),t&&t.length&&(this.data.core.to_load=t.split(","))),i.save_opened&&(t=e.cookie(i.save_opened),t&&t.length&&(this.data.core.to_open=t.split(","))),i.save_selected&&(t=e.cookie(i.save_selected),t&&t.length&&this.data.ui&&(this.data.ui.to_select=t.split(","))),this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",e.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",e.proxy(function(e){this._get_settings().cookies.auto_save&&this.save_cookie((e.handleObj.namespace+e.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(t){if(!this.data.core.refreshing){var i=this._get_settings().cookies;if(!t)return i.save_loaded&&(this.save_loaded(),e.cookie(i.save_loaded,this.data.core.to_load.join(","),i.cookie_options)),i.save_opened&&(this.save_opened(),e.cookie(i.save_opened,this.data.core.to_open.join(","),i.cookie_options)),i.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(i.save_selected,this.data.ui.to_select.join(","),i.cookie_options)),void 0;switch(t){case"open_node":case"close_node":i.save_opened&&(this.save_opened(),e.cookie(i.save_opened,this.data.core.to_open.join(","),i.cookie_options)),i.save_loaded&&(this.save_loaded(),e.cookie(i.save_loaded,this.data.core.to_load.join(","),i.cookie_options));break;case"select_node":case"deselect_node":i.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(i.save_selected,this.data.ui.to_select.join(","),i.cookie_options))}}}}})}(jQuery),function(e){e.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",e.proxy(function(e,t){var i=this._get_node(t.rslt.obj);i=-1===i?this.get_container().children("ul"):i.children("ul"),this.sort(i)},this)).bind("rename_node.jstree create_node.jstree create.jstree",e.proxy(function(e,t){this.sort(t.rslt.obj.parent())},this)).bind("move_node.jstree",e.proxy(function(e,t){var i=-1==t.rslt.np?this.get_container():t.rslt.np;this.sort(i.children("ul"))},this))},defaults:function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},_fn:{sort:function(t){var i=this._get_settings().sort,n=this;t.append(e.makeArray(t.children("li")).sort(e.proxy(i,n))),t.find("> li > ul").each(function(){n.sort(e(this))}),this.clean_node(t)}}})}(jQuery),function(e){var t=!1,i=!1,n=!1,o=!1,s=!1,r=!1,a=!1,l=!1,c=!1;e.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(t,i,n){e.vakata.dnd.is_drag&&e.vakata.drag_stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.MozUserSelect="none")}catch(o){}return e.vakata.dnd.init_x=t.pageX,e.vakata.dnd.init_y=t.pageY,e.vakata.dnd.user_data=i,e.vakata.dnd.is_down=!0,e.vakata.dnd.helper=e("<div id='vakata-dragged' />").html(n),e(document).bind("mousemove",e.vakata.dnd.drag),e(document).bind("mouseup",e.vakata.dnd.drag_stop),!1},drag:function(t){if(e.vakata.dnd.is_down){if(!e.vakata.dnd.is_drag){if(!(Math.abs(t.pageX-e.vakata.dnd.init_x)>5||Math.abs(t.pageY-e.vakata.dnd.init_y)>5))return;e.vakata.dnd.helper.appendTo("body"),e.vakata.dnd.is_drag=!0,e(document).triggerHandler("drag_start.vakata",{event:t,data:e.vakata.dnd.user_data})}if("mousemove"===t.type){var i=e(document),n=i.scrollTop(),o=i.scrollLeft();t.pageY-n<20?(r&&"down"===a&&(clearInterval(r),r=!1),r||(a="up",r=setInterval(function(){e(document).scrollTop(e(document).scrollTop()-e.vakata.dnd.scroll_spd)},150))):r&&"up"===a&&(clearInterval(r),r=!1),e(window).height()-(t.pageY-n)<20?(r&&"up"===a&&(clearInterval(r),r=!1),r||(a="down",r=setInterval(function(){e(document).scrollTop(e(document).scrollTop()+e.vakata.dnd.scroll_spd)},150))):r&&"down"===a&&(clearInterval(r),r=!1),t.pageX-o<20?(s&&"right"===l&&(clearInterval(s),s=!1),s||(l="left",s=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()-e.vakata.dnd.scroll_spd)},150))):s&&"left"===l&&(clearInterval(s),s=!1),e(window).width()-(t.pageX-o)<20?(s&&"left"===l&&(clearInterval(s),s=!1),s||(l="right",s=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()+e.vakata.dnd.scroll_spd)},150))):s&&"right"===l&&(clearInterval(s),s=!1)}e.vakata.dnd.helper.css({left:t.pageX+e.vakata.dnd.helper_left+"px",top:t.pageY+e.vakata.dnd.helper_top+"px"}),e(document).triggerHandler("drag.vakata",{event:t,data:e.vakata.dnd.user_data})}},drag_stop:function(t){s&&clearInterval(s),r&&clearInterval(r),e(document).unbind("mousemove",e.vakata.dnd.drag),e(document).unbind("mouseup",e.vakata.dnd.drag_stop),e(document).triggerHandler("drag_stop.vakata",{event:t,data:e.vakata.dnd.user_data}),e.vakata.dnd.helper.remove(),e.vakata.dnd.init_x=0,e.vakata.dnd.init_y=0,e.vakata.dnd.user_data={},e.vakata.dnd.is_down=!1,e.vakata.dnd.is_drag=!1}},e(function(){var t="#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ";e.vakata.css.add_sheet({str:t,title:"vakata"})}),e.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1},this.get_container().bind("mouseenter.jstree",e.proxy(function(i){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(this.data.themes&&(n.attr("class","jstree-"+this.data.themes.theme),o&&o.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),i.currentTarget===i.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==i.target)){var s,r=e.jstree._reference(i.target);r.data.dnd.foreign?(s=r._get_settings().dnd.drag_check.call(this,{o:t,r:r.get_container(),is_root:!0}),(s===!0||s.inside===!0||s.before===!0||s.after===!0)&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(r.prepare_move(t,r.get_container(),"last"),r.check_move()&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"))}},this)).bind("mouseup.jstree",e.proxy(function(i){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&i.currentTarget===i.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==i.target){var n,o=e.jstree._reference(i.currentTarget);o.data.dnd.foreign?(n=o._get_settings().dnd.drag_check.call(this,{o:t,r:o.get_container(),is_root:!0}),(n===!0||n.inside===!0||n.before===!0||n.after===!0)&&o._get_settings().dnd.drag_finish.call(this,{o:t,r:o.get_container(),is_root:!0})):o.move_node(t,o.get_container(),"last",i[o._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",e.proxy(function(t){return t.relatedTarget&&t.relatedTarget.id&&"jstree-marker-line"===t.relatedTarget.id?!1:(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")),void 0)},this)).bind("mousemove.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){var i=this.get_container()[0];t.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft+=e.vakata.dnd.scroll_spd},i),100)):t.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft-=e.vakata.dnd.scroll_spd},i),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1),t.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop+=e.vakata.dnd.scroll_spd},i),100)):t.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop-=e.vakata.dnd.scroll_spd},i),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",e.proxy(function(){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&n&&o&&(n.hide(),o.hide())},this)).delegate("a","mousedown.jstree",e.proxy(function(e){return 1===e.which?(this.start_drag(e.currentTarget,e),!1):void 0},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_enter(t.currentTarget)},this)).delegate("a","mousemove.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(i&&i.length&&i.children("a")[0]===t.currentTarget||this.dnd_enter(t.currentTarget),"undefined"==typeof this.data.dnd.off.top&&(this.data.dnd.off=e(t.target).offset()),this.data.dnd.w=(t.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,this.data.dnd.w<0&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(t.relatedTarget&&t.relatedTarget.id&&"jstree-marker-line"===t.relatedTarget.id)return!1;n&&n.hide(),o&&o.hide(),this.data.dnd.mto=setTimeout(function(e){return function(){e.dnd_leave(t)}}(this),0)}},this)).delegate("a","mouseup.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_finish(t)},this)),e(document).bind("drag_stop.vakata",e.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,this.data.dnd.off=!1,this.data.dnd.prepared=!1,this.data.dnd.w=!1,this.data.dnd.to1=!1,this.data.dnd.to2=!1,this.data.dnd.i1=!1,this.data.dnd.i2=!1,this.data.dnd.active=!1,this.data.dnd.foreign=!1,n&&n.css({top:"-2000px"}),o&&o.css({top:"-2000px"})},this)).bind("drag_start.vakata",e.proxy(function(t,i){if(i.data.jstree){var n=e(i.event.target);n.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(n)}},this));var s=this._get_settings().dnd;s.drag_target&&e(document).delegate(s.drag_target,"mousedown.jstree-"+this.get_index(),e.proxy(function(i){t=i.target,e.vakata.dnd.drag_start(i,{jstree:!0,obj:i.target},"<ins class='jstree-icon'></ins>"+e(i.target).text()),this.data.themes&&(n&&n.attr("class","jstree-"+this.data.themes.theme),o&&o.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var s=this.get_container();this.data.dnd.cof=s.offset(),this.data.dnd.cw=parseInt(s.width(),10),this.data.dnd.ch=parseInt(s.height(),10),this.data.dnd.foreign=!0,i.preventDefault()},this)),s.drop_target&&e(document).delegate(s.drop_target,"mouseenter.jstree-"+this.get_index(),e.proxy(function(i){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:t,r:e(i.target),e:i})&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(s.drop_target,"mouseleave.jstree-"+this.get_index(),e.proxy(function(){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(s.drop_target,"mouseup.jstree-"+this.get_index(),e.proxy(function(i){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:t,r:e(i.target),e:i})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(){return!0},drop_finish:e.noop,drag_target:".jstree-draggable",drag_finish:e.noop,drag_check:function(){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(i&&i.length){if(this.data.dnd.off=i.offset(),this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+i.width()),this.data.dnd.foreign){var e=this._get_settings().dnd.drag_check.call(this,{o:t,r:i});return this.data.dnd.after=e.after,this.data.dnd.before=e.before,this.data.dnd.inside=e.inside,this.data.dnd.prepared=!0,this.dnd_show()}return this.prepare_move(t,i,"before"),this.data.dnd.before=this.check_move(),this.prepare_move(t,i,"after"),this.data.dnd.after=this.check_move(),this._is_loaded(i)?(this.prepare_move(t,i,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1,this.data.dnd.prepared=!0,this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var t,i=["before","inside","after"],s=!1,r=this._get_settings().core.rtl;switch(i=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"],e.each(i,e.proxy(function(t,i){return this.data.dnd[i]?(e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),s=i,!1):void 0},this)),s===!1&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),t=r?this.data.dnd.off.right-18:this.data.dnd.off.left+10,s){case"before":n.css({left:t+"px",top:this.data.dnd.off.top-6+"px"}).show(),o&&o.css({left:t+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case"after":n.css({left:t+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show(),o&&o.css({left:t+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case"inside":n.css({left:t+(r?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show(),o&&o.hide();break;default:n.hide(),o&&o.hide()}return c=s,s}},dnd_open:function(){this.data.dnd.to2=!1,this.open_node(i,e.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(e){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:t,r:i,p:c}):(this.dnd_prepare(),this.move_node(t,i,c,e[this._get_settings().dnd.copy_modifier+"Key"])),t=!1,i=!1,n.hide(),o&&o.hide()},dnd_enter:function(t){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var n=this._get_settings().dnd;this.data.dnd.prepared=!1,i=this._get_node(t),n.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(e.proxy(this.dnd_prepare,this),n.check_timeout)):this.dnd_prepare(),n.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),i&&i.length&&i.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(e.proxy(this.dnd_open,this),n.open_timeout))):i&&i.length&&i.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(t){this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),n.hide(),o&&o.hide(),i&&i[0]===t.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(i,s){t=this._get_node(i),this.data.ui&&this.is_selected(t)&&(t=this._get_node(null,!0));var r=t.length>1?this._get_string("multiple_selection"):this.get_text(t),a=this.get_container();this._get_settings().core.html_titles||(r=r.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")),e.vakata.dnd.drag_start(s,{jstree:!0,obj:t},"<ins class='jstree-icon'></ins>"+r),this.data.themes&&(n&&n.attr("class","jstree-"+this.data.themes.theme),o&&o.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),this.data.dnd.cof=a.offset(),this.data.dnd.cw=parseInt(a.width(),10),this.data.dnd.ch=parseInt(a.height(),10),this.data.dnd.active=!0}}}),e(function(){var t="#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }";
e.vakata.css.add_sheet({str:t,title:"jstree"}),n=e("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(e){return n.hide(),o.hide(),e.preventDefault(),e.stopImmediatePropagation(),!1}).appendTo("body"),o=e("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(e){return i&&i.length?(i.children("a").trigger(e),e.preventDefault(),e.stopImmediatePropagation(),!1):void 0}).bind("mouseleave",function(t){var s=e(t.relatedTarget);return(s.is(".jstree")||0===s.closest(".jstree").length)&&i&&i.length?(i.children("a").trigger(t),n.hide(),o.hide(),t.preventDefault(),t.stopImmediatePropagation(),!1):void 0}).appendTo("body"),e(document).bind("drag_start.vakata",function(e,t){t.data.jstree&&(n.show(),o&&o.show())}),e(document).bind("drag_stop.vakata",function(e,t){t.data.jstree&&(n.hide(),o&&o.hide())})})}(jQuery),function(e){e.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui,this.data.ui&&this.data.checkbox.noui&&(this.select_node=this.deselect_node=this.deselect_all=e.noop,this.get_selected=this.get_checked),this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",e.proxy(function(e,t){this._prepare_checkboxes(t.rslt.obj)},this)).bind("loaded.jstree",e.proxy(function(){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",e.proxy(function(e){return e.preventDefault(),this._get_node(e.target).hasClass("jstree-checked")?this.uncheck_node(e.target):this.check_node(e.target),this.data.ui&&this.data.checkbox.noui?(this.save_selected(),this.data.cookies&&this.save_cookie("select_node"),void 0):(e.stopImmediatePropagation(),!1)},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(e){return["check_"+(e[0].id||Math.ceil(1e4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(e,t){t.checked&&this.check_node(e,!1)},_prepare_checkboxes:function(t){if(t=t&&-1!=t?this._get_node(t):this.get_container().find("> ul > li"),t!==!1){var i,n,o=this,s=this._get_settings().checkbox.two_state,r=this._get_settings().checkbox.real_checkboxes,a=this._get_settings().checkbox.real_checkboxes_names;t.each(function(){n=e(this),i=n.is("li")&&(n.hasClass("jstree-checked")||r&&n.children(":checked").length)?"jstree-checked":"jstree-unchecked",n.find("li").addBack().each(function(){var t,n=e(this);n.children("a"+(o.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(s?"jstree-unchecked":i),r&&(n.children(":checkbox").length?n.children(":checkbox").addClass("jstree-real-checkbox"):(t=a.call(o,n),n.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+t[0]+"' name='"+t[0]+"' value='"+t[1]+"' />"))),s?(n.hasClass("jstree-checked")||n.children(":checked").length)&&n.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===i||n.hasClass("jstree-checked")||n.children(":checked").length)&&n.find("li").addBack().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})}),s||t.find(".jstree-checked").parent().parent().each(function(){o._repair_state(this)})}},change_state:function(t,i){t=this._get_node(t);var n=!1,o=this._get_settings().checkbox.real_checkboxes;if(!t||-1===t)return!1;if(i=i===!1||i===!0?i:t.hasClass("jstree-checked"),this._get_settings().checkbox.two_state)i?(t.removeClass("jstree-checked").addClass("jstree-unchecked"),o&&t.children(":checkbox").prop("checked",!1)):(t.removeClass("jstree-unchecked").addClass("jstree-checked"),o&&t.children(":checkbox").prop("checked",!0));else{if(i){if(n=t.find("li").addBack(),!n.filter(".jstree-checked, .jstree-undetermined").length)return!1;n.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),o&&n.children(":checkbox").prop("checked",!1)}else{if(n=t.find("li").addBack(),!n.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;n.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),o&&n.children(":checkbox").prop("checked",!0),this.data.ui&&(this.data.ui.last_selected=t),this.data.checkbox.last_selected=t}t.parentsUntil(".jstree","li").each(function(){var t=e(this);if(i){if(t.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),o&&t.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),o&&t.children(":checkbox").prop("checked",!1)}else{if(t.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),o&&t.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),o&&t.children(":checkbox").prop("checked",!0)}})}return this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked()),this.__callback(t),!0},check_node:function(e){if(this.change_state(e,!1)){if(e=this._get_node(e),this._get_settings().checkbox.checked_parent_open){var t=this;e.parents(".jstree-closed").each(function(){t.open_node(this,!1,!0)})}this.__callback({obj:e})}},uncheck_node:function(e){this.change_state(e,!0)&&this.__callback({obj:this._get_node(e)})},check_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,!1)}),this.__callback()},uncheck_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,!0)}),this.__callback()},is_checked:function(e){return e=this._get_node(e),e.length?e.is(".jstree-checked"):!1},get_checked:function(e,t){return e=e&&-1!==e?this._get_node(e):this.get_container(),t||this._get_settings().checkbox.two_state?e.find(".jstree-checked"):e.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(e,t){return e=e&&-1!==e?this._get_node(e):this.get_container(),t||this._get_settings().checkbox.two_state?e.find(".jstree-unchecked"):e.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(e){if(e=this._get_node(e),e.length){if(this._get_settings().checkbox.two_state)return e.find("li").addBack().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0),void 0;var t=this._get_settings().checkbox.real_checkboxes,i=e.find("> ul > .jstree-checked").length,n=e.find("> ul > .jstree-undetermined").length,o=e.find("> ul > li").length;0===o?e.hasClass("jstree-undetermined")&&this.change_state(e,!1):0===i&&0===n?this.change_state(e,!0):i===o?this.change_state(e,!1):(e.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),t&&e.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var t=this,i=this.data.ui.to_select;i=e.map(e.makeArray(i),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.deselect_all(),e.each(i,function(e,i){t.check_node(i)}),this.__callback()}else this.__call_old()},save_loaded:function(){var e=this;this.data.core.to_load=[],this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&e.data.core.to_load.push("#"+this.id)})}}}),e(function(){var t=".jstree .jstree-real-checkbox { display:none; } ";e.vakata.css.add_sheet({str:t,title:"jstree"})})}(jQuery),function(e){e.vakata.xslt=function(t,i,n){var o,s,r,a=!1;if(a===!1&&window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XSLTemplate"),s=new ActiveXObject("Msxml2.DOMDocument"),s.loadXML(t),r=new ActiveXObject("Msxml2.FreeThreadedDOMDocument"),r.loadXML(i),a.stylesheet=r,o=a.createProcessor(),o.input=s,o.transform(),a=o.output}catch(l){}t=e.parseXML(t),i=e.parseXML(i),a===!1&&"undefined"!=typeof XSLTProcessor&&(o=new XSLTProcessor,o.importStylesheet(i),a=o.transformToFragment(t,document),a=e("<div />").append(a).html()),a===!1&&"undefined"!=typeof t.transformNode&&(a=t.transformNode(i)),n.call(null,a)};var t={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">	<xsl:call-template name="nodes">		<xsl:with-param name="node" select="/root" />	</xsl:call-template></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<ul>	<xsl:for-each select="$node/item">		<xsl:variable name="children" select="count(./item) &gt; 0" />		<li>			<xsl:attribute name="class">				<xsl:if test="position() = last()">jstree-last </xsl:if>				<xsl:choose>					<xsl:when test="@state = \'open\'">jstree-open </xsl:when>					<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>					<xsl:otherwise>jstree-leaf </xsl:otherwise>				</xsl:choose>				<xsl:value-of select="@class" />			</xsl:attribute>			<xsl:for-each select="@*">				<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">					<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>				</xsl:if>			</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>			<xsl:for-each select="content/name">				<a>				<xsl:attribute name="href">					<xsl:choose>					<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>					<xsl:otherwise>#</xsl:otherwise>					</xsl:choose>				</xsl:attribute>				<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>				<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>				<xsl:for-each select="@*">					<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">						<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>					</xsl:if>				</xsl:for-each>					<ins>						<xsl:attribute name="class">jstree-icon 							<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>						</xsl:attribute>						<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>						<xsl:text>&#xa0;</xsl:text>					</ins>					<xsl:copy-of select="./child::node()" />				</a>			</xsl:for-each>			<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>		</li>	</xsl:for-each>	</ul></xsl:template></xsl:stylesheet>',flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">	<ul>	<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">		<xsl:call-template name="nodes">			<xsl:with-param name="node" select="." />			<xsl:with-param name="is_last" select="number(position() = last())" />		</xsl:call-template>	</xsl:for-each>	</ul></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<xsl:param name="is_last" />	<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />	<li>	<xsl:attribute name="class">		<xsl:if test="$is_last = true()">jstree-last </xsl:if>		<xsl:choose>			<xsl:when test="@state = \'open\'">jstree-open </xsl:when>			<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>			<xsl:otherwise>jstree-leaf </xsl:otherwise>		</xsl:choose>		<xsl:value-of select="@class" />	</xsl:attribute>	<xsl:for-each select="@*">		<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">		<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>		</xsl:if>	</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>	<xsl:for-each select="content/name">		<a>		<xsl:attribute name="href">			<xsl:choose>			<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>			<xsl:otherwise>#</xsl:otherwise>			</xsl:choose>		</xsl:attribute>		<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>		<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>		<xsl:for-each select="@*">			<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">				<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>			</xsl:if>		</xsl:for-each>			<ins>				<xsl:attribute name="class">jstree-icon 					<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>				</xsl:attribute>				<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>				<xsl:text>&#xa0;</xsl:text>			</ins>			<xsl:copy-of select="./child::node()" />		</a>	</xsl:for-each>	<xsl:if test="$children">		<ul>		<xsl:for-each select="//item[@parent_id=$node/attribute::id]">			<xsl:call-template name="nodes">				<xsl:with-param name="node" select="." />				<xsl:with-param name="is_last" select="number(position() = last())" />			</xsl:call-template>		</xsl:for-each>		</ul>	</xsl:if>	</li></xsl:template></xsl:stylesheet>'},i=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};e.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(e,t,i){var n=this;this.load_node_xml(e,function(){n.__callback({obj:n._get_node(e)}),t.call(this)},i)},_is_loaded:function(t){var i=this._get_settings().xml_data;return t=this._get_node(t),-1==t||!t||!i.ajax&&!e.isFunction(i.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_xml:function(t,i,n){var o=this.get_settings().xml_data,s=function(){},r=function(){};if(t=this._get_node(t),t&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!o.data&&!o.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(o.data):o.data.call(this,t,e.proxy(function(n){this.parse_xml(n,e.proxy(function(n){n&&(n=n.replace(/ ?xmlns="[^"]*"/gi,""),n.length>10?(n=e(n),-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(n),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()),o.clean_node&&this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),o.correct_state&&(this.correct_state(t),i&&i.call(this))):o.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)))},this))},this));break;case!!o.data&&!o.ajax||!!o.data&&!!o.ajax&&(!t||-1===t):t&&-1!=t||this.parse_xml(o.data,e.proxy(function(n){n?(n=n.replace(/ ?xmlns="[^"]*"/gi,""),n.length>10&&(n=e(n),this.get_container().children("ul").empty().append(n.children()),o.clean_node&&this.clean_node(t),i&&i.call(this))):o.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))},this));break;case!o.data&&!!o.ajax||!!o.data&&!!o.ajax&&t&&-1!==t:s=function(e,i,s){var r=this.get_settings().xml_data.ajax.error;r&&r.call(this,e,i,s),-1!==t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&o.correct_state&&this.correct_state(t)):"success"===i&&o.correct_state&&this.get_container().children("ul").empty(),n&&n.call(this)},r=function(n,r,a){n=a.responseText;var l=this.get_settings().xml_data.ajax.success;return l&&(n=l.call(this,n,r,a)||n),""===n||n&&n.toString&&""===n.toString().replace(/^[\s\n]+$/,"")?s.call(this,a,r,""):(this.parse_xml(n,e.proxy(function(n){n&&(n=n.replace(/ ?xmlns="[^"]*"/gi,""),n.length>10?(n=e(n),-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(n),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()),o.clean_node&&this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),o.correct_state&&(this.correct_state(t),i&&i.call(this))):o.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)))},this)),void 0)},o.ajax.context=this,o.ajax.error=s,o.ajax.success=r,o.ajax.dataType||(o.ajax.dataType="xml"),e.isFunction(o.ajax.url)&&(o.ajax.url=o.ajax.url.call(this,t)),e.isFunction(o.ajax.data)&&(o.ajax.data=o.ajax.data.call(this,t)),e.ajax(o.ajax)}},parse_xml:function(i,n){var o=this._get_settings().xml_data;e.vakata.xslt(i,t[o.xsl],n)},get_xml:function(t,n,o,s,r){var a,l,c,d,h,u="",p=this._get_settings(),f=this;return t||(t="flat"),r||(r=0),n=this._get_node(n),n&&-1!==n||(n=this.get_container().find("> ul > li")),o=e.isArray(o)?o:["id","class"],!r&&this.data.types&&-1===e.inArray(p.types.type_attr,o)&&o.push(p.types.type_attr),s=e.isArray(s)?s:[],r||(p.xml_data.get_include_preamble&&(u+='<?xml version="1.0" encoding="UTF-8"?>'),u+="<root>"),n.each(function(){u+="<item",c=e(this),e.each(o,function(e,t){var n=c.attr(t);p.xml_data.get_skip_empty&&"undefined"==typeof n||(u+=" "+t+'="'+i((" "+(n||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),c.hasClass("jstree-open")&&(u+=' state="open"'),c.hasClass("jstree-closed")&&(u+=' state="closed"'),"flat"===t&&(u+=' parent_id="'+i(r)+'"'),u+=">",u+="<content>",d=c.children("a"),d.each(function(){a=e(this),h=!1,u+="<name",-1!==e.inArray("languages",p.plugins)&&e.each(p.languages,function(e,t){return a.hasClass(t)?(u+=' lang="'+i(t)+'"',h=t,!1):void 0}),s.length&&e.each(s,function(e,t){var n=a.attr(t);p.xml_data.get_skip_empty&&"undefined"==typeof n||(u+=" "+t+'="'+i((" "+n||"").replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),a.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(u+=' icon="'+i(a.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"'),a.children("ins").get(0).style.backgroundImage.length&&(u+=' icon="'+i(a.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/gi,"").replace(/"/gi,""))+'"'),u+=">",u+="<![CDATA["+f.get_text(a,h)+"]]>",u+="</name>"}),u+="</content>",l=c[0].id||!0,c=c.find("> ul > li"),l=c.length?f.get_xml(t,c,o,s,l):"","nest"==t&&(u+=l),u+="</item>","flat"==t&&(u+=l)}),r||(u+="</root>"),u}}})}(jQuery),function(e){e().jquery.split(".")[1]>=8?(e.expr[":"].jstree_contains=e.expr.createPseudo(function(e){return function(t){return(t.textContent||t.innerText||"").toLowerCase().indexOf(e.toLowerCase())>=0}}),e.expr[":"].jstree_title_contains=e.expr.createPseudo(function(e){return function(t){return(t.getAttribute("title")||"").toLowerCase().indexOf(e.toLowerCase())>=0}})):(e.expr[":"].jstree_contains=function(e,t,i){return(e.textContent||e.innerText||"").toLowerCase().indexOf(i[3].toLowerCase())>=0},e.expr[":"].jstree_title_contains=function(e,t,i){return(e.getAttribute("title")||"").toLowerCase().indexOf(i[3].toLowerCase())>=0}),e.jstree.plugin("search",{__init:function(){this.data.search.str="",this.data.search.result=e(),this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(t,i){e(this).children("ul").find("li").hide().removeClass("jstree-last"),i.rslt.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){e(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){e(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(t,i){if(""===e.trim(t))return this.clear_search(),void 0;var n=this.get_settings().search,o=this,s=function(){},r=function(){};return this.data.search.str=t,!i&&n.ajax!==!1&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0?(this.search.supress_callback=!0,s=function(){},r=function(e,t,i){var n=this.get_settings().search.ajax.success;n&&(e=n.call(this,e,t,i)||e),this.data.search.to_open=e,this._search_open()},n.ajax.context=this,n.ajax.error=s,n.ajax.success=r,e.isFunction(n.ajax.url)&&(n.ajax.url=n.ajax.url.call(this,t)),e.isFunction(n.ajax.data)&&(n.ajax.data=n.ajax.data.call(this,t)),n.ajax.data||(n.ajax.data={search_string:t}),(!n.ajax.dataType||/^json/.exec(n.ajax.dataType))&&(n.ajax.dataType="json"),e.ajax(n.ajax),void 0):(this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+n.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){o.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,str:t}),void 0)},clear_search:function(){this.data.search.result.removeClass("jstree-search"),this.__callback(this.data.search.result),this.data.search.result=e()},_search_open:function(){var t=this,i=!0,n=[],o=[];this.data.search.to_open.length&&(e.each(this.data.search.to_open,function(t,i){return"#"==i?!0:(e(i).length&&e(i).is(".jstree-closed")?n.push(i):o.push(i),void 0)}),n.length&&(this.data.search.to_open=o,e.each(n,function(e,i){t.open_node(i,function(){t._search_open(!0)})}),i=!1)),i&&this.search(this.data.search.str,!0)}}})}(jQuery),function(e){e.vakata.context={hide_on_mouseleave:!1,cnt:e("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(t,i,n,o,s,r,a){e.vakata.context.rtl=!!a;var l,c,d=e.vakata.context.parse(t);d&&(e.vakata.context.vis=!0,e.vakata.context.tgt=i,e.vakata.context.par=r||i||null,e.vakata.context.data=s||null,e.vakata.context.cnt.html(d).css({visibility:"hidden",display:"block",left:0,top:0}),e.vakata.context.hide_on_mouseleave&&e.vakata.context.cnt.one("mouseleave",function(){e.vakata.context.hide()}),l=e.vakata.context.cnt.height(),c=e.vakata.context.cnt.width(),n+c>e(document).width()&&(n=e(document).width()-(c+5),e.vakata.context.cnt.find("li > ul").addClass("right")),o+l>e(document).height()&&(o-=l+i[0].offsetHeight,e.vakata.context.cnt.find("li > ul").addClass("bottom")),e.vakata.context.cnt.css({left:n,top:o}).find("li:has(ul)").bind("mouseenter",function(){var t=e(document).width(),i=e(document).height(),n=e(this).children("ul").show();t!==e(document).width()&&n.toggleClass("right"),i!==e(document).height()&&n.toggleClass("bottom")}).bind("mouseleave",function(){e(this).children("ul").hide()}).end().css({visibility:"visible"}).show(),e(document).triggerHandler("context_show.vakata"))},hide:function(){e.vakata.context.vis=!1,e.vakata.context.cnt.attr("class","").css({visibility:"hidden"}),e(document).triggerHandler("context_hide.vakata")},parse:function(t,i){if(!t)return!1;var n="",o=!1,s=!0;return i||(e.vakata.context.func={}),n+="<ul>",e.each(t,function(t,i){return i?(e.vakata.context.func[t]=i.action,!s&&i.separator_before&&(n+="<li class='vakata-separator vakata-separator-before'></li>"),s=!1,n+="<li class='"+(i._class||"")+(i._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ",i.icon&&-1===i.icon.indexOf("/")&&(n+=" class='"+i.icon+"' "),i.icon&&-1!==i.icon.indexOf("/")&&(n+=" style='background:url("+i.icon+") center center no-repeat;' "),n+=">&#160;</ins><a href='#' rel='"+t+"'>",i.submenu&&(n+="<span style='float:"+(e.vakata.context.rtl?"left":"right")+";'>&raquo;</span>"),n+=i.label+"</a>",i.submenu&&(o=e.vakata.context.parse(i.submenu,!0),o&&(n+=o)),n+="</li>",i.separator_after&&(n+="<li class='vakata-separator vakata-separator-after'></li>",s=!0),void 0):!0}),n=n.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,""),n+="</ul>",e(document).triggerHandler("context_parse.vakata"),n.length>10?n:!1},exec:function(t){return e.isFunction(e.vakata.context.func[t])?(e.vakata.context.func[t].call(e.vakata.context.data,e.vakata.context.par),!0):!1}},e(function(){var t="#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ";e.vakata.css.add_sheet({str:t,title:"vakata"}),e.vakata.context.cnt.delegate("a","click",function(e){e.preventDefault()}).delegate("a","mouseup",function(){!e(this).parent().hasClass("jstree-contextmenu-disabled")&&e.vakata.context.exec(e(this).attr("rel"))?e.vakata.context.hide():e(this).blur()}).delegate("a","mouseover",function(){e.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body"),e(document).bind("mousedown",function(t){e.vakata.context.vis&&!e.contains(e.vakata.context.cnt[0],t.target)&&e.vakata.context.hide()}),"undefined"!=typeof e.hotkeys&&e(document).bind("keydown","up",function(t){if(e.vakata.context.vis){var i=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();i.length||(i=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last()),i.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}}).bind("keydown","down",function(t){if(e.vakata.context.vis){var i=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();i.length||(i=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first()),i.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}}).bind("keydown","right",function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())}).bind("keydown","left",function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())}).bind("keydown","esc",function(t){e.vakata.context.hide(),t.preventDefault()}).bind("keydown","space",function(t){e.vakata.context.cnt.find(".vakata-hover").last().children("a").click(),t.preventDefault()})}),e.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",e.proxy(function(t){t.preventDefault(),e(t.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(t.currentTarget,t.pageX,t.pageY)},this)).delegate("a","click.jstree",e.proxy(function(){this.data.contextmenu&&e.vakata.context.hide()},this)).bind("destroy.jstree",e.proxy(function(){this.data.contextmenu&&e.vakata.context.hide()},this)),e(document).bind("context_hide.vakata",e.proxy(function(){this.data.contextmenu=!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(e){this.create(e)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(e){this.rename(e)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(e){this.is_selected(e)?this.remove():this.remove(e)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){this.cut(e)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){this.copy(e)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(e){this.paste(e)}}}}}},_fn:{show_contextmenu:function(t,i,n){t=this._get_node(t);var o=this.get_settings().contextmenu,s=t.children("a:visible:eq(0)"),r=!1,a=!1;o.select_node&&this.data.ui&&!this.is_selected(t)&&(this.deselect_all(),this.select_node(t,!0)),(o.show_at_node||"undefined"==typeof i||"undefined"==typeof n)&&(r=s.offset(),i=r.left,n=r.top+this.data.core.li_height),a=t.data("jstree")&&t.data("jstree").contextmenu?t.data("jstree").contextmenu:o.items,e.isFunction(a)&&(a=a.call(this,t)),this.data.contextmenu=!0,e.vakata.context.show(a,s,i,n,this,t,this._get_settings().core.rtl),this.data.themes&&e.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})}(jQuery),function(t){t.jstree.plugin("types",{__init:function(){var i=this._get_settings().types;this.data.types.attach_to=[],this.get_container().bind("init.jstree",t.proxy(function(){var e=i.types,n=i.type_attr,o="",s=this;t.each(e,function(e,i){return t.each(i,function(e){/^(max_depth|max_children|icon|valid_children)$/.test(e)||s.data.types.attach_to.push(e)}),i.icon?((i.icon.image||i.icon.position)&&(o+="default"==e?".jstree-"+s.get_index()+" a > .jstree-icon { ":".jstree-"+s.get_index()+" li["+n+'="'+e+'"] > a > .jstree-icon { ',i.icon.image&&(o+=" background-image:url("+i.icon.image+"); "),o+=i.icon.position?" background-position:"+i.icon.position+"; ":" background-position:0 0; ",o+="} "),void 0):!0}),""!==o&&t.vakata.css.add_sheet({str:o,title:"jstree-types"})},this)).bind("before.jstree",t.proxy(function(e,i){var n,o,s=this._get_settings().types.use_data?this._get_node(i.args[0]):!1,r=s&&-1!==s&&s.length?s.data("jstree"):!1;if(r&&r.types&&r.types[i.func]===!1)return e.stopImmediatePropagation(),!1;if(-1!==t.inArray(i.func,this.data.types.attach_to)){if(!i.args[0]||!i.args[0].tagName&&!i.args[0].jquery)return;
if(n=this._get_settings().types.types,o=this._get_type(i.args[0]),(n[o]&&"undefined"!=typeof n[o][i.func]||n["default"]&&"undefined"!=typeof n["default"][i.func])&&this._check(i.func,i.args[0])===!1)return e.stopImmediatePropagation(),!1}},this)),e&&this.get_container().bind("load_node.jstree set_type.jstree",t.proxy(function(e,i){var n=i&&i.rslt&&i.rslt.obj&&-1!==i.rslt.obj?this._get_node(i.rslt.obj).parent():this.get_container_ul(),o=!1,s=this._get_settings().types;t.each(s.types,function(e,t){t.icon&&(t.icon.image||t.icon.position)&&(o="default"===e?n.find("li > a > .jstree-icon"):n.find("li["+s.type_attr+"='"+e+"'] > a > .jstree-icon"),t.icon.image&&o.css("backgroundImage","url("+t.icon.image+")"),o.css("backgroundPosition",t.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(e,t){t.type&&this._get_settings().types.use_data&&this.set_type(t.type,e)},_get_type:function(e){return e=this._get_node(e),e&&e.length?e.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(e,t){t=this._get_node(t);var i=t.length&&e?t.attr(this._get_settings().types.type_attr,e):!1;return i&&this.__callback({obj:t,type:e}),i},_check:function(e,i,n){i=this._get_node(i);var o=!1,s=this._get_type(i),r=0,a=this,l=this._get_settings().types,c=!1;if(-1===i){if(!l[e])return;o=l[e]}else{if(s===!1)return;c=l.use_data?i.data("jstree"):!1,c&&c.types&&"undefined"!=typeof c.types[e]?o=c.types[e]:l.types[s]&&"undefined"!=typeof l.types[s][e]?o=l.types[s][e]:l.types["default"]&&"undefined"!=typeof l.types["default"][e]&&(o=l.types["default"][e])}return t.isFunction(o)&&(o=o.call(this,i)),"max_depth"===e&&-1!==i&&n!==!1&&-2!==l.max_depth&&0!==o&&i.children("a:eq(0)").parentsUntil(".jstree","li").each(function(t){return-1!==l.max_depth&&l.max_depth-(t+1)<=0?(o=0,!1):(r=0===t?o:a._check(e,this,!1),-1!==r&&0>=r-(t+1)?(o=0,!1):(r>=0&&(o>r-(t+1)||0>o)&&(o=r-(t+1)),l.max_depth>=0&&(l.max_depth-(t+1)<o||0>o)&&(o=l.max_depth-(t+1)),void 0))}),o},check_move:function(){if(!this.__call_old())return!1;var e,i=this._get_move(),n=i.rt._get_settings().types,o=i.rt._check("max_children",i.cr),s=i.rt._check("max_depth",i.cr),r=i.rt._check("valid_children",i.cr),a=0,l=1;if("none"===r)return!1;if(t.isArray(r)&&i.ot&&i.ot._get_type&&(i.o.each(function(){return-1===t.inArray(i.ot._get_type(this),r)?(l=!1,!1):void 0}),l===!1))return!1;if(-2!==n.max_children&&-1!==o&&(a=-1===i.cr?this.get_container().find("> ul > li").not(i.o).length:i.cr.find("> ul > li").not(i.o).length,a+i.o.length>o))return!1;if(-2!==n.max_depth&&-1!==s){if(l=0,0===s)return!1;if("undefined"==typeof i.o.d){for(e=i.o;e.length>0;)e=e.find("> ul > li"),l++;i.o.d=l}if(s-i.o.d<0)return!1}return!0},create_node:function(e,i,n,o,s,r){if(!r&&(s||this._is_loaded(e))){var a,l="string"==typeof i&&i.match(/^before|after$/i)&&-1!==e?this._get_parent(e):this._get_node(e),c=this._get_settings().types,d=this._check("max_children",l),h=this._check("max_depth",l),u=this._check("valid_children",l);if("string"==typeof n&&(n={data:n}),n||(n={}),"none"===u)return!1;if(t.isArray(u))if(n.attr&&n.attr[c.type_attr]){if(-1===t.inArray(n.attr[c.type_attr],u))return!1}else n.attr||(n.attr={}),n.attr[c.type_attr]=u[0];if(-2!==c.max_children&&-1!==d&&(a=-1===l?this.get_container().find("> ul > li").length:l.find("> ul > li").length,a+1>d))return!1;if(-2!==c.max_depth&&-1!==h&&0>h-1)return!1}return this.__call_old(!0,e,i,n,o,s,r)}}})}(jQuery),function(e){e.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0),this.data.html_data.original_container_html.find("li").addBack().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(e,t,i){var n=this;this.load_node_html(e,function(){n.__callback({obj:n._get_node(e)}),t.call(this)},i)},_is_loaded:function(t){return t=this._get_node(t),-1==t||!t||!this._get_settings().html_data.ajax&&!e.isFunction(this._get_settings().html_data.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_html:function(t,i,n){var o,s=this.get_settings().html_data,r=function(){},a=function(){};if(t=this._get_node(t),t&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case e.isFunction(s.data):s.data.call(this,t,e.proxy(function(n){n&&""!==n&&n.toString&&""!==n.toString().replace(/^[\s\n]+$/,"")?(n=e(n),n.is("ul")||(n=e("<ul />").append(n)),-1!=t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(n).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(t),i&&i.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))},this));break;case!s.data&&!s.ajax:t&&-1!=t||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),i&&i.call(this);break;case!!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!t||-1===t):t&&-1!=t||(o=e(s.data),o.is("ul")||(o=e("<ul />").append(o)),this.get_container().children("ul").empty().append(o.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),i&&i.call(this);break;case!s.data&&!!s.ajax||!!s.data&&!!s.ajax&&t&&-1!==t:t=this._get_node(t),r=function(e,i,o){var r=this.get_settings().html_data.ajax.error;r&&r.call(this,e,i,o),-1!=t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&s.correct_state&&this.correct_state(t)):"success"===i&&s.correct_state&&this.get_container().children("ul").empty(),n&&n.call(this)},a=function(n,o,a){var l=this.get_settings().html_data.ajax.success;return l&&(n=l.call(this,n,o,a)||n),""===n||n&&n.toString&&""===n.toString().replace(/^[\s\n]+$/,"")?r.call(this,a,o,""):(n?(n=e(n),n.is("ul")||(n=e("<ul />").append(n)),-1!=t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(n).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(n.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(t),i&&i.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)),void 0)},s.ajax.context=this,s.ajax.error=r,s.ajax.success=a,s.ajax.dataType||(s.ajax.dataType="html"),e.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,t)),e.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,t)),e.ajax(s.ajax)}}}}),e.jstree.defaults.plugins.push("html_data")}(jQuery),function(e){e.jstree.plugin("themeroller",{__init:function(){var t=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(i){e(i.currentTarget).hasClass("jstree-loading")||e(this).addClass(t.item_h)}).delegate("a","mouseleave.jstree",function(){e(this).removeClass(t.item_h)}).bind("init.jstree",e.proxy(function(e,t){t.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh"),this._themeroller(t.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",e.proxy(function(){this._themeroller()},this)).bind("close_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("delete_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.parent)},this)).bind("correct_state.jstree",e.proxy(function(e,i){i.rslt.obj.children("ins.jstree-icon").removeClass(t.opened+" "+t.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_open+" "+t.item_clsd).addClass(t.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",e.proxy(function(e,i){i.rslt.obj.children("a").addClass(t.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",e.proxy(function(){this.get_container().find("a."+t.item_a).removeClass(t.item_a).end().find("a.jstree-clicked").addClass(t.item_a)},this)).bind("dehover_node.jstree",e.proxy(function(e,i){i.rslt.obj.children("a").removeClass(t.item_h)},this)).bind("hover_node.jstree",e.proxy(function(e,i){this.get_container().find("a."+t.item_h).not(i.rslt.obj).removeClass(t.item_h),i.rslt.obj.children("a").addClass(t.item_h)},this)).bind("move_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.o),this._themeroller(t.rslt.op)},this))},__destroy:function(){var t=this._get_settings().themeroller,i=["ui-icon"];e.each(t,function(e,t){t=t.split(" "),t.length&&(i=i.concat(t))}),this.get_container().removeClass("ui-widget-content").find("."+i.join(", .")).removeClass(i.join(" "))},_fn:{_themeroller:function(e){var t=this._get_settings().themeroller;e=e&&-1!=e?this._get_node(e):this.get_container_ul(),e=e&&-1!=e?e.parent():this.get_container_ul(),e.find("li.jstree-closed").children("ins.jstree-icon").removeClass(t.opened).addClass("ui-icon "+t.closed).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_leaf+" "+t.item_open).addClass(t.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(t.closed).addClass("ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_leaf+" "+t.item_clsd).addClass(t.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(t.closed+" ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_clsd+" "+t.item_open).addClass(t.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}}),e(function(){var t=".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }";e.vakata.css.add_sheet({str:t,title:"jstree"})})}(jQuery),function(e){e.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",e.proxy(function(t,i){var n,o,s=[],r=!0;return"move_node"==i.func&&i.args[4]===!0&&i.args[0].o&&i.args[0].o.length&&(i.args[0].o.children("a").each(function(){s.push(e(this).text().replace(/^\s+/g,""))}),r=this._check_unique(s,i.args[0].np.find("> ul > li").not(i.args[0].o),"move_node")),"create_node"==i.func&&(i.args[4]||this._is_loaded(i.args[0]))&&(n=this._get_node(i.args[0]),!i.args[1]||"before"!==i.args[1]&&"after"!==i.args[1]||(n=this._get_parent(i.args[0]),n&&-1!==n||(n=this.get_container())),"string"==typeof i.args[2]?s.push(i.args[2]):i.args[2]&&i.args[2].data?s.push(i.args[2].data):s.push(this._get_string("new_node")),r=this._check_unique(s,n.find("> ul > li"),"create_node")),"rename_node"==i.func&&(s.push(i.args[1]),o=this._get_node(i.args[0]),n=this._get_parent(o),n&&-1!==n||(n=this.get_container()),r=this._check_unique(s,n.find("> ul > li").not(o),"rename_node")),r?void 0:(t.stopPropagation(),!1)},this))},defaults:{error_callback:e.noop},_fn:{_check_unique:function(t,i,n){var o=[],s=!0;return i.children("a").each(function(){o.push(e(this).text().replace(/^\s+/g,""))}),o.length&&t.length?(e.each(t,function(t,i){return-1!==e.inArray(i,o)?(s=!1,!1):void 0}),s||this._get_settings().unique.error_callback.call(null,t,i,n),s):!0},check_move:function(){if(!this.__call_old())return!1;var t=this._get_move(),i=[];return t.o&&t.o.length?(t.o.children("a").each(function(){i.push(e(this).text().replace(/^\s+/g,""))}),this._check_unique(i,t.np.find("> ul > li").not(t.o),"check_move")):!0}}})}(jQuery),function(n){n.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1,this.data.wholerow.to=!1,this.get_container().bind("init.jstree",n.proxy(function(){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",n.proxy(function(e,t){this._prepare_wholerow_span(t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",n.proxy(function(e,t){this.data.to&&clearTimeout(this.data.to),this.data.to=setTimeout(function(e,t){return function(){e._prepare_wholerow_ul(t)}}(this,t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",n.proxy(function(){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",n.proxy(function(e,t){t.rslt.obj.each(function(){var e=t.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((n(this).offset().top-t.inst.get_container().offset().top+t.inst.get_container()[0].scrollTop)/t.inst.data.core.li_height,10)+")");e.children("a").attr("class",t.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",n.proxy(function(e,t){if(this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:"")),"hover_node"===e.type){var i=this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((t.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")");i.children("a").attr("class",t.rslt.obj.children(".jstree-hovered").attr("class"))}},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(e){var t=n(e.currentTarget);"A"===e.target.tagName||"INS"===e.target.tagName&&t.closest("li").is(".jstree-open, .jstree-closed")||(t.closest("li").children("a:visible:eq(0)").click(),e.stopImmediatePropagation())}).delegate("li","mouseover.jstree",n.proxy(function(e){return e.stopImmediatePropagation(),n(e.currentTarget).children(".jstree-hovered, .jstree-clicked").length?!1:(this.hover_node(e.currentTarget),!1)},this)).delegate("li","mouseleave.jstree",n.proxy(function(e){n(e.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(e.currentTarget)},this)),(t||e)&&n.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove(),this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(e){e=e&&-1!=e?this._get_node(e):this.get_container().find("> ul > li"),e!==!1&&e.each(function(){n(this).find("li").addBack().each(function(){var e=n(this);return e.children(".jstree-wholerow-span").length?!0:(e.prepend("<span class='jstree-wholerow-span' style='width:"+18*e.parentsUntil(".jstree","li").length+"px;'>&#160;</span>"),void 0)})})},_prepare_wholerow_ul:function(){var e=this.get_container().children("ul").eq(0),i=e.html();e.addClass("jstree-wholerow-real"),this.data.wholerow.last_html!==i&&(this.data.wholerow.last_html=i,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(e.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(e.parent()[0].scrollWidth).css("top",-1*(e.height()+(t?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}}),n(function(){var o=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";i&&(o+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } "),(t||e)&&(o+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } "),n.vakata.css.add_sheet({str:o,title:"jstree"})})}(jQuery),function(e){var t=["getChildren","getChildrenCount","getAttr","getName","getProps"],i=function(t,i){var n=!0;return t=t||{},i=[].concat(i),e.each(i,function(i,o){return e.isFunction(t[o])?void 0:(n=!1,!1)}),n};e.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(n,o){var s=-1==n?this._get_settings().model.object:n.data("jstree_model");return i(s,t)?(this._get_settings().model.async?s.getChildren(e.proxy(function(e){this.model_done(e,o)},this)):this.model_done(s.getChildren(),o),void 0):o.call(null,!1)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(t,i){var n=[],o=this._get_settings(),s=this;e.isArray(t)||(t=[t]),e.each(t,function(t,i){var r=i.getProps()||{};r.attr=i.getAttr()||{},i.getChildrenCount()&&(r.state="closed"),r.data=i.getName(),e.isArray(r.data)||(r.data=[r.data]),s.data.types&&e.isFunction(i.getType)&&(r.attr[o.types.type_attr]=i.getType()),r.attr.id&&o.model.id_prefix&&(r.attr.id=o.model.id_prefix+r.attr.id),r.metadata||(r.metadata={}),r.metadata.jstree_model=i,n.push(r)}),i.call(null,n)}}})}(jQuery)}}(),define("jquery.jstree",["jquery"],function(){}),function(e){var t=e({});e.ajaxQueue=function(i){function n(t){o=e.ajax(i).done(s.resolve).fail(s.reject).then(t,t)}var o,s=e.Deferred(),r=s.promise();return t.queue(n),r.abort=function(a){if(o)return o.abort(a);var l=t.queue(),c=e.inArray(n,l);return c>-1&&l.splice(c,1),s.rejectWith(i.context||i,[r,a,""]),r},r}}(jQuery),define("jquery.ajax.queue",["jquery"],function(){}),jQuery.cookie=function(e,t,i){if("undefined"==typeof t){var n=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),s=0;s<o.length;s++){var r=jQuery.trim(o[s]);if(r.substring(0,e.length+1)==e+"="){n=decodeURIComponent(r.substring(e.length+1));break}}return n}i=i||{},null===t&&(t="",i.expires=-1);var a="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var l;"number"==typeof i.expires?(l=new Date,l.setTime(l.getTime()+1e3*60*60*24*i.expires)):l=i.expires,a="; expires="+l.toUTCString()}var c=i.path?"; path="+i.path:"",d=i.domain?"; domain="+i.domain:"",h=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),a,c,d,h].join("")},define("jstree/jquery.cookie",["jquery.jstree"],function(){}),function(e){function t(t){if("string"==typeof t.data&&(t.data={keys:t.data}),t.data&&t.data.keys&&"string"==typeof t.data.keys){var i=t.handler,n=t.data.keys.toLowerCase().split(" "),o=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"];t.handler=function(t){if(this===t.target||!(/textarea|select/i.test(t.target.nodeName)||e.inArray(t.target.type,o)>-1)){var s=e.hotkeys.specialKeys[t.keyCode],r="keypress"===t.type&&String.fromCharCode(t.which).toLowerCase(),a="",l={};t.altKey&&"alt"!==s&&(a+="alt+"),t.ctrlKey&&"ctrl"!==s&&(a+="ctrl+"),t.metaKey&&!t.ctrlKey&&"meta"!==s&&(a+="meta+"),t.shiftKey&&"shift"!==s&&(a+="shift+"),s&&(l[a+s]=!0),r&&(l[a+r]=!0,l[a+e.hotkeys.shiftNums[r]]=!0,"shift+"===a&&(l[e.hotkeys.shiftNums[r]]=!0));for(var c=0,d=n.length;d>c;c++)if(l[n[c]])return i.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",186:";",191:"/",220:"\\",222:"'",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})}(this.jQuery),define("jstree/jquery.hotkeys",["jquery.jstree"],function(){}),!function(e){e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in i)if(void 0!==t.style[e])return i[e]}();return e&&{end:e}}()})}(window.jQuery),!function(e){var t='[data-dismiss="alert"]',i=function(i){e(i).on("click",t,this.close)};i.prototype.close=function(t){function i(){n.trigger("closed").remove()}var n,o=e(this),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),n=e(s),t&&t.preventDefault(),n.length||(n=o.hasClass("alert")?o:o.parent()),n.trigger(t=e.Event("close")),t.isDefaultPrevented()||(n.removeClass("in"),e.support.transition&&n.hasClass("fade")?n.on(e.support.transition.end,i):i())};var n=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var n=e(this),o=n.data("alert");o||n.data("alert",o=new i(this)),"string"==typeof t&&o[t].call(n)})},e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=n,this},e(document).on("click.alert.data-api",t,i.prototype.close)}(window.jQuery),!function(e){var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,i)};t.prototype.setState=function(e){var t="disabled",i=this.$element,n=i.data(),o=i.is("input")?"val":"html";e+="Text",n.resetText||i.data("resetText",i[o]()),i[o](n[e]||this.options[e]),setTimeout(function(){"loadingText"==e?i.addClass(t).attr(t,t):i.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=function(i){return this.each(function(){var n=e(this),o=n.data("button"),s="object"==typeof i&&i;o||n.data("button",o=new t(this,s)),"toggle"==i?o.toggle():i&&o.setState(i)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var i=e(t.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")})}(window.jQuery),!function(e){var t=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var i=this.getActiveIndex(),n=this;if(!(t>this.$items.length-1||0>t))return this.sliding?this.$element.one("slid",function(){n.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(t,i){var n,o=this.$element.find(".item.active"),s=i||o[t](),r=this.interval,a="next"==t?"left":"right",l="next"==t?"first":"last",c=this;if(this.sliding=!0,r&&this.pause(),s=s.length?s:this.$element.find(".item")[l](),n=e.Event("slide",{relatedTarget:s[0],direction:a}),!s.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(c.$indicators.children()[c.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(n),n.isDefaultPrevented())return;s.addClass(t),s[0].offsetWidth,o.addClass(a),s.addClass(a),this.$element.one(e.support.transition.end,function(){s.removeClass([t,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid")},0)})}else{if(this.$element.trigger(n),n.isDefaultPrevented())return;o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return r&&this.cycle(),this}}};var i=e.fn.carousel;e.fn.carousel=function(i){return this.each(function(){var n=e(this),o=n.data("carousel"),s=e.extend({},e.fn.carousel.defaults,"object"==typeof i&&i),r="string"==typeof i?i:s.slide;o||n.data("carousel",o=new t(this,s)),"number"==typeof i?o.to(i):r?o[r]():s.interval&&o.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var i,n,o=e(this),s=e(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),r=e.extend({},s.data(),o.data());s.carousel(r),(n=o.attr("data-slide-to"))&&s.data("carousel").pause().to(n).cycle(),t.preventDefault()})}(window.jQuery),!function(e){var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,i),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,i,n,o;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),i=e.camelCase(["scroll",t].join("-")),n=this.$parent&&this.$parent.find("> .accordion-group > .in"),n&&n.length){if(o=n.data("collapse"),o&&o.transitioning)return;n.collapse("hide"),o||n.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][i])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,i,n){var o=this,s=function(){"show"==i.type&&o.reset(),o.transitioning=0,o.$element.trigger(n)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var i=e.fn.collapse;e.fn.collapse=function(i){return this.each(function(){var n=e(this),o=n.data("collapse"),s=e.extend({},e.fn.collapse.defaults,n.data(),"object"==typeof i&&i);o||n.data("collapse",o=new t(this,s)),"string"==typeof i&&o[i]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var i,n=e(this),o=n.attr("data-target")||t.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),s=e(o).data("collapse")?"toggle":n.data();n[e(o).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(o).collapse(s)})}(window.jQuery),!function(e){function t(){e(n).each(function(){i(e(this)).removeClass("open")})}function i(t){var i,n=t.attr("data-target");return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),i=n&&e(n),i&&i.length||(i=t.parent()),i}var n="[data-toggle=dropdown]",o=function(t){var i=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};o.prototype={constructor:o,toggle:function(){var n,o,s=e(this);if(!s.is(".disabled, :disabled"))return n=i(s),o=n.hasClass("open"),t(),o||n.toggleClass("open"),s.focus(),!1
},keydown:function(t){var o,s,r,a,l;if(/(38|40|27)/.test(t.keyCode)&&(o=e(this),t.preventDefault(),t.stopPropagation(),!o.is(".disabled, :disabled"))){if(r=i(o),a=r.hasClass("open"),!a||a&&27==t.keyCode)return 27==t.which&&r.find(n).focus(),o.click();s=e("[role=menu] li:not(.divider):visible a",r),s.length&&(l=s.index(s.filter(":focus")),38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<s.length-1&&l++,~l||(l=0),s.eq(l).focus())}}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var i=e(this),n=i.data("dropdown");n||i.data("dropdown",n=new o(this)),"string"==typeof t&&n[t].call(i)})},e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on(".dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",n,o.prototype.toggle).on("keydown.dropdown.data-api",n+", [role=menu]",o.prototype.keydown)}(window.jQuery),!function(e){var t=function(t,i){this.options=i,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,i=e.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),i&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),i?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,i=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(i),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;n?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var i=e.fn.modal;e.fn.modal=function(i){return this.each(function(){var n=e(this),o=n.data("modal"),s=e.extend({},e.fn.modal.defaults,n.data(),"object"==typeof i&&i);o||n.data("modal",o=new t(this,s)),"string"==typeof i?o[i]():s.show&&o.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var i=e(this),n=i.attr("href"),o=e(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},o.data(),i.data());t.preventDefault(),o.modal(s).one("hide",function(){i.focus()})})}(window.jQuery),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,n){var o,s,r,a,l;for(this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.enabled=!0,r=this.options.trigger.split(" "),l=r.length;l--;)a=r[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=a&&(o="hover"==a?"mouseenter":"focus",s="hover"==a?"mouseleave":"blur",this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show),void 0):i.show()},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide),void 0):i.hide()},show:function(){var t,i,n,o,s,r,a=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),i=this.getPosition(),n=t[0].offsetWidth,o=t[0].offsetHeight,s){case"bottom":r={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":r={top:i.top-o,left:i.left+i.width/2-n/2};break;case"left":r={top:i.top+i.height/2-o/2,left:i.left-n};break;case"right":r={top:i.top+i.height/2-o/2,left:i.left+i.width}}this.applyPlacement(r,s),this.$element.trigger("shown")}},applyPlacement:function(e,t){var i,n,o,s,r=this.tip(),a=r[0].offsetWidth,l=r[0].offsetHeight;r.offset(e).addClass(t).addClass("in"),i=r[0].offsetWidth,n=r[0].offsetHeight,"top"==t&&n!=l&&(e.top=e.top+l-n,s=!0),"bottom"==t||"top"==t?(o=0,e.left<0&&(o=-2*e.left,e.left=0,r.offset(e),i=r[0].offsetWidth,n=r[0].offsetHeight),this.replaceArrow(o-a+i,i,"left")):this.replaceArrow(n-l,n,"top"),s&&r.offset(e)},replaceArrow:function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){i.off(e.support.transition.end).detach()},500);i.one(e.support.transition.end,function(){clearTimeout(t),i.detach()})}var i=this.tip(),n=e.Event("hide");return this.$element.trigger(n),n.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():i.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var i=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each(function(){var n=e(this),o=n.data("tooltip"),s="object"==typeof i&&i;o||n.data("tooltip",o=new t(this,s)),"string"==typeof i&&o[i]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(window.jQuery),!function(e){var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](i),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,i=this.options;return e=("function"==typeof i.content?i.content.call(t[0]):i.content)||t.attr("data-content")},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=e.fn.popover;e.fn.popover=function(i){return this.each(function(){var n=e(this),o=n.data("popover"),s="object"==typeof i&&i;o||n.data("popover",o=new t(this,s)),"string"==typeof i&&o[i]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(window.jQuery),!function(e){function t(t,i){var n,o=e.proxy(this.process,this),s=e(t).is("body")?e(window):e(t);this.options=e.extend({},e.fn.scrollspy.defaults,i),this.$scrollElement=s.on("scroll.scroll-spy.data-api",o),this.selector=(this.options.target||(n=e(t).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t,i=this;this.offsets=e([]),this.targets=e([]),t=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),o=/^#\w/.test(n)&&e(n);return o&&o.length&&[[o.position().top+(!e.isWindow(i.$scrollElement.get(0))&&i.$scrollElement.scrollTop()),n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=i-this.$scrollElement.height(),o=this.offsets,s=this.targets,r=this.activeTarget;if(t>=n)return r!=(e=s.last()[0])&&this.activate(e);for(e=o.length;e--;)r!=s[e]&&t>=o[e]&&(!o[e+1]||t<=o[e+1])&&this.activate(s[e])},activate:function(t){var i,n;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parent("li").addClass("active"),i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}};var i=e.fn.scrollspy;e.fn.scrollspy=function(i){return this.each(function(){var n=e(this),o=n.data("scrollspy"),s="object"==typeof i&&i;o||n.data("scrollspy",o=new t(this,s)),"string"==typeof i&&o[i]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,i,n,o=this.element,s=o.closest("ul:not(.dropdown-menu)"),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),o.parent("li").hasClass("active")||(t=s.find(".active:last a")[0],n=e.Event("show",{relatedTarget:t}),o.trigger(n),n.isDefaultPrevented()||(i=e(r),this.activate(o.parent("li"),s),this.activate(i,i.parent(),function(){o.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,i,n){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var s=i.find("> .active"),r=n&&e.support.transition&&s.hasClass("fade");r?s.one(e.support.transition.end,o):o(),s.removeClass("in")}};var i=e.fn.tab;e.fn.tab=function(i){return this.each(function(){var n=e(this),o=n.data("tab");o||n.data("tab",o=new t(this)),"string"==typeof i&&o[i]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=i,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(t=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var i=this;return t=e.grep(t,function(e){return i.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,i=[],n=[],o=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?n.push(t):o.push(t):i.push(t);return i.concat(n,o)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var i=this;return t=e(t).map(function(t,n){return t=e(i.options.item).attr("data-value",n),t.find("a").html(i.highlighter(n)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),i=t.next();i.length||(i=e(this.$menu.find("li")[0])),i.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var i=e.fn.typeahead;e.fn.typeahead=function(i){return this.each(function(){var n=e(this),o=n.data("typeahead"),s="object"==typeof i&&i;o||n.data("typeahead",o=new t(this,s)),"string"==typeof i&&o[i]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var t=e(this);t.data("typeahead")||t.typeahead(t.data())})}(window.jQuery),!function(e){var t=function(t,i){this.options=e.extend({},e.fn.affix.defaults,i),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,i=e(document).height(),n=this.$window.scrollTop(),o=this.$element.offset(),s=this.options.offset,r=s.bottom,a=s.top,l="affix affix-top affix-bottom";"object"!=typeof s&&(r=a=s),"function"==typeof a&&(a=s.top()),"function"==typeof r&&(r=s.bottom()),t=null!=this.unpin&&n+this.unpin<=o.top?!1:null!=r&&o.top+this.$element.height()>=i-r?"bottom":null!=a&&a>=n?"top":!1,this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?o.top-n:null,this.$element.removeClass(l).addClass("affix"+(t?"-"+t:"")))}};var i=e.fn.affix;e.fn.affix=function(i){return this.each(function(){var n=e(this),o=n.data("affix"),s="object"==typeof i&&i;o||n.data("affix",o=new t(this,s)),"string"==typeof i&&o[i]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),i=t.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),t.affix(i)})})}(window.jQuery),define("bootstrap",["jquery"],function(){}),define("oroui/js/extend/bootstrap",["jquery","bootstrap"],function(e){function t(t){var i,n;i=e(t).on("click.dropdown.data-api",this.toggle),n={"click.dropdown.data-api":function(){i.parent().removeClass("open")}},i.data("globalHandlers",n),e("html").on(n)}t.prototype=e.fn.dropdown.Constructor.prototype,t.prototype.destroy=function(){var t=this.data("globalHandlers");e("html").off(t),this.removeData("dropdown"),this.removeData("globalHandlers")},e.fn.dropdown=function(i){return this.each(function(){var n=e(this),o=n.data("dropdown");o||n.data("dropdown",o=new t(this)),"string"==typeof i&&o[i].call(n)})},e.fn.dropdown.Constructor=t,e.fn.modal.Constructor.prototype.enforceFocus=function(){var t=this;e(document).off("focusin.modal").on("focusin.modal",function i(n){t.$element[0]===n.target||t.$element.has(n.target).length||(e(document).off("focusin.modal"),t.$element.focus(),e(document).on("focusin.modal",i))})}}),define("oroui/js/app/controllers/base/controller",["jquery","chaplin"],function(e,t){var i,n,o;return i=t.Controller.extend({beforeAction:function(t,s){var r,a,l;return i.__super__.beforeAction.apply(this,arguments),a=e.Deferred(),l=this,e.when.apply(e,o).then(function(){for(s.previous||l.cache.init(s),r=0;r<n.length;r+=1)l.reuse.apply(l,n[r]);a.resolve()}),a.promise()},_combineRouteUrl:function(e){var i;return i=t.mediator.execute("combineFullUrl",e.path,e.query)},cache:{init:function(e){var i,n,o;i=e.path,n=e.query,o=t.mediator.execute("retrieveOption","userName")||!1,t.mediator.execute({name:"pageCache:init",silent:!0},i,n,o)},get:function(e){return t.mediator.execute({name:"pageCache:get",silent:!0},e)}}}),n=[],o=[e.ready.promise()],i.addToReuse=function(){var e=Array.prototype.slice.call(arguments,0);n.push(e)},i.loadBeforeAction=function(t,i){var n,s;n=e.Deferred(),o.push(n.promise()),s=function(){var e;e=Array.prototype.slice.call(arguments,0),i.apply(null,e),n.resolve()},require(t,s)},i}),define("oroui/js/app/models/base/model",["chaplin"],function(e){var t;return t=e.Model.extend({})}),define("oroui/js/app/models/page-model",["underscore","oroui/js/mediator","./base/model"],function(e,t,i){var n;return n=i.extend({defaults:{content:"",scripts:"",currentRoute:"",history:"",mostviewed:"",title:"",titleSerialized:"",titleShort:"",flashMessages:{},showPinButton:!1},fetch:function(e){e=this._extendOptions(e),n.__super__.fetch.call(this,e)},save:function(e,t,i){return(null==e||"object"==typeof e)&&(i=t),i=this._extendOptions(i),n.__super__.save.call(this,e,t,i)},validate:function(t){var i;return t.redirect&&(i=e.pick(t,["redirect","fullRedirect","location"])),i},_extendOptions:function(i){var n;return i=i||{},e.extend(i,{accepts:{json:"*/*"}}),n=t.execute("retrieveOption","headerId"),n&&(i.headers=i.headers||{},i.headers[n]=!0),i}})}),define("controllers/page-controller",["jquery","underscore","chaplin","orotranslation/js/translator","oroui/js/app/controllers/base/controller","oroui/js/app/models/page-model"],function(e,t,i,n,o,s){var r,a,l,c,d,h,u;return r=window.document,a=window.location,l=window.history,c=window.console,d=i.utils,h=i.mediator,u=o.extend({initialize:function(){var e,t;u.__super__.initialize.apply(this,arguments),e=new s,this.listenTo(e,"request",this.onPageRequest),this.listenTo(e,"change",this.onPageLoaded),this.listenTo(e,"sync",this.onPageUpdated),this.listenTo(e,"invalid",this.onPageInvalid),this.listenTo(e,"error",this.onPageError),this.model=e,t=!1,this.subscribeEvent("page:beforeChange",function(){t=!0}),this.subscribeEvent("page:afterChange",function(){t=!1}),h.setHandler("isInAction",function(){return t})},index:function(e,t,i){var n,o,s;return n=this._combineRouteUrl(t),this._setNavigationHandlers(n),s={params:e,route:t,options:i},t.previous?(this._beforePageLoad(t,e,i)&&(delete i.redirection,o=this.cache.get(t.path),o&&o.page&&t.query===o.query&&i.force!==!0?(i.fromCache=!0,this.onPageRequest(this.model,null,{actionArgs:s}),this.model.set(o.page,{actionArgs:s}),this.onPageUpdated(this.model,null,{actionArgs:s})):this.model.fetch({url:n,validate:!0,actionArgs:s})),void 0):(this.onPageUpdated(this.model,null,{actionArgs:s}),void 0)},_beforePageLoad:function(e,i,n){var o,s,r,a;return o=e.previous,s=t.extend(t.omit(e,["previous"]),{params:i}),this.publishEvent("page:beforeChange",o,s,n),e.path!==s.path||e.query!==s.query?(r=this._combineRouteUrl(s),a=t.pick(n,["forceStartup","changeURL","force","silent"]),a.replace=!0,t.defer(function(){h.execute("redirectTo",{url:r},a)}),!1):!0},onPageRequest:function(e,t,i){this.publishEvent("page:request",i.actionArgs)},onPageLoaded:function(e,t){var i;this._disposeComponents(),i=e.getAttributes(),this.publishEvent("page:update",i,t.actionArgs,t.xhr),this.adjustTitle(i.title)},onPageUpdated:function(e,i,n){var o,s;n.redirection||(s=this,o=h.execute("layout:init",r.body),o.done(function(e){t.each(e,function(e){"function"==typeof e.dispose&&(s["component-"+e.cid||t.uniqueId("component")]=e)}),t.defer(function(){s.publishEvent("page:afterChange")})}))},onPageInvalid:function(e,i,n){var o;i.redirect&&(o={url:i.location},t.extend(n.actionArgs.options,t.pick(i,["redirect","fullRedirect"])),this._processRedirect(o,n.actionArgs.options))},onPageError:function(e,i,o){var s,a,d;return s=i.responseText,a={},200===i.status&&0===s.indexOf("http")?(a={redirect:!0,fullRedirect:!0,location:s},e.set(a,o),void 0):(d={stopPageProcessing:!1},this.publishEvent("page:beforeError",i,d),d.stopPageProcessing?(l.back(),void 0):(a=this._parseRawData(s),t.isObject(a)?e.set(a,o):h.execute("retrieveOption","debug")?(r.writeln(s),c&&c.error("Unexpected content format")):h.execute("showMessage","error",n("Sorry, page was not loaded correctly")),this.publishEvent("page:error",e.getAttributes(),o.actionArgs,i),this.onPageUpdated(e,null,o),void 0))},_processRedirect:function(e,i,n){var o,s,l,c;n=n||{},"object"==typeof e&&null!=e.url&&(n=i||{},s=r.createElement("a"),s.href=e.url,l=s.pathname,c=s.search.substr(1),e.url=l+(c&&"?"+c)),n.fullRedirect?(c=d.queryParams.parse(c),c._rand=Math.random(),c=d.queryParams.stringify(c),o=l+(c&&"?"+c),a.replace(o)):n.redirect?(this.publishEvent("page:redirect"),t.extend(n,{forceStartup:!0,force:!0,redirection:!0}),d.redirectTo(e,n)):d.redirectTo.apply(d,arguments)},_setNavigationHandlers:function(i){h.setHandler("redirectTo",this._processRedirect,this),h.setHandler("refreshPage",function(n){var o;h.trigger("page:beforeRefresh",o=[]),n=n||{},t.defaults(n,{forceStartup:!0,force:!0}),e.when.apply(e,o).done(function(e){t.extend(n,e||{}),d.redirectTo({url:i},n),h.trigger("page:afterRefresh")})}),h.setHandler("submitPage",this._submitPage,this),h.setHandler("afterPageChange",function(){h.trigger("page:afterChange")})},_parseRawData:function(e,i){var n,o,s,r;if(t.isUndefined(i)&&(i=-1),e=e.trim(),n=e.indexOf("{",i+1),o="",s=null,n>0){o=e.substr(0,n),r=e.substr(n);try{s=JSON.parse(r)}catch(a){return this._parseRawData(e,n)}}else s=0===n?JSON.parse(e):e;return o&&(o='<div class="alert alert-info fade in top-messages"><a class="close" data-dismiss="alert" href="#">&times;</a><div class="message">'+o+"</div></div>"),void 0!==s.content&&(s.content=o+s.content),s},_submitPage:function(e){this.publishEvent("page:beforeChange"),e.actionArgs=e.actionArgs||{},t.defaults(e.actionArgs,{params:{},route:{},options:{}}),this.model.save(null,e)},_disposeComponents:function(){t.each(this,function(e,t){"component-"===t.substr(0,10)&&(e.dispose(),delete this[t])},this)}})}),require(["oroui/js/mediator","oroui/js/app/controllers/base/controller"],function(e,t){t.loadBeforeAction(["oroui/js/layout"],function(t){e.setHandler("layout:init",t.init,t),e.setHandler("layout:dispose",t.unstyleForm,t),e.on("page:beforeChange",t.pageRendering,t),e.on("page:afterChange",t.pageRendered,t)})}),define("oroui/js/app/modules/layout",function(){}),define("oroui/js/app/views/base/view",["jquery","underscore","chaplin"],function(e,t,i){var n;return n=i.View.extend({getTemplateFunction:function(){var e,i;return e=this.template,i=null,"string"==typeof e?(i=t.template(e),this.constructor.prototype.template=i):i=e,i},_ensureElement:function(){var e;this.el&&"string"==typeof this.el&&(e=this._findRegionElem(this.el)),e?this.setElement(e,!1):n.__super__._ensureElement.call(this)},_findRegionElem:function(t){var n,o,s;return o=i.mediator.execute("region:find",t),null!=o&&(s=o.instance,n=null!=s.container?null!=s.region?e(s.container).find(o.selector):s.container:s.$(o.selector)),n}})}),function(e){function t(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(i))}function i(t){var i=t.target,n=e(i);if(!n.is("[type=submit],[type=image]")){var o=n.closest("[type=submit]");if(0===o.length)return;i=o[0]}var s=this;if(s.clk=i,"image"==i.type)if(void 0!==t.offsetX)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var r=n.offset();s.clk_x=t.pageX-r.left,s.clk_y=t.pageY-r.top}else s.clk_x=t.pageX-i.offsetLeft,s.clk_y=t.pageY-i.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function n(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var o={};o.fileapi=void 0!==e("<input type='file'/>").get(0).files,o.formdata=void 0!==window.FormData;var s=!!e.fn.prop;e.fn.attr2=function(){if(!s)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function i(t){var i,n,o=e.param(t).split("&"),s=o.length,r=[];for(i=0;s>i;i++)o[i]=o[i].replace(/\+/g," "),n=o[i].split("="),r.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return r}function r(n){for(var o=new FormData,s=0;s<n.length;s++)o.append(n[s].name,n[s].value);if(t.extraData){var r=i(t.extraData);for(s=0;s<r.length;s++)r[s]&&o.append(r[s][0],r[s][1])}t.data=null;var a=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});t.uploadProgress&&(a.xhr=function(){var e=jQuery.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var i=0,n=e.loaded||e.position,o=e.total;e.lengthComputable&&(i=Math.ceil(100*(n/o))),t.uploadProgress(e,n,o,i)},!1),e}),a.data=null;var c=a.beforeSend;return a.beforeSend=function(e,t){t.data=o,c&&c.call(this,e,t)},e.ajax(a)}function a(i){function o(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(i){n("cannot get iframe.contentWindow document: "+i)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(i){n("cannot get iframe.contentDocument: "+i),t=e.document}return t}function r(){function t(){try{var e=o(v).readyState;n("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(i){n("Server abort: ",i," (",i.name,")"),a(T),x&&clearTimeout(x),x=void 0}}var i=h.attr2("target"),s=h.attr2("action");k.setAttribute("target",f),l||k.setAttribute("method","POST"),s!=u.url&&k.setAttribute("action",u.url),u.skipEncodingOverride||l&&!/post/i.test(l)||h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&(x=setTimeout(function(){w=!0,a(j)},u.timeout));var r=[];try{if(u.extraData)for(var c in u.extraData)u.extraData.hasOwnProperty(c)&&(e.isPlainObject(u.extraData[c])&&u.extraData[c].hasOwnProperty("name")&&u.extraData[c].hasOwnProperty("value")?r.push(e('<input type="hidden" name="'+u.extraData[c].name+'">').val(u.extraData[c].value).appendTo(k)[0]):r.push(e('<input type="hidden" name="'+c+'">').val(u.extraData[c]).appendTo(k)[0]));u.iframeTarget||(g.appendTo("body"),v.attachEvent?v.attachEvent("onload",a):v.addEventListener("load",a,!1)),setTimeout(t,15);try{k.submit()}catch(d){var p=document.createElement("form").submit;p.apply(k)}}finally{k.setAttribute("action",s),i?k.setAttribute("target",i):h.removeAttr("target"),e(r).remove()}}function a(t){if(!_.aborted&&!A){if(M=o(v),M||(n("cannot access response document"),t=T),t===j&&_)return _.abort("timeout"),C.reject(_,"timeout"),void 0;if(t==T&&_)return _.abort("server abort"),C.reject(_,"error","server abort"),void 0;
if(M&&M.location.href!=u.iframeSrc||w){v.detachEvent?v.detachEvent("onload",a):v.removeEventListener("load",a,!1);var i,s="success";try{if(w)throw"timeout";var r="xml"==u.dataType||M.XMLDocument||e.isXMLDoc(M);if(n("isXml="+r),!r&&window.opera&&(null===M.body||!M.body.innerHTML)&&--F)return n("requeing onLoad callback, DOM not available"),setTimeout(a,250),void 0;var l=M.body?M.body:M.documentElement;_.responseText=l?l.innerHTML:null,_.responseXML=M.XMLDocument?M.XMLDocument:M,r&&(u.dataType="xml"),_.getResponseHeader=function(e){var t={"content-type":u.dataType};return t[e]},l&&(_.status=Number(l.getAttribute("status"))||_.status,_.statusText=l.getAttribute("statusText")||_.statusText);var c=(u.dataType||"").toLowerCase(),d=/(json|script|text)/.test(c);if(d||u.textarea){var h=M.getElementsByTagName("textarea")[0];if(h)_.responseText=h.value,_.status=Number(h.getAttribute("status"))||_.status,_.statusText=h.getAttribute("statusText")||_.statusText;else if(d){var f=M.getElementsByTagName("pre")[0],m=M.getElementsByTagName("body")[0];f?_.responseText=f.textContent?f.textContent:f.innerText:m&&(_.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==c&&!_.responseXML&&_.responseText&&(_.responseXML=O(_.responseText));try{E=I(_,c,u)}catch(y){s="parsererror",_.error=i=y||s}}catch(y){n("error caught: ",y),s="error",_.error=i=y||s}_.aborted&&(n("upload aborted"),s=null),_.status&&(s=_.status>=200&&_.status<300||304===_.status?"success":"error"),"success"===s?(u.success&&u.success.call(u.context,E,"success",_),C.resolve(_.responseText,"success",_),p&&e.event.trigger("ajaxSuccess",[_,u])):s&&(void 0===i&&(i=_.statusText),u.error&&u.error.call(u.context,_,s,i),C.reject(_,"error",i),p&&e.event.trigger("ajaxError",[_,u,i])),p&&e.event.trigger("ajaxComplete",[_,u]),p&&!--e.active&&e.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,_,s),A=!0,u.timeout&&clearTimeout(x),setTimeout(function(){u.iframeTarget||g.remove(),_.responseXML=null},100)}}}var c,d,u,p,f,g,v,_,y,b,w,x,k=h[0],C=e.Deferred();if(i)for(d=0;d<m.length;d++)c=e(m[d]),s?c.prop("disabled",!1):c.removeAttr("disabled");if(u=e.extend(!0,{},e.ajaxSettings,t),u.context=u.context||u,f="jqFormIO"+(new Date).getTime(),u.iframeTarget?(g=e(u.iframeTarget),b=g.attr2("name"),b?f=b:g.attr2("name",f)):(g=e('<iframe name="'+f+'" src="'+u.iframeSrc+'" />'),g.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=g[0],_={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var i="timeout"===t?"timeout":"aborted";n("aborting upload... "+i),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(o){}g.attr("src",u.iframeSrc),_.error=i,u.error&&u.error.call(u.context,_,i,t),p&&e.event.trigger("ajaxError",[_,u,i]),u.complete&&u.complete.call(u.context,_,i)}},p=u.global,p&&0===e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[_,u]),u.beforeSend&&u.beforeSend.call(u.context,_,u)===!1)return u.global&&e.active--,C.reject(),C;if(_.aborted)return C.reject(),C;y=k.clk,y&&(b=y.name,b&&!y.disabled&&(u.extraData=u.extraData||{},u.extraData[b]=y.value,"image"==y.type&&(u.extraData[b+".x"]=k.clk_x,u.extraData[b+".y"]=k.clk_y)));var j=1,T=2,S=e("meta[name=csrf-token]").attr("content"),D=e("meta[name=csrf-param]").attr("content");D&&S&&(u.extraData=u.extraData||{},u.extraData[D]=S),u.forceSync?r():setTimeout(r,10);var E,M,A,F=50,O=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},P=e.parseJSON||function(e){return window.eval("("+e+")")},I=function(t,i,n){var o=t.getResponseHeader("content-type")||"",s="xml"===i||!i&&o.indexOf("xml")>=0,r=s?t.responseXML:t.responseText;return s&&"parsererror"===r.documentElement.nodeName&&e.error&&e.error("parsererror"),n&&n.dataFilter&&(r=n.dataFilter(r,i)),"string"==typeof r&&("json"===i||!i&&o.indexOf("json")>=0?r=P(r):("script"===i||!i&&o.indexOf("javascript")>=0)&&e.globalEval(r)),r};return C}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var l,c,d,h=this;"function"==typeof t&&(t={success:t}),l=this.attr2("method"),c=this.attr2("action"),d="string"==typeof c?e.trim(c):"",d=d||window.location.href||"",d&&(d=(d.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:d,success:e.ajaxSettings.success,type:l||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var u={};if(this.trigger("form-pre-serialize",[this,t,u]),u.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=t.traditional;void 0===p&&(p=e.ajaxSettings.traditional);var f,m=[],g=this.formToArray(t.semantic,m);if(t.data&&(t.extraData=t.data,f=e.param(t.data,p)),t.beforeSubmit&&t.beforeSubmit(g,this,t)===!1)return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[g,this,t,u]),u.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=e.param(g,p);f&&(v=v?v+"&"+f:f),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+v,t.data=null):t.data=v;var _=[];if(t.resetForm&&_.push(function(){h.resetForm()}),t.clearForm&&_.push(function(){h.clearForm(t.includeHidden)}),!t.dataType&&t.target){var y=t.success||function(){};_.push(function(i){var n=t.replaceTarget?"replaceWith":"html";e(t.target)[n](i).each(y,arguments)})}else t.success&&_.push(t.success);t.success=function(e,i,n){for(var o=t.context||this,s=0,r=_.length;r>s;s++)_[s].apply(o,[e,i,n||h,h])};var b=e('input[type=file]:enabled[value!=""]',this),w=b.length>0,x="multipart/form-data",k=h.attr("enctype")==x||h.attr("encoding")==x,C=o.fileapi&&o.formdata;n("fileAPI :"+C);var j,T=(w||k)&&!C;t.iframe!==!1&&(t.iframe||T)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){j=a(g)}):j=a(g):j=(w||k)&&C?r(g):e.ajax(t),h.removeData("jqxhr").data("jqxhr",j);for(var S=0;S<m.length;S++)m[S]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(o){if(o=o||{},o.delegation=o.delegation&&e.isFunction(e.fn.on),!o.delegation&&0===this.length){var s={s:this.selector,c:this.context};return!e.isReady&&s.s?(n("DOM not ready, queuing ajaxForm"),e(function(){e(s.s,s.c).ajaxForm(o)}),this):(n("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return o.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,o,t).on("click.form-plugin",this.selector,o,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",o,t).bind("click.form-plugin",o,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,i){var n=[];if(0===this.length)return n;var s=this[0],r=t?s.getElementsByTagName("*"):s.elements;if(!r)return n;var a,l,c,d,h,u,p;for(a=0,u=r.length;u>a;a++)if(h=r[a],c=h.name,c&&!h.disabled)if(t&&s.clk&&"image"==h.type)s.clk==h&&(n.push({name:c,value:e(h).val(),type:h.type}),n.push({name:c+".x",value:s.clk_x},{name:c+".y",value:s.clk_y}));else if(d=e.fieldValue(h,!0),d&&d.constructor==Array)for(i&&i.push(h),l=0,p=d.length;p>l;l++)n.push({name:c,value:d[l]});else if(o.fileapi&&"file"==h.type){i&&i.push(h);var f=h.files;if(f.length)for(l=0;l<f.length;l++)n.push({name:c,value:f[l],type:h.type});else n.push({name:c,value:"",type:h.type})}else null!==d&&"undefined"!=typeof d&&(i&&i.push(h),n.push({name:c,value:d,type:h.type,required:h.required}));if(!t&&s.clk){var m=e(s.clk),g=m[0];c=g.name,c&&!g.disabled&&"image"==g.type&&(n.push({name:c,value:m.val()}),n.push({name:c+".x",value:s.clk_x},{name:c+".y",value:s.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var n=this.name;if(n){var o=e.fieldValue(this,t);if(o&&o.constructor==Array)for(var s=0,r=o.length;r>s;s++)i.push({name:n,value:o[s]});else null!==o&&"undefined"!=typeof o&&i.push({name:this.name,value:o})}}),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],n=0,o=this.length;o>n;n++){var s=this[n],r=e.fieldValue(s,t);null===r||"undefined"==typeof r||r.constructor==Array&&!r.length||(r.constructor==Array?e.merge(i,r):i.push(r))}return i},e.fieldValue=function(t,i){var n=t.name,o=t.type,s=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!n||t.disabled||"reset"==o||"button"==o||("checkbox"==o||"radio"==o)&&!t.checked||("submit"==o||"image"==o)&&t.form&&t.form.clk!=t||"select"==s&&-1==t.selectedIndex))return null;if("select"==s){var r=t.selectedIndex;if(0>r)return null;for(var a=[],l=t.options,c="select-one"==o,d=c?r+1:l.length,h=c?r:0;d>h;h++){var u=l[h];if(u.selected){var p=u.value;if(p||(p=u.attributes&&u.attributes.value&&!u.attributes.value.specified?u.text:u.value),c)return p;a.push(p)}}return a}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,o=this.tagName.toLowerCase();i.test(n)||"textarea"==o?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==o?this.selectedIndex=-1:"file"==n?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(n)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=t;else if("option"==this.tagName.toLowerCase()){var n=e(this).parent("select");t&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}(jQuery),define("jquery.form",["jquery"],function(){}),define("oroui/js/tools/form-to-ajax-options",["jquery","jquery.form"],function(e){function t(t){var i,n,o,s;for(i=e.param(t).split("&"),n=[],o=0;o<i.length;o+=1)i[o]=i[o].replace(/\+/g," "),s=i[o].split("="),n.push([decodeURIComponent(s[0]),decodeURIComponent(s[1])]);return n}function i(i,n,o){var s,r,a;for(s=new FormData,a=0;a<i.length;a+=1)s.append(i[a].name,i[a].value);if(n)for(r=t(n),a=0;a<r.length;a+=1)r[a]&&s.append(r[a][0],r[a][1]);return o=e.extend(!0,{},e.ajaxSettings,o,{contentType:!1,processData:!1,cache:!1,data:null,beforeSend:function(e,t){t.data=s}})}function n(t,n){var o,s,r,a,l,c,d;return s=t.attr("action"),o=t.attr("method"),r="string"==typeof s?e.trim(s):"",r=r||window.location.href||"",r&&(r=(r.match(/^([^#]+)/)||[])[1]),n=e.extend(!0,{url:r,type:o||"GET"},n||{}),a=t.formToArray(),n.data&&(l=n.data,d=e.param(n.data)),c=e.param(a),d&&(c=c?c+"&"+d:d),"GET"===n.type.toUpperCase()?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+c,n.data=null):n.data=c,(t.find('input[type=file]:enabled[value!=""]').length>0||"multipart/form-data"===t.attr("enctype")||"multipart/form-data"===t.attr("encoding"))&&(n=i(a,l,n),n.type=o||"POST"),n}return n}),define("oroui/js/app/views/page-view",["jquery","./base/view","oroui/js/mediator","oroui/js/tools/form-to-ajax-options"],function(e,t,i,n){var o;return o=t.extend({events:{"submit form":"onSubmit","click.action.data-api [data-action=page-refresh]":"onRefreshClick"},listen:{"page:beforeChange mediator":"removeErrorClass","page:error mediator":"addErrorClass"},removeErrorClass:function(){this.$el.removeClass("error-page")},addErrorClass:function(){this.$el.addClass("error-page")},onSubmit:function(t){var o,s,r,a,l;if(!t.isDefaultPrevented()){if(o=e(t.target),o.data("nohash")&&!o.data("sent"))return o.data("sent",!0),void 0;t.preventDefault(),o.data("sent")||(o.data("sent",!0),s=o.attr("action"),r=o.attr("method")||"GET",s&&"GET"===r.toUpperCase()?(a=o.serialize(),a&&(s+=(-1===s.indexOf("?")?"?":"&")+a),i.execute("redirectTo",{url:s}),o.removeData("sent")):(l=n(o,{complete:function(){o.removeData("sent")}}),i.execute("submitPage",l)))}},onRefreshClick:function(){i.execute("refreshPage")}})}),require(["oroui/js/app/controllers/base/controller","oroui/js/app/views/page-view"],function(e,t){e.addToReuse("page",t,{el:"body",keepElement:!0,regions:{mainContainer:"#container",mainMenu:"#main-menu",userMenu:"#top-page .user-menu",breadcrumb:"#breadcrumb",loadingMask:"#main .hash-loading-mask",messages:"#flash-messages .flash-messages-holder"}}),e.loadBeforeAction(["oroui/js/app/views/page/content-view"],function(t){e.addToReuse("content",t,{el:"mainContainer"})}),e.loadBeforeAction(["oroui/js/app/views/page/main-menu-view","oroui/js/app/views/page/breadcrumb-view"],function(t,i){e.addToReuse("breadcrumb",i,{el:"breadcrumb"}),e.addToReuse("mainMenu",t,{el:"mainMenu"})}),e.loadBeforeAction(["oroui/js/app/views/page/user-menu-view"],function(t){e.addToReuse("userMenu",t,{el:"userMenu"})}),e.loadBeforeAction(["oroui/js/mediator","oroui/js/app/views/page/loading-mask-view"],function(t,i){e.addToReuse("loadingMask",{compose:function(){var e;e=new i({autoRender:!0,region:"loadingMask"}),t.setHandler("showLoading",e.show,e),t.setHandler("hideLoading",e.hide,e),this.view=e}})}),e.loadBeforeAction(["oroui/js/app/views/page/messages-view"],function(t){e.addToReuse("messages",t,{el:"messages"})}),e.loadBeforeAction(["oroui/js/mediator","oroui/js/app/views/page/debug-toolbar-view"],function(t,i){e.addToReuse("debugToolbar",{compose:function(){var e;t.execute("retrieveOption","debug")&&(e=new i({el:"body .sf-toolbar"}),t.setHandler("updateDebugToolbar",e.updateToolbar,e),this.view=e)}})})}),define("oroui/js/app/modules/views",function(){}),require(["oroui/js/mediator","oroui/js/app/controllers/base/controller"],function(e,t){t.loadBeforeAction(["oroui/js/messenger"],function(t){e.setHandler("addMessage",t.addMessage,t),e.setHandler("showMessage",t.notificationMessage,t),e.setHandler("showFlashMessage",t.notificationFlashMessage,t),e.setHandler("showErrorMessage",t.showErrorMessage,t)})}),define("oroui/js/app/modules/messenger",function(){}),define("oroui/js/app/application",["chaplin","oroui/js/mediator"],function(e,t){var i;return i=e.Application.extend({initialize:function(e){this.options=e||{},t.setHandler("retrieveOption",this.retrieveOption,this),t.setHandler("retrievePath",this.retrievePath,this),t.setHandler("combineFullUrl",this.combineFullUrl,this),t.setHandler("combineRouteUrl",this.combineRouteUrl,this),t.setHandler("showLoading",function(){}),t.setHandler("hideLoading",function(){}),t.setHandler("redirectTo",function(){}),t.setHandler("refreshPage",function(){}),i.__super__.initialize.apply(this,arguments),t.setHandler("changeRoute",function(e,i){i=i||{},i.changeURL=!0,this.router.changeURL(null,null,e,i),t.trigger("route:change")},this)},retrieveOption:function(e){return this.options.hasOwnProperty(e)?this.options[e]:void 0},retrievePath:function(e){return e.replace(this.router.removeRoot,"").replace(/^\//i,"")},combineRouteUrl:function(e,t){var i;return"object"==typeof e&&(t=e.query,e=e.path),e=("/"!==e[0]?"/":"")+e,i=e+(t?"?"+t:"")},combineFullUrl:function(e,t){var i,n,o;return n=this.options.root||"/",o=this.combineRouteUrl(e,t),i="/"===o[0]?n+o.slice(1):n+o}})}),define("oroui/js/app/routes",[],function(){return[["*pathname","page#index"]]}),define("oroui/js/app/models/base/collection",["chaplin","./model"],function(e,t){var i;return i=e.Collection.extend({model:t})}),define("oroui/js/app/views/base/page-region-view",["underscore","chaplin","./view"],function(e,t,i){var n;return n=i.extend({listen:{"page:update mediator":"onPageUpdate"},data:null,pageItems:[],onPageUpdate:function(t,i){this.data=e.pick(t,this.pageItems),this.actionArgs=i,this.render(),this.data=null,this.actionArgs=null},render:function(){var e;e=this.getTemplateData(),e&&n.__super__.render.call(this)},getTemplateData:function(){return this.data}})}),define("oroui/js/app/views/page/breadcrumb-view",["underscore","./../base/page-region-view"],function(e,t){var i;return i=t.extend({listen:{"mainMenuUpdated mediator":"onMenuUpdate"},pageItems:["breadcrumb"],template:function(e){return e.breadcrumb},breadcrumbsTemplate:e.template('<ul class="breadcrumb"><% for (var i =0; i < breadcrumbs.length; i++) { %><li><%- breadcrumbs[i] %><%if (i+1 != breadcrumbs.length) { %><span class="divider">/&nbsp;</span><% } %></li><% } %></ul>'),data:null,onMenuUpdate:function(e){var t=e.getActiveItems();t.length&&(this.data={breadcrumb:this.breadcrumbsTemplate({breadcrumbs:t})},this.render(),this.data=null)},getTemplateData:function(){return this.data}})}),define("oroui/js/app/views/page/content-view",["oroui/js/mediator","./../base/page-region-view"],function(e,t){var i;return i=t.extend({template:function(e){return e.content},pageItems:["content","scripts"],render:function(){var i;i=this.getTemplateData(),i&&(e.execute("layout:dispose",this.$el),t.prototype.render.call(this),i.scripts.length&&this.$el.append(i.scripts))}})}),define("oroui/js/app/views/page/main-menu-view",["./../base/page-region-view","underscore","jquery","oroui/js/mediator"],function(e,t,i,n){var o;return o=e.extend({template:function(e){return e.mainMenu},pageItems:["mainMenu","currentRoute"],initialize:function(e){this.routeMatchSearchers=[],this.routeMatchedMenuItemsCache={},o.__super__.initialize.call(this,e)},render:function(){var e,i;e=this.getTemplateData(),i=this.getCurrentRoute(e),e?t.isUndefined(e.mainMenu)||(o.__super__.render.call(this),this.initRouteMatches()):this.initRouteMatches(),this.toggleActiveMenuItem(i),n.trigger("mainMenuUpdated",this),this.$el.trigger("mainMenuUpdated")},getCurrentRoute:function(e){return e&&e.currentRoute||n.execute("retrieveOption","startRouteName")},initRouteMatches:function(){var e,n;this.routeMatchSearchers=[],this.routeMatchedMenuItemsCache={},n=function(e,t){var i;return e.indexOf("*")>-1||e.indexOf("/")>-1?(e=e.indexOf("*")>-1?"^"+e.replace("*","\\w+")+"$":e.replace(/^\/|\/$/g,""),i=function(i){var n=new RegExp(e,"ig");return n.test(i)?t:void 0}):i=function(i){return i===e?t:void 0},i},e=this,this.$el.find("[data-routes]").each(function(o,s){var r=i(s);t.each(r.data("routes"),function(t){e.routeMatchSearchers.push(n(t,r))})})},getMatchedMenuItem:function(e){var o;return this.routeMatchedMenuItemsCache.hasOwnProperty(e)?o=this.routeMatchedMenuItemsCache[e]:(o=this.$el.find('[data-route="'+e+'"]'),o.length||t.find(this.routeMatchSearchers,function(t){return o=t(e)})),o&&o.length&&(this.routeMatchedMenuItemsCache[e]=o,o.length>1&&(o=t.find(o,function(e){var t=i(e).find("a[href]:first")[0];return t?n.execute("compareUrl",t.pathname):!1}))),i(o)},toggleActiveMenuItem:function(e){var i=this.getMatchedMenuItem(e);t.isUndefined(i)||(this.$el.find(".active").removeClass("active"),i.addClass("active"),i.parents(".dropdown").addClass("active"))},getActiveItems:function(){var e=[];return this.$el.find(".active").each(function(t,n){e.push(i.trim(i(n).find(".title").first().text()))}),e}})}),define("oroui/js/app/views/page/user-menu-view",["./../base/page-region-view"],function(e){var t;return t=e.extend({template:function(e){return e.userMenu},pageItems:["userMenu"]})}),define("oroui/js/loading-mask",["jquery","underscore","orotranslation/js/translator","./app/views/base/view"],function(e,t,i,n){var o;return o=n.extend({displayed:!1,liveUpdate:!0,className:"loading-mask",loadingHint:i("Loading..."),template:t.template('<div class="loading-wrapper"></div><div class="loading-frame"><div class="box well"><div class="loading-content"><%= loadingHint %></div></div></div>'),initialize:function(i){var n,s=i||{};t.has(s,"liveUpdate")&&(this.liveUpdate=s.liveUpdate),this.liveUpdate&&(n=e.proxy(this.updatePos,this),e(window).on("resize."+this.cid,n).on("scroll."+this.cid,n)),o.__super__.initialize.apply(this,arguments)},dispose:function(){e(window).off("."+this.cid),o.__super__.dispose.call(this)},show:function(){return this.$el.show(),this.displayed=!0,this.resetPos().updatePos(),this},updatePos:function(){if(!this.displayed)return this;var t=this.$(".loading-wrapper"),i=this.$(".loading-frame"),n=i.height(),o=i.width(),s=t.outerWidth(),r=t.outerHeight();n>r&&t.css("height",n+"px");var a=n/2,l=r/2-a,c=(s-o)/2,d=e(window).outerHeight(),h=t.offset().top;return d>h&&h+l+n>d&&(l=(d-h)/2-a),l=n>0?l:0,l=r-n>l?l:r-n,c=c>0?Math.round(c):0,l=l>0?Math.round(l):0,i.css("top",l+"px"),i.css("left",c+"px"),this},resetPos:function(){return this.$(".loading-wrapper").css("height","100%"),this},hide:function(){return this.$el.hide(),this.displayed=!1,this.resetPos(),this},render:function(){return this.$el.empty(),this.$el.append(this.template({loadingHint:this.loadingHint})),this.hide(),this}})}),define("oroui/js/app/views/page/loading-mask-view",["jquery","oroui/js/loading-mask"],function(e,t){var i;return i=t.extend({listen:{"page:beforeChange mediator":"show","page:afterChange mediator":"hide"},show:function(){e.isActive(!0),i.__super__.show.call(this)},hide:function(){i.__super__.hide.call(this),e.isActive(!1)}})}),define("oroui/js/messenger",["jquery","underscore","oroui/js/tools","bootstrap"],function(e,t,i){var n={container:"",delay:!1,template:e.noop,insertMethod:"appendTo"},o=[],s="flash",r=function(i,o,s){var r=t.extend({},n,s||{}),a=e(r.template({type:i,message:o}))[r.insertMethod](r.container),l=r.delay||r.flash&&5e3,c={close:t.bind(a.alert,a,"close")};return l&&t.delay(c.close,l),c},a=function(){var t=localStorage?localStorage.getItem(s):e.cookie(s);return JSON.parse(t)||[]},l=function(t){var i=JSON.stringify(t);return localStorage?localStorage.setItem(s,i):e.cookie(s,i),!0};return{notificationMessage:function(t,i,s){var a=(s||{}).container||n.container,l=Array.prototype.slice.call(arguments),c={close:e.noop};return a&&e(a).length?c=r.apply(null,l):o.push([l,c]),c},notificationFlashMessage:function(e,i,n){return this.notificationMessage(e,i,t.extend({flash:!0},n))},showErrorMessage:function(e,n){var o=e;return t.isUndefined(n)||t.isNull(n)||(t.isUndefined(console)||console.error(t.isUndefined(n.stack)?n:n.stack),i.debug&&(t.isUndefined(n.message)?!t.isUndefined(n.errors)&&t.isArray(n.errors)?o+=": "+n.errors.join():t.isString(n)&&(o+=": "+n):o+=": "+n.message)),this.notificationFlashMessage("error",o)},setup:function(i){t.extend(n,i);var s=a();for(e.each(s,function(e,t){o.push(t)}),l([]);o.length;){var c=o.shift();t.extend(c[1],r.apply(null,c[0]))}},addMessage:function(i,n,s){var r=[i,n,t.extend({flash:!0},s)],a={close:e.noop};o.push([r,a])}}}),define("oroui/js/app/views/page/messages-view",["underscore","oroui/js/messenger","./../base/page-region-view"],function(e,t,i){var n;return n=i.extend({pageItems:["flashMessages"],render:function(){this.actionArgs&&this.data&&(this.$el.empty(),this.actionArgs.options.fromCache!==!0&&this._addMessages(this.data.flashMessages))},_addMessages:function(i){e.each(i,function(i,n){e.each(i,function(e){t.notificationFlashMessage(n,e)})})}})}),define("oroui/js/app/views/page/debug-toolbar-view",["jquery","underscore","oroui/js/mediator","./../base/page-region-view"],function(e,t,i,n){var o;return o=n.extend({listen:{"page:error mediator":"onPageUpdate"},onPageUpdate:function(e,t,n){return n?(this.updateToolbar(n),void 0):(this.$el.empty(),i.trigger("layout:adjustHeight"),void 0)},updateToolbar:function(n){var o,s,r;o=i.execute("retrieveOption","root"),r=n.getResponseHeader("x-debug-token"),s=o+"_wdt/"+r,e.get(s,t.bind(this.render,this,r,s))},render:function(e,t,n){var o;n&&(o="sfwdt"+e,this.$el.appendTo("body").attr("id",o).attr("data-sfurl",t),this.$el.html(n),i.trigger("layout:adjustHeight"))}})}),define("oroui/js/modal",["underscore","backbone","orotranslation/js/translator","backbone-bootstrap-modal"],function(e,t,i){var n,o;return o=t.$,n=t.BootstrapModal.extend({defaults:{okText:i("OK"),cancelText:i("Cancel")},className:"modal",initialize:function(t){t=t||{},e.defaults(t,this.defaults),n.__super__.initialize.call(this,t)},open:function(i){this.isRendered||this.render(),this.delegateEvents();var n=this,s=this.$el;s.modal(e.extend({keyboard:this.options.allowCancel,backdrop:this.options.allowCancel?!0:"static"},this.options.modalOptions)),s.one("shown",function(){n.options.focusOk&&s.find(".btn.ok").focus(),n.options.content&&n.options.content.trigger&&n.options.content.trigger("shown",n),n.trigger("shown")});var r=t.BootstrapModal.count,a=o(".modal-backdrop:eq("+r+")"),l=parseInt(a.css("z-index"),10),c=parseInt(a.css("z-index"),10)+1;return a.css("z-index",l+r),this.$el.css("z-index",c+r),this.options.allowCancel&&(a.one("click",function(){n.options.content&&n.options.content.trigger&&n.options.content.trigger("cancel",n),n.trigger("cancel")}),o(document).one("keyup.dismiss.modal"+this._eventNamespace(),function(e){27===e.which&&n.trigger("cancel"),n.options.content&&n.options.content.trigger&&27===e.which&&n.options.content.trigger("shown",n)})),this.once("cancel",function(){n.close()}),t.BootstrapModal.count++,i&&n.on("ok",i),this.once("cancel",e.bind(function(){this.$el.trigger("hidden")},this)),this},dispose:function(){this.disposed||(delete this.$content,o(document).off(this._eventNamespace()),n.__super__.dispose.call(this))},setContent:function(e){this.options.content=e,this.$el.find(".modal-body").html(e)},_eventNamespace:function(){return".delegateEvents"+this.cid}})}),define("oroui/js/delete-confirmation",["underscore","orotranslation/js/translator","oroui/js/modal"],function(e,t,i){return i.extend({className:"modal oro-modal-danger",okButtonClass:"btn-danger",initialize:function(n){n=e.extend({title:t("Delete Confirmation"),okText:t("Yes, Delete"),cancelText:t("Cancel")},n),arguments[0]=n,i.prototype.initialize.apply(this,arguments)}})}),define("oroui/js/error",["underscore","orotranslation/js/translator","jquery","routing","oroui/js/tools","oroui/js/modal"],function(e,t,i,n,o,s){var r={headerServerError:t("Server error"),headerUserError:t("User input error"),message:t("Error! Incorrect server response.")},a="user_input_error",l={handle:function(e,t,i){var n=i.enforce||!1;401===t.status?this._processRedirect():4===t.readyState&&o.debug&&("function"!=typeof t.error||n)&&this.modalHandler(t)},modalHandler:function(e){var t,i,n,l;i=r.message,o.debug&&(i+="<br><b>Debug:</b>"+e.responseText),n=e.responseJSON||{},l=n.type,t=new s({title:l===a?r.headerUserError:r.headerServerError,content:n.message||i,cancelText:!1}),t.open()},_processRedirect:function(){var e="";window.location.href=n.generate("oro_user_security_login")+e}};return i(document).ajaxError(e.bind(l.handle,l)),l}),define("oroui/js/scrollspy",["require","jquery","underscore","oroui/js/tools","oroui/js/mediator"],function(e){var t=e("jquery"),i=e("underscore"),n=e("oroui/js/tools");e("oroui/js/mediator");var o={};return o.init=function(e){return n.isMobile()?(this._replaceWithCollapse(e),void 0):(e.is("body")||this.makeUnique(e),t(".scrollspy .responsive-section:nth-of-type(1) .scrollspy-title").css("display","none"),e.find('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())}),void 0)},o.makeUnique=function(e){var n,o;o=e.find('[data-spy="scroll"]'),o.length&&(n=e.attr("id"),n||(n=i.uniqueId("scrollspy"),e.attr("id",n)),o.each(function(){var o,s,r,a;a=i.uniqueId("-"),o=t(this),s=o.attr("href"),s&&(s=s.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("target")||s||"",o.data("target","#"+n+" "+r),e.find(r+" .nav li > a").each(function(){var i,n,o;i=t(this),o=i.data("target")||i.attr("href"),/^#\w/.test(o)&&(n=e.find(o)),o+=a,i.attr("href",o),n.attr("id",o.substr(1))})}))},o._replaceWithCollapse=function(e){e.find('[data-spy="scroll"]').each(function(){var e=t(this);e.removeAttr("data-spy").addClass("accordion"),e.find(".scrollspy-title").each(function(e){var i=t(this),n="#"+i.next().attr("id")+"+",o=t(n);i.removeClass("scrollspy-title").addClass("accordion-toggle").attr({"data-toggle":"collapse","data-target":n}),i.parent().addClass("accordion-group"),o.addClass("accordion-body collapse"),i.wrap('<div class="accordion-heading"></div>'),e>0?i.addClass("collapsed"):o.addClass("in").data("toggle",!1),o.on("focusin",function(){o.collapse("show")})})})},o.adjust=function(){n.isMobile()||t('[data-spy="scroll"]').each(function(){var e=t(this),i=e.innerHeight(),n=e.find(".responsive-section").length>1;e.find(".responsive-section:last").each(function(){var e=t(this),o=e.find(".scrollspy-title").outerHeight(),s=n?o+i:i,r=e.height("auto").height();s>r&&e.outerHeight(s)}),e.data("scrollspy")&&e.scrollspy("refresh").scrollspy("process")})},o.top=function(){n.isMobile()||t('[data-spy="scroll"]').each(function(){var e=t(this),i=e.data("target"),n=t(i);n.each(function(){var i=t(this),n=i.find("li.active:first a").attr("href"),o=t(n),s=o.position().top;e.scrollTop(s)})})},o}),define("oroui/js/widget-manager",["oroui/js/mediator"],function(e){var t={widgets:{},aliases:{},resetWidgets:function(){this.widgets={},this.aliases={}},addWidgetInstance:function(t){this.widgets[t.getWid()]=t,e.trigger("widget_registration:wid:"+t.getWid(),t),t.getAlias()&&(this.aliases[t.getAlias()]=t.getWid(),e.trigger("widget_registration:"+t.getAlias(),t))},getWidgetInstance:function(t,i){this.widgets.hasOwnProperty(t)?i(this.widgets[t]):e.once("widget_registration:wid:"+t,i)},getWidgetInstanceByAlias:function(t,i){this.aliases.hasOwnProperty(t)?this.getWidgetInstance(this.aliases[t],i):e.once("widget_registration:"+t,i)},removeWidget:function(e){delete this.widgets[e]}};return e.on("widget_initialize",function(e){t.addWidgetInstance(e)}),e.on("widget_remove",function(e){t.removeWidget(e)}),t}),define("oroui/js/widget-control-initializer",["jquery","underscore","oroui/js/widget-manager","oroui/js/mediator"],function(e,t,i,n){return{init:function(e){var t=this;e.find("[data-widget-type]").each(function(e,i){t.initWidgetControlElement(i)})},initWidgetControlElement:function(t){if(t=e(t),!t.data("widget-initialized")){t.data("widget-initialized",!0);var o=t.data("widget-type"),s=t.data("widget-event")||"click";require(["oro/"+o+"-widget"],function(o){e(t).on(s,function(s){var r=e.extend(!0,{},t.data("widget-options")),a=t.data("widget-multiple"),l=t.data("widget-reload-grid-name"),c=t.data("widget-reload-widget-alias");if(!r.url&&t.data("url")&&(r.url=t.data("url")||t.attr("href")),!a){if(t.data("widget-opened"))return;t.data("widget-opened",!0)}var d=new o(r),h=t.data("widget-reload-event")||"widget_success:"+(d.getAlias()||d.getWid());n.on(h,function(){i.getWidgetInstanceByAlias(c,function(e){e.loadContent()}),l&&n.trigger("datagrid:doRefresh:"+l)}),a||d.on("widgetRemove",function(){t.data("widget-opened",!1)}),d.render(),s.preventDefault(),s.stopPropagation()})})}}}}),define("oroui/js/responsive-jquery-widget",["jquery","underscore","jquery-ui"],function(e,t){var i=60,n=1280-i,o=1360-i,s=1600-i;return e.widget("oroui.responsive",{options:{sectionClassName:"responsive-section",cellClassName:"responsive-cell",blockClassName:"responsive-block",addedClassesDataName:"responsive-classes",sectionNoBlocksModifier:"responsive-section-no-blocks",cellNoBlocksModifier:"responsive-cell-no-blocks",sectionHasBlocksModifier:"responsive-section-has-blocks",cellHasBlocksModifier:"responsive-cell-has-blocks",sizes:[{modifierClassName:"responsive-small",width:{from:0,to:n}},{modifierClassName:"responsive-medium",width:{from:n+1,to:o}},{modifierClassName:"responsive-big",width:{from:o+1,to:s}},{modifierClassName:"",width:{from:s+1,to:null}}]},_init:function(){this.$sections=this._getSections(),this._update()
},_update:function(){var t=this,i=this.$sections;i.each(function(i,n){t._updateSection(e(n))})},_updateSection:function(t){var i=this,n=this.options,o=this._getCellsFromSection(t),s=t.outerWidth(),r=this._getSize(s),a=[r.modifierClassName],l=!0;this._updateClasses(t,a),o.each(function(t,o){var s=e(o);i._updateCell(s),s.hasClass(n.cellNoBlocksModifier)||(l=!1)}),l?t.addClass(n.sectionNoBlocksModifier):t.addClass(n.sectionHasBlocksModifier)},_updateCell:function(e){var t=this.options,i=this._getBlocksFromCell(e),n=[];0===i.length&&n.push(t.cellNoBlocksModifier),this._updateClasses(e,n)},_getSections:function(){var e;return e=this.element.hasClass(this.options.sectionClassName)?this.element.parent():this.element,e.find("."+this.options.sectionClassName)},_getCellsFromSection:function(e){var t=e.find("."+this.options.cellClassName+":first"),i=t.siblings();return i.add(t)},_getBlocksFromCell:function(e){var t=e.find("."+this.options.blockClassName+":first"),i=t.siblings();return i.add(t)},_getSize:function(e){var i=t.find(this.options.sizes,function(t){return e>=t.width.from&&(e<=t.width.to||null===t.width.to)});return i},_updateClasses:function(e,t){this._clearClasses(e),this._addClasses(e,t)},_clearClasses:function(e){var i=e.data(this.options.addedClassesDataName);t.forEach(i,function(t){e.removeClass(t)},this),e.data(this.options.addedClassesDataName,null)},_addClasses:function(e,i){t.forEach(i,function(t){e.addClass(t)},this),e.data(this.options.addedClassesDataName,i)}}),e}),define("oroui/js/layout",["require","jquery","underscore","bootstrap","orotranslation/js/translator","oroui/js/scrollspy","oroui/js/widget-control-initializer","oroui/js/mediator","oroui/js/tools","jquery-ui","jquery-ui-timepicker","jquery.uniform","oroui/js/responsive-jquery-widget"],function(e){var t,i,n,o,s=e("jquery"),r=e("underscore"),a=(e("bootstrap"),e("orotranslation/js/translator")),l=e("oroui/js/scrollspy"),c=e("oroui/js/widget-control-initializer"),d=e("oroui/js/mediator");return e("oroui/js/tools"),e("jquery-ui"),e("jquery-ui-timepicker"),e("jquery.uniform"),e("oroui/js/responsive-jquery-widget"),n=window.document,o=window.console,i=[],t={init:function(e){var t;return e=s(e),this.styleForm(e),l.init(e),e.find('[data-toggle="tooltip"]').tooltip(),this.initPopover(e.find("label")),c.init(e),t=this.initPageComponents(e)},initPageComponents:function(t){var i,n;return i=[],n=s.Deferred(),t.find("[data-page-component-module]").each(function(){var t,n,o,r;t=s(this),n=t.data("pageComponentModule"),o=t.data("pageComponentOptions"),o._sourceElement=t,t.removeData("pageComponentModule").removeData("pageComponentOptions").removeAttr("data-page-component-module").removeAttr("data-page-component-options"),r=s.Deferred(),e([n],function(e){"function"==typeof e.init?r.resolve(e.init(o)):r.resolve(e(o))},function(){r.resolve()}),i.push(r.promise())}),s.when.apply(s,i).always(function(){var e=r.flatten(r.toArray(arguments),!0);s.when.apply(s,e).always(function(){var e=r.compact(r.flatten(r.toArray(arguments),!0));n.resolve(e)})}),n.promise()},initPopover:function(e){var t=e.find('[data-toggle="popover"]');t.not('[data-close="false"]').each(function(e,t){var i=s(t).data("content");i+='<i class="icon-remove popover-close"></i>',s(t).data("content",i)}),t.popover({animation:!1,delay:{show:0,hide:0},html:!0,container:!1,trigger:"manual"}).on("click.popover",function(e){s(this).popover("toggle"),e.preventDefault()}),s("body").on("click.popover-hide",function(e){var i=s(e.target);t.each(function(){s(this).is(i)||0!==s(this).has(i).length||0!==s(".popover").has(i).length&&!i.hasClass("popover-close")||s(this).popover("hide")})}).on("click.popover-prevent",".popover",function(e){"a"!==e.target.tagName.toLowerCase()&&e.preventDefault()}).on("focus.popover-hide","select, input, textarea",function(){t.popover("hide")}),d.once("page:request",function(){s("body").off(".popover-hide .popover-prevent")})},hideProgressBar:function(){var e=s("#progressbar");e.is(":visible")&&(e.hide(),s("#page").show())},styleForm:function(e){var t;s.isPlainObject(s.uniform)&&(t=e.find("select:not(.select2)"),t.uniform(),t.is(".error:not([multiple])")&&t.removeClass("error").closest(".selector").addClass("error"),t=e.find("input:file"),t.uniform({fileDefaultHtml:a("Please select a file...")}),t.is(".error")&&t.removeClass("error").closest(".uploader").addClass("error"))},unstyleForm:function(e){var t;s.isPlainObject(s.uniform)&&(t=e.find("select:not(.select2)"),s.uniform.restore(t)),e.find(".select2-container").each(function(){var e=s(this);e.data("select2")&&e.select2("destroy")})},onPageRendered:function(e){n.pageReady?r.defer(e):i.push(e)},pageRendering:function(){n.pageReady=!1,i=[]},pageRendered:function(){n.pageReady=!0,r.each(i,function(e){try{e()}catch(t){o&&"function"==typeof o.log&&o.log(t)}}),i=[]},updateResponsiveLayout:function(){r.defer(function(){s(n).responsive()})}},d.on("grid_load:complete",function(e,t){c.init(t)}),d.on("grid_render:complete",function(e){c.init(e)}),t}),require(["oroui/js/mediator"],function(e){e.once("page:afterChange",function(){setTimeout(function(){document["page-rendered"]=!0,e.trigger("page-rendered")},50)})}),require(["jquery","underscore","orotranslation/js/translator","oroui/js/tools","oroui/js/mediator","oroui/js/layout","oroui/js/delete-confirmation","oroui/js/scrollspy","bootstrap","jquery-ui","jquery-ui-timepicker"],function(e,t,i,n,o,s,r,a){e(function(){var i=e("#page-title");i.size()&&(document.title=e("<div.>").html(e("#page-title").text()).text()),s.hideProgressBar(),e("div.side-nav").each(function(){var t=e(this),i=e(t).parent().height()-18;e(t).height(i),e(this).find("span.maximize-bar").click(function(){if(e(t).hasClass("side-nav-open")||e(t).hasClass("side-nav-locked"))e(t).removeClass("side-nav-locked side-nav-open"),e(t).hasClass("left-panel")?e(t).parent("div.page-container").removeClass("left-locked"):e(t).parent("div.page-container").removeClass("right-locked"),e(t).find(".bar-tools").css({height:"auto",overflow:"visible"});else{e(t).addClass("side-nav-open");var i=e("div.page-container").height()-20,n=e(t).find(".bar-tools").height();e(t).height(i),n>i&&e(t).find(".bar-tools").height(i-20).css({overflow:"auto"})}}),e(this).find("span.lock-bar").click(function(){e(this).hasClass("lock-bar-locked")?(e(t).addClass("side-nav-open").removeClass("side-nav-locked"),e(t).hasClass("left-panel")?e(t).parent("div.page-container").removeClass("left-locked"):e(t).parent("div.page-container").removeClass("right-locked")):(e(t).addClass("side-nav-locked").removeClass("side-nav-open"),e(t).hasClass("left-panel")?e(t).parent("div.page-container").addClass("left-locked"):e(t).parent("div.page-container").addClass("right-locked")),e(this).toggleClass("lock-bar-locked")}),e(this).find(".bar-tools li").each(function(){var t=e(this);e(t).find(".sn-opener").click(function(){e(t).find("div.nav-box").fadeToggle("slow");var i=e("#bar-drop-overlay"),n=e("#page"),o=n.height(),s=n.children(".wrapper").width();i.width(s).height(o),i.toggleClass("bar-open-overlay")}),e(t).find("span.close").click(function(){e(t).find("div.nav-box").fadeToggle("slow"),e("#bar-drop-overlay").toggleClass("bar-open-overlay")}),e("#bar-drop-overlay").on({click:function(){e(t).find("div.nav-box").animate({opacity:0,display:"none"},function(){e(this).css({opacity:1,display:"none"})}),e("#bar-drop-overlay").removeClass("bar-open-overlay")}})}),e(t).find("ul.bar-tools > li").each(function(){var t=e(this);e(t).find("span.open-bar-item").click(function(){e(t).find("div.nav-content").slideToggle(),e(t).toggleClass("open-item")})})});var n=e(".oro-dropdown-toggle");n.click(function(){var t=e(this).parent().toggleClass("open");t.hasClass("open")&&(t.find(".dropdown-menu").focus(),t.find("input[type=text]").first().focus().select())}),e(document).on("focus.dropdown.data-api","[data-toggle=dropdown]",t.debounce(function(t){e(t.target).parent().find("input[type=text]").first().focus()},10)),e(document).on("keyup.dropdown.data-api",".dropdown-menu",function(t){27===t.keyCode&&e(t.currentTarget).parent().removeClass("open")}),e(document).on("keydown","form select",function(t){13===t.keyCode&&e(t.target.form).submit()}),e(document).on("focus",".select2-focusser, .select2-input",function(){e(".hasDatepicker").datepicker("hide")});var r=".dropdown.open, .dropdown .open, .oro-drop.open, .oro-drop .open";e("html").click(function(t){var i=e(t.target),n=null;n=i.hasClass("dropdown")||i.hasClass("oro-drop")?i:i.closest(".dropdown, .oro-drop"),e(r).not(n).removeClass("open")}),e("#main-menu").mouseover(function(){e(r).removeClass("open")}),o.on("page:beforeChange",function(){e(".pin-menus.dropdown.open, .nav .dropdown.open").removeClass("open"),e(".dropdown:hover > .dropdown-menu").hide().addClass("manually-hidden")}),o.on("page:afterChange",function(){e(".dropdown .dropdown-menu.manually-hidden").css("display","")}),e(document).on("click.collapse.data-api",'[data-action^="accordion:"]',function(t){var i=e(t.target),n=i.data("action").slice(10),o={"expand-all":"show","collapse-all":"hide"}[n],s=e(i.attr("data-target")||t.preventDefault()||i.attr("href"));s.find(".collapse").collapse({toggle:!1}).collapse(o)}),e(document).on("shown.collapse.data-api hidden.collapse.data-api",".collapse",function(t){var i=e(t.target).closest(".accordion-group").find("[data-toggle=collapse]").first();i["shown"===t.type?"removeClass":"addClass"]("collapsed")})}),e(function(){var i,r,l,c,d,h,u,p;n.isMobile()?c=function(){s.updateResponsiveLayout()}:(i=e("#bottom-anchor"),r=!1,l=function(){r||(r=e(".scrollable-container").filter(":parents(.ui-widget)"),n.isMobile()?(r.css("overflow","hidden"),r.last().css("overflow-y","auto")):r.css("overflow","inherit").last().css("overflow-y","auto"))},d=e("#main"),h=e("#top-page"),u=e("#left-panel"),p=e("#right-panel"),c=function(){l(),d.width(h.width()-u.width()-p.width()),s.updateResponsiveLayout();var t=e(".sf-toolbar:visible").height()||0,n=i.position().top,o=e("#footer:visible").height()||0,c=1;e(r.get().reverse()).each(function(i,s){s=e(s),s.height(n-s.position().top-o-t+c)}),u.add(p).height(d.height()),a.adjust();var f=2,m=e(".sf-toolbar").height()+e("#footer").height();e("#dialog-extend-fixed-container").css({position:"fixed",bottom:m+f,zIndex:9999}),e(".sidebar").css({"margin-bottom":m})},i.length||(i=e('<div id="bottom-anchor"/>').css({position:"fixed",bottom:"0",left:"0",width:"1px",height:"1px"}).appendTo(e(document.body))),e(".sf-toolbar").length&&(c=function(){var i=c,n=function(o){e(".sf-toolbar").children().length?(e("body").addClass("dev-mode"),t.delay(i,10)):100>o&&t.delay(n,500,o+1)};return t.wrap(c,function(t){e("body").removeClass("dev-mode"),t(),n(0)})}()));var f=function(){r=!1,c()};s.onPageRendered(c),e(window).on("resize",t.debounce(c,40)),o.on("page:afterChange",f),o.on("layout:adjustReloaded",f),o.on("layout:adjustHeight",c),o.on("datagrid:rendered datagrid_filters:rendered widget_remove",a.adjust),c()}),e(document).on("click",".action-button",function(){var t=e('input[name = "input_action"]');t.val(e(this).attr("data-action")),e("#"+t.attr("data-form-id")).submit()}),e(function(){e(document).on("click",".remove-button",function(){var t=e(this);if(!t.is("[disabled]")&&!t.hasClass("disabled")){var n,s=t.data("message");n=new r({content:s}),n.on("ok",function(){o.execute("showLoading"),e.ajax({url:t.data("url"),type:"DELETE",success:function(){t.trigger("removesuccess");var e=t.data("redirect");e?(o.execute("addMessage","success",t.data("success-message")),o.execute("compareUrl",e)?o.execute("refreshPage"):o.execute("redirectTo",{url:e})):(o.execute("hideLoading"),o.execute("showFlashMessage","success",t.data("success-message")))},error:function(){console.log(5);var e;e=t.data("error-message")||i("Unexpected error occurred. Please contact system administrator."),o.execute("hideLoading"),o.execute("showMessage","error",e)}})}),n.open()}return!1})}),e(document).on("click",".add-list-item",function(t){t.preventDefault();var i=e(this).siblings(".collection-fields-list"),n=i.attr("data-prototype").replace(/__name__/g,i.children().length),o=e("<div/>").html(n);o.children().appendTo(i),s.styleForm(i)}),e(document).on("click",".removeRow",function(t){t.preventDefault(),e(this).parents("*[data-content]").remove()})}),define("oroui/js/init-layout",function(){}),define("oroui/js/widget/abstract",["underscore","backbone","oroui/js/mediator","oroui/js/loading-mask","orotranslation/js/translator","oroui/js/tools","jquery.form"],function(e,t,i,n,o){var s=t.$;return t.View.extend({options:{type:"widget",actionsEl:".widget-actions",url:!1,elementFirst:!0,title:"",alias:null,wid:null,actionSectionTemplate:e.template('<div data-section="<%= section %>" class="widget-actions-section"/>'),actionWrapperTemplate:e.template('<span class="action-wrapper"/>'),loadingMaskEnabled:!0,loadingElement:null,container:null,submitHandler:function(){this.trigger("adoptedFormSubmit",this.form,this)}},loadingElement:null,loadingMask:null,loading:!1,initialize:function(t){t=t||{},this.options=e.defaults(t,this.options),this.initializeWidget(t)},setTitle:function(){console.warn("Implement setTitle")},getActionsElement:function(){console.warn("Implement getActionsElement")},remove:function(){this.trigger("widgetRemove",this.$el),i.trigger("widget_remove",this.getWid()),this.getAlias()&&i.trigger("widget_remove:"+this.getAlias()),t.View.prototype.remove.call(this),this.trigger("widgetRemoved")},initializeWidget:function(){this.options.wid&&(this._wid=this.options.wid),this.on("adoptedFormSubmitClick",e.bind(this._onAdoptedFormSubmitClick,this)),this.on("adoptedFormResetClick",e.bind(this._onAdoptedFormResetClick,this)),this.on("adoptedFormSubmit",e.bind(this._onAdoptedFormSubmit,this)),this.options.loadingMaskEnabled&&(this.on("beforeContentLoad",e.bind(this._showLoading,this)),this.on("contentLoad",e.bind(this._hideLoading,this)),this.on("renderStart",e.bind(function(e){this.loadingElement=e},this))),this.actions={},this.firstRun=!0,this.containerFilled=!1,this.loadingElement=s("body"),i.trigger("widget_initialize",this)},_getLoadingElement:function(){var e=this.options.loadingElement||this.loadingElement;return s(e)},_showLoading:function(){var e=this._getLoadingElement();this.options.loadingMaskEnabled&&!e.data("loading-mask-visible")&&e&&e.length&&("body"!==e[0].tagName.toLowerCase()&&"static"==e.css("position")&&e.css("position","relative"),this.loadingMask=new n,e.data("loading-mask-visible",!0),e.append(this.loadingMask.render().$el),this.loadingMask.show())},_hideLoading:function(){this.loadingMask&&(this._getLoadingElement().data("loading-mask-visible",!1),this.loadingMask.remove(),this.loadingMask=null)},getWid:function(){return this._wid||(this._wid=this._getUniqueIdentifier()),this._wid},getAlias:function(){return this.$el.data("alias")||this.options.alias},_getUniqueIdentifier:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),i="x"===e?t:8|3&t;return i.toString(16)})},_adoptWidgetActions:function(){this.actions.adopted={},this.form=null;var t=this._getAdoptedActionsContainer();if(t.length>0){var i=this,n=t.closest("form"),o=t.find("button, input, a");if(n.length>0){this.form=n;var r=this.form.attr("action");r.length>0&&"#"!==r[0]&&(this.options.url=r)}e.each(o,function(e,t){var o=s(e),r=o.data("action-name")||"adopted_action_"+t;switch(e.type.toLowerCase()){case"submit":var a=s('<input type="submit"/>');a.css({position:"absolute",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}),n.prepend(a),r="form_submit";break;case"reset":r="form_reset"}i.actions.adopted[r]=o}),t.remove()}},_getAdoptedActionsContainer:function(){if(void 0!==this.options.actionsEl){if("string"==typeof this.options.actionsEl)return this.$el.find(this.options.actionsEl);if(e.isElement(this.options.actionsEl))return this.options.actionsEl}return!1},_onAdoptedFormSubmitClick:function(e){e.submit()},_onAdoptedFormSubmit:function(t){this.loading||(t.find('[type="file"]').length?(this.trigger("beforeContentLoad",this),this.loading=!0,t.ajaxSubmit({data:{_widgetContainer:this.options.type,_wid:this.getWid()},success:e.bind(this._onContentLoad,this),error:e.bind(this._onContentLoadFail,this)})):this.loadContent(t.serialize(),t.attr("method")))},_onAdoptedFormResetClick:function(e){s(e).trigger("reset")},_createWidgetActionsSection:function(e){return s(this.options.actionSectionTemplate({section:e}))},_appendActionElement:function(e,t){e.append(s(this.options.actionWrapperTemplate()).append(t))},addAction:function(e,t,i){if(void 0===t&&(t="main"),!this.hasAction(e,t)){this.actions.hasOwnProperty(t)||(this.actions[t]={}),this.actions[t][e]=i;var n=this.getActionsElement().find('[data-section="'+t+'"]');n.length||(n=this._createWidgetActionsSection(t),n.appendTo(this.getActionsElement())),this._appendActionElement(n,i),this.trigger("widget:add:action:"+t+":"+e,s(i))}},getActions:function(){return this.actions},setUrl:function(e){this.options.url=e},removeAction:function(t,i){var n=this,o=function(t,i){e.isElement(n.actions[i])&&n.actions[i].remove(),delete n.actions[i]};this.hasAction(t,i)&&(void 0!==i?o(this.actions[i],t):e.each(this.actions,function(e,i){n.hasAction(t,i)&&o(e,t)}))},hasAction:function(t,i){if(void 0!==i)return this.actions.hasOwnProperty(i)&&this.actions[i].hasOwnProperty(t);var n=!1;return e.each(this.actions,function(e){e.hasOwnProperty(t)&&(n=!0)}),n},getAction:function(t,i,n){if(this.hasAction(t,i)){var o=null;void 0!==i?o=this.actions[i][t]:e.each(this.actions,function(e){e.hasOwnProperty(t)&&(o=e[t])}),n(o)}else this.once("widget:add:action:"+i+":"+t,n)},_renderActions:function(){var t=this;this._clearActionsContainer();var i=this.getActionsElement();i&&e.each(this.actions,function(n,o){var r=t._createWidgetActionsSection(o);e.each(n,function(e,i){t._initActionEvents(e),t._appendActionElement(r,e),t.trigger("widget:add:action:"+o+":"+i,s(e))}),i.append(r)})},_bindSubmitHandler:function(){this.$el.parent().on("submit",e.bind(function(e){e.isDefaultPrevented()||this.options.submitHandler.call(this),e.preventDefault()},this))},_initActionEvents:function(e){var t=this,i=s(e).attr("type");if(i)switch(i.toLowerCase()){case"submit":e.on("click",function(){return t.trigger("adoptedFormSubmitClick",t.form,t),!1});break;case"reset":e.on("click",function(){t.trigger("adoptedFormResetClick",t.form,t)})}},_clearActionsContainer:function(){var e=this.getActionsElement();e&&e.empty()},render:function(){var e=!this.options.elementFirst||this.options.elementFirst&&!this.firstRun||this.$el&&this.$el.length&&0==this.$el.html().length;e&&this.options.url!==!1?this.loadContent():this._show(),this.firstRun=!1},loadContent:function(i,n){this.loading=!0;var o=this.options.url;void 0!==o&&o||(o=window.location.href),(this.firstRun||void 0===n||!n)&&(n="get");var s={url:o,type:n};void 0!==i&&(s.data=i),s.data=(void 0!==s.data?s.data+"&":"")+"_widgetContainer="+this.options.type+"&_wid="+this.getWid(),this.trigger("beforeContentLoad",this),t.$.ajax(s).done(e.bind(this._onContentLoad,this)).fail(e.bind(this._onContentLoadFail,this))},_onContentLoadFail:function(e){var t=o("oro.ui.widget_loading_filed");403==e.status&&(t=o("oro.ui.forbidden_error"));var i='<div class="widget-content"><div class="alert alert-error">'+t+"</div>"+"</div>";this._onContentLoad(i)},_onContentLoad:function(e){this.loading=!1,this.trigger("contentLoad",e,this),this.actionsEl=null,this.actions={},this.setElement(s(e).filter(".widget-content:first")),this._show(),i.execute("layout:init",this.widget),i.trigger("widget:contentLoad",this.widget),i.trigger("layout:adjustHeight")},_show:function(){this._adoptWidgetActions(),this.trigger("renderStart",this.$el,this),this.show(),this._renderInContainer(),this.trigger("renderComplete",this.$el,this)},show:function(){this.setWidToElement(this.$el),this._renderActions(),this._bindSubmitHandler(),this.trigger("widgetRender",this.$el,this),i.trigger("widget:render:"+this.getWid(),this.$el,this)},_renderInContainer:function(){!this.containerFilled&&this.options.container&&(s(this.options.container).append(this.widget),this.containerFilled=!0)},setWidToElement:function(e){e.attr("data-wid",this.getWid())}})}),define("oro/block-widget",["underscore","backbone","oroui/js/widget/abstract"],function(e,t,i){var n=t.$;return i.extend({options:e.extend({},i.prototype.options,{type:"block",cssClass:"",title:null,titleBlock:".title",titleContainer:".widget-title",actionsContainer:".widget-actions-container",contentContainer:".row-fluid",contentClasses:[],templateParams:{},template:e.template('<div class="box-type1"><div class="title"<% if (_.isNull(title)) { %>style="display: none;"<% } %>><div class="pull-right widget-actions-container"></div><span class="widget-title"><%- title %></span></div><div class="row-fluid <%= contentClasses.join(\' \') %>"></div></div>')}),initialize:function(t){t=t||{},this.options=e.defaults(t,this.options),e.isFunction(this.options.template)||(this.options.template=e.template(this.options.template));var i=e.extend({title:this.options.title,contentClasses:this.options.contentClasses},this.options.templateParams);this.widget=n(this.options.template(i)),this.widget.addClass(this.options.cssClass),this.widgetContentContainer=this.widget.find(this.options.contentContainer),this.initializeWidget(t)},setTitle:function(t){e.isNull(this.options.title)&&this._getTitleContainer().closest(this.options.titleBlock).show(),this.options.title=t,this._getTitleContainer().html(this.options.title)},getActionsElement:function(){return void 0===this.actionsContainer&&(this.actionsContainer=this.widget.find(this.options.actionsContainer)),this.actionsContainer},_getTitleContainer:function(){return void 0===this.titleContainer&&(this.titleContainer=this.widget.find(this.options.titleContainer)),this.titleContainer},remove:function(){i.prototype.remove.call(this),this.widget.remove()},show:function(){this.$el.data("wid")||(this.$el.parent().length?this._showStatic():this._showRemote()),this.loadingElement=this.widgetContentContainer.parent(),i.prototype.show.apply(this)},_showStatic:function(){var e="_widget_anchor-"+this.getWid(),t=n('<div id="'+e+'"/>');t.insertAfter(this.$el),this.widgetContentContainer.append(this.$el),n("#"+e).replaceWith(n(this.widget))},_showRemote:function(){this.widgetContentContainer.empty(),this.widgetContentContainer.append(this.$el)},delegateEvents:function(e){i.prototype.delegateEvents.apply(this,arguments),this._delegateWidgetEvents(e)},_delegateWidgetEvents:function(t){var i=/^(\S+)\s*(.*)$/;if(t||(t=e.result(this,"widgetEvents"))){this._undelegateWidgetEvents();for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];if(e.isFunction(o)||(o=this[t[n]]),!o)throw new Error('Method "'+t[n]+'" does not exist');var s=n.match(i),r=s[1],a=s[2];o=e.bind(o,this),r+=".delegateWidgetEvents"+this.cid,""===a?this.widget.on(r,o):this.widget.on(r,a,o)}}},_undelegateWidgetEvents:function(){this.widget.off(".delegateWidgetEvents"+this.cid)}})}),define("oro/page-widget",["underscore","backbone","oroui/js/mediator","oro/block-widget"],function(e,t,i,n){var o=t.$;return n.extend({options:e.extend({},n.prototype.options,{type:"page",contentContainer:".layout-content",template:e.template('<div><div class="container-fluid page-title"><div class="navigation clearfix navbar-extra navbar-extra-right"><div class="row"><div class="pull-left pull-left-extra"><div class="clearfix customer-info well-small customer-simple"><div class="customer-content pull-left"><div class="clearfix"><div class="pull-left"><h1 class="user-name widget-title"><%- title %></h1></div></div></div></div></div><div class="pull-right title-buttons-container widget-actions-container"></div></div></div></div><div class="scrollable-container layout-content <%= contentClasses.join(\' \') %>"></div></div>'),replacementEl:null}),initialize:function(t){this.options=e.defaults(t||{},this.options),this.$replacementEl=o(this.options.replacementEl),this.options.container=this.$replacementEl.parent(),this.on("adoptedFormResetClick",this.remove),n.prototype.initialize.apply(this,t)},remove:function(){n.prototype.remove.apply(this);var e=o(".page-widget").last();e.show(),e.length||this.$replacementEl.show(),i.trigger("layout:adjustReloaded")},_show:function(){var e=o(".page-widget").last();e.hide(),e.length||this.$replacementEl.hide(),this.widget.addClass("page-widget"),n.prototype._show.apply(this),this.getActionsElement().find("button").wrap('<div class="btn-group"/>'),i.trigger("layout:adjustReloaded")}})}),define("oro/buttons-widget",["underscore","backbone","oroui/js/widget/abstract"],function(e,t,i){var n=t.$;return i.extend({options:e.extend(e.extend({},i.prototype.options),{cssClass:"pull-left icons-holder",type:"buttons",loadingMaskEnabled:!1}),initialize:function(t){t=t||{},this.options=e.defaults(t,this.options),this.widget=this.$el,this.widget.addClass(this.options.cssClass),this.initializeWidget(t)},setTitle:function(e){this.widget.attr("title",e)},getActionsElement:function(){return null},show:function(){this.$el.data("wid")||(this.$el.parent().length?this._showStatic():this._showRemote()),i.prototype.show.apply(this)},_showStatic:function(){var e="_widget_anchor-"+this.getWid(),t=n('<div id="'+e+'"/>'),i=this.widget.parent();t.insertAfter(i),n("#"+e).replaceWith(n(this.widget)),i.remove()},_showRemote:function(){this.widget.empty(),this.widget.append(this.$el),this.setElement(this.widget)}})}),define("oroui/js/content-processor/dropdown-button",["jquery","jquery-ui"],function(e){return e.widget("oroui.dropdownButtonProcessor",{options:{separator:".separator-btn",includeButtons:".btn, .divider, .dropdown-menu>li>*",excludeButtons:".dropdown-toggle",mainButtons:".main-group:not(.more-group)",useMainButtonsClone:!1,moreLabel:"",groupContainer:'<div class="btn-group pull-right"></div>',minItemQuantity:1,moreButtonAttrs:{}},_create:function(){var t,i,n,o=e(this.options.groupContainer);this.element.find(this.options.separator).replaceWith('<li class="divider"></li>'),t=this._collectButtons(),t.length<=1||(i=this._mainButtons(t),this.options.useMainButtonsClone&&(i=i.clone(!0)),o.append(i),t=t.not(i),t.length>this.options.minItemQuantity&&(n=this._moreButton(),o.append(n),t=this._dropdownMenu(t)),o.append(t),this.element.find(".btn-group").remove().end().prepend(o))},_collectButtons:function(){return this.element.find(this.options.includeButtons).not(this.options.excludeButtons).addClass("btn").removeClass("pull-right")},_mainButtons:function(e){var t=e.filter(this.options.mainButtons);return t.length||(t=e.first()),t},_moreButton:function(){var t=e('<a href="#"/>');return t.attr(this.options.moreButtonAttrs).attr({"data-toggle":"dropdown"}).addClass("btn dropdown-toggle").append(this.options.moreLabel).append('<span class="caret"></span>'),t},_dropdownMenu:function(t){return e('<ul class="dropdown-menu"></ul>').append(t).find(".btn").wrap("<li></li>").removeClass(function(e,t){return(t.match(/\bbtn(-\S+)?/g)||[]).join(" ")}).end()}}),e}),define("oroui/js/mobile/page-header",["jquery","oroui/js/mediator","orotranslation/js/translator","../content-processor/dropdown-button"],function(e,t,i){function n(){var t=e(".navigation.navbar-extra"),n=t.find(".title-buttons-container"),o={moreLabel:i("oro.ui.page_header.button.more"),minItemQuantity:1},s=n.find(".btn").slice(0,2).text().replace(/\s{2,}/g," ");s.length>35&&(o.minItemQuantity=0),n.dropdownButtonProcessor(o)}return{init:function(){n(),t.on("page:afterChange",n)}}}),define("oroui/js/side-menu",["jquery","backbone","./mediator","jquery-ui"],function(e,t,i){return e.widget("oroui.sideMenu",{options:{menuPrefix:"main-menu-group",rootElement:".main-menu",toggleSelector:"",autoCollapse:!0},_create:function(){this.listener=e.extend({},t.Events),this._on({mainMenuUpdated:this._init}),this.$toggle=e(this.options.toggleSelector),this._on(this.$toggle,{click:this.onToggle})},_destroy:function(){this.listener.stopListening(i)},_init:function(){},_convertToAccordion:function(){var t,i,n;i=this.element.find(this.options.rootElement).first(),i.attr("id",this._getGroupId(0)).addClass("accordion"),t=i.find(".dropdown"),i.find(".dropdown-menu").removeClass("dropdown-menu").addClass("accordion-body collapse"),t.removeClass("dropdown").addClass("accordion-group"),n=this,t.add(i).each(function(t){var i,o,s,r;i=e(this),o=i.find("a[href=#]>span").first(),s=i.find(".accordion-body").first(),r=n._getGroupId(t+1),s.attr("id",r),o.addClass("accordion-toggle").attr({"data-toggle":"collapse","data-target":"#"+r}).closest("a").addClass("accordion-heading"),n.options.autoCollapse&&o.attr("data-parent","#"+o.closest(".accordion").attr("id")),i.hasClass("active")?s.addClass("in"):o.addClass("collapsed"),s.has(".accordion-group")&&s.addClass("accordion")})},_convertToDropdown:function(){this.element.find(".accordion").removeClass("accordion"),this.element.find(".accordion-body").removeClass("accordion-body collapse in").removeAttr("id").removeAttr("style").addClass("dropdown-menu"),this.element.find(".accordion-group").removeClass("accordion-group").addClass("dropdown"),this.element.find(".accordion-toggle").removeClass("accordion-toggle collapsed"),this.element.find(".accordion-heading").removeClass("accordion-heading")},onToggle:function(e){e.stopPropagation(),this._toggle()},_toggle:function(){},_getGroupId:function(e){return this.options.menuPrefix+"_"+e}}),e}),define("oroui/js/mobile/side-menu",["../side-menu","../mediator"],function(e,t){e.widget("oroui.mobileSideMenu",e.oroui.sideMenu,{_create:function(){this._super(),this.listener.listenTo(t,"page:request",e.proxy(this._hide,this)),this._onOutsideClick=e.proxy(function(t){e.contains(this.element.get(0),t.target)||this._hide()},this)},_init:function(){this._convertToAccordion()},_show:function(){this.$toggle.addClass("open"),this.element.add(this.element.next()).switchClass("","menu-opened",200),e(document).on("click",this._onOutsideClick)},_hide:function(){this.$toggle.removeClass("open"),this.element.add(this.element.next()).switchClass("menu-opened","",200),e(document).off("click",this._onOutsideClick)},_toggle:function(){this.$toggle.hasClass("open")?this._hide():this._show()}})}),define("oroui/js/mobile/layout",["require","jquery","underscore","oroui/js/mobile/page-header","oroui/js/mobile/side-menu"],function(e){function t(){var e=o("#main-menu");e.insertAfter(o("#oroplatform-header")),e.mobileSideMenu({toggleSelector:"#main-menu-toggle"})}function i(){var e,t;e=o("body"),t=s.debounce(function(){o(document).scrollTop(o(document).scrollTop())},1),o(document).on("focus",":input",function(){e.addClass("input-focused")}).on("blur",":input",function(){e.removeClass("input-focused"),t()})}function n(){i(),t(),r.init()}var o=e("jquery"),s=e("underscore"),r=e("oroui/js/mobile/page-header");return e("oroui/js/mobile/side-menu"),{init:function(){o(n)}}}),define("oroui/js/desktop/side-menu",["../side-menu","../mediator"],function(e,t){var i="main-menu-state",n="maximized",o="minimized";return e.widget("oroui.desktopSideMenu",e.oroui.sideMenu,{_init:function(){this._update()},_update:function(){var t=localStorage[i]!==n;this.element.toggleClass("minimized",t),e("#main").toggleClass("main-menu-maximized",t),t?this._convertToDropdown():this._convertToAccordion()},_toggle:function(){localStorage[i]=this.element.hasClass("minimized")?n:o,this._update(),t.trigger("layout:adjustHeight")}}),e}),define("oroui/js/items-manager/table",["jquery","underscore","oroui/js/mediator","jquery-ui"],function(e,t,i){return e.widget("oroui.itemsManagerTable",{options:{itemTemplate:null,sorting:!0},_create:function(){var e=this.options;switch(typeof e.itemTemplate){case"function":this.itemTemplate=e.itemTemplate;break;case"string":this.itemTemplate=t.template(e.itemTemplate);break;default:throw new Error("itemTemplate option required")}if("function"==typeof e.itemRender&&(this._itemRender=e.itemRender),!e.collection)throw new Error("collection option required");
e.collection.on("add",this._onModelAdded,this),e.collection.on("remove",this._onModelDeleted,this),e.collection.on("change",this._onModelChanged,this),e.collection.on("reset",this._onResetCollection,this),this._initSorting(),this._onResetCollection(),this._on({"click [data-collection-action]":"_onAction"})},reset:function(){this.options.collection.reset()},_initSorting:function(){this.options.sorting&&this.element.sortable({cursor:"move",delay:25,opacity:.7,revert:10,axis:"y",containment:this.element.closest(".grid tbody"),items:"tr",tolerance:"pointer",helper:function(t,i){return i.children().each(function(){e(this).width(e(this).width())}),i},stop:t.bind(function(){this._sortCollection()},this)}).disableSelection()},_sortCollection:function(){var i=!1,n=this.options.collection;t.each(this.element.find("tr"),function(t,o){var s=e(t).data("cid"),r=n.at(o);if(s!==r.cid){var a=n.get(s),l=n.indexOf(a);n.remove(r,{silent:!0}),n.remove(a,{silent:!0}),l>o?(n.add(a,{silent:!0,at:o}),n.add(r,{silent:!0,at:l})):(n.add(r,{silent:!0,at:l}),n.add(a,{silent:!0,at:o})),i=!0}}),i&&n.trigger("sort")},_onModelAdded:function(e){this.element.append(this._renderModel(e)),this.options.sorting&&this.element.sortable("refresh"),i.trigger("items-manager:table:add:"+this._getIdentifier(),this.options.collection,e,this.element)},_onModelChanged:function(e){this.element.find('[data-cid="'+e.cid+'"]').replaceWith(this._renderModel(e)),i.trigger("items-manager:table:change:"+this._getIdentifier(),this.options.collection,e,this.element)},_onModelDeleted:function(e){this.element.find('[data-cid="'+e.cid+'"]').remove(),i.trigger("items-manager:table:remove:"+this._getIdentifier(),this.options.collection,e,this.element)},_onResetCollection:function(){this.element.empty(),this.options.collection.each(this._onModelAdded,this),i.trigger("items-manager:table:reset:"+this._getIdentifier(),this.options.collection,this.element)},_renderModel:function(e){var i=t.extend({cid:e.cid},e.toJSON());return this._itemRender(this.itemTemplate,i)},_itemRender:function(e,t){return e(t)},_onAction:function(t){t.preventDefault();var i=e(t.currentTarget),n=i.closest("[data-cid]").data("cid"),o=this.options.collection.get(n);if(o){var s=i.data(),r=s.collectionAction,a=this.options[r+"Handler"];"function"==typeof a?a(o,s):o.trigger("action:"+r,o,s)}},_getIdentifier:function(){return t.first(t.first(this.element).className.split(" "))}}),e}),define("oroui/js/items-manager/editor",["jquery","jquery-ui"],function(e){function t(e,t){e.data("select2")?e.select2("val",t):e.val(t),e.trigger("change")}return e.widget("oroui.itemsManagerEditor",{options:{namePattern:/^([\w\W]*)$/,mapping:{},addButton:".add-button",saveButton:".save-button",cancelButton:".cancel-button",collection:null,setter:function(e,t,i){return i},getter:function(e,t,i){return i},changed:!1},hasChanges:function(){return this.changed},_create:function(){this.element.attr("data-validation-ignore",""),this.errors=e({}),this.form=this.element.parents("form"),this._on(this.form,{submit:"_hideErrors"}),"string"==typeof this.options.namePattern&&(this.options.namePattern=new RegExp(this.options.namePattern)),this.reset(),this._on({change:this._onElementChange,click:this._onClick}),this.options.collection.on("action:edit",e.proxy(this._onEditModel,this)),this.options.collection.on("remove",e.proxy(this._onRemoveModel,this))},reset:function(i){var n,o,s=this;this._hideErrors(),this.validated=!1,this.model=i,i?(n=this._elementsMap(),o=i.toJSON(),e.each(o,function(e,i){var o=n[e];o&&(i=s.options.setter(o,e,i),t(o,i))})):this._elements().each(function(){t(e(this),"")}),this._updateActions(),this.changed=!1},_onSaveItem:function(e){var t,i;e.preventDefault(),this._validate()&&(t=this._collectAttrs(),this.model?this.model.set(t):(i=new this.options.collection.model(t),this.options.collection.add(i)),this.reset())},_onEditModel:function(e){this.reset(e)},_onRemoveModel:function(e){this.model===e&&this.reset()},_onCancel:function(e){e.preventDefault(),this.reset()},_validate:function(t){var i=this._getValidator(),n=!0;return i&&(this.element.removeAttr("data-validation-ignore"),t?n=i.element(t):(e.each(this._elements(),function(){n=i.element(this)&&n}),this.validated=!0),this.errors=i.toShow,this.element.attr("data-validation-ignore","")),n},_hideErrors:function(){var e=this._getValidator();e&&(this._elements().each(function(){e.settings.unhighlight(this)}),this.errors.hide())},_getValidator:function(){var e;return this.form.data("validator")&&(e=this.form.validate()),e},_elements:function(){return this.element.find("input, select, textarea").not(":submit, :reset, :image")},_onElementChange:function(e){this.changed=!0,this.validated&&this._validate(e.target)},_onClick:function(t){var i=e(t.target);i.is(this.options.addButton)||i.is(this.options.saveButton)?this._onSaveItem(t):i.is(this.options.cancelButton)&&this._onCancel(t)},_collectAttrs:function(){var t={},i=this;return e.each(this._elementsMap(),function(e,n){t[e]=i.options.getter(n,e,n.val())}),t},_elementsMap:function(){var t,i={},n=this.element,o=this.options.namePattern;return e.each(this.options.mapping,function(e,t){var o=n.find('[name="'+t+'"]');o.length&&(i[e]=o)}),t=e.map(i,function(e){return e[0]}),e.each(this._elements().not(t),function(){var t=this.name&&(this.name.match(o)||[])[1];t&&!i[t]&&(i[t]=e(this))}),i},_updateActions:function(){this.element.find(this.options.addButton)[this.model?"hide":"show"](),this.element.find(this.options.saveButton)[this.model?"show":"hide"]()}}),e}),define("oroui/js/content-processor/pinned-dropdown-button",["./dropdown-button"],function(e){return e.widget("oroui.pinnedDropdownButtonProcessor",e.oroui.dropdownButtonProcessor,{options:{mainButtons:"",minItemQuantity:0,groupKey:""},keyPreffix:"pinned-dropdown-button-processor-",_create:function(){this._super(),this._on({"click [data-button-index]":this._onButtonClick})},_collectButtons:function(){var t=this._super();return t.filter(":not(.divider)").each(function(t){e(this).attr("data-button-index","").data("button-index",t)}),t},_mainButtons:function(t){var i,n;return n=this._getStorageKey(),i=n?localStorage.getItem(n)||0:0,e(t.get(i))||this._superApply(arguments)},_onButtonClick:function(t){var i=this._getStorageKey();i&&localStorage.setItem(i,e(t.target).data("button-index")||0)},_getStorageKey:function(){return this.options.groupKey?this.keyPreffix+this.options.groupKey:""}}),e}),!function(e,t){"function"==typeof define&&define.amd?define("autolinker",t):"undefined"!=typeof exports?module.exports=t():e.Autolinker=t()}(this,function(){var e=function(e){e=e||{};for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])};return e.prototype={constructor:e,newWindow:!0,stripPrefix:!0,twitter:!0,email:!0,urls:!0,className:"",matcherRegex:function(){var e=/(^|[^\w])@(\w{1,15})/,t=/(?:[\-;:&=\+\$,\w\.]+@)/,i=/(?:[A-Za-z]{3,9}:(?:\/\/)?)/,n=/(?:www\.)/,o=/[A-Za-z0-9\.\-]*[A-Za-z0-9\-]/,s=/\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b/,r=/(?:[\-A-Za-z0-9+&@#\/%?=~_()|!:,.;]*[\-A-Za-z0-9+&@#\/%=~_()|])?/;return new RegExp(["(",e.source,")","|","(",t.source,o.source,s.source,")","|","(","(?:","(?:",i.source,o.source,")","|","(?:","(.?//)?",n.source,o.source,")","|","(?:","(.?//)?",o.source,s.source,")",")",r.source,")"].join(""),"gi")}(),protocolRelativeRegex:/(.)?\/\//,htmlRegex:function(){var e=/[0-9a-zA-Z:]+/,t=/[^\s\0"'>\/=\x01-\x1F\x7F]+/,i=/(?:".*?"|'.*?'|[^'"=<>`\s]+)/;return new RegExp(["<(/)?","("+e.source+")","(?:","\\s+",t.source,"(?:\\s*=\\s*"+i.source+")?",")*","\\s*",">"].join(""),"g")}(),urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,link:function(e){return this.processHtml(e)},processHtml:function(e){for(var t,i,n=this.htmlRegex,o=0,s=0,r=[];null!==(t=n.exec(e));){var a=t[0],l=t[2],c=!!t[1];i=e.substring(o,t.index),o=t.index+a.length,"a"===l?c?(s=Math.max(s-1,0),0===s&&r.push(i)):(s++,r.push(this.processTextNode(i))):r.push(0===s?this.processTextNode(i):i),r.push(a)}if(o<e.length){var d=this.processTextNode(e.substring(o));r.push(d)}return r.join("")},processTextNode:function(e){var t=this,i=this.matcherRegex,n=this.twitter,o=this.email,s=this.urls;return e.replace(i,function(e,i,r,a,l,c,d,h){var u=i,p=r,f=a,m=l,g=c,v=d||h,_="",y="";if(u&&!n||m&&!o||g&&!s||g&&-1===g.indexOf(".")||g&&/^[A-Za-z]{3,9}:/.test(g)&&!/:.*?[A-Za-z]/.test(g)||v&&/^[\w]\/\//.test(v))return e;var b=e.charAt(e.length-1);if(")"===b){var w=e.match(/\(/g),x=e.match(/\)/g),k=w&&w.length||0,C=x&&x.length||0;C>k&&(e=e.substr(0,e.length-1),y=")")}var j,T=e,S=e;if(u)j="twitter",_=p,T="https://twitter.com/"+f,S="@"+f;else if(m)j="email",T="mailto:"+m,S=m;else if(j="url",v){var D=new RegExp("^"+t.protocolRelativeRegex.source),E=v.match(D)[1]||"";_=E+_,T=T.replace(D,"//"),S=S.replace(D,"")}else/^[A-Za-z]{3,9}:/i.test(T)||(T="http://"+T);var M=t.createAnchorTag(j,T,S);return _+M+y})},createAnchorTag:function(e,t,i){var n=this.createAnchorAttrsStr(e,t);return i=this.processAnchorText(i),"<a "+n+">"+i+"</a>"},createAnchorAttrsStr:function(e,t){var i=['href="'+t+'"'],n=this.createCssClass(e);return n&&i.push('class="'+n+'"'),this.newWindow&&i.push('target="_blank"'),i.join(" ")},createCssClass:function(e){var t=this.className;return t?t+" "+t+"-"+e:""},processAnchorText:function(e){return this.stripPrefix&&(e=this.stripUrlPrefix(e)),e=this.removeTrailingSlash(e),e=this.doTruncate(e)},stripUrlPrefix:function(e){return e.replace(this.urlPrefixRegex,"")},removeTrailingSlash:function(e){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e},doTruncate:function(e){var t=this.truncate;return t&&e.length>t&&(e=e.substring(0,t-2)+".."),e}},e.link=function(t,i){var n=new e(i);return n.link(t)},e}),define("orodatagrid/js/datagrid/action-launcher",["jquery","underscore","backbone"],function(e,t,i){var n;return n=i.View.extend({enabled:!0,tagName:"a",onClickReturnValue:!0,action:void 0,label:void 0,title:void 0,icon:void 0,iconClassName:void 0,className:void 0,link:"javascript:void(0);",links:void 0,runAction:!0,template:t.template('<% if (links) { %><div class="btn-group"><% } %><<%= tagName %><% if (tagName == "a") { %> href="<%= link %>"<% } %> class="action<%= className ? " " + className : "" %><%= !enabled ? " disabled" : "" %><% if (links) { %> dropdown-toggle<% } %>" <%= attributesTemplate({attributes: attributes}) %> title="<%= title %>"<% if (links) { %> data-toggle="dropdown"<% } %>><% if (icon) { %><i class="icon-<%= icon %> hide-text"><%= label %></i><% } else { %><% if (iconClassName) { %><i class="<%= iconClassName %>"></i><% } %> <%= label %><% } %><% if (links) { %><i class="caret"></i><% } %></<%= tagName %>><% if (links) { %><ul class="dropdown-menu"><% _.each(links, function(item) { %><li><a href="<%= link %>" title="<%= item.label %>"<% if (item.attributes) { %> <%= attributesTemplate(item) %><% } %> data-key="<%= item.key %>"><% if (item.icon) { %><i class="icon-<%= item.icon %> hide-text"><%= item.label %></i><% } else { %><% if (item.iconClassName) { %><i class="<%= item.iconClassName %>"></i><% } %> <%= item.label %><% } %></a></li><% }) %></ul></div><% } %>'),attributesTemplate:t.template('<% _.each(attributes, function(attribute, name) { %><%= name %><% if (!_.isNull(attribute)) { %>="<%= attribute %>"<% } %> <% }) %>'),initialize:function(e){var i,o;if(i=e||{},!i.action)throw new TypeError("'action' is required");i.template&&(this.template=i.template),i.label&&(this.label=i.label),i.title&&(this.title=i.title),i.icon&&(this.icon=i.icon),i.link&&(this.link=i.link),i.iconClassName&&(this.iconClassName=i.iconClassName),i.className&&(this.className=i.className),t.has(i,"runAction")&&(this.runAction=i.runAction),t.has(i,"onClickReturnValue")&&(this.onClickReturnValue=i.onClickReturnValue),this.events={},o="",t.has(i,"links")&&(this.events["click .dropdown-toggle"]="onToggle",this.links=e.links,o=" .dropdown-menu a"),this.events["click"+o]="onClick",this.action=i.action,n.__super__.initialize.apply(this,arguments)},dispose:function(){this.disposed||(delete this.action,delete this.runAction,n.__super__.dispose.apply(this,arguments))},render:function(){var t,i;return this.$el.empty(),i=this.label||this.action.label,t=e(this.template({label:this.label||this.action.label,icon:this.icon,title:this.title||i,className:this.className,iconClassName:this.iconClassName,link:this.link,links:this.links,action:this.action,attributes:this.attributes,attributesTemplate:this.attributesTemplate,enabled:this.enabled,tagName:this.tagName})),this.setElement(t),this},onClick:function(i){var n,o;return this.enabled?(this.trigger("click",this,i.currentTarget),this.runAction?(this.links&&(n=e(i.currentTarget),o=n.data("key"),t.isUndefined(o)||(this.action.actionKey=o,n.closest(".btn-group").toggleClass("open"))),this.action.run(),!1):this.onClickReturnValue):this.onClickReturnValue},onToggle:function(t){var i=e(t.currentTarget);i.closest(".btn-group").hasClass("open")||this.trigger("expand",this)},disable:function(){return this.enabled=!1,this.$el.addClass("disabled"),this},enable:function(){return this.enabled=!0,this.$el.removeClass("disabled"),this}})}),define("oro/datagrid/action/abstract-action",["jquery","underscore","backbone","routing","orotranslation/js/translator","oroui/js/mediator","oroui/js/error","oroui/js/modal","orodatagrid/js/datagrid/action-launcher"],function(e,t,i,n,o,s,r,a,l){var c;return c=i.View.extend({launcher:l,name:null,datagrid:null,route:null,route_parameters:null,confirmation:!1,confirmModalConstructor:a,frontend_type:null,frontend_handle:null,frontend_options:null,identifierFieldName:"id",dispatched:!1,reloadData:!0,defaultMessages:{confirm_title:"Execution Confirmation",confirm_content:"Are you sure you want to do this?",confirm_ok:"Yes, do it",confirm_cancel:"Cancel",success:"Action performed.",error:"Action is not performed.",empty_selection:"Please, select item to perform action."},initialize:function(e){if(!e.datagrid)throw new TypeError("'datagrid' is required");this.subviews=[],this.datagrid=e.datagrid,this.messages=t.extend({},this.defaultMessages,e.messages),this.launcherOptions=t.extend({},this.launcherOptions,e.launcherOptions,{action:this}),c.__super__.initialize.apply(this,arguments)},dispose:function(){this.disposed||(delete this.datagrid,delete this.launcherOptions,delete this.messages,delete this.confirmModal,c.__super__.dispose.apply(this,arguments))},createLauncher:function(e){var i;return e=e||{},t.isUndefined(e.icon)&&!t.isUndefined(this.icon)&&(e.icon=this.icon),t.defaults(e,this.launcherOptions),i=new this.launcher(e),this.subviews.push(i),i},run:function(){var e={doExecute:!0};this.trigger("preExecute",this,e),e.doExecute&&(this.execute(),this.trigger("postExecute",this,e))},execute:function(){this._confirmationExecutor(t.bind(this.executeConfiguredAction,this))},executeConfiguredAction:function(){switch(this.frontend_handle){case"ajax":this._handleAjax();break;case"redirect":this._handleRedirect();break;default:this._handleWidget()}},_confirmationExecutor:function(e){this.confirmation?this.getConfirmDialog(e).open():e()},_handleWidget:function(){this.dispatched||(this.frontend_options=this.frontend_options||{},this.frontend_options.url=this.getLinkWithParameters(),this.frontend_options.title=this.frontend_options.title||this.label,require(["oro/"+this.frontend_handle+"-widget"],t.bind(function(e){var t=new e(this.frontend_options);t.render()},this)))},_handleRedirect:function(){if(!this.dispatched){var e=this.getLinkWithParameters();s.execute("redirectTo",{url:e},{redirect:!0})}},_handleAjax:function(){this.dispatched||(this.reloadData&&this.datagrid.showLoading(),this._doAjaxRequest())},_doAjaxRequest:function(){e.ajax({url:this.getLink(),data:this.getActionParameters(),context:this,dataType:"json",error:this._onAjaxError,success:this._onAjaxSuccess})},_onAjaxError:function(e){r.handle({},e,{enforce:!0}),this.reloadData&&this.datagrid.hideLoading()},_onAjaxSuccess:function(e){this.reloadData&&(this.datagrid.hideLoading(),this.datagrid.collection.fetch({reset:!0})),this._showAjaxSuccessMessage(e)},_showAjaxSuccessMessage:function(e){var t=e.successful?this.messages.success:this.messages.error,i=e.successful?"success":"error",n=e.message||o(t);n&&s.execute("showFlashMessage",i,n)},getLink:function(e){return t.isUndefined(e)&&(e={}),n.generate(this.route,t.extend(t.extend([],this.route_parameters),e))},getLinkWithParameters:function(){return this.getLink(this.getActionParameters())},getActionParameters:function(){return{}},getConfirmDialog:function(e){return this.confirmModal||(this.confirmModal=new this.confirmModalConstructor({title:o(this.messages.confirm_title),content:o(this.messages.confirm_content),okText:o(this.messages.confirm_ok),cancelText:o(this.messages.confirm_cancel)}),this.listenTo(this.confirmModal,"ok",e),this.subviews.push(this.confirmModal)),this.confirmModal}})}),define("oro/datagrid/action/model-action",["underscore","./abstract-action"],function(e,t){var i,n;return n=window.location,i=t.extend({model:null,link:void 0,backUrl:!1,backUrlParameter:"back",initialize:function(t){var n=t||{};if(!n.model)throw new TypeError("'model' is required");this.model=n.model,e.has(n,"backUrl")&&(this.backUrl=n.backUrl),e.has(n,"backUrlParameter")&&(this.backUrlParameter=n.backUrlParameter),i.__super__.initialize.apply(this,arguments)},getLink:function(){var t,i;if(!this.link)throw new TypeError("'link' is required");return t=this.model.has(this.link)?this.model.get(this.link):this.link,this.backUrl&&(i=e.isBoolean(this.backUrl)?n.href:this.backUrl,i=encodeURIComponent(i),t=this.addUrlParameter(t,this.backUrlParameter,i)),t},addUrlParameter:function(e,t,i){var n,o,s,r,a,l,c,d,h=!0;if(e.indexOf("#")>0?(s=e.indexOf("#"),n=e.substring(e.indexOf("#"),e.length)):(n="",s=e.length),o=e.substring(0,s),r=o.split("?"),a="",r.length>1)for(l=r[1].split("&"),d=0;d<l.length;d+=1)c=l[d].split("="),h&&c[0]===t||(""===a?a="?":a+="&",a+=c[0]+"="+(c[1]||""));return""===a&&(a="?"),""!==a&&"?"!==a&&(a+="&"),a+=t+"="+(i||""),r[0]+a+n}})}),define("orowindows/js/dialog/state/model",["backbone"],function(e){return e.Model.extend({})}),function(e){e.widget("ui.dialog",e.ui.dialog,{version:"2.0.0",_limitToEl:!1,_resizeTries:0,options:e.extend(e.ui.dialog.options,{minimizeTo:!1,maximizedHeightDecreaseBy:!1,allowClose:!0,allowMaximize:!1,allowMinimize:!1,dblclick:!1,titlebar:!1,icons:{close:"ui-icon-closethick",maximize:"ui-icon-extlink",minimize:"ui-icon-minus",restore:"ui-icon-newwin"},snapshot:null,state:"normal",beforeCollapse:null,beforeMaximize:null,beforeMinimize:null,beforeRestore:null,collapse:null,maximize:null,minimize:null,restore:null}),_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog, .ui-datepicker, .select2-drop").length},_create:function(){this._super(),this._verifySettings(),this._initBottomLine(),this._onBackspacePress=e.proxy(this._onBackspacePress,this),this._windowResizeHandler=e.proxy(this._windowResizeHandler,this),e(document).bind("keydown.dialog",this._onBackspacePress),e(window).bind("resize.dialog",this._windowResizeHandler)},_limitTo:function(){return!1===this._limitToEl&&(this._limitToEl=this.options.limitTo?e(this.options.limitTo):this._appendTo()),this._limitToEl},_init:function(){this._super(),this._initButtons(),this._initializeContainer(),this._initializeState(this.options.state),this.adjustContentSize()},_destroy:function(){this._super(),e(document).unbind("keydown.dialog",this._onBackspacePress),e(window).unbind("resize.dialog",this._windowResizeHandler)},_makeDraggable:function(){this._super(),this.uiDialog.draggable("option","containment",this.options.limitTo||"parent")},close:function(){e(window).unbind(".dialog"),this._removeMinimizedEl(),this._super()},actionsContainer:function(){return this.uiDialogButtonPane},showActionsContainer:function(){this.uiDialogButtonPane.parent().length||(this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},state:function(){return this.options.state},minimize:function(){this._setOption("state","minimized")},maximize:function(){this._setOption("state","maximized")},collapse:function(){this._setOption("state","collapsed")},restore:function(){this._setOption("state","normal")},_minimize:function(){"minimized"!==this.state()&&this._normalize();var e=this.widget();this._trigger("beforeMinimize"),this._saveSnapshot(),this._setState("minimized"),this._toggleButtons(),this._trigger("minimize"),e.hide(),this._getMinimizeTo().show(),this.minimizedEl=e.clone(),this.minimizedEl.css({height:"auto"}),this.minimizedEl.find(".ui-dialog-content").remove(),this.minimizedEl.find(".ui-resizable-handle").remove();var t=this.minimizedEl.find(".ui-dialog-title");t.disableSelection().attr("title",t.text());var i=this;this.minimizedEl.find(".ui-dialog-titlebar").dblclick(function(){i.uiDialogTitlebar.dblclick()});for(var n=["close","maximize","restore"],o=0;o<n.length;o++){var s=".ui-dialog-titlebar-"+n[o];this.minimizedEl.find(s).click(function(t){return function(){return e.find(t).click(),!1}}(s))}return this.minimizedEl.show(),this.minimizedEl.appendTo(this._getMinimizeTo()),this},_collapse:function(){var e=this._getTitleBarHeight();return this._trigger("beforeCollapse"),this._saveSnapshot(),this._setOptions({resizable:!1,height:e,maxHeight:e}),this._setState("collapsed"),this._trigger("collapse"),this},_maximize:function(){return"maximized"!==this.state()&&this._normalize(),this._trigger("beforeMaximize"),this._saveSnapshot(),this._calculateNewMaximizedDimensions(e.proxy(function(){this._setState("maximized"),this._toggleButtons(),this._trigger("maximize")},this)),this},_restore:function(){return this._trigger("beforeRestore"),this._restoreWithoutTriggerEvent(),this._setState("normal"),this._toggleButtons(),this._trigger("restore"),this},_normalize:function(){"normal"!=this.state()&&(this.disableStateChangeTrigger=!0,this._setOption("state","normal"),this.disableStateChangeTrigger=!1)},_initBottomLine:function(){return this.bottomLine=e("#dialog-extend-parent-bottom"),this.bottomLine.length||(this.bottomLine=e('<div id="dialog-extend-parent-bottom"></div>'),this.bottomLine.css({position:"fixed",bottom:0,left:0}).appendTo(document.body)),this},_initializeMinimizeContainer:function(){this.options.minimizeTo=e("#dialog-extend-fixed-container"),this.options.minimizeTo.length||(this.options.minimizeTo=e('<div id="dialog-extend-fixed-container"></div>'),this.options.minimizeTo.css({position:"fixed",bottom:1,left:this._limitTo().offset().left,zIndex:9999}).hide().appendTo(this._appendTo()))},_getMinimizeTo:function(){return this.options.minimizeTo===!1&&this._initializeMinimizeContainer(),e(this.options.minimizeTo)},_calculateNewMaximizedDimensions:function(t){if(this._limitTo().is(":visible")){this._resizeTries=0;var i=this._getContainerHeight(),n=this._limitTo().width(),o=this._limitTo().offset();this._setOptions({resizable:!1,draggable:!1,height:i,width:n,position:[o.left,o.top]}),this.widget().css("position","fixed"),e.isFunction(t)&&t()}else this._resizeTries++,this._resizeTries<100?setTimeout(e.proxy(function(){this._calculateNewMaximizedDimensions(t)},this),500):this._resizeTries=0;return this},_moveToVisible:function(){var e=this.widget();if(e.length>0){var t=e.offset();this._setOptions({position:[t.left,t.top]})}return this.adjustContentSize(),this},adjustContentSize:function(){var t=e(window).height(),i=this.widget().outerHeight(),n=this.element.innerHeight(),o=t+n-i;this.element.css("max-height",o),this._position()},_getTitleBarHeight:function(){return this.uiDialogTitlebar.height()+15},_getContainerHeight:function(){var t=0;this.options.maximizedHeightDecreaseBy&&(t=e.isNumeric(this.options.maximizedHeightDecreaseBy)?this.options.maximizedHeightDecreaseBy:"minimize-bar"===this.options.maximizedHeightDecreaseBy?this._getMinimizeTo().height():e(this.maximizedHeightDecreaseBy).height());var i=this._limitTo().height(),n=this.bottomLine.offset().top-this._limitTo().offset().top,o=i>n?n:i;return o-t},_initButtons:function(t){var i=this;"undefined"==typeof t&&(t=this);var n=e('<div class="ui-dialog-titlebar-buttonpane"></div>').appendTo(this.uiDialogTitlebar);this._buttons={},this.uiDialogTitlebarClose.css({position:"static",top:"auto",right:"auto",margin:0}).attr("title","close").find(".ui-icon").removeClass("ui-icon-closethick").addClass(this.options.icons.close).end().appendTo(n).end();var o=["maximize","restore","minimize"];for(var s in o)if("string"==typeof o[s]){var r=o[s],a=this.options.icons[r];"string"==typeof this.options.icons[r]?a='<a class="ui-dialog-titlebar-'+r+' ui-corner-all" href="#" title="'+r+'"><span class="ui-icon '+this.options.icons[r]+'">'+r+"</span></a>":a.addClass("ui-dialog-titlebar-"+r),a=e(a),a.attr("role","button").mouseover(function(){e(this).addClass("ui-state-hover")}).mouseout(function(){e(this).removeClass("ui-state-hover")}).focus(function(){e(this).addClass("ui-state-focus")}).blur(function(){e(this).removeClass("ui-state-focus")}),this._buttons[r]=a,n.append(a)}return this.uiDialogTitlebarClose.toggle(this.options.allowClose),this._buttons.maximize.toggle(this.options.allowMaximize).click(function(e){e.preventDefault(),i.maximize()}),this._buttons.minimize.toggle(this.options.allowMinimize).click(function(e){e.preventDefault(),i.minimize()}),this._buttons.restore.hide().click(function(e){e.preventDefault(),i.restore()}),this.uiDialogTitlebar.dblclick(function(){i.options.dblclick&&i.options.dblclick.length&&("normal"!=i.state()?i.restore():i[i.options.dblclick]())}).select(function(){return!1}),this},_windowResizeHandler:function(e){if(e.target===window)switch(this.state()){case"maximized":this._calculateNewMaximizedDimensions();break;case"normal":this._moveToVisible()}},_onBackspacePress:function(t){var i=":button,:reset,:submit,:checkbox,:radio,select,[type=image],[type=file]";this._isOpen&&8===t.keyCode&&!e(t.target).not(i).is(":input")&&t.preventDefault()},_createTitlebar:function(){switch(this._super(),this.uiDialogTitlebar.disableSelection(),this.options.titlebar){case!1:break;case"transparent":this.uiDialogTitlebar.css({"background-color":"transparent","background-image":"none",border:0});break;default:e.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+this.options.titlebar+"'")}return this},_restoreFromNormal:function(){return this},_restoreFromCollapsed:function(){var e=this._loadSnapshot();return this._setOptions({resizable:e.config.resizable,height:e.size.height-this._getTitleBarHeight(),maxHeight:e.size.maxHeight}),this},_restoreFromMaximized:function(){var e=this._loadSnapshot();return this._setOptions({resizable:e.config.resizable,draggable:e.config.draggable,height:e.size.height,width:e.size.width,maxHeight:e.size.maxHeight,position:[e.position.left,e.position.top]}),this},_restoreFromMinimized:function(){this._removeMinimizedEl(),this.widget().show();var e=this._loadSnapshot();return this.widget().css({position:"fixed",left:this._getVisibleLeft(e.position.left,e.size.width),top:this._getVisibleTop(e.position.top,e.size.height)}),this},_removeMinimizedEl:function(){this.minimizedEl&&this.minimizedEl.remove()},_getVisibleLeft:function(e,t){var i=this._limitTo().width();return e+t>i?i-t:e},_getVisibleTop:function(e,t){var i=this.bottomLine.offset().top;return e+t>i?i-t:e},_restoreWithoutTriggerEvent:function(){var t=this.state(),i="_restoreFrom"+t.charAt(0).toUpperCase()+t.slice(1);return e.isFunction(this[i])?this[i]():e.error("jQuery.dialogExtend Error : Cannot restore dialog from unknown state '"+t+"'"),this},_saveSnapshot:function(){return"normal"==this.state()&&this._setOption("snapshot",this.snapshot()),this},snapshot:function(){return{config:{resizable:this.options.resizable,draggable:this.options.draggable},size:{height:this.widget().height(),width:this.options.width,maxHeight:this.options.maxHeight},position:this.widget().offset()}},_loadSnapshot:function(){return this.options.snapshot},_setOption:function(e,t){"state"==e&&this._initializeState(t),this._superApply(arguments),"appendTo"==e&&this._initializeContainer()},_initializeState:function(e){if(!this.widget().hasClass("ui-dialog-"+e))switch(e){case"maximized":this._maximize();break;case"minimized":this._minimize();break;case"collapsed":this._collapse();break;default:this._restore()}},_initializeContainer:function(){var e=this._appendTo();"static"==e.css("position")&&e.css("position","relative")},_setState:function(e){if(this.options.state=e,this.widget().removeClass("ui-dialog-normal ui-dialog-maximized ui-dialog-minimized ui-dialog-collapsed").addClass("ui-dialog-"+e),!this.disableStateChangeTrigger){var t=this._loadSnapshot();t||"normal"!=this.state()||(t=this.snapshot()),this._trigger("stateChange",null,{state:this.state(),snapshot:t})}return this},_toggleButtons:function(){return this._buttons.maximize.toggle("maximized"!=this.state()&&this.options.allowMaximize),this._buttons.minimize.toggle("minimized"!=this.state()&&this.options.allowMinimize),this._buttons.restore.toggle("normal"!=this.state()&&(this.options.allowMaximize||this.options.allowMinimize)).css({right:"maximized"==this.state()?"1.4em":"minimized"==this.state()?this.options.allowMaximize?"2.5em":"1.4em":"-9999em"}),this},_verifySettings:function(){var t=this,i=function(i,n){t.options[i]&&-1==n.indexOf(t.options[i])&&(e.error("jQuery.dialogExtend Error : Invalid <"+i+"> value '"+t.options[i]+"'"),t.options[i]=!1)};return i("dblclick",["maximize","minimize","collapse"]),i("titlebar",["transparent"]),this}})}(jQuery),define("jquery.dialog.extended",["jquery-ui"],function(){}),define("oro/dialog-widget",["jquery","underscore","oroui/js/tools","oroui/js/error","oroui/js/widget/abstract","orowindows/js/dialog/state/model","oroui/js/messenger","oroui/js/layout","orotranslation/js/translator","jquery.dialog.extended"],function(e,t,i,n,o,s,r,a,l){var c=o.extend({options:t.extend({},o.prototype.options,{type:"dialog",dialogOptions:null,stateEnabled:!0,incrementalPosition:!0}),windowsPerRow:10,windowOffsetX:15,windowOffsetY:15,windowX:0,windowY:0,defaultPos:"center center",openedWindows:0,contentTop:null,initialize:function(e){e=e||{},this.options=t.defaults(e,this.options),this.on("adoptedFormResetClick",t.bind(this.remove,this)),this.options.dialogOptions=this.options.dialogOptions||{},this.options.dialogOptions.title=this.options.dialogOptions.title||this.options.title,this.options.dialogOptions.limitTo=this.options.dialogOptions.limitTo||"#container",this.options.dialogOptions.minWidth=this.options.dialogOptions.minWidth||375,this.options.dialogOptions.minHeight=this.options.dialogOptions.minHeight||150,this.options.stateEnabled&&this._initModel(this.options);
var i=function(e){return function(){for(var i=0;i<e.length;i++)t.isFunction(e[i])&&e[i]()}},n=[t.bind(this.closeHandler,this)];void 0!==this.options.dialogOptions.close&&n.push(this.options.dialogOptions.close),this.options.dialogOptions.close=i(n),this.on("widgetRender",t.bind(this._initAdjustHeight,this)),this.initializeWidget(e)},setTitle:function(e){this.widget.dialog("option","title",e)},_initModel:function(i){if(this.model){this.restoreMode=!0;var n=this.model.get("data");if(t.extend(i,n),t.isObject(n.dialogOptions)&&(i.dialogOptions=t.extend(i.dialogOptions,n.dialogOptions)),this.options=i,this.options.el)this.setElement(this.options.el);else if(this.model.get("id")){var o=e("#widget-restored-state-"+this.model.get("id"));o.length&&this.setElement(o)}}else this.model=new s},closeHandler:function(){this.model&&this.model.destroy({error:t.bind(function(e,t){(404!=t.status||i.debug)&&n.handle({},t,{enforce:!0})},this)}),this._hideLoading(),this.widget&&this.widget.remove(),o.prototype.remove.call(this)},_onContentLoadFail:function(e){this.options.stateEnabled=!1,403==e.status?(r.notificationFlashMessage("error",l("oro.ui.forbidden_error")),this.widget?this.widget.dialog("close"):this.closeHandler()):o.prototype._onContentLoadFail.apply(this,arguments)},handleStateChange:function(i,n){if(this.options.stateEnabled){if(this.restoreMode)return this.restoreMode=!1,void 0;var o=t.omit(this.options,["dialogOptions","el","model"]);o.url||(o.el=e("<div/>").append(this.$el.clone()).html()),o.dialogOptions={},t.each(this.options.dialogOptions,function(e,i){t.isFunction(e)||"position"===i||(o.dialogOptions[i]=e)},this),o.dialogOptions.title=e(i.target).dialog("option","title"),o.dialogOptions.state=n.state,o.dialogOptions.snapshot=n.snapshot,o.wid=this.getWid(),this.model&&this.model.save({data:o})}},remove:function(){this.widget.dialog("close")},getWidget:function(){return this.widget},getActionsElement:function(){return this.actionsEl||(this.actionsEl=e('<div class="pull-right"/>').appendTo(e('<div class="form-actions widget-actions"/>').appendTo(this.widget.dialog("actionsContainer")))),this.actionsEl},_clearActionsContainer:function(){this.widget.dialog("actionsContainer").empty()},_renderActions:function(){o.prototype._renderActions.apply(this),this.widget.dialog("showActionsContainer")},show:function(){this.widget?this.widget.html(this.$el):("undefined"==typeof this.options.dialogOptions.position&&(this.options.dialogOptions.position=this._getWindowPlacement()),this.options.dialogOptions.stateChange=t.bind(this.handleStateChange,this),this.widget=e("<div/>").append(this.$el).dialog(this.options.dialogOptions)),this.loadingElement=this.$el.closest(".ui-dialog"),o.prototype.show.apply(this),this.widget.dialog("adjustContentSize"),this._fixDialogMinHeight(!0),this.widget.on("dialogmaximize dialogrestore",t.bind(function(){this._fixDialogMinHeight(!0),this.widget.trigger("resize")},this)),this.widget.on("dialogminimize",t.bind(function(){this._fixDialogMinHeight(!1),this.widget.trigger("resize")},this)),this.widget.on("dialogresizestop",t.bind(this._fixBorderShifting,this))},_initAdjustHeight:function(e){this.widget.off("dialogresize dialogmaximize dialogrestore",t.bind(this._fixScrollableHeight,this));var i=e.find(".scrollable-container");i.length&&(i.css("overflow","auto"),this.widget.on("dialogresize dialogmaximize dialogrestore",t.bind(this._fixScrollableHeight,this)),this._fixScrollableHeight())},_fixDialogMinHeight:function(e){if(e){var t=this.options.dialogOptions.minHeight+this.widget.dialog("actionsContainer").height();this.widget.dialog("widget").css("min-height",t)}else this.widget.dialog("widget").css("min-height",0)},_fixBorderShifting:function(){var e=this.widget.dialog("widget"),t=parseInt(e.css("border-left-width"))+parseInt(e.css("border-right-width")),i=parseInt(e.css("border-top-width"))+parseInt(e.css("border-bottom-width"));this.widget.width(this.widget.width()-t),this.widget.height(this.widget.height()-i),this._fixScrollableHeight()},_fixScrollableHeight:function(){var i=this.widget;i.find(".scrollable-container").each(t.bind(function(t,n){var o=e(n),s=i.height()-o.position().top;s&&o.height(s)},this)),a.updateResponsiveLayout()},_getWindowPlacement:function(){if(!this.options.incrementalPosition)return{my:"center center",at:c.prototype.defaultPos};var e="center+"+c.prototype.windowX+" center+"+c.prototype.windowY;if(c.prototype.openedWindows++,0===c.prototype.openedWindows%c.prototype.windowsPerRow){var t=c.prototype.openedWindows/c.prototype.windowsPerRow;c.prototype.windowX=t*c.prototype.windowsPerRow*c.prototype.windowOffsetX,c.prototype.windowY=0}else c.prototype.windowX+=c.prototype.windowOffsetX,c.prototype.windowY+=c.prototype.windowOffsetY;return{my:e,at:c.prototype.defaultPos}}});return c}),define("oro/datagrid/action/dialog-action",["underscore","orotranslation/js/translator","oroui/js/messenger","oroui/js/mediator","oro/datagrid/action/model-action","oro/dialog-widget"],function(e,t,i,n,o,s){var r;return r=o.extend({useDirectLauncherLink:!1,widgetDefault:{type:"dialog",multiple:!1,"reload-grid-name":"",options:{dialogOptions:{title:t("Update item"),allowMaximize:!1,allowMinimize:!1,maximizedHeightDecreaseBy:"minimize-bar",width:550}}},messagesDefault:{saved:t("Item updated successfully")},initialize:function(){var t,i;r.__super__.initialize.apply(this,arguments),t=this.widget?e.extend(this.widgetDefault,this.widget):this.widgetDefault,i=this.messages?e.extend(this.messagesDefault,this.messages):this.messagesDefault,this.launcherOptions=e.extend(this.launcherOptions,{link:this.getLink(),widget:t,messages:i})},run:function(){this.itemEditDialog||(this.itemEditDialog=new s({url:this.getLink(),title:this.launcherOptions.widget.options.dialogOptions.title,regionEnabled:!1,incrementalPosition:!1,dialogOptions:{modal:!0,resizable:!1,width:this.launcherOptions.widget.options.dialogOptions.width,close:e.bind(function(){delete this.itemEditDialog},this)}}),this.subviews.push(this.itemEditDialog),this.itemEditDialog.render())}})}),define("oroentity/js/fields-loader",["jquery","routing","orotranslation/js/translator","oroui/js/messenger","oroui/js/tools","jquery-ui"],function(e,t,i,n,o){e.widget("oroentity.fieldsLoader",{options:{router:null,routingParams:{},afterRevertCallback:null,confirm:null,requireConfirm:function(){return!0}},_create:function(){this.setFieldsData(this.element.data("fields")||[]),this._on({change:this._onChange})},_onChange:function(e){var t,i=this.options.confirm;i&&this.options.requireConfirm()?(t=e.removed&&e.removed.id||null,this._confirm(i,e.val,t)):this.loadFields()},loadFields:function(){e.ajax({url:t.generate(this.options.router,this.options.routingParams),success:e.proxy(this._onLoaded,this),error:this._onError,beforeSend:e.proxy(this._trigger,this,"start"),complete:e.proxy(this._trigger,this,"complete")})},getEntityName:function(){return this.element.val()},setFieldsData:function(e){var t=this._convertData(e);this.element.data("fields",t),this._trigger("update",null,[t])},getFieldsData:function(){return this.element.data("fields")},_confirm:function(t,i,n){if(n){var o=this.element,s=e.proxy(this.loadFields,this),r=function(){o.val(n).change(),e.isFunction(this.options.afterRevertCallback)&&this.options.afterRevertCallback.call(this,o)}.bind(this);t.on("ok",s),t.on("cancel",r),t.once("hidden",function(){t.off("ok",s),t.off("cancel",r)}),t.open()}},_onLoaded:function(e){this.setFieldsData(e)},_onError:function(t){var s=t.responseJSON,r=i("Sorry, unexpected error was occurred");o.debug&&(s.message?r+=": "+s.message:s.errors&&e.isArray(s.errors)?r+=": "+s.errors.join():"string"===e.type(s)&&(r+=": "+s)),n.notificationFlashMessage("error",r)},_convertData:function(t){return e.each(t,function(){var i=this;i.fieldsIndex={},e.each(i.fields,function(){var e=this;e.relation_type&&e.related_entity_name&&(e.related_entity=t[e.related_entity_name],delete e.related_entity_name),e.entity=i,i.fieldsIndex[e.name]=e})}),t}})}),define("oroentity/js/entity-fields-util",["underscore","orotranslation/js/translator","oroui/js/mediator"],function(e,t,i){function n(e,t){this.init(e,t)}return n.filterFields=function(t,i){return t=e.filter(t,function(t){var n;return n=!e.some(i,function(i){var n,o;return e.isString(i)?n=e.intersection([i],e.keys(t)).length>0:(o=e.pick(t,e.keys(i)),n=e.isEqual(o,i)),n})})},n.errorHandler=function(){var n,o;return n=t("oro.entity.not_exist"),o=e.bind(i.execute,i,"showErrorMessage",n),e.throttle(o,100,{trailing:!1})}(),n.prototype={init:function(e,t){this.entity=e,this.data=t||{}},pathToEntityChain:function(t,i){var o,s,r=this;if(s=this.data,!s[this.entity])return[];if(o=[{entity:s[this.entity],path:"",basePath:""}],!t)return this.entity?o:[];try{e.each(t.split("+"),function(e,t){var i,n,a;0===t?i=e:(a=e.indexOf("::"),-1!==a?(n=e.slice(0,a),i=e.slice(a+2)):n=e),n&&(o[t].entity=s[n]),i&&(e={field:o[t].entity.fieldsIndex[i]},o.push(e),e.path=r.entityChainToPath(o),e.field.related_entity&&(e.basePath=e.path+"+"+e.field.related_entity.name))})}catch(a){n.errorHandler(),o=[]}return i&&void 0===o[o.length-1].entity&&(o=o.slice(0,-1)),o},entityChainToPath:function(t,i){var o;i=i||t.length;try{t=e.map(t.slice(1,i),function(e){var t=e.field.name;return e.entity&&(t+="+"+e.entity.name),t})}catch(s){n.errorHandler(),t=[]}return o=t.join("::")},getApplicableConditions:function(t){var i,n,o;return n={},t?(i=this.pathToEntityChain(t),o=i[i.length-1],o&&(n={parent_entity:null,entity:o.field.entity.name,field:o.field.name},i.length>2&&(n.parent_entity=i[i.length-2].field.entity.name),e.extend(n,e.pick(o.field,["type","identifier"]))),n):n},getPropertyPathByPath:function(t){var i=[];return e.each(t.split("+"),function(e,t){var n;0===t?i.push(e):(n=e.split("::").slice(1).join("::"),n&&i.push(n))}),i.join(".")},getPathByPropertyPath:function(t){var i,o;e.isArray(t)||(t=t.split(".")),i=this.data[this.entity];try{o=e.map(t.slice(0,t.length-1),function(e){var t,n;return t=e,n=null,i.hasOwnProperty("fieldsIndex")?n=i.fieldsIndex:i.hasOwnProperty("related_entity")&&i.related_entity.hasOwnProperty("fieldsIndex")&&(n=i.related_entity.fieldsIndex),n&&n.hasOwnProperty(e)&&(i=n[e],i.hasOwnProperty("related_entity")&&(t+="+"+i.related_entity.name)),t}),o.push(t[t.length-1])}catch(s){n.errorHandler(),o=[]}return o.join("::")}},n}),define("oroentity/js/field-choice",["require","jquery","underscore","orotranslation/js/translator","./entity-fields-util","jquery-ui","jquery.select2"],function(e){var t=e("jquery"),i=e("underscore"),n=e("orotranslation/js/translator"),o=e("./entity-fields-util");return e("jquery-ui"),e("jquery.select2"),t.widget("oroentity.fieldChoice",{options:{entity:null,data:{},select2:{pageableResults:!0,dropdownAutoWidth:!0},exclude:[],fieldsLoaderSelector:""},_create:function(){this._on({change:function(e){e.added&&this.element.trigger("changed",e.added.id)}}),this.util=new o(this.options.entity,this.options.data),this._bindFieldsLoader()},_init:function(){var e,i,n=this;this._processSelect2Options(),this.updateData(this.options.entity,this.options.data),i=t.extend({initSelection:function(i,o){var s,r,a,l;e=i.data("select2"),a=e.opts,s=i.val(),l=null,r=n.util.pathToEntityChain(s,!0),e.pagePath=r[r.length-1].basePath,a.query({matcher:function(e,t,i){var n=s===a.id(i);return n&&(l=i),n},callback:t.isFunction(o)?function(){o(l)}:t.noop})},id:function(e){return void 0!==e.id?e.id:e.pagePath},data:function(){var t,i;return t=e&&e.pagePath||"",i=n._select2Data(t),{more:!1,pagePath:t,results:i}},formatBreadcrumbItem:function(e){var t;return t=e.field?e.field.label:e.entity.label},breadcrumbs:function(e){var i=n.util.pathToEntityChain(e,!0);return t.each(i,function(e,t){t.pagePath=t.basePath}),i}},this.options.select2),this.element.select2(i),e=this.element.data("select2")},_setOption:function(e,i){return t.isPlainObject(i)?t.extend(this.options[e],i):this._super(e,i),this},_getCreateOptions:function(){return t.extend(!0,{},this.options)},_processSelect2Options:function(){var e,n=this.options.select2;n.formatSelectionTemplate&&(e=i.template(n.formatSelectionTemplate),n.formatSelection=t.proxy(function(t){return this.formatChoice(t.id,e)},this))},_bindFieldsLoader:function(){this.options.fieldsLoaderSelector&&(this.$fieldsLoader=t(this.options.fieldsLoaderSelector),this._on(this.$fieldsLoader,{fieldsloaderupdate:function(e,i){this.setValue(""),this.updateData(t(e.target).val(),i)}}),this.updateData(this.$fieldsLoader.val(),this.$fieldsLoader.data("fields")))},updateData:function(e,t){t=t||{},this.options.entity=e,this.options.data=t,this.element.data("entity",e).data("data",t),this.util.init(e,t)},setValue:function(e){this.element.select2("val",e,!0)},formatChoice:function(e,t){var i;if(e)try{i=this.util.pathToEntityChain(e)}catch(n){}return i?t(i):e},splitFieldId:function(e){return this.util.pathToEntityChain(e)},getApplicableConditions:function(e){return this.util.getApplicableConditions(e)},_select2Data:function(e){var s,r,a,l=[],c=[],d=[],h=this.options.data,u=this.util;return t.isEmptyObject(h)?d:(s=this.util.pathToEntityChain(e,!0),r=s[s.length-1].entity.name,h=h[r],a=h.fields,i.isEmpty(this.options.exclude)||(a=o.filterFields(a,this.options.exclude)),t.each(a,function(){var e,t,i=this;t={field:i},e={id:u.entityChainToPath(s.concat(t)),text:i.label},i.related_entity?(t.entity=i.related_entity,e.pagePath=u.entityChainToPath(s.concat(t)),e.related_entity=i.related_entity,delete e.id,c.push(e)):l.push(e)}),i.isEmpty(l)||d.push({text:n("oro.entity.field_choice.fields"),children:l}),i.isEmpty(c)||d.push({text:n("oro.entity.field_choice.relations"),children:c}),d)}}),t}),define("oroentity/js/entity-field-choice-util",["underscore"],function(e){var t=function(e){this.$el=e};return t.prototype={optGroupTemplate:e.template('<optgroup label="<%- label %>"><%= options %></optgroup>'),optionTemplate:e.template('<option value="<%- name %>"<% _.each(_.omit(obj, ["name", "related_entity_fields"]), function (val, key) { %> data-<%- key %>="<%- val %>"<% }) %>><%- label %></option>'),findEntity:function(e){return{name:e,label:e,plural_label:e,icon:null}},splitFieldId:function(e){var t=[];return""!=e&&t.push({entity:this.findEntity(this.getEntityName()),label:this._getFieldLabel(e)}),t},getEntityName:function(){return e.isUndefined(this.$el.data("entity"))?null:this.$el.data("entity")},changeEntity:function(e,t){this.$el.data("entity",e);var i=this.$el.find('option[value=""]');this.$el.empty(),i.length>0&&this.$el.append(this.optionTemplate({name:"",label:i.text()}));var n=this._buildSelectContent(t);""!=n&&this.$el.append(n),this.$el.val(this.$el.is("[multiple]")?[]:""),this.$el.trigger("change")},getFieldData:function(e){return this._getOptionElement(e).data()},filterData:function(){this.$el.find("option").each(e.partial(function(e){e.exclude(e._getFieldApplicableConditions($(this).data(),e.getEntityName()))&&$(this).remove()},this))},_getFieldLabel:function(e){return this._getOptionElement(e).data("label")},_getFieldGroupLabel:function(e){return this._getOptionElement(e).parent().attr("label")},_getOptionElement:function(e){return this.$el.find('option[value="'+e.replace(/\\/g,"\\\\").replace(/:/g,"\\:")+'"]')},_getFieldApplicableConditions:function(t,i){return e.extend({entity:i,field:t.name},e.pick(t,["type","identifier"]))},_buildSelectContent:function(t){var i="",n="";if(e.each(t,e.bind(function(t){e.isUndefined(t.relation_type)?(e.isUndefined(this.exclude)||!this.exclude(this._getFieldApplicableConditions(t,this.getEntityName())))&&(i+=this.optionTemplate(t)):n+=this.optionTemplate(t)},this)),""==n)return i;var o="";return""!=i&&(o+=this.optGroupTemplate({label:this.fieldsLabel,options:i})),o+=this.optGroupTemplate({label:this.relatedLabel,options:n})}},t}),define("oroentity/js/entity-field-select-util",["underscore"],function(e){var t=function(e){this.$el=e};return t.prototype={findEntity:function(e){return{name:e,label:e,plural_label:e,icon:null}},splitFieldId:function(t){var i=[],n=this._getData(),o=t.split("+");if(e.size(o)>1){i.push({entity:this.findEntity(this.getEntityName()),label:this._getFieldGroupLabel(o[0],n)});var s=o[0],r=e.size(o)-2;e.each(e.rest(o),e.bind(function(t,o){n=this._getChildren(this._getField(s,n));var a=this._getPair(t),l=r>o?this._getFieldGroupLabel(e.last(a),n):this._getFieldLabel(e.last(a),n);i.push({entity:this.findEntity(e.first(a)),label:l}),s=e.last(a)},this))}else""!=o[0]&&i.push({entity:this.findEntity(this.getEntityName()),label:this._getFieldLabel(o[0],n)});return i},getEntityName:function(){return e.isUndefined(this.$el.data("entity"))?null:this.$el.data("entity")},changeEntity:function(e,t){this.$el.data("entity",e),this.$el.data("data",this._convertData(t,this.getEntityName(),null)),this.$el.val(""),this.$el.trigger("change")},getFieldData:function(t){var i={},n=this._getData(),o=t.split("+");if(e.size(o)>1){i=this._getField(o[0],n),n=this._getChildren(i);var s=e.size(o)-2;e.each(e.rest(o),e.bind(function(t,o){var r=e.last(this._getPair(t));i=s>o?this._getField(r,n):this._getFieldData(r,n),n=this._getChildren(i)},this))}else""!=o[0]&&(i=this._getFieldData(o[0],n));return e.omit(i,["children"])},filterData:function(){this._filterData(this._getData())},_getData:function(){var t=this.$el.data("data");return e.isUndefined(t)||e.isNull(t)?[]:t},_getFieldLabel:function(e,t){var i=this._getFieldData(e,t);return i?i.text:null},_getFieldGroupLabel:function(e,t){var i=this._getField(e,t);return i?i.text:null},_getPair:function(t){var i=t.split("::");return 3==e.size(i)&&(i=[i[0],i[1]+"::"+i[2]]),i},_getField:function(t,i){var n=null;return e.each(i,function(e){e.name===t&&(n=e)}),n},_getFieldData:function(t,i){var n=e.find(i,function(t){return e.isUndefined(t.name)});return n=e.isUndefined(n)?i:e.isUndefined(n.children)?[]:n.children,this._getField(t,n)},_getChildren:function(t){return e.isUndefined(t.children)?[]:t.children},_filterData:function(t){e.each(t,function(i,n){e.isUndefined(i.name)?e.isUndefined(i.children)||(this._filterData(i.children),e.isEmpty(i.children)&&delete t[n]):e.isUndefined(i.relation_type)?this.exclude(this._getFieldApplicableConditions(i,this.getEntityName()))&&delete t[n]:e.isUndefined(i.children)||this._filterData(i.children)},this)},_getFieldApplicableConditions:function(t,i){return e.extend({entity:i,field:t.name},e.pick(t,["type","identifier"]))},_convertData:function(t,i,n){var o=[];return e.each(t,e.bind(function(t){var s=null!==n?n+"+"+i+"::"+t.name:t.name;e.isUndefined(t.relation_type)?(e.isUndefined(this.exclude)||!this.exclude(this._getFieldApplicableConditions(t,this.getEntityName())))&&o.push(e.extend({id:s,text:t.label},e.omit(t,["label"]))):e.isUndefined(t.related_entity_fields)?o.push(e.extend({text:t.label},e.omit(t,["label"]))):o.push(e.extend({text:t.label,children:this._convertData(t.related_entity_fields,t.related_entity_name,s)},e.omit(t,["label","related_entity_fields"])))},this)),o}},t}),define("oroentity/js/entity-field-view",["underscore","backbone"],function(e,t){return t.View.extend({options:{fieldsLabel:null,relatedLabel:null,findEntity:null,exclude:void 0},util:null,initialize:function(t){this.options=e.defaults(t||{},this.options),this.util=this.$el.data("entity-field-util"),this.util.fieldsLabel=this.options.fieldsLabel,this.util.relatedLabel=this.options.relatedLabel,e.isNull(this.options.findEntity)||(this.util.findEntity=this.options.findEntity),e.isUndefined(this.options.exclude)||(this.util.exclude=this.options.exclude,this.util.filterData())},getEntityName:function(){return this.util.getEntityName()},changeEntity:function(e,t){this.util.changeEntity(e,t)},splitFieldId:function(e){return this.util.splitFieldId(e)},getFieldData:function(e){return this.util.getFieldData(e)},getFieldApplicableConditions:function(t){if(e.isNull(t)||""==t)return{};var i={parent_entity:null,entity:this.getEntityName(),field:t},n=i.field.split("+");if(e.size(n)>1){var o=e.last(n).split("::");if(i.parent_entity=i.entity,i.entity=o[e.size(o)-2],i.field=e.last(o),e.size(n)>2){var s=n[e.size(n)-2].split("::");i.parent_entity=s[e.size(s)-2]}}return e.extend(i,e.pick(this.getFieldData(t),["type","identifier"])),i}})}),define("oroemail/js/email/template/model",["backbone"],function(e){return e.Model.extend({defaults:{entity:"",id:"",name:""}})}),define("oroemail/js/email/template/collection",["backbone","routing","./model"],function(e,t,i){return e.Collection.extend({route:null,routeId:null,url:null,model:i,initialize:function(e,i){this.route=e,this.routeId=i;var n={};n[i]=null,this.url=t.generate(this.route,n)},setEntityId:function(e){var i={};i[this.routeId]=e,this.url=t.generate(this.route,i)}})}),define("oroemail/js/email/template/view",["jquery","underscore","backbone"],function(e,t,i){return i.View.extend({events:{change:"selectionChanged"},target:null,initialize:function(t){this.template=e("#emailtemplate-chooser-template").html(),this.target=t.target,this.listenTo(this.collection,"reset",this.render),e(this.target).val()||this.selectionChanged()},selectionChanged:function(){var e=this.$el.val();this.collection.setEntityId(e.split("\\").join("_")),e?this.collection.fetch({reset:!0}):this.collection.reset()},render:function(){e(this.target).val("").trigger("change"),e(this.target).find('option[value!=""]').remove(),this.collection.models.length>0&&e(this.target).append(t.template(this.template,{entities:this.collection.models}))}})}),define("oroemail/js/email/variable/model",["underscore","backbone"],function(e,t){return t.Model.extend({defaults:{system:[],entity:[]},entityName:null,entityLabel:null,path:[],getEntityName:function(){return this.entityName},getEntityLabel:function(){return this.entityLabel},setEntity:function(e,t){this.entityName=e,this.entityLabel=t,this.path=[],this.trigger("change:entity")},getPath:function(){var t="";return e.each(this.path,function(e){t+="/"+e.fieldName}),t},setPath:function(t){this.path=[],e.each(t.split("/"),function(e){e&&this.path.push({relatedEntityName:this._getRelatedEntityName(this._getCurrentEntityName(),e),fieldName:e})},this),this.trigger("change:entity")},getSystemVariables:function(){return this.attributes.system},getEntityVariables:function(){var t=this._getCurrentEntityName();return t&&e.has(this.attributes.entity,t)?this.attributes.entity[t]:{}},_getCurrentEntityName:function(){var t=e.last(this.path);return t?t.relatedEntityName:this.entityName},_getRelatedEntityName:function(e,t){return this.attributes.entity[e][t].related_entity_name}})}),define("oroemail/js/email/variable/view",["jquery","underscore","backbone","orotranslation/js/translator"],function(e,t,i){var n=window.document;return i.View.extend({options:{templateSelector:null,sectionTemplateSelector:null,sectionContentSelector:null,sectionTabSelector:null,fieldsSelectors:['input[name*="subject"]','textarea[name*="content"]'],defaultFieldIndex:1},events:{"click a.variable":"_handleVariableClick","click a.reference":"_handleReferenceClick"},sections:{system:"system",entity:"entity"},lastElement:null,initialize:function(i){this.options=t.defaults(i||{},this.options),this.template=t.template(e(this.options.templateSelector).html()),this.systemTemplate=t.template(e(this._getSectionSelector(this.options.sectionTemplateSelector,this.sections.system)).html()),this.entityTemplate=t.template(e(this._getSectionSelector(this.options.sectionTemplateSelector,this.sections.entity)).html()),this.listenTo(this.model,"change:entity",this._renderEntityVariables),this.fields=e(this.options.fieldsSelectors.join(",")),this.fields.on("blur",t.bind(this._updateElementsMetaData,this)),this.fields.droppable({drop:function(t,i){var n=i.draggable.text(),o=e(this);o.val(o.val()+n)}}),this.lastElement=e(this.options.fieldsSelectors[this.options.defaultFieldIndex])},render:function(){var e={system:this._getSystemVariablesHtml(this.model.getSystemVariables())};return this.$el.empty(),this.$el.html(this.template({variables:e})),this._applyDraggable(this._getSectionContent(this.sections.system)),this._renderEntityVariables(),this},isEmpty:function(){var e=!0;return t.each(this.fields,function(t){t.value&&(e=!1)}),e},clear:function(){t.each(this.fields,function(e){e.value&&(e.value="")})},_renderEntityVariables:function(){var e=this._getSectionContent(this.sections.entity),i=this._getSectionTab(this.sections.entity),n=this.model.getEntityVariables(),o=this.model.getEntityLabel(),s=this.model.getPath();e.empty(),t.isEmpty(n)&&!s?(this._isVisible(i)&&(i.hasClass("active")&&(i.removeClass("active"),this._getSectionTab(this.sections.system).addClass("active")),i.hide()),this._isVisible(e)&&(e.hasClass("active")&&(e.removeClass("active"),this._getSectionContent(this.sections.system).addClass("active")),e.hide())):(this._isVisible(i)||i.removeAttr("style"),this._isVisible(e)||e.removeAttr("style"),e.html(this._getEntityVariablesHtml(n,o,s)),this._applyDraggable(e))},_isVisible:function(e){return"none"!==e.css("display")},_getSystemVariablesHtml:function(e){return this.systemTemplate({variables:e,root:this.sections.system})},_getEntityVariablesHtml:function(e,i,n){var o={},s={};return t.each(e,function(e,i){t.has(e,"related_entity_name")?(s[i]=e,o[i]=e):o[i]=e}),this.entityTemplate({fields:o,relations:s,entityLabel:i,path:n,root:this.sections.entity})},_applyDraggable:function(e){e.find("a.variable").draggable({helper:"clone"})},_getSectionSelector:function(e,t){return e.replace(/\{sectionName\}/g,t)},_getSectionTab:function(e){return this.$el.find(this._getSectionSelector(this.options.sectionTabSelector,e))},_getSectionContent:function(e){return this.$el.find(this._getSectionSelector(this.options.sectionContentSelector,e))},_handleVariableClick:function(t){var i=this.fields.filter(n.activeElement);!i.length&&this.lastElement&&this.lastElement.is(":visible")&&(i=this.lastElement),i&&i.val(i.val()+e(t.currentTarget).html())},_handleReferenceClick:function(t){var i=e(t.currentTarget),n=i.data("path");this.model.setPath(n)},_updateElementsMetaData:function(t){this.lastElement=e(t.currentTarget)}})}),require(["jquery","underscore","orotranslation/js/translator","oroui/js/mediator","oroui/js/messenger","oro/dialog-widget","jquery.dialog.extended"],function(e,t,i,n,o,s){e(function(){function i(){var t=e("#roles-list").find(".controls :checkbox");t.attr("required",t.filter(":checked").length>0?null:"required")}function r(){o.setup()}e(document).on("click","#roles-list input",function(){i()}),n.on("page:afterChange",i),n.on("page:afterChange",r),e(document).on("change","#btn-enable input",function(){e(".status-enabled").toggleClass("hide"),e(".status-disabled").toggleClass("hide")}),e(document).on("click","#view-activity-btn",function(i){i.stopImmediatePropagation();var n=e(this),o=n.data("dialog");return o?!1:(n.data("dialog",o=new s({url:n.attr("href"),dialogOptions:{allowMaximize:!0,allowMinimize:!0,dblclick:"maximize",maximizedHeightDecreaseBy:"minimize-bar",width:1e3,title:n.attr("title")}})),o.once("widgetRemove",t.bind(n.removeData,n,"dialog")),o.render(),!1)})}),e(function(){var t;e(".update-status a").click(function(){return e.get(e(this).attr("href"),function(n){t=e(n).dialog({title:i("Update status"),width:300,height:180,modal:!1,resizable:!1})}),!1}),e(document).on("submit","#create-status-form",function(){return e.ajax({type:"POST",url:e(this).attr("action"),data:e(this).serialize(),success:function(){t.dialog("destroy")}}),!1})})}),define("orouser/js/init-user",function(){}),define("orointegration/js/channel-view",["jquery","backbone","underscore","orotranslation/js/translator","oroui/js/mediator","oroui/js/delete-confirmation"],function(e,t,i,n,o,s){return t.View.extend({UPDATE_MARKER:"formUpdateMarker",fieldsSets:{type:[],transportType:[]},requiredOptions:["transportTypeSelector","typeSelector","fieldsSets","formSelector"],initialize:function(t){this.options=i.defaults(t||{},this.options);var n=this.requiredOptions.filter(function(e){return i.isUndefined(t[e])});if(n.length)throw new TypeError("Missing required option(s): "+n.join(","));i.extend(this.fieldsSets,t.fieldsSets),this.processSelectorState(),e(t.typeSelector).on("change",i.bind(this.changeHandler,this)),e(t.transportTypeSelector).on("change",i.bind(this.changeHandler,this)),this.memoizeValue(t.typeSelector),this.memoizeValue(t.transportTypeSelector)},processSelectorState:function(){var t=e(this.options.transportTypeSelector);t.find("option").length<2&&t.parents(".control-group:first").hide()},changeHandler:function(t){var o=e(t.currentTarget);if(o.data("cancelled")!==!0){var r=o.data("current");if(this.isEmpty())this.processChange(o);else{var a=new s({title:n("oro.integration.change_type"),okText:n("Yes"),content:n("oro.integration.submit")});a.on("ok",i.bind(function(){this.processChange(o)},this)),a.on("cancel",i.bind(function(){o.data("cancelled",!0).val(r).trigger("change"),this.memoizeValue(o)},this)),a.open()}}else o.data("cancelled",!1)},processChange:function(t){this.memoizeValue(t);var n=e(this.options.formSelector),s=n.serializeArray(),r=n.attr("action"),a=t.is(this.options.typeSelector)?this.fieldsSets.type:this.fieldsSets.transportType;s=i.filter(s,function(e){return-1!==i.indexOf(a,e.name)}),s.push({name:this.UPDATE_MARKER,value:1});var l={formEl:n,data:s,reloadManually:!0};o.trigger("integrationFormReload:before",l),l.reloadManually&&o.execute("submitPage",{url:r,type:n.attr("method"),data:e.param(s)})},isEmpty:function(){var t=e(this.options.typeSelector).parents("form").find('input[type="text"]:not([name$="[name]"])');return t=t.filter(function(){return""!=this.value}),!t.length},memoizeValue:function(t){var i=e(t);i.data("current",i.val())}})}),define("oro/datagrid/action/ajax-action",["./model-action"],function(e){var t;return t=e.extend()}),define("oro/datagrid/action/schedule-sync-action",["orotranslation/js/translator","oroui/js/messenger","oro/datagrid/action/ajax-action"],function(e,t,i){var n;return n=i.extend({_onAjaxSuccess:function(e){this.reloadData&&this.datagrid.hideLoading(),this._showAjaxSuccessMessage(e)},_showAjaxSuccessMessage:function(i){var n=i.successful?this.messages.success:this.messages.error,o=i.message||e(n);o&&t.notificationFlashMessage(i.successful?"success":"error",o)}})}),define("oroaddress/js/mapservice/googlemaps",["underscore","backbone","orotranslation/js/translator","orolocale/js/locale-settings"],function(e,t,i,n){var o=t.$;return t.View.extend({options:{mapOptions:{zoom:17,mapTypeControl:!0,panControl:!1,zoomControl:!0},apiVersion:"3.exp",sensor:!1,apiKey:null,showWeather:!0},mapLocationCache:{},mapsLoadExecuted:!1,initialize:function(t){this.options=e.defaults(t||{},this.options),this.$mapContainer=o('<div class="map-visual"/>').appendTo(this.$el),this.$unknownAddress=o('<div class="map-unknown">'+i("map.unknown.location")+"</div>").appendTo(this.$el),this.mapLocationUnknown()},_initMapOptions:function(){e.isUndefined(this.options.mapOptions.mapTypeControlOptions)&&(this.options.mapOptions.mapTypeControlOptions={style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}),e.isUndefined(this.options.mapOptions.zoomControlOptions)&&(this.options.mapOptions.zoomControlOptions={style:google.maps.ZoomControlStyle.SMALL}),e.isUndefined(this.options.mapOptions.mapTypeId)&&(this.options.mapOptions.mapTypeId=google.maps.MapTypeId.ROADMAP)},_initMap:function(t){var i,o;if(this._initMapOptions(),this.map=new google.maps.Map(this.$mapContainer[0],e.extend({},this.options.mapOptions,{center:t})),this.mapLocationMarker=new google.maps.Marker({draggable:!1,map:this.map,position:t}),this.options.showWeather){var s=n.settings.unit.temperature.toUpperCase(),r=n.settings.unit.wind_speed.toUpperCase();i=new google.maps.weather.WeatherLayer({temperatureUnits:google.maps.weather.TemperatureUnit[s],windSpeedUnits:google.maps.weather.WindSpeedUnit[r]}),i.setMap(this.map),o=new google.maps.weather.CloudLayer,o.setMap(this.map)}},loadGoogleMaps:function(){var t="sensor="+(this.options.sensor?"true":"false");this.options.showWeather&&(t+="&libraries=weather"),this.options.apiKey&&(t+="&key="+this.options.apiKey),o.ajax({url:window.location.protocol+"//www.google.com/jsapi",dataType:"script",cache:!0,success:e.bind(function(){google.load("maps",this.options.apiVersion,{other_params:t,callback:e.bind(this.onGoogleMapsInit,this)}),this.mapsLoadExecuted=!1
},this)})},updateMap:function(t,i){if(!this.hasGoogleMaps()){if(this.mapsLoadExecuted)return;return this.mapsLoadExecuted=!0,this.requestedLocation={address:t,label:i},this.loadGoogleMaps(),void 0}this.mapLocationCache.hasOwnProperty(t)?this.updateMapLocation(this.mapLocationCache[t],i):this.getGeocoder().geocode({address:t},e.bind(function(e,n){n===google.maps.GeocoderStatus.OK?(this.mapLocationCache[t]=e[0].geometry.location,this.updateMapLocation(e[0].geometry.location,i)):this.mapLocationUnknown()},this))},onGoogleMapsInit:function(){e.isUndefined(this.requestedLocation)||(this.updateMap(this.requestedLocation.address,this.requestedLocation.label),delete this.requestedLocation)},hasGoogleMaps:function(){return!e.isUndefined(window.google)&&google.hasOwnProperty("maps")},mapLocationUnknown:function(){this.$mapContainer.hide(),this.$unknownAddress.show()},mapLocationKnown:function(){this.$mapContainer.show(),this.$unknownAddress.hide()},updateMapLocation:function(e,t){this.mapLocationKnown(),!e||this.location&&e.toString()===this.location.toString()||(this._initMap(e),this.map.setCenter(e),this.mapLocationMarker.setPosition(e),this.mapLocationMarker.setTitle(t),this.location=e)},getGeocoder:function(){return e.isUndefined(this.geocoder)&&(this.geocoder=new google.maps.Geocoder),this.geocoder}})}),define("orolocale/js/formatter/name",["../locale-settings"],function(e){return{formats:e.getNameFormats(),formatCache:{},format:function(t,i){i||(i=e.getLocale());var n=this.getNameFormat(i),o=n.replace(/%(\w+)%/g,function(e,i){var n=i.toLowerCase(),o="";return t.hasOwnProperty(n)&&(o=t[n],i!==n&&(o=o.toLocaleUpperCase())),o||""});return o.replace(/ +/g," ").replace(/^\s+|\s+$/g,"")},getNameFormat:function(t){if(!this.formatCache.hasOwnProperty(t)){for(var i=e.getLocaleFallback(t),n=null,o=0;o<i.length;o++)if(this.formats.hasOwnProperty(i[o])){n=this.formats[i[o]];break}if(!n)throw new Error("Can't find name format for locale "+t);this.formatCache[t]=n}return this.formatCache[t]}}}),define("orolocale/js/formatter/address",["../locale-settings","./name"],function(e,t){return{formats:e.getAddressFormats(),format:function(i,n,o){n||(n=e.isFormatAddressByAddressCountry()?i.country_iso2:e.getCountry()),o=o||"<br/>";var s=this.getAddressFormat(n),r=s.replace(/%(\w+)%/g,function(o,s){var r=s.toLowerCase(),a="";return a="name"===r?t.format(i,e.getCountryLocale(n)):"street"==r?i.street+" "+(i.street2||""):"street1"==r?i.street:i[r],a&&s!==r&&(a=a.toLocaleUpperCase()),a||""}),a=r.replace(/ *(\\n)+/g,"\\n").split("\\n");if("function"==typeof o){for(var l=0;l<a.length;l++)a[l]=o(a[l]);r=a.join("")}else r=a.join(o);return r.replace(/ +/g," ")},getAddressFormat:function(t){return this.formats.hasOwnProperty(t)||(t=e.getCountry()),this.formats[t]}}}),define("oroaddress/js/address/view",["underscore","backbone","orotranslation/js/translator","orolocale/js/formatter/address"],function(e,t,i,n){var o=t.$;return t.View.extend({tagName:"div",attributes:{"class":"list-item map-item"},events:{click:"activate","click .item-edit-button":"edit","click .item-remove-button":"close"},initialize:function(){this.$el.attr("id","address-book-"+this.model.id),this.template=e.template(o("#template-addressbook-item").html()),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"change:active",this.toggleActive)},activate:function(){this.model.set("active",!0)},toggleActive:function(){this.model.get("active")?this.$el.addClass("active"):this.$el.removeClass("active")},edit:function(){this.trigger("edit",this,this.model)},close:function(){this.model.get("primary")?alert(i("Primary address can not be removed")):this.model.destroy({wait:!0})},render:function(){var e=this.model.toJSON();return e.formatted_address=n.format({prefix:e.namePrefix,suffix:e.nameSuffix,first_name:e.firstName,middle_name:e.middleName,last_name:e.lastName,organization:e.organization,street:e.street,street2:e.street2,city:e.city,country:e.country,country_iso2:e.countryIso2,country_iso3:e.countryIso3,postal_code:e.postalCode,region:e.region||e.regionText,region_code:e.regionCode},null,"\n"),this.$el.append(this.template(e)),this.model.get("primary")&&this.activate(),this}})}),define("oroaddress/js/address/model",["backbone"],function(e){return e.Model.extend({defaults:{label:"",namePrefix:"",firstName:"",middleName:"",lastName:"",nameSuffix:"",organization:"",street:"",street2:"",city:"",country:"",countryIso2:"",countryIso3:"",postalCode:"",region:"",regionText:"",regionCode:"",primary:!1,types:[],active:!1},getSearchableString:function(){return this.get("country")+", "+this.get("city")+", "+this.get("street")+" "+(this.get("street2")||"")}})}),define("oroaddress/js/address/collection",["underscore","backbone","oroaddress/js/address/model"],function(e,t,i){return t.Collection.extend({model:i,initialize:function(){this.on("change:active",this.onActiveChange,this)},onActiveChange:function(t){if(t.get("active")){var i=this.where({active:!0});e.each(i,function(e){e.get("id")!==t.get("id")&&e.set("active",!1)}),this.trigger("activeChange",t)}}})}),define("oroaddress/js/address-book",["underscore","backbone","orotranslation/js/translator","oroui/js/mediator","oroui/js/messenger","oro/dialog-widget","oroaddress/js/mapservice/googlemaps","oroaddress/js/address/view","oroaddress/js/address/collection"],function(e,t,i,n,o,s,r,a,l){var c=t.$;return t.View.extend({options:{mapOptions:{zoom:12},template:null,addressListUrl:null,addressCreateUrl:null,addressUpdateUrl:null,mapView:r},noDataMessage:i("Empty Address Book"),attributes:{"class":"list-box map-box"},initialize:function(t){this.options=e.defaults(t||{},this.options),this.options.collection=this.options.collection||new l,this.options.collection.url=this._getUrl("addressListUrl"),this.listenTo(this.getCollection(),"activeChange",this.activateAddress),this.listenTo(this.getCollection(),"add",this.addAddress),this.listenTo(this.getCollection(),"reset",this.addAll),this.listenTo(this.getCollection(),"remove",this.onAddressRemove),this._initMainContainers(),this.mapView=new this.options.mapView({mapOptions:this.options.mapOptions,el:this.$mapContainerFrame})},_initMainContainers:function(){this.$noDataContainer=c('<div class="no-data"><span>'+this.noDataMessage+"</span></div>"),this.$adressesContainer=c('<div class="map-address-list"/>'),this.$mapContainerFrame=c('<div class="map-visual-frame"/>'),this.$el.find(".map-address-list").length||this.$el.append(this.$adressesContainer),this.$el.find(".map-visual-frame").length||this.$el.append(this.$mapContainerFrame),this.$el.find(".no-data").length||this.$el.append(this.$noDataContainer)},_getUrl:function(t){return e.isFunction(this.options[t])?this.options[t].apply(this,Array.prototype.slice.call(arguments,1)):this.options[t]},getCollection:function(){return this.options.collection},onAddressRemove:function(){if(!this.getCollection().where({active:!0}).length){var e=this.getCollection().where({primary:!0});e.length?e[0].set("active",!0):this.getCollection().length&&this._activateFirstAddress()}},_activateFirstAddress:function(){this.getCollection().at(0).set("active",!0)},addAll:function(e){this.$adressesContainer.empty(),e.length>0?(this._hideEmptyMessage(),e.each(function(e){this.addAddress(e)},this)):this._showEmptyMessage(),1===e.length?this._activateFirstAddress():this._activatePreviousAddress()},_hideEmptyMessage:function(){this.$noDataContainer.hide(),this.$mapContainerFrame.show(),this.$adressesContainer.show()},_showEmptyMessage:function(){this.$noDataContainer.show(),this.$mapContainerFrame.hide(),this.$adressesContainer.hide()},_activatePreviousAddress:function(){if(void 0!==this.activeAddress){var e=this.getCollection().where({id:this.activeAddress.get("id")});e.length&&e[0].set("active",!0)}},addAddress:function(t){if(!this.$el.find("#address-book-"+t.id).length){var i=new a({model:t});i.on("edit",e.bind(this.editAddress,this)),this.$adressesContainer.append(i.render().$el)}},editAddress:function(e,t){this._openAddressEditForm(i("Update Address"),this._getUrl("addressUpdateUrl",t))},createAddress:function(){this._openAddressEditForm(i("Add Address"),this._getUrl("addressCreateUrl"))},_openAddressEditForm:function(t,r){this.addressEditDialog||(this.addressEditDialog=new s({url:r,title:t,regionEnabled:!1,incrementalPosition:!1,dialogOptions:{modal:!0,resizable:!1,width:475,autoResize:!0,close:e.bind(function(){delete this.addressEditDialog},this)}}),this.addressEditDialog.render(),n.on("page:request",e.bind(function(){this.addressEditDialog&&this.addressEditDialog.remove()},this)),this.addressEditDialog.on("formSave",e.bind(function(){this.addressEditDialog.remove(),o.notificationFlashMessage("success",i("Address saved")),this.reloadAddresses()},this)))},reloadAddresses:function(){this.getCollection().fetch({reset:!0})},activateAddress:function(e){e.get("primary")||(this.activeAddress=e),this.mapView.updateMap(e.getSearchableString(),e.get("label"))}})}),define("oroaddress/js/region/model",["backbone"],function(e){return e.Model.extend({defaults:{country:"",code:"",name:""}})}),define("oroaddress/js/region/collection",["backbone","routing","oroaddress/js/region/model"],function(e,t,i){return e.Collection.extend({route:"oro_api_country_get_regions",url:null,model:i,initialize:function(){this.url=t.generate(this.route)},setCountryId:function(e){this.url=t.generate(this.route,{country:e})}})}),define("oroaddress/js/region/view",["underscore","backbone","jquery.select2"],function(e,t){var i=t.$;return t.View.extend({events:{change:"selectionChanged"},initialize:function(t){this.target=i(t.target),this.$simpleEl=i(t.simpleEl),this.target.closest(".controls").append(this.$simpleEl),this.uniform=i("#uniform-"+this.target[0].id),this.$simpleEl.attr("type","text"),this.showSelect=t.showSelect,this.template=i("#region-chooser-template").html(),this.displaySelect2(this.showSelect),this.target.on("select2-init",e.bind(function(){this.displaySelect2(this.showSelect)},this)),this.listenTo(this.collection,"reset",this.render)},displaySelect2:function(e){e?(this.addRequiredFlag(this.$simpleEl),this.target.select2("container").show()):(this.target.select2("container").hide(),this.removeRequiredFlag(this.$simpleEl))},addRequiredFlag:function(e){var t=this.getInputLabel(e);t.hasClass("required")||t.addClass("required").append("<em>*</em>")},removeRequiredFlag:function(e){var t=this.getInputLabel(e);t.hasClass("required")&&t.removeClass("required").find("em").remove()},getInputLabel:function(e){return e.parent().parent().find("label")},sync:function(){""==this.target.val()&&""!=this.$el.val()&&this.$el.trigger("change")},selectionChanged:function(e){if(i(e.currentTarget).val()){var t=i(e.currentTarget).val();this.collection.setCountryId(t),this.collection.fetch({reset:!0})}else this.collection.reset([])},render:function(){this.collection.models.length>0?(this.target.show(),this.displaySelect2(!0),this.uniform.show(),this.target.val("").trigger("change"),this.target.find('option[value!=""]').remove(),this.target.append(e.template(this.template,{regions:this.collection.models})),this.$simpleEl.hide(),this.$simpleEl.val("")):(this.target.hide(),this.target.val(""),this.displaySelect2(!1),this.uniform.hide(),this.$simpleEl.show())}})}),define("oroaddress/js/country/select2_handler",[],function(){return{handle:function(e){return e.ajax?(e.minimumInputLength=0,void 0):(e.sortResults=function(e,t,i){if(!i.term||i.term.length<1)return e;var n=new RegExp(i.term,"im"),o=function(e,t){var i=e.text.search(n),o=t.text.search(n);return-1==i||-1==o?o-i:i-o};return e.sort(o)},void 0)}}}),define("jquery.fullcalendar",["jquery","orolocale/js/formatter/datetime","jquery-ui"],function(e,t){function i(){return t.applyTimeZoneCorrection(new Date)}function n(t){e.extend(!0,Ct,t)}function o(t,n,o){function d(e){ot?m()&&(j(),k(e)):h()}function h(){st=n.theme?"ui":"fc",t.addClass("fc"),n.isRTL?t.addClass("fc-rtl"):t.addClass("fc-ltr"),n.theme&&t.addClass("ui-widget"),ot=e("<div class='fc-content' style='position:relative'/>").prependTo(t),it=new s(tt,n),nt=it.render(),nt&&t.prepend(nt),_(n.defaultView),n.handleWindowResize&&e(window).resize(S),v()||u()}function u(){setTimeout(function(){!rt.start&&v()&&x()},0)}function f(){rt&&(et("viewDestroy",rt,rt,rt.element),rt.triggerEventDestroy()),e(window).unbind("resize",S),it.destroy(),ot.remove(),t.removeClass("fc fc-rtl ui-widget")}function m(){return t.is(":visible")}function v(){return e("body").is(":visible")}function _(e){rt&&e==rt.name||y(e)}function y(t){ft++,rt&&(et("viewDestroy",rt,rt,rt.element),H(),rt.triggerEventDestroy(),X(),rt.element.remove(),it.deactivateButton(rt.name)),it.activateButton(t),rt=new St[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(ot),tt),x(),J(),ft--}function x(e){(!rt.start||e||mt<rt.start||mt>=rt.end)&&m()&&k(e)}function k(e){ft++,rt.start&&(et("viewDestroy",rt,rt,rt.element),H(),A()),X(),rt.render(mt,e||0),T(),J(),(rt.afterRender||z)(),R(),$(),et("viewRender",rt,rt,rt.element),rt.trigger("viewDisplay",ut),ft--,O()}function C(){m()&&(H(),A(),j(),T(),M())}function j(){lt=n.contentHeight?n.contentHeight:n.height?n.height-(nt?nt.height():0)-F(ot):Math.round(ot.width()/Math.max(n.aspectRatio,.5))}function T(){lt===kt&&j(),ft++,rt.setHeight(lt),rt.setWidth(ot.width()),ft--,at=t.outerWidth()}function S(){if(!ft)if(rt.start){var e=++pt;setTimeout(function(){e==pt&&!ft&&m()&&at!=(at=t.outerWidth())&&(ft++,C(),rt.trigger("windowResize",ut),ft--)},200)}else u()}function D(){A(),P()}function E(e){A(),M(e)}function M(e){m()&&(rt.setEventData(gt),rt.renderEvents(gt,e),rt.trigger("eventAfterAllRender"))}function A(){rt.triggerEventDestroy(),rt.clearEvents(),rt.clearEventData()}function O(){!n.lazyFetching||dt(rt.visStart,rt.visEnd)?P():M()}function P(){ht(rt.visStart,rt.visEnd)}function I(e){gt=e,M()}function N(e){E(e)}function R(){it.updateTitle(rt.title)}function $(){var e=i();e>=rt.start&&e<rt.end?it.disableButton("today"):it.enableButton("today")}function L(e,t,i){rt.select(e,t,i===kt?!0:i)}function H(){rt&&rt.unselect()}function q(){x(-1)}function W(){x(1)}function B(){a(mt,-1),x()}function V(){a(mt,1),x()}function U(){mt=i(),x()}function Y(e,t,i){e instanceof Date?mt=p(e):g(mt,e,t,i),x()}function G(e,t,i){e!==kt&&a(mt,e),t!==kt&&l(mt,t),i!==kt&&c(mt,i),x()}function K(){return p(mt)}function X(){ot.css({width:"100%",height:ot.height(),overflow:"hidden"})}function J(){ot.css({width:"",height:"",overflow:""})}function Z(){return rt}function Q(e,t){return t===kt?n[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(n[e]=t,C()),void 0)}function et(e,t){return n[e]?n[e].apply(t||ut,Array.prototype.slice.call(arguments,2)):void 0}var tt=this;tt.options=n,tt.render=d,tt.destroy=f,tt.refetchEvents=D,tt.reportEvents=I,tt.reportEventChange=N,tt.rerenderEvents=E,tt.changeView=_,tt.select=L,tt.unselect=H,tt.prev=q,tt.next=W,tt.prevYear=B,tt.nextYear=V,tt.today=U,tt.gotoDate=Y,tt.incrementDate=G,tt.formatDate=function(e,t){return b(e,t,n)},tt.formatDates=function(e,t,i){return w(e,t,i,n)},tt.getDate=K,tt.getView=Z,tt.option=Q,tt.trigger=et,r.call(tt,n,o);var it,nt,ot,st,rt,at,lt,ct,dt=tt.isFetchNeeded,ht=tt.fetchEvents,ut=t[0],pt=0,ft=0,mt=i(),gt=[];g(mt,n.year,n.month,n.date),n.droppable&&e(document).bind("dragstart",function(t,i){var o=t.target,s=e(o);if(!s.parents(".fc").length){var r=n.dropAccept;(e.isFunction(r)?r.call(o,s):s.is(r))&&(ct=o,rt.dragStart(ct,t,i))}}).bind("dragstop",function(e,t){ct&&(rt.dragStop(ct,e,t),ct=null)})}function s(t,i){function n(){u=i.theme?"ui":"fc";var t=i.header;return t?p=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(s("left")).append(s("center")).append(s("right"))):void 0}function o(){p.remove()}function s(n){var o=e("<td class='fc-header-"+n+"'/>"),s=i.header[n];return s&&e.each(s.split(" "),function(n){n>0&&o.append("<span class='fc-header-space'/>");var s;e.each(this.split(","),function(n,r){if("title"==r)o.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(u+"-corner-right"),s=null;else{var a;if(t[r]?a=t[r]:St[r]&&(a=function(){d.removeClass(u+"-state-hover"),t.changeView(r)}),a){var l=i.theme?L(i.buttonIcons,r):null,c=L(i.buttonText,r),d=e("<span class='fc-button fc-button-"+r+" "+u+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>").click(function(){d.hasClass(u+"-state-disabled")||a()}).mousedown(function(){d.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-down")}).mouseup(function(){d.removeClass(u+"-state-down")}).hover(function(){d.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-hover")},function(){d.removeClass(u+"-state-hover").removeClass(u+"-state-down")}).appendTo(o);q(d),s||d.addClass(u+"-corner-left"),s=d}}}),s&&s.addClass(u+"-corner-right")}),o}function r(e){p.find("h2").html(e)}function a(e){p.find("span.fc-button-"+e).addClass(u+"-state-active")}function l(e){p.find("span.fc-button-"+e).removeClass(u+"-state-active")}function c(e){p.find("span.fc-button-"+e).addClass(u+"-state-disabled")}function d(e){p.find("span.fc-button-"+e).removeClass(u+"-state-disabled")}var h=this;h.render=n,h.destroy=o,h.updateTitle=r,h.activateButton=a,h.deactivateButton=l,h.disableButton=c,h.enableButton=d;var u,p=e([])}function r(t,i){function n(e,t){return!k||k>e||t>C}function o(e,t){k=e,C=t,O=[];var i=++M,n=E.length;A=n;for(var o=0;n>o;o++)s(E[o],i)}function s(i,n){r(i,function(o){if(n==M){if(o){t.eventDataTransform&&(o=e.map(o,t.eventDataTransform)),i.eventDataTransform&&(o=e.map(o,i.eventDataTransform));for(var s=0;s<o.length;s++)o[s].source=i,_(o[s]);O=O.concat(o)}A--,A||S(O)}})}function r(i,n){var o,s,a=Tt.sourceFetchers;for(o=0;o<a.length;o++){if(s=a[o](i,k,C,n),s===!0)return;if("object"==typeof s)return r(s,n),void 0}var l=i.events;if(l)e.isFunction(l)?(m(),l(p(k),p(C),function(e){n(e),g()})):e.isArray(l)?n(l):n();else{var c=i.url;if(c){var d,h=i.success,u=i.error,f=i.complete;d=e.isFunction(i.data)?i.data():i.data;var v=e.extend({},d||{}),_=U(i.startParam,t.startParam),y=U(i.endParam,t.endParam);_&&(v[_]=Math.round(+k/1e3)),y&&(v[y]=Math.round(+C/1e3)),m(),e.ajax(e.extend({},Dt,i,{data:v,success:function(t){t=t||[];var i=V(h,this,arguments);e.isArray(i)&&(t=i),n(t)},error:function(){V(u,this,arguments),n()},complete:function(){V(f,this,arguments),g()}}))}else n()}}function a(e){e=l(e),e&&(A++,s(e,M))}function l(t){return e.isFunction(t)||e.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t?(y(t),E.push(t),t):void 0}function c(t){E=e.grep(E,function(e){return!b(e,t)}),O=e.grep(O,function(e){return!b(e.source,t)}),S(O)}function d(e){var t,i,n=O.length,o=T().defaultEventEnd,s=e.start-e._start,r=e.end?e.end-(e._end||o(e)):0;for(t=0;n>t;t++)i=O[t],i._id==e._id&&i!=e&&(i.start=new Date(+i.start+s),i.end=e.end?i.end?new Date(+i.end+r):new Date(+o(i)+r):null,i.title=e.title,i.url=e.url,i.allDay=e.allDay,i.className=e.className,i.editable=e.editable,i.color=e.color,i.backgroundColor=e.backgroundColor,i.borderColor=e.borderColor,i.textColor=e.textColor,_(i));_(e),S(O)}function h(e,t){_(e),e.source||(t&&(D.events.push(e),e.source=D),O.push(e)),S(O)}function u(t){if(t){if(!e.isFunction(t)){var i=t+"";t=function(e){return e._id==i}}O=e.grep(O,t,!0);for(var n=0;n<E.length;n++)e.isArray(E[n].events)&&(E[n].events=e.grep(E[n].events,t,!0))}else{O=[];for(var n=0;n<E.length;n++)e.isArray(E[n].events)&&(E[n].events=[])}S(O)}function f(t){return e.isFunction(t)?e.grep(O,t):t?(t+="",e.grep(O,function(e){return e._id==t})):O}function m(){F++||j("loading",null,!0,T())}function g(){--F||j("loading",null,!1,T())}function _(e){var i=e.source||{},n=U(i.ignoreTimezone,t.ignoreTimezone);e._id=e._id||(e.id===kt?"_fc"+Et++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=p(e.start=v(e.start,n)),e.end=v(e.end,n),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?p(e.end):null,e.allDay===kt&&(e.allDay=U(i.allDayDefault,t.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function y(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=Tt.sourceNormalizers,i=0;i<t.length;i++)t[i](e)}function b(e,t){return e&&t&&w(e)==w(t)}function w(e){return("object"==typeof e?e.events||e.url:"")||e}var x=this;x.isFetchNeeded=n,x.fetchEvents=o,x.addEventSource=a,x.removeEventSource=c,x.updateEvent=d,x.renderEvent=h,x.removeEvents=u,x.clientEvents=f,x.normalizeEvent=_;for(var k,C,j=x.trigger,T=x.getView,S=x.reportEvents,D={events:[]},E=[D],M=0,A=0,F=0,O=[],P=0;P<i.length;P++)l(i[P])}function a(e,t,i){return e.setFullYear(e.getFullYear()+t),i||u(e),e}function l(e,t,i){if(+e){var n=e.getMonth()+t,o=p(e);for(o.setDate(1),o.setMonth(n),e.setMonth(n),i||u(e);e.getMonth()!=o.getMonth();)e.setDate(e.getDate()+(o>e?1:-1))}return e}function c(e,t,i){if(+e){var n=e.getDate()+t,o=p(e);o.setHours(9),o.setDate(n),e.setDate(n),i||u(e),d(e,o)}return e}function d(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*Ft)}function h(e,t){return e.setMinutes(e.getMinutes()+t),e}function u(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function p(e,t){return t?u(new Date(+e)):new Date(+e)}function f(){var e,t=0;do e=new Date(1970,t++,1);while(e.getHours());return e}function m(e,t){return Math.round((p(e,!0)-p(t,!0))/At)}function g(e,t,i,n){t!==kt&&t!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(t)),i!==kt&&i!=e.getMonth()&&(e.setDate(1),e.setMonth(i)),n!==kt&&e.setDate(n)}function v(e,t){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(t===kt&&(t=!0),_(e,t)||(e?new Date(e):null)):null}function _(e,t){var i=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!i)return null;var n=new Date(i[1],0,1);if(t||!i[13]){var o=new Date(i[1],0,1,9,0);i[3]&&(n.setMonth(i[3]-1),o.setMonth(i[3]-1)),i[5]&&(n.setDate(i[5]),o.setDate(i[5])),d(n,o),i[7]&&n.setHours(i[7]),i[8]&&n.setMinutes(i[8]),i[10]&&n.setSeconds(i[10]),i[12]&&n.setMilliseconds(1e3*Number("0."+i[12])),d(n,o)}else if(n.setUTCFullYear(i[1],i[3]?i[3]-1:0,i[5]||1),n.setUTCHours(i[7]||0,i[8]||0,i[10]||0,i[12]?1e3*Number("0."+i[12]):0),i[14]){var s=60*Number(i[16])+(i[18]?Number(i[18]):0);s*="-"==i[15]?1:-1,n=new Date(+n+1e3*60*s)}return n}function y(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var i=parseInt(t[1],10);return t[3]&&(i%=12,"p"==t[3].toLowerCase().charAt(0)&&(i+=12)),60*i+(t[2]?parseInt(t[2],10):0)}}function b(e,t,i){return w(e,null,t,i)}function w(e,t,i,n){n=n||Ct;var o,s,r,a,l=e,c=t,d=i.length,h="";for(o=0;d>o;o++)if(s=i.charAt(o),"'"==s){for(r=o+1;d>r;r++)if("'"==i.charAt(r)){l&&(h+=r==o+1?"'":i.substring(o+1,r),o=r);break}}else if("("==s){for(r=o+1;d>r;r++)if(")"==i.charAt(r)){var u=b(l,i.substring(o+1,r),n);parseInt(u.replace(/\D/,""),10)&&(h+=u),o=r;break}}else if("["==s){for(r=o+1;d>r;r++)if("]"==i.charAt(r)){var p=i.substring(o+1,r),u=b(l,p,n);u!=b(c,p,n)&&(h+=u),o=r;break}}else if("{"==s)l=t,c=e;else if("}"==s)l=e,c=t;else{for(r=d;r>o;r--)if(a=Pt[i.substring(o,r)]){l&&(h+=a(l,n)),o=r-1;break}r==o&&l&&(h+=s)}return h}function x(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1}function k(e){return e.end?C(e.end,e.allDay):c(p(e.start),1)}function C(e,t){return e=p(e),t||e.getHours()||e.getMinutes()?c(e,1):u(e)}function j(t,i,n){t.unbind("mouseover").mouseover(function(t){for(var o,s,r,a=t.target;a!=this;)o=a,a=a.parentNode;(s=o._fci)!==kt&&(o._fci=kt,r=i[s],n(r.event,r.element,r),e(t.target).trigger(t)),t.stopPropagation()})}function T(t,i,n){for(var o,s=0;s<t.length;s++)o=e(t[s]),o.width(Math.max(0,i-D(o,n)))}function S(t,i,n){for(var o,s=0;s<t.length;s++)o=e(t[s]),o.height(Math.max(0,i-F(o,n)))}function D(e,t){return E(e)+A(e)+(t?M(e):0)}function E(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function M(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function A(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function F(e,t){return O(e)+I(e)+(t?P(e):0)}function O(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function P(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function I(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function z(){}function N(e,t){return e-t}function R(e){return Math.max.apply(Math,e)}function $(e){return(10>e?"0":"")+e}function L(e,t){if(e[t]!==kt)return e[t];for(var i,n=t.split(/(?=[A-Z])/),o=n.length-1;o>=0;o--)if(i=e[n[o].toLowerCase()],i!==kt)return i;return e[""]}function H(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function q(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function W(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function B(e,t){var i=e.source||{},n=e.color,o=i.color,s=t("eventColor"),r=e.backgroundColor||n||i.backgroundColor||o||t("eventBackgroundColor")||s,a=e.borderColor||n||i.borderColor||o||t("eventBorderColor")||s,l=e.textColor||i.textColor||t("eventTextColor"),c=[];return r&&c.push("background-color:"+r),a&&c.push("border-color:"+a),l&&c.push("color:"+l),c.join(";")}function V(t,i,n){if(e.isFunction(t)&&(t=[t]),t){var o,s;for(o=0;o<t.length;o++)s=t[o].apply(i,n)||s;return s}}function U(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==kt)return arguments[e]}function Y(e,t){function i(e,t){t&&(l(e,t),e.setDate(1));var i=o("firstDay"),h=p(e,!0);h.setDate(1);var u=l(p(h),1),f=p(h);c(f,-((f.getDay()-i+7)%7)),r(f);var g=p(u);c(g,(7-g.getDay()+i)%7),r(g,-1,!0);var v=a(),_=Math.round(m(g,f)/7);"fixed"==o("weekMode")&&(c(g,7*(6-_)),_=6),n.title=d(h,o("titleFormat")),n.start=h,n.end=u,n.visStart=f,n.visEnd=g,s(_,v,!0)}var n=this;n.render=i,X.call(n,e,t,"month");var o=n.opt,s=n.renderBasic,r=n.skipHiddenDays,a=n.getCellsPerWeek,d=t.formatDate}function G(e,t){function i(e,t){t&&c(e,7*t);var i=c(p(e),-((e.getDay()-o("firstDay")+7)%7)),d=c(p(i),7),h=p(i);r(h);var u=p(d);r(u,-1,!0);var f=a();n.start=i,n.end=d,n.visStart=h,n.visEnd=u,n.title=l(h,c(p(u),-1),o("titleFormat")),s(1,f,!1)}var n=this;n.render=i,X.call(n,e,t,"basicWeek");var o=n.opt,s=n.renderBasic,r=n.skipHiddenDays,a=n.getCellsPerWeek,l=t.formatDates}function K(e,t){function i(e,t){t&&c(e,t),r(e,0>t?-1:1);var i=p(e,!0),l=c(p(i),1);n.title=a(e,o("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=l,s(1,1,!1)}var n=this;n.render=i,X.call(n,e,t,"basicDay");var o=n.opt,s=n.renderBasic,r=n.skipHiddenDays,a=t.formatDate}function X(t,n,o){function s(e,t,i){it=e,nt=t,ot=i,r(),B||a(),l()}function r(){ct=mt("theme")?"ui":"fc",dt=mt("columnFormat"),ht=mt("weekNumbers"),pt=mt("weekNumberTitle"),ft="iso"!=mt("weekNumberCalculation")?"w":"W"}function a(){X=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function l(){var i=d();R&&R.remove(),R=e(i).appendTo(t),$=R.find("thead"),L=$.find(".fc-day-header"),B=R.find("tbody"),V=B.find("tr"),U=B.find(".fc-day"),Y=V.find("td:first-child"),G=V.eq(0).find(".fc-day > div"),K=V.eq(0).find(".fc-day-content > div"),W($.add($.find("tr"))),W(V),V.eq(0).addClass("fc-first"),V.filter(":last").addClass("fc-last"),U.each(function(t,i){var n=jt(Math.floor(t/nt),t%nt);gt("dayRender",N,n,e(i))}),y(U)}function d(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+h()+f()+"</table>";return e}function h(){var e,t,i=ct+"-widget-header",n="";for(n+="<thead><tr>",ht&&(n+="<th class='fc-week-number "+i+"'>"+H(pt)+"</th>"),e=0;nt>e;e++)t=jt(0,e),n+="<th class='fc-day-header fc-"+Mt[t.getDay()]+" "+i+"'>"+H(Dt(t,dt))+"</th>";return n+="</tr></thead>"}function f(){var e,t,i,n=ct+"-widget-content",o="";for(o+="<tbody>",e=0;it>e;e++){for(o+="<tr class='fc-week'>",ht&&(i=jt(e,0),o+="<td class='fc-week-number "+n+"'>"+"<div>"+H(Dt(i,ft))+"</div>"+"</td>"),t=0;nt>t;t++)i=jt(e,t),o+=m(i);o+="</tr>"}return o+="</tbody>"}function m(e){var t=ct+"-widget-content",n=N.start.getMonth(),o=u(i()),s="",r=["fc-day","fc-"+Mt[e.getDay()],t];return e.getMonth()!=n&&r.push("fc-other-month"),+e==+o?r.push("fc-today",ct+"-state-highlight"):o>e?r.push("fc-past"):r.push("fc-future"),s+="<td class='"+r.join(" ")+"'"+" data-date='"+Dt(e,"yyyy-MM-dd")+"'"+">"+"<div>",ot&&(s+="<div class='fc-day-number'>"+e.getDate()+"</div>"),s+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function g(t){Q=t;var i,n,o,s=Q-$.height();"variable"==mt("weekMode")?i=n=Math.floor(s/(1==it?2:6)):(i=Math.floor(s/it),n=s-i*(it-1)),Y.each(function(t,s){it>t&&(o=e(s),o.find("> div").css("min-height",(t==it-1?n:i)-F(o)))})}function v(e){Z=e,at.clear(),lt.clear(),tt=0,ht&&(tt=$.find("th.fc-week-number").outerWidth()),et=Math.floor((Z-tt)/nt),T(L.slice(0,-1),et)}function y(e){e.click(b).mousedown(Ct)}function b(t){if(!mt("selectable")){var i=_(e(this).data("date"));gt("dayClick",this,i,!0,t)}}function w(e,t,i){i&&st.build();for(var n=St(e,t),o=0;o<n.length;o++){var s=n[o];y(x(s.row,s.leftCol,s.row,s.rightCol))}}function x(e,i,n,o){var s=st.rect(e,i,n,o,t);return wt(s,t)}function k(e){return p(e)}function C(e,t){w(e,c(p(t),1),!0)}function j(){kt()}function S(e,t,i){var n=Tt(e),o=U[n.row*nt+n.col];gt("dayClick",o,e,t,i)}function D(e,t){rt.start(function(e){kt(),e&&x(e.row,e.col,e.row,e.col)},t)}function E(e,t,i){var n=rt.stop();if(kt(),n){var o=jt(n);gt("drop",e,o,!0,t,i)}}function M(e){return p(e.start)}function A(e){return at.left(e)}function O(e){return at.right(e)}function P(e){return lt.left(e)}function I(e){return lt.right(e)}function z(e){return V.eq(e)}var N=this;N.renderBasic=s,N.setHeight=g,N.setWidth=v,N.renderDayOverlay=w,N.defaultSelectionEnd=k,N.renderSelection=C,N.clearSelection=j,N.reportDayClick=S,N.dragStart=D,N.dragStop=E,N.defaultEventEnd=M,N.getHoverListener=function(){return rt},N.colLeft=A,N.colRight=O,N.colContentLeft=P,N.colContentRight=I,N.getIsCellAllDay=function(){return!0},N.allDayRow=z,N.getRowCnt=function(){return it},N.getColCnt=function(){return nt},N.getColWidth=function(){return et},N.getDaySegmentContainer=function(){return X},ut.call(N,t,n,o),_t.call(N),vt.call(N),J.call(N);var R,$,L,B,V,U,Y,G,K,X,Z,Q,et,tt,it,nt,ot,st,rt,at,lt,ct,dt,ht,pt,ft,mt=N.opt,gt=N.trigger,wt=N.renderOverlay,kt=N.clearOverlays,Ct=N.daySelectionMousedown,jt=N.cellToDate,Tt=N.dateToCell,St=N.rangeToSegments,Dt=n.formatDate;q(t.addClass("fc-grid")),st=new yt(function(t,i){var n,o,s;L.each(function(t,r){n=e(r),o=n.offset().left,t&&(s[1]=o),s=[o],i[t]=s}),s[1]=o+n.outerWidth(),V.each(function(i,r){it>i&&(n=e(r),o=n.offset().top,i&&(s[1]=o),s=[o],t[i]=s)}),s[1]=o+n.outerHeight()}),rt=new bt(st),at=new xt(function(e){return G.eq(e)}),lt=new xt(function(e){return K.eq(e)})}function J(){function e(e,t){i.renderDayEvents(e,t)}function t(){i.getDaySegmentContainer().empty()}var i=this;i.renderEvents=e,i.clearEvents=t,pt.call(i)}function Z(e,t){function i(e,t){t&&c(e,7*t);var i=c(p(e),-((e.getDay()-o("firstDay")+7)%7)),d=c(p(i),7),h=p(i);r(h);var u=p(d);r(u,-1,!0);var f=a();n.title=l(h,c(p(u),-1),o("titleFormat")),n.start=i,n.end=d,n.visStart=h,n.visEnd=u,s(f)}var n=this;n.render=i,et.call(n,e,t,"agendaWeek");var o=n.opt,s=n.renderAgenda,r=n.skipHiddenDays,a=n.getCellsPerWeek,l=t.formatDates
}function Q(e,t){function i(e,t){t&&c(e,t),r(e,0>t?-1:1);var i=p(e,!0),l=c(p(i),1);n.title=a(e,o("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=l,s(1)}var n=this;n.render=i,et.call(n,e,t,"agendaDay");var o=n.opt,s=n.renderAgenda,r=n.skipHiddenDays,a=t.formatDate}function et(t,n,o){function s(e){It=e,r(),Q?l():a()}function r(){Ht=Kt("theme")?"ui":"fc",qt=Kt("isRTL"),Wt=y(Kt("minTime")),Bt=y(Kt("maxTime")),Vt=Kt("columnFormat"),Ut=Kt("weekNumbers"),Yt=Kt("weekNumberTitle"),Gt="iso"!=Kt("weekNumberCalculation")?"w":"W",Ft=Kt("snapMinutes")||Kt("slotMinutes")}function a(){var i,n,o,s,r,a=Ht+"-widget-header",c=Ht+"-widget-content",d=0==Kt("slotMinutes")%15;for(l(),ct=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(t),Kt("allDaySlot")?(dt=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ct),i="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+a+" fc-agenda-axis'>"+Kt("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+a+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",ht=e(i).appendTo(ct),pt=ht.find("tr"),x(pt.find("td")),ct.append("<div class='fc-agenda-divider "+a+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):dt=e([]),ft=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ct),mt=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(ft),gt=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(mt),i="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",n=f(),s=h(p(n),Bt),h(n,Wt),zt=0,o=0;s>n;o++)r=n.getMinutes(),i+="<tr class='fc-slot"+o+" "+(r?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+a+"'>"+(d&&r?"&nbsp;":ri(n,Kt("axisFormat")))+"</th>"+"<td class='"+c+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",h(n,Kt("slotMinutes")),zt++;i+="</tbody></table>",wt=e(i).appendTo(mt),k(wt.find("td"))}function l(){var i=d();Q&&Q.remove(),Q=e(i).appendTo(t),et=Q.find("thead"),it=et.find("th").slice(1,-1),nt=Q.find("tbody"),ot=nt.find("td").slice(0,-1),st=ot.find("> div"),rt=ot.find(".fc-day-content > div"),at=ot.eq(0),lt=st.eq(0),W(et.add(et.find("tr"))),W(nt.add(nt.find("tr")))}function d(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+m()+g()+"</table>";return e}function m(){var e,t,i,n=Ht+"-widget-header",o="";for(o+="<thead><tr>",Ut?(e=ni(0,0),t=ri(e,Gt),qt?t+=Yt:t=Yt+t,o+="<th class='fc-agenda-axis fc-week-number "+n+"'>"+H(t)+"</th>"):o+="<th class='fc-agenda-axis "+n+"'>&nbsp;</th>",i=0;It>i;i++)e=ni(0,i),o+="<th class='fc-"+Mt[e.getDay()]+" fc-col"+i+" "+n+"'>"+H(ri(e,Vt))+"</th>";return o+="<th class='fc-agenda-gutter "+n+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function g(){var e,t,n,o,s,r=Ht+"-widget-header",a=Ht+"-widget-content",l=u(i()),c="";for(c+="<tbody><tr><th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n="",t=0;It>t;t++)e=ni(0,t),s=["fc-col"+t,"fc-"+Mt[e.getDay()],a],+e==+l?s.push(Ht+"-state-highlight","fc-today"):l>e?s.push("fc-past"):s.push("fc-future"),o="<td class='"+s.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",n+=o;return c+=n,c+="<td class='fc-agenda-gutter "+a+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function v(e){e===kt&&(e=Tt),Tt=e,ai={};var t=nt.position().top,i=ft.position().top,n=Math.min(e-t,wt.height()+i+1);lt.height(n-F(at)),ct.css("top",t),ft.height(n-i-1),At=wt.find("tr:first").height()+1,Ot=Kt("slotMinutes")/Ft,Pt=At/Ot}function _(t){jt=t,$t.clear(),Lt.clear();var i=et.find("th:first");ht&&(i=i.add(ht.find("th:first"))),i=i.add(wt.find("th:first")),St=0,T(i.width("").each(function(t,i){St=Math.max(St,e(i).outerWidth())}),St);var n=Q.find(".fc-agenda-gutter");ht&&(n=n.add(ht.find("th.fc-agenda-gutter")));var o=ft[0].clientWidth;Et=ft.width()-o,Et?(T(n,Et),n.show().prev().removeClass("fc-last")):n.hide().prev().addClass("fc-last"),Dt=Math.floor((o-St)/It),T(it.slice(0,-1),Dt)}function b(){function e(){ft.scrollTop(n)}var t=f(),i=p(t);i.setHours(Kt("firstHour"));var n=R(t,i)+1;e(),setTimeout(e,0)}function w(){b()}function x(e){e.click(C).mousedown(ti)}function k(e){e.click(C).mousedown(G)}function C(e){if(!Kt("selectable")){var t=Math.min(It-1,Math.floor((e.pageX-Q.offset().left-St)/Dt)),i=ni(0,t),n=this.parentNode.className.match(/fc-slot(\d+)/);if(n){var o=parseInt(n[1])*Kt("slotMinutes"),s=Math.floor(o/60);i.setHours(s),i.setMinutes(o%60+Wt),Xt("dayClick",ot[t],i,!1,e)}else Xt("dayClick",ot[t],i,!0,e)}}function j(e,t,i){i&&Nt.build();for(var n=si(e,t),o=0;o<n.length;o++){var s=n[o];x(D(s.row,s.leftCol,s.row,s.rightCol))}}function D(e,t,i,n){var o=Nt.rect(e,t,i,n,ct);return Jt(o,ct)}function E(e,t){for(var i=0;It>i;i++){var n=ni(0,i),o=c(p(n),1),s=new Date(Math.max(n,e)),r=new Date(Math.min(o,t));if(r>s){var a=Nt.rect(0,i,0,i,mt),l=R(n,s),d=R(n,r);a.top=l,a.height=d-l,k(Jt(a,mt))}}}function M(e){return $t.left(e)}function A(e){return Lt.left(e)}function O(e){return $t.right(e)}function P(e){return Lt.right(e)}function I(e){return Kt("allDaySlot")&&!e.row}function z(e){var t=ni(0,e.col),i=e.row;return Kt("allDaySlot")&&i--,i>=0&&h(t,Wt+i*Ft),t}function R(e,t){if(e=p(e,!0),t<h(p(e),Wt))return 0;if(t>=h(p(e),Bt))return wt.height();var i=Kt("slotMinutes"),n=60*t.getHours()+t.getMinutes()-Wt,o=Math.floor(n/i),s=ai[o];return s===kt&&(s=ai[o]=wt.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(s-1+At*(n%i/i)))}function $(){return pt}function L(e){var t=p(e.start);return e.allDay?t:h(t,Kt("defaultEventMinutes"))}function B(e,t){return t?p(e):h(p(e),Kt("slotMinutes"))}function V(e,t,i){i?Kt("allDaySlot")&&j(e,c(p(t),1),!0):U(e,t)}function U(t,i){var n=Kt("selectHelper");if(Nt.build(),n){var o=oi(t).col;if(o>=0&&It>o){var s=Nt.rect(0,o,0,o,mt),r=R(t,t),a=R(t,i);if(a>r){if(s.top=r,s.height=a-r,s.left+=2,s.width-=5,e.isFunction(n)){var l=n(t,i);l&&(s.position="absolute",Ct=e(l).css(s).appendTo(mt))}else s.isStart=!0,s.isEnd=!0,Ct=e(ii({title:"",start:t,end:i,className:["fc-select-helper"],editable:!1},s)),Ct.css("opacity",Kt("dragOpacity"));Ct&&(k(Ct),mt.append(Ct),T(Ct,s.width,!0),S(Ct,s.height,!0))}}}else E(t,i)}function Y(){Zt(),Ct&&(Ct.remove(),Ct=null)}function G(t){if(1==t.which&&Kt("selectable")){ei(t);var i;Rt.start(function(e,t){if(Y(),e&&e.col==t.col&&!I(e)){var n=z(t),o=z(e);i=[n,h(p(n),Ft),o,h(p(o),Ft)].sort(N),U(i[0],i[3])}else i=null},t),e(document).one("mouseup",function(e){Rt.stop(),i&&(+i[0]==+i[1]&&K(i[0],!1,e),Qt(i[0],i[3],!1,e))})}}function K(e,t,i){Xt("dayClick",ot[oi(e).col],e,t,i)}function X(e,t){Rt.start(function(e){if(Zt(),e)if(I(e))D(e.row,e.col,e.row,e.col);else{var t=z(e),i=h(p(t),Kt("defaultEventMinutes"));E(t,i)}},t)}function J(e,t,i){var n=Rt.stop();Zt(),n&&Xt("drop",e,z(n),I(n),t,i)}var Z=this;Z.renderAgenda=s,Z.setWidth=_,Z.setHeight=v,Z.afterRender=w,Z.defaultEventEnd=L,Z.timePosition=R,Z.getIsCellAllDay=I,Z.allDayRow=$,Z.getCoordinateGrid=function(){return Nt},Z.getHoverListener=function(){return Rt},Z.colLeft=M,Z.colRight=O,Z.colContentLeft=A,Z.colContentRight=P,Z.getDaySegmentContainer=function(){return dt},Z.getSlotSegmentContainer=function(){return gt},Z.getMinMinute=function(){return Wt},Z.getMaxMinute=function(){return Bt},Z.getSlotContainer=function(){return mt},Z.getRowCnt=function(){return 1},Z.getColCnt=function(){return It},Z.getColWidth=function(){return Dt},Z.getSnapHeight=function(){return Pt},Z.getSnapMinutes=function(){return Ft},Z.defaultSelectionEnd=B,Z.renderDayOverlay=j,Z.renderSelection=V,Z.clearSelection=Y,Z.reportDayClick=K,Z.dragStart=X,Z.dragStop=J,ut.call(Z,t,n,o),_t.call(Z),vt.call(Z),tt.call(Z);var Q,et,it,nt,ot,st,rt,at,lt,ct,dt,ht,pt,ft,mt,gt,wt,Ct,jt,Tt,St,Dt,Et,At,Ft,Ot,Pt,It,zt,Nt,Rt,$t,Lt,Ht,qt,Wt,Bt,Vt,Ut,Yt,Gt,Kt=Z.opt,Xt=Z.trigger,Jt=Z.renderOverlay,Zt=Z.clearOverlays,Qt=Z.reportSelection,ei=Z.unselect,ti=Z.daySelectionMousedown,ii=Z.slotSegHtml,ni=Z.cellToDate,oi=Z.dateToCell,si=Z.rangeToSegments,ri=n.formatDate,ai={};q(t.addClass("fc-agenda")),Nt=new yt(function(t,i){function n(e){return Math.max(l,Math.min(c,e))}var o,s,r;it.each(function(t,n){o=e(n),s=o.offset().left,t&&(r[1]=s),r=[s],i[t]=r}),r[1]=s+o.outerWidth(),Kt("allDaySlot")&&(o=pt,s=o.offset().top,t[0]=[s,s+o.outerHeight()]);for(var a=mt.offset().top,l=ft.offset().top,c=l+ft.outerHeight(),d=0;zt*Ot>d;d++)t.push([n(a+Pt*d),n(a+Pt*(d+1))])}),Rt=new bt(Nt),$t=new xt(function(e){return st.eq(e)}),Lt=new xt(function(e){return rt.eq(e)})}function tt(){function t(e,t){var i,o=e.length,s=[],a=[];for(i=0;o>i;i++)e[i].allDay?s.push(e[i]):a.push(e[i]);v("allDaySlot")&&(Q(s,t),C()),r(n(a),t)}function i(){T().empty(),E().empty()}function n(t){var i,n,r,a,l,c=$(),d=O(),u=A(),f=e.map(t,s),m=[];for(n=0;c>n;n++)for(i=R(0,n),h(i,d),l=o(t,f,i,h(p(i),u-d)),l=it(l),r=0;r<l.length;r++)a=l[r],a.col=n,m.push(a);return m}function o(e,t,i,n){var o,s,r,a,l,c,d,h,u=[],f=e.length;for(o=0;f>o;o++)s=e[o],r=s.start,a=t[o],a>i&&n>r&&(i>r?(l=p(i),d=!1):(l=r,d=!0),a>n?(c=p(n),h=!1):(c=a,h=!0),u.push({event:s,start:l,end:c,isStart:d,isEnd:h}));return u.sort(ht)}function s(e){return e.end?p(e.end):h(p(e.start),v("defaultEventMinutes"))}function r(t,i){var n,o,s,r,c,d,h,u,p,f,m,g,y,b,w,x,k=t.length,C="",T=E(),S=v("isRTL");for(n=0;k>n;n++)o=t[n],s=o.event,r=P(o.start,o.start),c=P(o.start,o.end),d=z(o.col),h=N(o.col),u=h-d,h-=.025*u,u=h-d,p=u*(o.forwardCoord-o.backwardCoord),v("slotEventOverlap")&&(p=Math.max(2*(p-10),p)),S?(m=h-o.backwardCoord*u,f=m-p):(f=d+o.backwardCoord*u,m=f+p),f=Math.max(f,d),m=Math.min(m,h),p=m-f,o.top=r,o.left=f,o.outerWidth=p,o.outerHeight=c-r,C+=a(s,o);for(T[0].innerHTML=C,g=T.children(),n=0;k>n;n++)o=t[n],s=o.event,y=e(g[n]),b=_("eventRender",s,s,y),b===!1?y.remove():(b&&b!==!0&&(y.remove(),y=e(b).css({position:"absolute",top:o.top,left:o.left}).appendTo(T)),o.element=y,s._id===i?l(s,y,o):y[0]._fci=n,U(s,y));for(j(T,t,l),n=0;k>n;n++)o=t[n],(y=o.element)&&(o.vsides=F(y,!0),o.hsides=D(y,!0),w=y.find(".fc-event-title"),w.length&&(o.contentTop=w[0].offsetTop));for(n=0;k>n;n++)o=t[n],(y=o.element)&&(y[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",x=Math.max(0,o.outerHeight-o.vsides),y[0].style.height=x+"px",s=o.event,o.contentTop!==kt&&x-o.contentTop<10&&(y.find("div.fc-event-time").text(tt(s.start,v("timeFormat"))+" - "+s.title),y.find("div.fc-event-title").remove()),_("eventAfterRender",s,s,y))}function a(e,t){var i="<",n=e.url,o=B(e,v),s=["fc-event","fc-event-vert"];return y(e)&&s.push("fc-event-draggable"),t.isStart&&s.push("fc-event-start"),t.isEnd&&s.push("fc-event-end"),s=s.concat(e.className),e.source&&(s=s.concat(e.source.className||[])),i+=n?"a href='"+H(e.url)+"'":"div",i+=" class='"+s.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+t.top+"px;"+"left:"+t.left+"px;"+o+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+H(nt(e.start,e.end,v("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+H(e.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",t.isEnd&&b(e)&&(i+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),i+="</"+(n?"a":"div")+">"}function l(e,t,i){var n=t.find("div.fc-event-time");y(e)&&u(e,t,n),i.isEnd&&b(e)&&f(e,t,n),x(e,t)}function d(e,t,i){function n(){l||(t.width(o).height("").draggable("option","grid",null),l=!0)}var o,s,r,a=i.isStart,l=!0,d=M(),h=L(),u=q(),f=W(),g=O();t.draggable({opacity:v("dragOpacity","month"),revertDuration:v("dragRevertDuration"),start:function(i,g){_("eventDragStart",t,e,i,g),G(e,t),o=t.width(),d.start(function(i,o){if(Z(),i){s=!1;var d=R(0,o.col),g=R(0,i.col);r=m(g,d),i.row?a?l&&(t.width(h-10),S(t,u*Math.round((e.end?(e.end-e.start)/Ot:v("defaultEventMinutes"))/f)),t.draggable("option","grid",[h,1]),l=!1):s=!0:(J(c(p(e.start),r),c(k(e),r)),n()),s=s||l&&!r}else n(),s=!0;t.draggable("option","revert",s)},i,"drag")},stop:function(i,o){if(d.stop(),Z(),_("eventDragStop",t,e,i,o),s)n(),t.css("filter",""),Y(e,t);else{var a=0;l||(a=Math.round((t.offset().top-V().offset().top)/u)*f+g-(60*e.start.getHours()+e.start.getMinutes())),K(this,e,r,a,l,i,o)}}})}function u(e,t,i){function n(){Z(),a&&(d?(i.hide(),t.draggable("option","grid",null),J(c(p(e.start),b),c(k(e),b))):(o(w),i.css("display",""),t.draggable("option","grid",[T,S])))}function o(t){var n,o=h(p(e.start),t);e.end&&(n=h(p(e.end),t)),i.text(nt(o,n,v("timeFormat")))}var s,r,a,l,d,u,f,y,b,w,x,C=g.getCoordinateGrid(),j=$(),T=L(),S=q(),D=W();t.draggable({scroll:!1,grid:[T,S],axis:1==j?"y":!1,opacity:v("dragOpacity"),revertDuration:v("dragRevertDuration"),start:function(i,n){_("eventDragStart",t,e,i,n),G(e,t),C.build(),s=t.position(),r=C.cell(i.pageX,i.pageY),a=l=!0,d=u=I(r),f=y=0,b=0,w=x=0},drag:function(e,i){var o=C.cell(e.pageX,e.pageY);if(a=!!o){if(d=I(o),f=Math.round((i.position.left-s.left)/T),f!=y){var c=R(0,r.col),h=r.col+f;h=Math.max(0,h),h=Math.min(j-1,h);var p=R(0,h);b=m(p,c)}d||(w=Math.round((i.position.top-s.top)/S)*D)}(a!=l||d!=u||f!=y||w!=x)&&(n(),l=a,u=d,y=f,x=w),t.draggable("option","revert",!a)},stop:function(i,o){Z(),_("eventDragStop",t,e,i,o),a&&(d||b||w)?K(this,e,b,d?0:w,d,i,o):(a=!0,d=!1,f=0,b=0,w=0,n(),t.css("filter",""),t.css(s),Y(e,t))}})}function f(e,t,i){var n,o,s=q(),r=W();t.resizable({handles:{s:".ui-resizable-handle"},grid:s,start:function(i,s){n=o=0,G(e,t),_("eventResizeStart",this,e,i,s)},resize:function(a,l){n=Math.round((Math.max(s,t.height())-l.originalSize.height)/s),n!=o&&(i.text(nt(e.start,n||e.end?h(w(e),r*n):null,v("timeFormat"))),o=n)},stop:function(i,o){_("eventResizeStop",this,e,i,o),n?X(this,e,0,r*n,i,o):Y(e,t)}})}var g=this;g.renderEvents=t,g.clearEvents=i,g.slotSegHtml=a,pt.call(g);var v=g.opt,_=g.trigger,y=g.isEventDraggable,b=g.isEventResizable,w=g.eventEnd,x=g.eventElementHandlers,C=g.setHeight,T=g.getDaySegmentContainer,E=g.getSlotSegmentContainer,M=g.getHoverListener,A=g.getMaxMinute,O=g.getMinMinute,P=g.timePosition,I=g.getIsCellAllDay,z=g.colContentLeft,N=g.colContentRight,R=g.cellToDate,$=g.getColCnt,L=g.getColWidth,q=g.getSnapHeight,W=g.getSnapMinutes,V=g.getSlotContainer,U=g.reportEventElement,Y=g.showEvents,G=g.hideEvents,K=g.eventDrop,X=g.eventResize,J=g.renderDayOverlay,Z=g.clearOverlays,Q=g.renderDayEvents,et=g.calendar,tt=et.formatDate,nt=et.formatDates;g.draggableDayEvent=d}function it(e){var t,i=nt(e),n=i[0];if(ot(i),n){for(t=0;t<n.length;t++)st(n[t]);for(t=0;t<n.length;t++)rt(n[t],0,0)}return at(i)}function nt(e){var t,i,n,o=[];for(t=0;t<e.length;t++){for(i=e[t],n=0;n<o.length&&lt(i,o[n]).length;n++);(o[n]||(o[n]=[])).push(i)}return o}function ot(e){var t,i,n,o,s;for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(o=i[n],o.forwardSegs=[],s=t+1;s<e.length;s++)lt(o,e[s],o.forwardSegs)}function st(e){var t,i,n=e.forwardSegs,o=0;if(e.forwardPressure===kt){for(t=0;t<n.length;t++)i=n[t],st(i),o=Math.max(o,1+i.forwardPressure);e.forwardPressure=o}}function rt(e,t,i){var n,o=e.forwardSegs;if(e.forwardCoord===kt)for(o.length?(o.sort(dt),rt(o[0],t+1,i),e.forwardCoord=o[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-i)/(t+1),n=0;n<o.length;n++)rt(o[n],0,e.forwardCoord)}function at(e){var t,i,n,o=[];for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)o.push(i[n]);return o}function lt(e,t,i){i=i||[];for(var n=0;n<t.length;n++)ct(e,t[n])&&i.push(t[n]);return i}function ct(e,t){return e.end>t.start&&e.start<t.end}function dt(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||ht(e,t)}function ht(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function ut(t,i,n){function o(t,i){var o=V[t];return e.isPlainObject(o)?L(o,i||n):o}function s(e,t){return i.trigger.apply(i,[e,t||N].concat(Array.prototype.slice.call(arguments,2),[N]))}function r(e){var t=e.source||{};return U(e.startEditable,t.startEditable,o("eventStartEditable"),e.editable,t.editable,o("editable"))&&!o("disableDragging")}function a(e){var t=e.source||{};return U(e.durationEditable,t.durationEditable,o("eventDurationEditable"),e.editable,t.editable,o("editable"))&&!o("disableResizing")}function l(e){q={};var t,i,n=e.length;for(t=0;n>t;t++)i=e[t],q[i._id]?q[i._id].push(i):q[i._id]=[i]}function d(){q={},W={},B=[]}function u(e){return e.end?p(e.end):R(e)}function f(e,t){B.push({event:e,element:t}),W[e._id]?W[e._id].push(t):W[e._id]=[t]}function g(){e.each(B,function(e,t){N.trigger("eventDestroy",t.event,t.event,t.element)})}function v(e,t){t.click(function(i){return t.hasClass("ui-draggable-dragging")||t.hasClass("ui-resizable-resizing")?void 0:s("eventClick",this,e,i)}).hover(function(t){s("eventMouseover",this,e,t)},function(t){s("eventMouseout",this,e,t)})}function _(e,t){b(e,t,"show")}function y(e,t){b(e,t,"hide")}function b(e,t,i){var n,o=W[e._id],s=o.length;for(n=0;s>n;n++)t&&o[n][0]==t[0]||o[n][i]()}function w(e,t,i,n,o,r,a){var l=t.allDay,c=t._id;k(q[c],i,n,o),s("eventDrop",e,t,i,n,o,function(){k(q[c],-i,-n,l),H(c)},r,a),H(c)}function x(e,t,i,n,o,r){var a=t._id;C(q[a],i,n),s("eventResize",e,t,i,n,function(){C(q[a],-i,-n),H(a)},o,r),H(a)}function k(e,t,i,n){i=i||0;for(var o,s=e.length,r=0;s>r;r++)o=e[r],n!==kt&&(o.allDay=n),h(c(o.start,t,!0),i),o.end&&(o.end=h(c(o.end,t,!0),i)),$(o,V)}function C(e,t,i){i=i||0;for(var n,o=e.length,s=0;o>s;s++)n=e[s],n.end=h(c(u(n),t,!0),i),$(n,V)}function j(e){return"object"==typeof e&&(e=e.getDay()),K[e]}function T(){return Y}function S(e,t,i){for(t=t||1;K[(e.getDay()+(i?t:0)+7)%7];)c(e,t)}function D(){var e=E.apply(null,arguments),t=M(e),i=A(t);return i}function E(e,t){var i=N.getColCnt(),n=Z?-1:1,o=Z?i-1:0;"object"==typeof e&&(t=e.col,e=e.row);var s=e*i+(t*n+o);return s}function M(e){var t=N.visStart.getDay();return e+=X[t],7*Math.floor(e/Y)+J[(e%Y+Y)%Y]-t}function A(e){var t=p(N.visStart);return c(t,e),t}function F(e){var t=O(e),i=P(t),n=I(i);return n}function O(e){return m(e,N.visStart)}function P(e){var t=N.visStart.getDay();return e+=t,Math.floor(e/7)*Y+X[(e%7+7)%7]-X[t]}function I(e){var t=N.getColCnt(),i=Z?-1:1,n=Z?t-1:0,o=Math.floor(e/t),s=(e%t+t)%t*i+n;return{row:o,col:s}}function z(e,t){for(var i=N.getRowCnt(),n=N.getColCnt(),o=[],s=O(e),r=O(t),a=P(s),l=P(r)-1,c=0;i>c;c++){var d=c*n,h=d+n-1,u=Math.max(a,d),p=Math.min(l,h);if(p>=u){var f=I(u),m=I(p),g=[f.col,m.col].sort(),v=M(u)==s,_=M(p)+1==r;o.push({row:c,leftCol:g[0],rightCol:g[1],isStart:v,isEnd:_})}}return o}var N=this;N.element=t,N.calendar=i,N.name=n,N.opt=o,N.trigger=s,N.isEventDraggable=r,N.isEventResizable=a,N.setEventData=l,N.clearEventData=d,N.eventEnd=u,N.reportEventElement=f,N.triggerEventDestroy=g,N.eventElementHandlers=v,N.showEvents=_,N.hideEvents=y,N.eventDrop=w,N.eventResize=x;var R=N.defaultEventEnd,$=i.normalizeEvent,H=i.reportEventChange,q={},W={},B=[],V=i.options;N.isHiddenDay=j,N.skipHiddenDays=S,N.getCellsPerWeek=T,N.dateToCell=F,N.dateToDayOffset=O,N.dayOffsetToCellOffset=P,N.cellOffsetToCell=I,N.cellToDate=D,N.cellToCellOffset=E,N.cellOffsetToDayOffset=M,N.dayOffsetToDate=A,N.rangeToSegments=z;var Y,G=o("hiddenDays")||[],K=[],X=[],J=[],Z=o("isRTL");!function(){o("weekends")===!1&&G.push(0,6);for(var t=0,i=0;7>t;t++)X[t]=i,K[t]=-1!=e.inArray(t,G),K[t]||(J[i]=t,i++);if(Y=i,!Y)throw"invalid hiddenDays"}()}function pt(){function t(e,t){var i=n(e,!1,!0);mt(i,function(e,t){F(e.event,t)}),y(i,t),mt(i,function(e,t){S("eventAfterRender",e.event,e.event,t)})}function i(e,t,i){var o=n([e],!0,!1),s=[];return mt(o,function(e,n){e.row===t&&n.css("top",i),s.push(n[0])}),s}function n(t,i,n){var s,l,c=K(),u=i?e("<div/>"):c,p=o(t);return r(p),s=a(p),u[0].innerHTML=s,l=u.children(),i&&c.append(l),d(p,l),mt(p,function(e,t){e.hsides=D(t,!0)}),mt(p,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),mt(p,function(e,t){e.outerHeight=t.outerHeight(!0)}),h(p,n),p}function o(e){for(var t=[],i=0;i<e.length;i++){var n=s(e[i]);t.push.apply(t,n)}return t}function s(e){for(var t=e.start,i=k(e),n=tt(t,i),o=0;o<n.length;o++)n[o].event=e;return n}function r(e){for(var t=T("isRTL"),i=0;i<e.length;i++){var n=e[i],o=(t?n.isEnd:n.isStart)?Y:V,s=(t?n.isStart:n.isEnd)?G:U,r=o(n.leftCol),a=s(n.rightCol);n.left=r,n.outerWidth=a-r}}function a(e){for(var t="",i=0;i<e.length;i++)t+=l(e[i]);return t}function l(e){var t="",i=T("isRTL"),n=e.event,o=n.url,s=["fc-event","fc-event-hori"];E(n)&&s.push("fc-event-draggable"),e.isStart&&s.push("fc-event-start"),e.isEnd&&s.push("fc-event-end"),s=s.concat(n.className),n.source&&(s=s.concat(n.source.className||[]));var r=B(n,T);return t+=o?"<a href='"+H(o)+"'":"<div",t+=" class='"+s.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+e.left+"px;"+r+"'"+">"+"<div class='fc-event-inner'>",!n.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+H(X(n.start,n.end,T("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+H(n.title||"")+"</span>"+"</div>",e.isEnd&&M(n)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(i?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),t+="</"+(o?"a":"div")+">"}function d(t,i){for(var n=0;n<t.length;n++){var o=t[n],s=o.event,r=i.eq(n),a=S("eventRender",s,s,r);a===!1?r.remove():(a&&a!==!0&&(a=e(a).css({position:"absolute",left:o.left}),r.replaceWith(a),r=a),o.element=r)}}function h(e,t){var i=u(e),n=_(),o=[];if(t)for(var s=0;s<n.length;s++)n[s].height(i[s]);for(var s=0;s<n.length;s++)o.push(n[s].position().top);mt(e,function(e,t){t.css("top",o[e.row]+e.top)})}function u(e){for(var t=$(),i=L(),n=[],o=f(e),s=0;t>s;s++){for(var r=o[s],a=[],l=0;i>l;l++)a.push(0);for(var c=0;c<r.length;c++){var d=r[c];d.top=R(a.slice(d.leftCol,d.rightCol+1));for(var l=d.leftCol;l<=d.rightCol;l++)a[l]=d.top+d.outerHeight}n.push(R(a))}return n}function f(e){var t,i,n,o=$(),s=[];for(t=0;t<e.length;t++)i=e[t],n=i.row,i.element&&(s[n]?s[n].push(i):s[n]=[i]);for(n=0;o>n;n++)s[n]=g(s[n]||[]);return s}function g(e){for(var t=[],i=v(e),n=0;n<i.length;n++)t.push.apply(t,i[n]);return t}function v(e){e.sort(gt);for(var t=[],i=0;i<e.length;i++){for(var n=e[i],o=0;o<t.length&&ft(n,t[o]);o++);t[o]?t[o].push(n):t[o]=[n]}return t}function _(){var e,t=$(),i=[];for(e=0;t>e;e++)i[e]=W(e).find("div.fc-day-content > div");return i}function y(e,t){var i=K();mt(e,function(e,i,n){var o=e.event;o._id===t?b(o,i,e):i[0]._fci=n}),j(i,e,b)}function b(e,t,i){E(e)&&C.draggableDayEvent(e,t,i),i.isEnd&&M(e)&&C.resizableDayEvent(e,t,i),O(e,t)}function w(e,t){var i,n=et();t.draggable({delay:50,opacity:T("dragOpacity"),revertDuration:T("dragRevertDuration"),start:function(o,s){S("eventDragStart",t,e,o,s),I(e,t),n.start(function(n,o,s,r){if(t.draggable("option","revert",!n||!s&&!r),Z(),n){var a=it(o),l=it(n);i=m(l,a),J(c(p(e.start),i),c(k(e),i))}else i=0},o,"drag")},stop:function(o,s){n.stop(),Z(),S("eventDragStop",t,e,o,s),i?z(this,e,i,0,e.allDay,o,s):(t.css("filter",""),P(e,t))}})}function x(t,n,o){var s=T("isRTL"),r=s?"w":"e",a=n.find(".ui-resizable-"+r),l=!1;q(n),n.mousedown(function(e){e.preventDefault()}).click(function(e){l&&(e.preventDefault(),e.stopImmediatePropagation())}),a.mousedown(function(s){function a(i){S("eventResizeStop",this,t,i),e("body").css("cursor",""),d.stop(),Z(),h&&N(this,t,h,0,i),setTimeout(function(){l=!1},0)}if(1==s.which){l=!0;var d=et();$(),L();var h,u,p=n.css("top"),f=e.extend({},t),m=rt(st(t.start));Q(),e("body").css("cursor",r+"-resize").one("mouseup",a),S("eventResizeStart",this,t,s),d.start(function(n,s){if(n){var a=nt(s),l=nt(n);if(l=Math.max(l,m),h=ot(l)-ot(a)){f.end=c(A(t),h,!0);var d=u;u=i(f,o.row,p),u=e(u),u.find("*").css("cursor",r+"-resize"),d&&d.remove(),I(t)}else u&&(P(t),u.remove(),u=null);Z(),J(t.start,c(k(t),h))}},s)}})}var C=this;C.renderDayEvents=t,C.draggableDayEvent=w,C.resizableDayEvent=x;var T=C.opt,S=C.trigger,E=C.isEventDraggable,M=C.isEventResizable,A=C.eventEnd,F=C.reportEventElement,O=C.eventElementHandlers,P=C.showEvents,I=C.hideEvents,z=C.eventDrop,N=C.eventResize,$=C.getRowCnt,L=C.getColCnt;C.getColWidth;var W=C.allDayRow,V=C.colLeft,U=C.colRight,Y=C.colContentLeft,G=C.colContentRight;C.dateToCell;var K=C.getDaySegmentContainer,X=C.calendar.formatDates,J=C.renderDayOverlay,Z=C.clearOverlays,Q=C.clearSelection,et=C.getHoverListener,tt=C.rangeToSegments,it=C.cellToDate,nt=C.cellToCellOffset,ot=C.cellOffsetToDayOffset,st=C.dateToDayOffset,rt=C.dayOffsetToCellOffset}function ft(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(n.leftCol<=e.rightCol&&n.rightCol>=e.leftCol)return!0}return!1}function mt(e,t){for(var i=0;i<e.length;i++){var n=e[i],o=n.element;o&&t(n,o,i)}}function gt(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function vt(){function t(e,t,o){i(),t||(t=l(e,o)),c(e,t,o),n(e,t,o)}function i(e){h&&(h=!1,d(),a("unselect",null,e))}function n(e,t,i,n){h=!0,a("select",null,e,t,i,n)}function o(t){var o=s.cellToDate,a=s.getIsCellAllDay,l=s.getHoverListener(),h=s.reportDayClick;if(1==t.which&&r("selectable")){i(t);var u;l.start(function(e,t){d(),e&&a(e)?(u=[o(t),o(e)].sort(N),c(u[0],u[1],!0)):u=null},t),e(document).one("mouseup",function(e){l.stop(),u&&(+u[0]==+u[1]&&h(u[0],!0,e),n(u[0],u[1],!0,e))})}}var s=this;s.select=t,s.unselect=i,s.reportSelection=n,s.daySelectionMousedown=o;var r=s.opt,a=s.trigger,l=s.defaultSelectionEnd,c=s.renderSelection,d=s.clearSelection,h=!1;r("selectable")&&r("unselectAuto")&&e(document).mousedown(function(t){var n=r("unselectCancel");n&&e(t.target).parents(n).length||i(t)})}function _t(){function t(t,i){var n=s.shift();return n||(n=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),n[0].parentNode!=i[0]&&n.appendTo(i),o.push(n.css(t).show()),n}function i(){for(var e;e=o.shift();)s.push(e.hide().unbind())}var n=this;n.renderOverlay=t,n.clearOverlays=i;var o=[],s=[]}function yt(e){var t,i,n=this;n.build=function(){t=[],i=[],e(t,i)},n.cell=function(e,n){var o,s=t.length,r=i.length,a=-1,l=-1;for(o=0;s>o;o++)if(n>=t[o][0]&&n<t[o][1]){a=o;break}for(o=0;r>o;o++)if(e>=i[o][0]&&e<i[o][1]){l=o;break}return a>=0&&l>=0?{row:a,col:l}:null},n.rect=function(e,n,o,s,r){var a=r.offset();return{top:t[e][0]-a.top,left:i[n][0]-a.left,width:i[s][1]-i[n][0],height:t[o][1]-t[e][0]}}}function bt(t){function i(e){wt(e);var i=t.cell(e.pageX,e.pageY);(!i!=!r||i&&(i.row!=r.row||i.col!=r.col))&&(i?(s||(s=i),o(i,s,i.row-s.row,i.col-s.col)):o(i,s),r=i)}var n,o,s,r,a=this;a.start=function(a,l,c){o=a,s=r=null,t.build(),i(l),n=c||"mousemove",e(document).bind(n,i)},a.stop=function(){return e(document).unbind(n,i),r}}function wt(e){e.pageX===kt&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function xt(e){function t(t){return n[t]=n[t]||e(t)}var i=this,n={},o={},s={};i.left=function(e){return o[e]=o[e]===kt?t(e).position().left:o[e]},i.right=function(e){return s[e]=s[e]===kt?i.left(e)+t(e).width():s[e]},i.clear=function(){n={},o={},s={}}}var kt=arguments[3],Ct={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},jt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Tt=e.fullCalendar={version:"1.6.4"},St=Tt.views={};e.fn.fullCalendar=function(t){if("string"==typeof t){var i,n=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=e.data(this,"fullCalendar");if(o&&e.isFunction(o[t])){var s=o[t].apply(o,n);i===kt&&(i=s),"destroy"==t&&e.removeData(this,"fullCalendar")}}),i!==kt?i:this}t=t||{};var s=t.eventSources||[];return delete t.eventSources,t.events&&(s.push(t.events),delete t.events),t=e.extend(!0,{},Ct,t.isRTL||t.isRTL===kt&&Ct.isRTL?jt:{},t),this.each(function(i,n){var r=e(n),a=new o(r,t,s);r.data("fullCalendar",a),a.render()}),this},Tt.sourceNormalizers=[],Tt.sourceFetchers=[];var Dt={dataType:"json",cache:!1},Et=1;Tt.addDays=c,Tt.cloneDate=p,Tt.parseDate=v,Tt.parseISO8601=_,Tt.parseTime=y,Tt.formatDate=b,Tt.formatDates=w;var Mt=["sun","mon","tue","wed","thu","fri","sat"],At=864e5,Ft=36e5,Ot=6e4,Pt={s:function(e){return e.getSeconds()},ss:function(e){return $(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return $(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return $(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return $(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return $(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return $(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return b(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return x(e)}};Tt.dateFormatters=Pt,Tt.applyAll=V,St.month=Y,St.basicWeek=G,St.basicDay=K,n({weekMode:"fixed"}),St.agendaWeek=Z,St.agendaDay=Q,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}),define("orocalendar/js/calendar/event/model",["backbone","routing"],function(e,t){return e.Model.extend({route:"oro_api_get_calendarevents",urlRoot:null,defaults:{id:null,title:null,start:null,end:null,allDay:!1,editable:!1,reminders:{},removable:!1},initialize:function(){this.urlRoot=t.generate(this.route)}})}),define("orocalendar/js/calendar/event/collection",["backbone","routing","orocalendar/js/calendar/event/model"],function(e,t,i){return e.Collection.extend({route:"oro_api_get_calendarevents",url:null,model:i,calendar:null,subordinate:!1,setRange:function(e,i){this.url=t.generate(this.route,{calendar:this.calendar,start:e,end:i,subordinate:this.subordinate})},setCalendar:function(e){this.calendar=e},getCalendar:function(){return this.calendar}})}),define("orocalendar/js/form-validation",["jquery","underscore","orotranslation/js/translator","oroui/js/tools"],function(e,t,i,n){return{handleErrors:function(o,s,r){t.isString(o)&&(o=e(o)),this.removeErrors(o);var a=[];t.isString(s)&&a.push(s),t.isUndefined(s.message)||(n.debug?(a.push(s.message),t.isUndefined(console)||console.error(t.isUndefined(s.stack)?s:s.stack)):a.push(i("Unexpected error was occurred"))),!t.isUndefined(s.errors)&&t.isArray(s.errors)&&t.each(s.errors,function(e){a.push(e)
}),this.addErrors(o,a),t.isUndefined(s.children)||(t.isUndefined(r)&&(r=this.getFormFieldPrefix(o)),t.each(s.children,t.bind(function(e,i){var n=o.find("#"+r+i);this.removeFieldErrors(n),!t.isUndefined(e.errors)&&t.isArray(e.errors)&&this.addFieldErrors(n,e.errors)},this)),this.setFocusOnFirstErrorField(o))},getFormFieldPrefix:function(e){var i="",n=null;return n="form"===e.prop("tagName").toLowerCase()?e:e.find("form"),t.isNull(n)||(i=n.attr("id"),t.isUndefined(i)?i="":i+="_"),i},removeFieldErrors:function(t){var i=e(t),n=i.closest(".controls");n.removeClass("validation-error").find(".error").removeClass("error")},addFieldErrors:function(i,n){var o=e(i),s=o.closest("div.controls");o.is(":visible")||(o=s.children(":input"));var r=o.siblings(".validation-failed");r.length||(r=e('<span class="validation-failed"></span>'),o.after(r)),r.show().text(t.isArray(n)?n.join("; "):n),o.addClass("error"),s.addClass("validation-error")},removeErrors:function(i){t.isString(i)&&(i=e(i));var n=i.find(".alert-error");if(n.length>0){n.hide();var o=n.find("ul");o.empty()}},addErrors:function(i,n){t.isString(i)&&(i=e(i));var o=i.find(".alert-error");if(o.length>0){var s=o.find("ul");t.size(n)>0&&(0===s.length&&(s=e("<ul>"),o.append(s)),t.each(n,function(t){this.append(e("<li>").text(t))},s),o.show())}},setFocusOnFirstErrorField:function(i){t.isString(i)&&(i=e(i)),i.find(".error>:input,:input.error").first().focus()}}}),define("orocalendar/js/calendar/event/view",["underscore","backbone","orotranslation/js/translator","oro/dialog-widget","oroui/js/loading-mask","orocalendar/js/form-validation","oroui/js/delete-confirmation","orocalendar/js/calendar/event/model"],function(e,t,i,n,o,s,r,a){var l=t.$;return t.View.extend({selectors:{loadingMaskContent:".loading-content"},options:{formTemplateSelector:null,calendar:null},initialize:function(t){this.options=e.defaults(t||{},this.options);var i=l(this.options.formTemplateSelector).html();this.template=e.template(i),this.listenTo(this.model,"sync",this.onModelSave),this.listenTo(this.model,"destroy",this.onModelDelete)},remove:function(){this.trigger("remove"),this._hideMask(),t.View.prototype.remove.apply(this,arguments)},onModelSave:function(){this.trigger("addEvent",this.model),this.eventDialog.remove(),this.remove()},onModelDelete:function(){this.eventDialog.remove(),this.remove()},render:function(){var t,s,c;return this.model||(this.model=new a),t=this.model.toJSON(),s=this.template(t),s=this.fillForm(s,t),this.eventDialog=new n({el:s,title:this.model.isNew()?i("Add New Event"):i("Edit Event"),stateEnabled:!1,incrementalPosition:!1,loadingMaskEnabled:!1,dialogOptions:{modal:!0,resizable:!1,width:475,autoResize:!0,close:e.bind(this.remove,this)},submitHandler:e.bind(function(){this.saveModel()},this)}),this.eventDialog.render(),c=e.bind(function(t){var i,n;t.preventDefault(),i=l(t.target),n=new r({content:i.data("message")}),n.on("ok",e.bind(this.deleteModel,this)),n.open()},this),this.eventDialog.getAction("delete","adopted",function(e){e.on("click",c)}),s.find("[name]").uniform("update"),this.loadingMask=new o,this.eventDialog.$el.closest(".ui-dialog").append(this.loadingMask.render().$el),this},saveModel:function(){this.showSavingMask();try{var t=this.getEventFormData();t.calendar=this.options.calendar,this.model.set({reminders:{}}),this.model.save(t,{wait:!0,error:e.bind(this._handleResponseError,this)})}catch(i){this.showError(i)}},deleteModel:function(){this.showDeletingMask();try{this.model.destroy({wait:!0,error:e.bind(this._handleResponseError,this)})}catch(t){this.showError(t)}},showSavingMask:function(){this._showMask(i("Saving..."))},showDeletingMask:function(){this._showMask(i("Deleting..."))},_showMask:function(e){this.loadingMask&&(this.loadingMask.$el.find(this.selectors.loadingMaskContent).text(e),this.loadingMask.show())},_hideMask:function(){this.loadingMask&&this.loadingMask.hide()},_handleResponseError:function(e,t){this.showError(t.responseJSON||{})},showError:function(e){this._hideMask(),this.eventDialog&&s.handleErrors(this.eventDialog.$el.parent(),e)},fillForm:function(t,i){var n=this;t=l(t),n.buildForm(t,i);var o=t.find("[name]"),s=/\[(\w+)\]/g;return e.each(o,function(e){e=l(e);for(var t,o=e.attr("name"),r=[];null!==(t=s.exec(o));)r.push(t[1]);if(r.length){var a=n.getValueByPath(i,r);e.is(":checkbox")?e.prop("checked",a):e.val(a),e.change()}}),t},buildForm:function(t,i){var n=this;t=l(t),e.each(i,function(i,o){if("object"==typeof i){var s=t.find("."+o+"-collection");if(s){var r=s.data("prototype");r&&e.each(i,function(e,t){var i=r.replace(/__name__/g,t);s.append(i)},r)}n.buildForm(t,i)}})},getEventFormData:function(){var t=this,i=/\[(\w+)\]/g,n={},o=this.eventDialog.form.serializeArray();return o=o.concat(this.eventDialog.form.find("input[type=checkbox]:not(:checked)").map(function(){return{name:this.name,value:!1}}).get()),e.each(o,function(e){for(var o,s=[];null!==(o=i.exec(e.name));)s.push(o[1]);s.length&&t.setValueByPath(n,e.value,s)}),n},setValueByPath:function(e,t,i){for(var n=e,o=0;o<i.length-1;o+=1)void 0===n[i[o]]&&(n[i[o]]={}),n=n[i[o]];n[i[i.length-1]]=t},getValueByPath:function(e,t){for(var i=e,n=0;n<t.length;++n){if(void 0==i[t[n]])return void 0;i=i[t[n]]}return i}})}),define("orocalendar/js/calendar/connection/model",["backbone","orocalendar/js/calendar/connection/collection"],function(e,t){return e.Model.extend({collection:t,idAttribute:"calendar",urlRoot:null,defaults:{color:null,backgroundColor:null,calendar:null,calendarName:null,owner:null,removable:!1}})}),define("orocalendar/js/calendar/connection/collection",["backbone","routing","orocalendar/js/calendar/connection/model"],function(e,t,i){return e.Collection.extend({route:"oro_api_get_calendar_connections",url:null,model:i,setCalendar:function(e){this.url=t.generate(this.route,{id:e})}})}),define("orocalendar/js/calendar/connection/view",["jquery","underscore","backbone","orotranslation/js/translator","oroui/js/messenger","orocalendar/js/calendar/connection/collection","orocalendar/js/calendar/connection/model"],function(e,t,i,n,o,s,r){return i.View.extend({attrs:{calendar:"data-calendar",owner:"data-owner",color:"data-color",backgroundColor:"data-bg-color"},selectors:{container:".calendars",itemContainer:".connection-container",item:".connection-item",lastItem:".connection-item:last",findItemByCalendar:function(e){return'.connection-item[data-calendar="'+e+'"]'},findItemByOwner:function(e){return'.connection-item[data-owner="'+e+'"]'},removeButton:".remove-connection-button",newOwnerSelector:"#new_calendar_owner"},initialize:function(i){this.options=t.defaults(i||{},this.options),this.options.collection=this.options.collection||new s,this.options.collection.setCalendar(this.options.calendar),this.template=t.template(e(this.options.itemTemplateSelector).html()),this.getCollection().each(t.bind(function(e){this.onModelAdded(e)},this)),this.listenTo(this.getCollection(),"add",this.onModelAdded),this.listenTo(this.getCollection(),"change",this.onModelChanged),this.listenTo(this.getCollection(),"destroy",this.onModelDeleted);var n=this.$el.closest(this.selectors.container);n.find(this.selectors.newOwnerSelector).on("change",t.bind(function(t){this.addModel(t.val),e(t.target).select2("val","")},this))},getCollection:function(){return this.options.collection},onModelAdded:function(i){var n,o=i.toJSON();this.options.colorManager.applyColors(o,t.bind(function(){return this.$el.find(this.selectors.lastItem).attr(this.attrs.backgroundColor)},this)),this.options.colorManager.setCalendarColors(o.calendar,o.color,o.backgroundColor),n=e(this.template(o)),t.each(this.attrs,function(e,t){n.attr(e,o[t])}),n.on("click",this.selectors.removeButton,t.bind(function(t){this.deleteModel(e(t.currentTarget).closest(this.selectors.item).attr(this.attrs.calendar))},this)),this.$el.find(this.selectors.itemContainer).append(n),this.trigger("connectionAdd",i)},onModelChanged:function(e){this.options.colorManager.setCalendarColors(e.get("calendar"),e.get("color"),e.get("backgroundColor")),this.trigger("connectionChange",e)},onModelDeleted:function(e){this.options.colorManager.removeCalendarColors(e.get("calendar")),this.$el.find(this.selectors.findItemByCalendar(e.get("calendar"))).remove(),this.trigger("connectionRemove",e)},addModel:function(e){var i,s,a=this.$el.find(this.selectors.findItemByOwner(e));if(a.length>0)o.notificationFlashMessage("warning",n("This calendar already exists."));else{i=o.notificationMessage("warning",n("Adding the calendar, please wait ..."));try{s=new r,s.set("owner",e),s.urlRoot=this.getCollection().url,this.getCollection().create(s,{wait:!0,success:t.bind(function(){i.close(),o.notificationFlashMessage("success",n("The calendar was added."))},this),error:t.bind(function(e,t){i.close(),this.showAddError(t.responseJSON||{})},this)})}catch(l){i.close(),this.showMiscError(l)}}},deleteModel:function(e){var i,s=o.notificationMessage("warning",n("Excluding the calendar, please wait ..."));try{i=this.getCollection().get(e),i.destroy({wait:!0,success:t.bind(function(){s.close(),o.notificationFlashMessage("success",n("The calendar was excluded."))},this),error:t.bind(function(e,t){s.close(),this.showDeleteError(t.responseJSON||{})},this)})}catch(r){s.close(),this.showMiscError(r)}},showAddError:function(e){this._showError(n("Sorry, the calendar adding was failed"),e)},showDeleteError:function(e){this._showError(n("Sorry, the calendar excluding was failed"),e)},showMiscError:function(e){this._showError(n("Sorry, unexpected error was occurred"),e)},_showError:function(e,t){o.showErrorMessage(e,t)}})}),define("orocalendar/js/calendar/color-manager",["underscore"],function(e){var t={colors:[["FFFFFF","AC725E"],["FFFFFF","D06B64"],["FFFFFF","F83A22"],["000000","FA573C"],["000000","FF7537"],["000000","FFAD46"],["000000","42D692"],["FFFFFF","16A765"],["000000","7BD148"],["000000","B3DC6C"],["000000","FBE983"],["000000","FAD165"],["000000","92E1C0"],["000000","9FE1E7"],["000000","9FC6E7"],["FFFFFF","4986E7"],["000000","9A9CFF"],["000000","B99AFF"],["000000","C2C2C2"],["000000","CABDBF"],["000000","CCA6AC"],["000000","F691B2"],["FFFFFF","CD74E6"],["FFFFFF","A47AE2"]],defaultColors:null,calendarColors:null,initialize:function(){this.defaultColors=this.findColors("4986E7"),this.calendarColors={}},setCalendarColors:function(e,t,i){this.calendarColors[e]={color:"#"+t,backgroundColor:"#"+i}},removeCalendarColors:function(t){e.isUndefined(this.calendarColors[t])||delete this.calendarColors[t]},getCalendarColors:function(e){return this.calendarColors[e]},applyColors:function(t,i){if(e.isEmpty(t.color)&&e.isEmpty(t.backgroundColor)){var n=this.findNextColors(i());t.color=n[0],t.backgroundColor=n[1]}else e.isEmpty(t.color)?t.color=this.defaultColors[0]:e.isEmpty(t.backgroundColor)&&(t.backgroundColor=this.defaultColors[1])},findColors:function(t){if(e.isEmpty(t))return this.findColors(this.defaultColors[1]);t=t.toUpperCase();var i=e.find(this.colors,function(e){return e[1]===t});return e.isUndefined(i)&&(i=this.findColors(this.defaultColors[1])),i},findNextColors:function(t){if(e.isEmpty(t))return this.findColors(this.defaultColors[1]);t=t.toUpperCase();var i=-1;return e.each(this.colors,function(e,n){e[1]===t&&(i=n)}),-1===i?this.findColors(this.defaultColors[1]):i+1===e.size(this.colors)?e.first(this.colors):this.colors[i+1]}};return function(){var i=e.extend({},t);return i.initialize(),i}}),define("orocalendar/js/calendar",["underscore","backbone","orotranslation/js/translator","oroui/js/messenger","oroui/js/loading-mask","orocalendar/js/calendar/event/collection","orocalendar/js/calendar/event/model","orocalendar/js/calendar/event/view","orocalendar/js/calendar/connection/collection","orocalendar/js/calendar/connection/view","orocalendar/js/calendar/color-manager","orolocale/js/formatter/datetime","jquery.fullcalendar"],function(e,t,i,n,o,s,r,a,l,c,d,h){var u=t.$;return t.View.extend({eventsTemplate:e.template('<div><div class="calendar-container"><div class="calendar"></div><div class="loading-mask"></div></div></div>'),selectors:{calendar:".calendar",loadingMask:".loading-mask",loadingMaskContent:".loading-content"},options:{eventsOptions:{editable:!0,removable:!0,collection:null,itemFormTemplateSelector:null,itemFormDeleteButtonSelector:null,calendar:null},connectionsOptions:{collection:null,containerTemplateSelector:null}},enableEventLoading:!1,fullCalendar:null,eventView:null,loadingMask:null,colorManager:null,initialize:function(t){this.options=e.defaults(t||{},this.options),this.options.collection=this.options.collection||new s,this.options.collection.setCalendar(this.options.calendar),this.options.collection.subordinate=this.options.eventsOptions.subordinate,this.options.newEventEditable=this.options.eventsOptions.editable,this.options.newEventRemovable=this.options.eventsOptions.removable,this.listenTo(this.getCollection(),"add",this.onEventAdded),this.listenTo(this.getCollection(),"change",this.onEventChanged),this.listenTo(this.getCollection(),"destroy",this.onEventDeleted),this.colorManager=new d},dispose:function(){this.getCalendarElement().data("fullCalendar")&&this.getCalendarElement().fullCalendar("destroy"),t.View.prototype.dispose.call(this)},getEventsView:function(e){return this.eventView||(this.eventView=new a({model:e,calendar:this.options.calendar,formTemplateSelector:this.options.eventsOptions.itemFormTemplateSelector}),this.listenTo(this.eventView,"addEvent",this.handleEventViewAdd),this.listenTo(this.eventView,"remove",this.handleEventViewRemove)),this.eventView},handleEventViewRemove:function(){this.eventView=null},getLoadingMask:function(){return this.loadingMask||(this.loadingMask=new o,this.$el.find(this.selectors.loadingMask).append(this.loadingMask.render().$el)),this.loadingMask},getCollection:function(){return this.options.collection},getCalendarElement:function(){return this.fullCalendar||(this.fullCalendar=this.$el.find(this.selectors.calendar)),this.fullCalendar},handleEventViewAdd:function(e){this.getCollection().add(e)},onEventAdded:function(e){var t=e.toJSON();this.prepareViewModel(t,!1),this.getCalendarElement().fullCalendar("renderEvent",t)},onEventChanged:function(t){var i=this.getCalendarElement().fullCalendar("clientEvents",t.get("id"))[0];i=e.extend(i,e.pick(t.attributes,e.keys(e.omit(i,["id"])))),this.prepareViewModel(i),this.getCalendarElement().fullCalendar("updateEvent",i)},onEventDeleted:function(e){this.getCalendarElement().fullCalendar("removeEvents",e.id)},onConnectionAddedOrDeleted:function(){this.getCalendarElement().fullCalendar("refetchEvents")},onConnectionChanged:function(){},select:function(e,t){if(!this.eventView)try{var i=new r({start:this.formatDateTimeForModel(e),end:this.formatDateTimeForModel(t),editable:this.options.newEventEditable,removable:this.options.newEventRemovable});this.getEventsView(i).render()}catch(n){this.showMiscError(n)}},eventClick:function(e){if(!this.eventView)try{var t=this.getCollection().get(e.id);this.getEventsView(t).render()}catch(i){this.showMiscError(i)}},eventDropOrResize:function(t){this.showSavingMask();try{this.getCollection().get(t.id).save({start:this.formatDateTimeForModel(t.start),end:this.formatDateTimeForModel(e.isNull(t.end)?t.start:t.end)},{success:e.bind(this._hideMask,this),error:e.bind(function(e,t){this.showSaveEventError(t.responseJSON||{})},this)})}catch(i){this.showLoadEventsError(i)}},loadEvents:function(t,i,n){var o=e.bind(function(){var t=this.getCollection().toJSON();e.each(t,this.prepareViewModel,this),this._hideMask(),n(t)},this);try{this.getCollection().setRange(this.formatDateTimeForModel(t),this.formatDateTimeForModel(i)),this.enableEventLoading?this.getCollection().fetch({reset:!0,success:o,error:e.bind(function(e,t){n({}),this.showLoadEventsError(t.responseJSON||{})},this)}):o()}catch(s){n({}),this.showLoadEventsError(s)}},prepareViewModel:function(e,t){var i=this.colorManager.getCalendarColors(e.calendar);e.textColor=i.color,e.color=i.backgroundColor,t!==!1&&(e.start=h.applyTimeZoneCorrection(e.start),e.end=h.applyTimeZoneCorrection(e.end))},formatDateTimeForModel:function(e){return e=h.applyTimeZoneCorrection(e,-1),h.convertDateTimeToBackendFormat(e)},showSavingMask:function(){this._showMask(i("Saving..."))},showLoadingMask:function(){this._showMask(i("Loading..."))},_showMask:function(e){if(this.enableEventLoading){var t=this.getLoadingMask();t.$el.find(this.selectors.loadingMaskContent).text(e),t.show()}},_hideMask:function(){this.loadingMask&&this.loadingMask.hide()},showLoadEventsError:function(e){this._showError(i("Sorry, calendar events were not loaded correctly"),e)},showSaveEventError:function(e){this._showError(i("Sorry, calendar event was not saved correctly"),e)},showMiscError:function(e){this._showError(i("Sorry, unexpected error was occurred"),e)},_showError:function(e,t){this._hideMask(),n.showErrorMessage(e,t)},initCalendarContainer:function(){var e=this.$el.find(this.options.eventsOptions.containerSelector);if(0===e.length)throw new Error("Cannot find '"+this.options.eventsOptions.containerSelector+"' element.");e.empty(),e.append(u(this.eventsTemplate()))},initializeFullCalendar:function(){var t,i,n;t={selectHelper:!0,events:e.bind(this.loadEvents,this),select:e.bind(this.select,this),eventClick:e.bind(this.eventClick,this),eventDrop:e.bind(this.eventDropOrResize,this),eventResize:e.bind(this.eventDropOrResize,this),loading:e.bind(function(e){e?this.showLoadingMask():this._hideMask()},this)},i=["date","defaultView","editable","selectable","header","allDayText","allDaySlot","buttonText","titleFormat","columnFormat","timeFormat","axisFormat","slotMinutes","snapMinutes","minTime","maxTime","slotEventOverlap","firstDay","firstHour","monthNames","monthNamesShort","dayNames","dayNamesShort","contentHeight"],e.extend(t,e.pick(this.options.eventsOptions,i)),e.isUndefined(t.date)||(t.date=h.applyTimeZoneCorrection(t.date),t.year=t.date.getFullYear(),t.month=t.date.getMonth(),t.date=t.date.getDate()),t.viewRender=e.bind(function(e){"month"!==e.name?this.getCalendarElement().fullCalendar("option","aspectRatio",1):this.getCalendarElement().fullCalendar("option","aspectRatio",1.35)},this),n=this,t.viewDisplay=function(){n.setTimeline(),setInterval(function(){n.setTimeline()},3e5)},t.windowResize=function(){n.setTimeline()},t.eventAfterRender=function(t,i){var o=n.getCollection().get(t.id).get("reminders");o&&e.keys(o).length?i.find(".fc-event-inner").append('<i class="icon icon-bell"></i>'):i.find(".icon").remove()},this.getCalendarElement().fullCalendar(t),this.enableEventLoading=!0},initializeConnectionsView:function(){var t,i;if(t=this.$el.find(this.options.connectionsOptions.containerSelector),0===t.length)throw new Error("Cannot find '"+this.options.connectionsOptions.containerSelector+"' element.");t.empty(),i=e.template(u(this.options.connectionsOptions.containerTemplateSelector).html()),t.append(u(i())),this.connectionsView=new c({el:t,collection:this.options.connectionsOptions.collection,calendar:this.options.calendar,itemTemplateSelector:this.options.connectionsOptions.itemTemplateSelector,colorManager:this.colorManager}),this.listenTo(this.connectionsView,"connectionAdd",this.onConnectionAddedOrDeleted),this.listenTo(this.connectionsView,"connectionChange",this.onConnectionChanged),this.listenTo(this.connectionsView,"connectionRemove",this.onConnectionAddedOrDeleted)},loadConnectionColors:function(){var t=null;this.options.connectionsOptions.collection.each(e.bind(function(e){var i=e.toJSON();this.colorManager.applyColors(i,function(){return t}),this.colorManager.setCalendarColors(i.calendar,i.color,i.backgroundColor),t=i.backgroundColor},this))},render:function(){return this.initCalendarContainer(),e.isUndefined(this.options.connectionsOptions.containerTemplateSelector)?(this.loadConnectionColors(),delete this.options.connectionsOptions):this.initializeConnectionsView(),this.initializeFullCalendar(),this},setTimeline:function(){var e,t,i,n,o,s,r,a,l=this.getCalendarElement(),c=new Date;c=new Date(c.getTime()+6e4*c.getTimezoneOffset()+6e4*this.options.eventsOptions.timezoneOffset),0===c.getHours()&&c.getMinutes()<=5&&(e=l.find(".fc-today"),e.removeClass("fc-today"),e.removeClass("fc-state-highlight"),e.next().addClass("fc-today"),e.next().addClass("fc-state-highlight")),t=l.find(".fc-agenda-slots:visible").parent(),i=t.children(".timeline"),0===i.length&&(i=u("<hr>").addClass("timeline"),t.prepend(i)),n=l.fullCalendar("getView"),n.visStart<c&&n.visEnd>c?i.show():i.hide(),s=60*60*c.getHours()+60*c.getMinutes()+c.getSeconds(),o=s/86400,r=Math.floor(t.height()*o),i.css("top",r+"px"),"agendaWeek"===n.name&&(a=l.find(".fc-today:visible"),null!==a.position()&&i.css({left:a.position().left-1+"px",width:a.width()+2+"px"}))}})}),!function(e,t,i){"undefined"!=typeof module?module.exports=i(e,t):"function"==typeof define&&"object"==typeof define.amd?define("bean",i):t[e]=i(e,t)}("bean",this,function(e,t){var i=window,n=t[e],o=/over|out/,s=/[^\.]*(?=\..*)\.|.*/,r=/\..*/,a="addEventListener",l="attachEvent",c="removeEventListener",d="detachEvent",h=document||{},u=h.documentElement||{},p=u[a],f=p?a:l,m=Array.prototype.slice,g=/click|mouse|menu|drag|drop/i,v=/^touch|^gesture/i,_={one:1},y=function(e,t,i){for(i=0;i<t.length;i++)e[t[i]]=1;return e}({},("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll "+(p?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend message readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":"")).split(" ")),b=function(){function e(e,t){for(;null!==(t=t.parentNode);)if(t===e)return!0;return!1}function t(t){var i=t.relatedTarget;return i?i!==this&&"xul"!==i.prefix&&!/document/.test(this.toString())&&!e(this,i):null===i}return{mouseenter:{base:"mouseover",condition:t},mouseleave:{base:"mouseout",condition:t},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),w=function(){var e="altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which".split(" "),t=e.concat("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" ")),i=e.concat("char charCode key keyCode".split(" ")),n=e.concat("touches targetTouches changedTouches scale rotation".split(" ")),s="preventDefault",r=function(e){return function(){e[s]?e[s]():e.returnValue=!1}},a="stopPropagation",l=function(e){return function(){e[a]?e[a]():e.cancelBubble=!0}},c=function(e){return function(){e[s](),e[a](),e.stopped=!0}},d=function(e,t,i){var n,o;for(n=i.length;n--;)o=i[n],!(o in t)&&o in e&&(t[o]=e[o])};return function(p,f){var m={originalEvent:p,isNative:f};if(!p)return m;var _,y=p.type,b=p.target||p.srcElement;return m[s]=r(p),m[a]=l(p),m.stop=c(m),m.target=b&&3===b.nodeType?b.parentNode:b,f&&(-1!==y.indexOf("key")?(_=i,m.keyCode=p.which||p.keyCode):g.test(y)?(_=t,m.rightClick=3===p.which||2===p.button,m.pos={x:0,y:0},p.pageX||p.pageY?(m.clientX=p.pageX,m.clientY=p.pageY):(p.clientX||p.clientY)&&(m.clientX=p.clientX+h.body.scrollLeft+u.scrollLeft,m.clientY=p.clientY+h.body.scrollTop+u.scrollTop),o.test(y)&&(m.relatedTarget=p.relatedTarget||p[("mouseover"===y?"from":"to")+"Element"])):v.test(y)&&(_=n),d(p,m,_||e)),m}}(),x=function(e,t){return p||t||e!==h&&e!==i?e:u},k=function(){function e(e,t,i,n,o){this.element=e,this.type=t,this.handler=i,this.original=n,this.namespaces=o,this.custom=b[t],this.isNative=y[t]&&e[f],this.eventType=p||this.isNative?t:"propertychange",this.customType=!p&&!this.isNative&&t,this.target=x(e,this.isNative),this.eventSupport=this.target[f]}return e.prototype={inNamespaces:function(e){var t,i;if(!e)return!0;if(!this.namespaces)return!1;for(t=e.length;t--;)for(i=this.namespaces.length;i--;)if(e[t]===this.namespaces[i])return!0;return!1},matches:function(e,t,i){return!(this.element!==e||t&&this.original!==t||i&&this.handler!==i)}},e}(),C=function(){var e={},t=function(i,n,o,s,r){if(n&&"*"!==n){var a,l=0,c=e["$"+n],d="*"===i;if(!c)return;for(a=c.length;a>l;l++)if((d||c[l].matches(i,o,s))&&!r(c[l],c,l,n))return}else for(var h in e)"$"===h.charAt(0)&&t(i,h.substr(1),o,s,r)},i=function(t,i,n){var o,s=e["$"+i];if(s)for(o=s.length;o--;)if(s[o].matches(t,n,null))return!0;return!1},n=function(e,i,n){var o=[];return t(e,i,n,null,function(e){return o.push(e)}),o},o=function(t){return(e["$"+t.type]||(e["$"+t.type]=[])).push(t),t},s=function(i){t(i.element,i.type,null,i.handler,function(t,i,n){return i.splice(n,1),0===i.length&&delete e["$"+t.type],!1})},r=function(){var t,i=[];for(t in e)"$"===t.charAt(0)&&(i=i.concat(e[t]));return i};return{has:i,get:n,put:o,del:s,entries:r}}(),j=p?function(e,t,i,n){e[n?a:c](t,i,!1)}:function(e,t,i,n,o){o&&n&&null===e["_on"+o]&&(e["_on"+o]=0),e[n?l:d]("on"+t,i)},T=function(e,t,n){return function(o){return o=w(o||((this.ownerDocument||this.document||this).parentWindow||i).event,!0),t.apply(e,[o].concat(n))}},S=function(e,t,n,o,s,r){return function(a){(o?o.apply(this,arguments):p?!0:a&&a.propertyName==="_on"+n||!a)&&(a&&(a=w(a||((this.ownerDocument||this.document||this).parentWindow||i).event,r)),t.apply(e,!a||s&&0!==s.length?m.call(arguments,a?0:1).concat(s):arguments))}},D=function(e,t,i,n,o){return function(){e(t,i,o),n.apply(this,arguments)}},E=function(e,t,i,n){var o,s,a,l=t&&t.replace(r,""),c=C.get(e,l,i);for(o=0,s=c.length;s>o;o++)c[o].inNamespaces(n)&&((a=c[o]).eventSupport&&j(a.target,a.eventType,a.handler,!1,a.type),C.del(a))},M=function(e,t,i,n,o){var a,l=t.replace(r,""),c=t.replace(s,"").split(".");return C.has(e,l,i)?e:("unload"===l&&(i=D(E,e,l,i,n)),b[l]&&(b[l].condition&&(i=S(e,i,l,b[l].condition,!0)),l=b[l].base||l),a=C.put(new k(e,l,i,n,c[0]&&c)),a.handler=a.isNative?T(e,a.handler,o):S(e,a.handler,l,!1,o,!1),a.eventSupport&&j(a.target,a.eventType,a.handler,!0,a.customType),void 0)},A=function(e,t,i){return function(n){var o,s,r="string"==typeof e?i(e,this):e;for(o=n.target;o&&o!==this;o=o.parentNode)for(s=r.length;s--;)if(r[s]===o)return t.apply(o,arguments)}},F=function(e,t,i){var n,o,a,l,c=E,d=t&&"string"==typeof t;if(d&&t.indexOf(" ")>0){for(t=t.split(" "),l=t.length;l--;)F(e,t[l],i);return e}if(o=d&&t.replace(r,""),o&&b[o]&&(o=b[o].type),!t||d)(a=d&&t.replace(s,""))&&(a=a.split(".")),c(e,o,i,a);else if("function"==typeof t)c(e,null,t);else for(n in t)t.hasOwnProperty(n)&&F(e,n,t[n]);return e},O=function(e,t,i,n,o){var s,r,a,l,c=i,d=i&&"string"==typeof i;if(t&&!i&&"object"==typeof t)for(s in t)t.hasOwnProperty(s)&&O.apply(this,[e,s,t[s]]);else for(l=arguments.length>3?m.call(arguments,3):[],r=(d?i:t).split(" "),d&&(i=A(t,c=n,o))&&(l=m.call(l,1)),this===_&&(i=D(F,e,t,i,c)),a=r.length;a--;)M(e,r[a],i,c,l);return e},P=function(){return O.apply(_,arguments)},I=p?function(e,t,n){var o=h.createEvent(e?"HTMLEvents":"UIEvents");o[e?"initEvent":"initUIEvent"](t,!0,!0,i,1),n.dispatchEvent(o)}:function(e,t,i){i=x(i,e),e?i.fireEvent("on"+t,h.createEventObject()):i["_on"+t]++},z=function(e,t,i){var n,o,a,l,c,d=t.split(" ");for(n=d.length;n--;)if(t=d[n].replace(r,""),(l=d[n].replace(s,""))&&(l=l.split(".")),l||i||!e[f])for(c=C.get(e,t),i=[!1].concat(i),o=0,a=c.length;a>o;o++)c[o].inNamespaces(l)&&c[o].handler.apply(e,i);else I(y[t],t,e);return e},N=function(e,t,i){for(var n=0,o=C.get(t,i),s=o.length;s>n;n++)o[n].original&&O(e,o[n].type,o[n].original);return e},R={add:O,one:P,remove:F,clone:N,fire:z,noConflict:function(){return t[e]=n,this}};if(i[l]){var $=function(){var e,t=C.entries();for(e in t)t[e].type&&"unload"!==t[e].type&&F(t[e].element,t[e].type);i[d]("onunload",$),i.CollectGarbage&&i.CollectGarbage()};i[l]("onunload",$)}return R}),function(e,t){"function"==typeof define&&define.amd?define("flotr2",["bean","underscore"],function(i,n){return e.Flotr=t(i,n)}):e.Flotr=t(e.bean,e._)}(this,function(e,t){return function(){var i,n=this,o=this.Flotr;i={_:t,bean:e,isIphone:/iphone/i.test(navigator.userAgent),isIE:-1!=navigator.appVersion.indexOf("MSIE")?parseFloat(navigator.appVersion.split("MSIE")[1]):!1,graphTypes:{},plugins:{},addType:function(e,t){i.graphTypes[e]=t,i.defaultOptions[e]=t.options||{},i.defaultOptions.defaultType=i.defaultOptions.defaultType||e},addPlugin:function(e,t){i.plugins[e]=t,i.defaultOptions[e]=t.options||{}},draw:function(e,t,n,o){return o=o||i.Graph,new o(e,t,n)},merge:function(e,t){var n,o,s=t||{};for(n in e)o=e[n],s[n]=o&&"object"==typeof o?o.constructor===Array?this._.clone(o):o.constructor===RegExp||this._.isElement(o)?o:i.merge(o,t?t[n]:void 0):o;return s},clone:function(e){return i.merge(e,{})},getTickSize:function(e,t,n,o){var s=(n-t)/e,r=i.getMagnitude(s),a=10,l=s/r;return 1.5>l?a=1:2.25>l?a=2:3>l?a=0===o?2:2.5:7.5>l&&(a=5),a*r},defaultTickFormatter:function(e){return e+""},defaultTrackFormatter:function(e){return"("+e.x+", "+e.y+")"},engineeringNotation:function(e,t,i){var n=["Y","Z","E","P","T","G","M","k",""],o=["y","z","a","f","p","n","µ","m",""],s=n.length;if(i=i||1e3,t=Math.pow(10,t||2),0===e)return 0;if(e>1)for(;s--&&e>=i;)e/=i;else for(n=o,s=n.length;s--&&1>e;)e*=i;return Math.round(e*t)/t+n[s]},getMagnitude:function(e){return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))},toPixel:function(e){return Math.floor(e)+.5},toRad:function(e){return-e*(Math.PI/180)},floorInBase:function(e,t){return t*Math.floor(e/t)},drawText:function(e,t,n,o,s){return e.fillText?(s=this._.extend({size:i.defaultOptions.fontSize,color:"#000000",textAlign:"left",textBaseline:"bottom",weight:1,angle:0},s),e.save(),e.translate(n,o),e.rotate(s.angle),e.fillStyle=s.color,e.font=(s.weight>1?"bold ":"")+1.3*s.size+"px sans-serif",e.textAlign=s.textAlign,e.textBaseline=s.textBaseline,e.fillText(t,0,0),e.restore(),void 0):(e.drawText(t,n,o,s),void 0)},getBestTextAlign:function(e,t){return t=t||{textAlign:"center",textBaseline:"middle"},e+=i.getTextAngleFromAlign(t),Math.abs(Math.cos(e))>.01&&(t.textAlign=Math.cos(e)>0?"right":"left"),Math.abs(Math.sin(e))>.01&&(t.textBaseline=Math.sin(e)>0?"top":"bottom"),t},alignTable:{"right middle":0,"right top":Math.PI/4,"center top":Math.PI/2,"left top":3*(Math.PI/4),"left middle":Math.PI,"left bottom":-3*(Math.PI/4),"center bottom":-Math.PI/2,"right bottom":-Math.PI/4,"center middle":0},getTextAngleFromAlign:function(e){return i.alignTable[e.textAlign+" "+e.textBaseline]||0},noConflict:function(){return n.Flotr=o,this}},n.Flotr=i}(),Flotr.defaultOptions={colors:["#00A8F0","#C0D800","#CB4B4B","#4DA74D","#9440ED"],ieBackgroundColor:"#FFFFFF",title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:!0,fontColor:"#545454",fontSize:7.5,resolution:1,parseFloat:!0,preventDefault:!0,xaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:0,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,mode:"normal",timeFormat:null,timeMode:"UTC",timeUnit:"millisecond",scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},x2axis:{},yaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:90,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},y2axis:{titleAngle:270},grid:{color:"#545454",backgroundColor:null,backgroundImage:null,watermarkAlpha:.4,tickColor:"#DDDDDD",labelMargin:3,verticalLines:!0,minorVerticalLines:null,horizontalLines:!0,minorHorizontalLines:null,outlineWidth:1,outline:"nsew",circular:!1},mouse:{track:!1,trackAll:!1,position:"se",relative:!1,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:"#FF3F19",trackDecimals:1,sensibility:2,trackY:!0,radius:3,fillColor:null,fillOpacity:.4}},function(){function e(){this.rgba=["r","g","b","a"];
for(var e=4;-1<--e;)this[this.rgba[e]]=arguments[e]||(3==e?1:0);this.normalize()}var t=Flotr._,i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};e.prototype={scale:function(){for(var e=4;-1<--e;)t.isUndefined(arguments[e])||(this[this.rgba[e]]*=arguments[e]);return this.normalize()},alpha:function(e){return t.isUndefined(e)||t.isNull(e)||(this.a=e),this.normalize()},clone:function(){return new e(this.r,this.b,this.g,this.a)},limit:function(e,t,i){return Math.max(Math.min(e,i),t)},normalize:function(){var e=this.limit;return this.r=e(parseInt(this.r,10),0,255),this.g=e(parseInt(this.g,10),0,255),this.b=e(parseInt(this.b,10),0,255),this.a=e(this.a,0,1),this},distance:function(t){if(t){t=new e.parse(t);for(var i=0,n=3;-1<--n;)i+=Math.abs(this[this.rgba[n]]-t[this.rgba[n]]);return i}},toString:function(){return this.a>=1?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"},contrast:function(){var e=1-(.299*this.r+.587*this.g+.114*this.b)/255;return.5>e?"#000000":"#ffffff"}},t.extend(e,{parse:function(t){if(t instanceof e)return t;var n;if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))return new e(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))return new e(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))return new e(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))return new e(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))return new e(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(t))return new e(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));var o=(t+"").replace(/^\s*([\S\s]*?)\s*$/,"$1").toLowerCase();return"transparent"==o?new e(255,255,255,0):(n=i[o])?new e(n[0],n[1],n[2]):new e(0,0,0,0)},processColor:function(i,n){var o=n.opacity;if(!i)return"rgba(0, 0, 0, 0)";if(i instanceof e)return i.alpha(o).toString();if(t.isString(i))return e.parse(i).alpha(o).toString();var s=i.colors?i:{colors:i};if(!n.ctx)return t.isArray(s.colors)?e.parse(t.isArray(s.colors[0])?s.colors[0][1]:s.colors[0]).alpha(o).toString():"rgba(0, 0, 0, 0)";s=t.extend({start:"top",end:"bottom"},s),/top/i.test(s.start)&&(n.x1=0),/left/i.test(s.start)&&(n.y1=0),/bottom/i.test(s.end)&&(n.x2=0),/right/i.test(s.end)&&(n.y2=0);var r,a,l,c=n.ctx.createLinearGradient(n.x1,n.y1,n.x2,n.y2);for(r=0;r<s.colors.length;r++)a=s.colors[r],t.isArray(a)?(l=a[0],a=a[1]):l=r/(s.colors.length-1),c.addColorStop(l,e.parse(a).alpha(o));return c}}),Flotr.Color=e}(),Flotr.Date={set:function(e,t,i,n){i=i||"UTC",t="set"+("UTC"===i?"UTC":"")+t,e[t](n)},get:function(e,t,i){return i=i||"UTC",t="get"+("UTC"===i?"UTC":"")+t,e[t]()},format:function(e,t,i){function n(e){return e+="",1==e.length?"0"+e:e}if(e){for(var o,s=this.get,r={h:s(e,"Hours",i).toString(),H:n(s(e,"Hours",i)),M:n(s(e,"Minutes",i)),S:n(s(e,"Seconds",i)),s:s(e,"Milliseconds",i),d:s(e,"Date",i).toString(),m:(s(e,"Month",i)+1).toString(),y:s(e,"FullYear",i).toString(),b:Flotr.Date.monthNames[s(e,"Month",i)]},a=[],l=!1,c=0;c<t.length;++c)o=t.charAt(c),l?(a.push(r[o]||o),l=!1):"%"==o?l=!0:a.push(o);return a.join("")}},getFormat:function(e,t){var i=Flotr.Date.timeUnits;return e<i.second?"%h:%M:%S.%s":e<i.minute?"%h:%M:%S":e<i.day?t<2*i.day?"%h:%M":"%b %d %h:%M":e<i.month?"%b %d":e<i.year?t<i.year?"%b":"%b %y":"%y"},formatter:function(e,t){var i=t.options,n=Flotr.Date.timeUnits[i.timeUnit],o=new Date(e*n);if(t.options.timeFormat)return Flotr.Date.format(o,i.timeFormat,i.timeMode);var s=(t.max-t.min)*n,r=t.tickSize*Flotr.Date.timeUnits[t.tickUnit];return Flotr.Date.format(o,Flotr.Date.getFormat(r,s),i.timeMode)},generator:function(e){function t(e){s(v,e,d,Flotr.floorInBase(r(v,e,d),g))}var i,n,o,s=this.set,r=this.get,a=this.timeUnits,l=this.spec,c=e.options,d=c.timeMode,h=a[c.timeUnit],u=e.min*h,p=e.max*h,f=(p-u)/c.noTicks,m=[],g=e.tickSize;for(n=c.tickFormatter===Flotr.defaultTickFormatter?this.formatter:c.tickFormatter,o=0;o<l.length-1;++o){var v=l[o][0]*a[l[o][1]];if(f<(v+l[o+1][0]*a[l[o+1][1]])/2&&v>=g)break}g=l[o][0],i=l[o][1],"year"==i&&(g=Flotr.getTickSize(c.noTicks*a.year,u,p,0),.5==g&&(i="month",g=6)),e.tickUnit=i,e.tickSize=g;var _=g*a[i];switch(v=new Date(u),i){case"millisecond":t("Milliseconds");break;case"second":t("Seconds");break;case"minute":t("Minutes");break;case"hour":t("Hours");break;case"month":t("Month");break;case"year":t("FullYear")}_>=a.second&&s(v,"Milliseconds",d,0),_>=a.minute&&s(v,"Seconds",d,0),_>=a.hour&&s(v,"Minutes",d,0),_>=a.day&&s(v,"Hours",d,0),_>=4*a.day&&s(v,"Date",d,1),_>=a.year&&s(v,"Month",d,0);var y,b=0,w=0/0;do if(y=w,w=v.getTime(),m.push({v:w/h,label:n(w/h,e)}),"month"==i)if(1>g){s(v,"Date",d,1);var x=v.getTime();s(v,"Month",d,r(v,"Month",d)+1);var k=v.getTime();v.setTime(w+b*a.hour+(k-x)*g),b=r(v,"Hours",d),s(v,"Hours",d,0)}else s(v,"Month",d,r(v,"Month",d)+g);else"year"==i?s(v,"FullYear",d,r(v,"FullYear",d)+g):v.setTime(w+_);while(p>w&&w!=y);return m},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:31556952e3},spec:[[1,"millisecond"],[20,"millisecond"],[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},function(){var e=Flotr._;Flotr.DOM={addClass:function(t,i){var n=t.className?t.className:"";e.include(n.split(/\s+/g),i)||(t.className=(n?n+" ":"")+i)},create:function(e){return document.createElement(e)},node:function(e){var t,i=Flotr.DOM.create("div");return i.innerHTML=e,t=i.children[0],i.innerHTML="",t},empty:function(e){e.innerHTML=""},hide:function(e){Flotr.DOM.setStyles(e,{display:"none"})},insert:function(t,i){e.isString(i)?t.innerHTML+=i:e.isElement(i)&&t.appendChild(i)},opacity:function(e,t){e.style.opacity=t},position:function(e,t){return e.offsetParent?(t=this.position(e.offsetParent),t.left+=e.offsetLeft,t.top+=e.offsetTop,t):{left:e.offsetLeft||0,top:e.offsetTop||0}},removeClass:function(t,i){var n=t.className?t.className:"";t.className=e.filter(n.split(/\s+/g),function(e){return e!=i?!0:void 0}).join(" ")},setStyles:function(t,i){e.each(i,function(e,i){t.style[i]=e})},show:function(e){Flotr.DOM.setStyles(e,{display:""})},size:function(e){return{height:e.offsetHeight,width:e.offsetWidth}}}}(),function(){var e=Flotr,t=e.bean;e.EventAdapter={observe:function(e,i,n){return t.add(e,i,n),this},fire:function(e,i,n){return t.fire(e,i,n),"undefined"!=typeof Prototype&&Event.fire(e,i,n),this},stopObserving:function(e,i,n){return t.remove(e,i,n),this},eventPointer:function(t){if(!e._.isUndefined(t.touches)&&t.touches.length>0)return{x:t.touches[0].pageX,y:t.touches[0].pageY};if(!e._.isUndefined(t.changedTouches)&&t.changedTouches.length>0)return{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY};if(t.pageX||t.pageY)return{x:t.pageX,y:t.pageY};if(t.clientX||t.clientY){var i=document,n=i.body,o=i.documentElement;return{x:t.clientX+n.scrollLeft+o.scrollLeft,y:t.clientY+n.scrollTop+o.scrollTop}}}}}(),function(){var e=Flotr,t=e.DOM,i=e._,n=function(e){this.o=e};n.prototype={dimensions:function(e,t,i,n){return e?this.o.html?this.html(e,this.o.element,i,n):this.canvas(e,t):{width:0,height:0}},canvas:function(t,i){if(this.o.textEnabled){i=i||{};var n,o=this.measureText(t,i),s=o.width,r=i.size||e.defaultOptions.fontSize,a=i.angle||0,l=Math.cos(a),c=Math.sin(a),d=2,h=6;return n={width:Math.abs(l*s)+Math.abs(c*r)+d,height:Math.abs(c*s)+Math.abs(l*r)+h}}},html:function(e,i,n,o){var s=t.create("div");return t.setStyles(s,{position:"absolute",top:"-10000px"}),t.insert(s,'<div style="'+n+'" class="'+o+' flotr-dummy-div">'+e+"</div>"),t.insert(this.o.element,s),t.size(s)},measureText:function(t,n){var o,s=this.o.ctx;return!s.fillText||e.isIphone&&s.measure?{width:s.measure(t,n)}:(n=i.extend({size:e.defaultOptions.fontSize,weight:1,angle:0},n),s.save(),s.font=(n.weight>1?"bold ":"")+1.3*n.size+"px sans-serif",o=s.measureText(t),s.restore(),o)}},Flotr.Text=n}(),function(){function e(){return i.observe.apply(this,arguments),this._handles.push(arguments),this}var t=Flotr.DOM,i=Flotr.EventAdapter,n=Flotr._,o=Flotr;Graph=function(e,t,s){this._setEl(e),this._initMembers(),this._initPlugins(),i.fire(this.el,"flotr:beforeinit",[this]),this.data=t,this.series=o.Series.getSeries(t),this._initOptions(s),this._initGraphTypes(),this._initCanvas(),this._text=new o.Text({element:this.el,ctx:this.ctx,html:this.options.HtmlText,textEnabled:this.textEnabled}),i.fire(this.el,"flotr:afterconstruct",[this]),this._initEvents(),this.findDataRanges(),this.calculateSpacing(),this.draw(n.bind(function(){i.fire(this.el,"flotr:afterinit",[this])},this))},Graph.prototype={destroy:function(){i.fire(this.el,"flotr:destroy"),n.each(this._handles,function(e){i.stopObserving.apply(this,e)}),this._handles=[],this.el.graph=null},observe:e,_observe:e,processColor:function(e,t){var i={x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx};return n.extend(i,t),o.Color.processColor(e,i)},findDataRanges:function(){var e,t,i,s=this.axes;n.each(this.series,function(n){i=n.getRange(),i&&(e=n.xaxis,t=n.yaxis,e.datamin=Math.min(i.xmin,e.datamin),e.datamax=Math.max(i.xmax,e.datamax),t.datamin=Math.min(i.ymin,t.datamin),t.datamax=Math.max(i.ymax,t.datamax),e.used=e.used||i.xused,t.used=t.used||i.yused)},this),s.x.used||s.x2.used||(s.x.used=!0),s.y.used||s.y2.used||(s.y.used=!0),n.each(s,function(e){e.calculateRange()});var r=n.keys(o.graphTypes),a=!1;n.each(this.series,function(e){e.hide||(n.each(r,function(t){e[t]&&e[t].show&&(this.extendRange(t,e),a=!0)},this),a||this.extendRange(this.options.defaultType,e))},this)},extendRange:function(e,t){this[e].extendRange&&this[e].extendRange(t,t.data,t[e],this[e]),this[e].extendYRange&&this[e].extendYRange(t.yaxis,t.data,t[e],this[e]),this[e].extendXRange&&this[e].extendXRange(t.xaxis,t.data,t[e],this[e])},calculateSpacing:function(){var e,t,i=this.axes,o=this.options,s=this.series,r=o.grid.labelMargin,a=this._text,l=i.x,c=i.x2,d=i.y,h=i.y2,u=o.grid.outlineWidth;for(n.each(i,function(e){e.calculateTicks(),e.calculateTextDimensions(a,o)}),t=a.dimensions(o.title,{size:1.5*o.fontSize},"font-size:1em;font-weight:bold;","flotr-title"),this.titleHeight=t.height,t=a.dimensions(o.subtitle,{size:o.fontSize},"font-size:smaller;","flotr-subtitle"),this.subtitleHeight=t.height,e=0;e<o.length;++e)s[e].points.show&&(u=Math.max(u,s[e].points.radius+s[e].points.lineWidth/2));var p=this.plotOffset;l.options.margin===!1?(p.bottom=0,p.top=0):(p.bottom+=(o.grid.circular?0:l.used&&l.options.showLabels?l.maxLabel.height+r:0)+(l.used&&l.options.title?l.titleSize.height+r:0)+u,p.top+=(o.grid.circular?0:c.used&&c.options.showLabels?c.maxLabel.height+r:0)+(c.used&&c.options.title?c.titleSize.height+r:0)+this.subtitleHeight+this.titleHeight+u),d.options.margin===!1?(p.left=0,p.right=0):(p.left+=(o.grid.circular?0:d.used&&d.options.showLabels?d.maxLabel.width+r:0)+(d.used&&d.options.title?d.titleSize.width+r:0)+u,p.right+=(o.grid.circular?0:h.used&&h.options.showLabels?h.maxLabel.width+r:0)+(h.used&&h.options.title?h.titleSize.width+r:0)+u),p.top=Math.floor(p.top),this.plotWidth=this.canvasWidth-p.left-p.right,this.plotHeight=this.canvasHeight-p.bottom-p.top,l.length=c.length=this.plotWidth,d.length=h.length=this.plotHeight,d.offset=h.offset=this.plotHeight,l.setScale(),c.setScale(),d.setScale(),h.setScale()},draw:function(e){var t,n=this.ctx;if(i.fire(this.el,"flotr:beforedraw",[this.series,this]),this.series.length){for(n.save(),n.translate(this.plotOffset.left,this.plotOffset.top),t=0;t<this.series.length;t++)this.series[t].hide||this.drawSeries(this.series[t]);n.restore(),this.clip()}i.fire(this.el,"flotr:afterdraw",[this.series,this]),e&&e()},drawSeries:function(e){function t(e,t){var i=this.getOptions(e,t);this[t].draw(i)}var i=!1;e=e||this.series,n.each(o.graphTypes,function(n,o){e[o]&&e[o].show&&this[o]&&(i=!0,t.call(this,e,o))},this),i||t.call(this,e,this.options.defaultType)},getOptions:function(e,t){var i=e[t],n=(this[t],e.xaxis),s=e.yaxis,r={context:this.ctx,width:this.plotWidth,height:this.plotHeight,fontSize:this.options.fontSize,fontColor:this.options.fontColor,textEnabled:this.textEnabled,htmlText:this.options.HtmlText,text:this._text,element:this.el,data:e.data,color:e.color,shadowSize:e.shadowSize,xScale:n.d2p,yScale:s.d2p,xInverse:n.p2d,yInverse:s.p2d};return r=o.merge(i,r),r.fillStyle=this.processColor(i.fillColor||e.color,{opacity:i.fillOpacity}),r},getEventPosition:function(e){var n,o,s,r=document,a=r.body,l=r.documentElement,c=this.axes,d=this.plotOffset,h=this.lastMousePos,u=i.eventPointer(e),p=u.x-h.pageX,f=u.y-h.pageY;return"ontouchstart"in this.el?(n=t.position(this.overlay),o=u.x-n.left-d.left,s=u.y-n.top-d.top):(n=this.overlay.getBoundingClientRect(),o=e.clientX-n.left-d.left-a.scrollLeft-l.scrollLeft,s=e.clientY-n.top-d.top-a.scrollTop-l.scrollTop),{x:c.x.p2d(o),x2:c.x2.p2d(o),y:c.y.p2d(s),y2:c.y2.p2d(s),relX:o,relY:s,dX:p,dY:f,absX:u.x,absY:u.y,pageX:u.x,pageY:u.y}},clickHandler:function(e){return this.ignoreClick?(this.ignoreClick=!1,this.ignoreClick):(i.fire(this.el,"flotr:click",[this.getEventPosition(e),this]),void 0)},mouseMoveHandler:function(e){if(!this.mouseDownMoveHandler){var t=this.getEventPosition(e);i.fire(this.el,"flotr:mousemove",[e,t,this]),this.lastMousePos=t}},mouseDownHandler:function(e){this.mouseUpHandler||(this.mouseUpHandler=n.bind(function(e){i.stopObserving(document,"mouseup",this.mouseUpHandler),i.stopObserving(document,"mousemove",this.mouseDownMoveHandler),this.mouseDownMoveHandler=null,this.mouseUpHandler=null,i.fire(this.el,"flotr:mouseup",[e,this])},this),this.mouseDownMoveHandler=n.bind(function(t){var n=this.getEventPosition(t);i.fire(this.el,"flotr:mousemove",[e,n,this]),this.lastMousePos=n},this),i.observe(document,"mouseup",this.mouseUpHandler),i.observe(document,"mousemove",this.mouseDownMoveHandler),i.fire(this.el,"flotr:mousedown",[e,this]),this.ignoreClick=!1)},drawTooltip:function(e,i,n,o){var s=this.getMouseTrack(),r="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",a=o.position,l=o.margin,c=this.plotOffset;null!==i&&null!==n?(o.relative?("n"==a.charAt(0)?r+="bottom:"+(l-c.top-n+this.canvasHeight)+"px;top:auto;":"s"==a.charAt(0)&&(r+="top:"+(l+c.top+n)+"px;bottom:auto;"),"e"==a.charAt(1)?r+="left:"+(l+c.left+i)+"px;right:auto;":"w"==a.charAt(1)&&(r+="right:"+(l-c.left-i+this.canvasWidth)+"px;left:auto;")):("n"==a.charAt(0)?r+="top:"+(l+c.top)+"px;bottom:auto;":"s"==a.charAt(0)&&(r+="bottom:"+(l+c.bottom)+"px;top:auto;"),"e"==a.charAt(1)?r+="right:"+(l+c.right)+"px;left:auto;":"w"==a.charAt(1)&&(r+="left:"+(l+c.left)+"px;right:auto;")),s.style.cssText=r,t.empty(s),t.insert(s,e),t.show(s)):t.hide(s)},clip:function(e){var t=this.plotOffset,i=this.canvasWidth,n=this.canvasHeight;e=e||this.ctx,o.isIE&&o.isIE<9?(e.save(),e.fillStyle=this.processColor(this.options.ieBackgroundColor),e.fillRect(0,0,i,t.top),e.fillRect(0,0,t.left,n),e.fillRect(0,n-t.bottom,i,t.bottom),e.fillRect(i-t.right,0,t.right,n),e.restore()):(e.clearRect(0,0,i,t.top),e.clearRect(0,0,t.left,n),e.clearRect(0,n-t.bottom,i,t.bottom),e.clearRect(i-t.right,0,t.right,n))},_initMembers:function(){this._handles=[],this.lastMousePos={pageX:null,pageY:null},this.plotOffset={left:0,right:0,top:0,bottom:0},this.ignoreClick=!0,this.prevHit=null},_initGraphTypes:function(){n.each(o.graphTypes,function(e,t){this[t]=o.clone(e)},this)},_initEvents:function(){var e,t,o,s=this.el;"ontouchstart"in s?(e=n.bind(function(n){o=!0,i.stopObserving(document,"touchend",e),i.fire(s,"flotr:mouseup",[event,this]),this.multitouches=null,t||this.clickHandler(n)},this),this.observe(this.overlay,"touchstart",n.bind(function(n){t=!1,o=!1,this.ignoreClick=!1,n.touches&&n.touches.length>1&&(this.multitouches=n.touches),i.fire(s,"flotr:mousedown",[event,this]),this.observe(document,"touchend",e)},this)),this.observe(this.overlay,"touchmove",n.bind(function(e){var n=this.getEventPosition(e);this.options.preventDefault&&e.preventDefault(),t=!0,this.multitouches||e.touches&&e.touches.length>1?this.multitouches=e.touches:o||i.fire(s,"flotr:mousemove",[event,n,this]),this.lastMousePos=n},this))):this.observe(this.overlay,"mousedown",n.bind(this.mouseDownHandler,this)).observe(s,"mousemove",n.bind(this.mouseMoveHandler,this)).observe(this.overlay,"click",n.bind(this.clickHandler,this)).observe(s,"mouseout",function(){i.fire(s,"flotr:mouseout")})},_initCanvas:function(){function e(e,i){return e||(e=t.create("canvas"),"undefined"!=typeof FlashCanvas&&"function"==typeof e.getContext&&FlashCanvas.initElement(e),e.className="flotr-"+i,e.style.cssText="position:absolute;left:0px;top:0px;",t.insert(a,e)),n.each(r,function(n,o){t.show(e),("canvas"!=i||e.getAttribute(o)!==n)&&(e.setAttribute(o,n*l.resolution),e.style[o]=n+"px")}),e.context_=null,e}function i(e){window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(e);var t=e.getContext("2d");return window.G_vmlCanvasManager||t.scale(l.resolution,l.resolution),t}var o,s,r,a=this.el,l=this.options,c=a.children,d=[];for(s=c.length;s--;)o=c[s],this.canvas||"flotr-canvas"!==o.className?this.overlay||"flotr-overlay"!==o.className?d.push(o):this.overlay=o:this.canvas=o;for(s=d.length;s--;)a.removeChild(d[s]);if(t.setStyles(a,{position:"relative"}),r={},r.width=a.clientWidth,r.height=a.clientHeight,r.width<=0||r.height<=0||l.resolution<=0)throw"Invalid dimensions for plot, width = "+r.width+", height = "+r.height+", resolution = "+l.resolution;this.canvas=e(this.canvas,"canvas"),this.overlay=e(this.overlay,"overlay"),this.ctx=i(this.canvas),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.octx=i(this.overlay),this.octx.clearRect(0,0,this.overlay.width,this.overlay.height),this.canvasHeight=r.height,this.canvasWidth=r.width,this.textEnabled=!!this.ctx.drawText||!!this.ctx.fillText},_initPlugins:function(){n.each(o.plugins,function(e,t){n.each(e.callbacks,function(e,t){this.observe(this.el,t,n.bind(e,this))},this),this[t]=o.clone(e),n.each(this[t],function(e,i){n.isFunction(e)&&(this[t][i]=n.bind(e,this))},this)},this)},_initOptions:function(e){var t=o.clone(o.defaultOptions);t.x2axis=n.extend(n.clone(t.xaxis),t.x2axis),t.y2axis=n.extend(n.clone(t.yaxis),t.y2axis),this.options=o.merge(e||{},t),null===this.options.grid.minorVerticalLines&&"logarithmic"===this.options.xaxis.scaling&&(this.options.grid.minorVerticalLines=!0),null===this.options.grid.minorHorizontalLines&&"logarithmic"===this.options.yaxis.scaling&&(this.options.grid.minorHorizontalLines=!0),i.fire(this.el,"flotr:afterinitoptions",[this]),this.axes=o.Axis.getAxes(this.options);var s,r,a,l,c=[],d=[],h=this.series.length,u=this.series.length,p=this.options.colors,f=[],m=0;for(r=u-1;r>-1;--r)s=this.series[r].color,s&&(--u,n.isNumber(s)?c.push(s):f.push(o.Color.parse(s)));for(r=c.length-1;r>-1;--r)u=Math.max(u,c[r]+1);for(r=0;d.length<u;){s=p.length==r?new o.Color(100,100,100):o.Color.parse(p[r]);var g=1==m%2?-1:1,v=1+.2*g*Math.ceil(m/2);s.scale(v,v,v),d.push(s),++r>=p.length&&(r=0,++m)}for(r=0,a=0;h>r;++r){l=this.series[r],l.color?n.isNumber(l.color)&&(l.color=d[l.color].toString()):l.color=d[a++].toString(),l.xaxis||(l.xaxis=this.axes.x),1==l.xaxis?l.xaxis=this.axes.x:2==l.xaxis&&(l.xaxis=this.axes.x2),l.yaxis||(l.yaxis=this.axes.y),1==l.yaxis?l.yaxis=this.axes.y:2==l.yaxis&&(l.yaxis=this.axes.y2);for(var _ in o.graphTypes)l[_]=n.extend(n.clone(this.options[_]),l[_]);l.mouse=n.extend(n.clone(this.options.mouse),l.mouse),n.isUndefined(l.shadowSize)&&(l.shadowSize=this.options.shadowSize)}},_setEl:function(e){if(!e)throw"The target container doesn't exist";if(e.graph instanceof Graph)e.graph.destroy();else if(!e.clientWidth)throw"The target container must be visible";e.graph=this,this.el=e}},Flotr.Graph=Graph}(),function(){function e(e){this.orientation=1,this.offset=0,this.datamin=Number.MAX_VALUE,this.datamax=-Number.MAX_VALUE,o.extend(this,e)}function t(e,t){return e=Math.log(Math.max(e,Number.MIN_VALUE)),t!==Math.E&&(e/=Math.log(t)),e}function n(e,t){return t===Math.E?Math.exp(e):Math.pow(t,e)}var o=Flotr._,s="logarithmic";e.prototype={setScale:function(){var e,i=this.length,o=this.max,r=this.min,a=this.offset,l=this.orientation,c=this.options,d=c.scaling===s;e=d?i/(t(o,c.base)-t(r,c.base)):i/(o-r),this.scale=e,d?(this.d2p=function(i){return a+l*(t(i,c.base)-t(r,c.base))*e},this.p2d=function(i){return n((a+l*i)/e+t(r,c.base),c.base)}):(this.d2p=function(t){return a+l*(t-r)*e},this.p2d=function(t){return(a+l*t)/e+r})},calculateTicks:function(){var e=this.options;this.ticks=[],this.minorTicks=[],e.ticks?(this._cleanUserTicks(e.ticks,this.ticks),this._cleanUserTicks(e.minorTicks||[],this.minorTicks)):"time"==e.mode?this._calculateTimeTicks():"logarithmic"===e.scaling?this._calculateLogTicks():this._calculateTicks(),o.each(this.ticks,function(e){e.label+=""}),o.each(this.minorTicks,function(e){e.label+=""})},calculateRange:function(){if(this.used){var e=this,t=e.options,i=null!==t.min?t.min:e.datamin,n=null!==t.max?t.max:e.datamax,o=t.autoscaleMargin;if("logarithmic"==t.scaling&&(0>=i&&(i=e.datamin),0>=n&&(n=i)),n==i){var s=n?.01:1;null===t.min&&(i-=s),null===t.max&&(n+=s)}if("logarithmic"===t.scaling){0>i&&(i=n/t.base);var r=Math.log(n);t.base!=Math.E&&(r/=Math.log(t.base)),r=Math.ceil(r);var a=Math.log(i);t.base!=Math.E&&(a/=Math.log(t.base)),a=Math.ceil(a),e.tickSize=Flotr.getTickSize(t.noTicks,a,r,null===t.tickDecimals?0:t.tickDecimals),null===t.minorTickFreq&&(t.minorTickFreq=r-a>10?0:r-a>5?2:5)}else e.tickSize=Flotr.getTickSize(t.noTicks,i,n,t.tickDecimals);e.min=i,e.max=n,null===t.min&&t.autoscale&&(e.min-=e.tickSize*o,e.min<0&&e.datamin>=0&&(e.min=0),e.min=e.tickSize*Math.floor(e.min/e.tickSize)),null===t.max&&t.autoscale&&(e.max+=e.tickSize*o,e.max>0&&e.datamax<=0&&e.datamax!=e.datamin&&(e.max=0),e.max=e.tickSize*Math.ceil(e.max/e.tickSize)),e.min==e.max&&(e.max=e.min+1)}},calculateTextDimensions:function(e,t){var i,n,o="";if(this.options.showLabels)for(n=0;n<this.ticks.length;++n)i=this.ticks[n].label.length,i>o.length&&(o=this.ticks[n].label);this.maxLabel=e.dimensions(o,{size:t.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},"font-size:smaller;","flotr-grid-label"),this.titleSize=e.dimensions(this.options.title,{size:1.2*t.fontSize,angle:Flotr.toRad(this.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},_cleanUserTicks:function(e,t){var i,n,s,r,a=this,l=this.options;for(o.isFunction(e)&&(e=e({min:a.min,max:a.max})),n=0;n<e.length;++n)r=e[n],"object"==typeof r?(i=r[0],s=r.length>1?r[1]:l.tickFormatter(i,{min:a.min,max:a.max})):(i=r,s=l.tickFormatter(i,{min:this.min,max:this.max})),t[n]={v:i,label:s}},_calculateTimeTicks:function(){this.ticks=Flotr.Date.generator(this)},_calculateLogTicks:function(){var e,t,n=this,o=n.options,s=Math.log(n.max);o.base!=Math.E&&(s/=Math.log(o.base)),s=Math.ceil(s);var r=Math.log(n.min);for(o.base!=Math.E&&(r/=Math.log(o.base)),r=Math.ceil(r),i=r;s>i;i+=n.tickSize){t=o.base==Math.E?Math.exp(i):Math.pow(o.base,i);var a=t*(o.base==Math.E?Math.exp(n.tickSize):Math.pow(o.base,n.tickSize)),l=(a-t)/o.minorTickFreq;for(n.ticks.push({v:t,label:o.tickFormatter(t,{min:n.min,max:n.max})}),e=t+l;a>e;e+=l)n.minorTicks.push({v:e,label:o.tickFormatter(e,{min:n.min,max:n.max})})}t=o.base==Math.E?Math.exp(i):Math.pow(o.base,i),n.ticks.push({v:t,label:o.tickFormatter(t,{min:n.min,max:n.max})})},_calculateTicks:function(){var e,t,i,n,o,s,r=this,a=r.options,l=r.tickSize,c=r.min,d=r.max,h=l*Math.ceil(c/l);for(a.minorTickFreq&&(t=l/a.minorTickFreq),o=0;(i=n=h+o*l)<=d;++o)if(e=a.tickDecimals,null===e&&(e=1-Math.floor(Math.log(l)/Math.LN10)),0>e&&(e=0),i=i.toFixed(e),r.ticks.push({v:i,label:a.tickFormatter(i,{min:r.min,max:r.max})}),a.minorTickFreq)for(s=0;s<a.minorTickFreq&&d>o*l+s*t;++s)i=n+s*t,r.minorTicks.push({v:i,label:a.tickFormatter(i,{min:r.min,max:r.max})})}},o.extend(e,{getAxes:function(t){return{x:new e({options:t.xaxis,n:1,length:this.plotWidth}),x2:new e({options:t.x2axis,n:2,length:this.plotWidth}),y:new e({options:t.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new e({options:t.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,orientation:-1})}}}),Flotr.Axis=e}(),function(){function e(e){t.extend(this,e)}var t=Flotr._;e.prototype={getRange:function(){var e,t,i,n=this.data,o=n.length,s=Number.MAX_VALUE,r=Number.MAX_VALUE,a=-Number.MAX_VALUE,l=-Number.MAX_VALUE,c=!1,d=!1;if(0>o||this.hide)return!1;for(i=0;o>i;i++)e=n[i][0],t=n[i][1],null!==e&&(s>e&&(s=e,c=!0),e>a&&(a=e,c=!0)),null!==t&&(r>t&&(r=t,d=!0),t>l&&(l=t,d=!0));return{xmin:s,xmax:a,ymin:r,ymax:l,xused:c,yused:d}}},t.extend(e,{getSeries:function(i){return t.map(i,function(i){var n;return i.data?(n=new e,t.extend(n,i)):n=new e({data:i}),n})}}),Flotr.Series=e}(),Flotr.addType("lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,fillOpacity:.4,steps:!1,stacked:!1},stack:{values:[]},draw:function(e){var t,i=e.context,n=e.lineWidth,o=e.shadowSize;i.save(),i.lineJoin="round",o&&(i.lineWidth=o/2,t=n/2+i.lineWidth/2,i.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,t+o/2,!1),i.strokeStyle="rgba(0,0,0,0.2)",this.plot(e,t,!1)),i.lineWidth=n,i.strokeStyle=e.color,this.plot(e,0,!0),i.restore()},plot:function(e,t,i){function n(){!t&&e.fill&&x&&(o=f(x[0]),h.fillStyle=e.fillStyle,h.lineTo(s,w),h.lineTo(o,w),h.lineTo(o,m(x[1])),h.fill(),e.fillBorder&&h.stroke())}var o,s,r,a,l,c,d,h=e.context,u=e.width,p=e.height,f=e.xScale,m=e.yScale,g=e.data,v=e.stacked?this.stack:!1,_=g.length-1,y=null,b=null,w=m(0),x=null;if(!(1>_)){for(h.beginPath(),d=0;_>d;++d)null!==g[d][1]&&null!==g[d+1][1]?(o=f(g[d][0]),s=f(g[d+1][0]),null===x&&(x=g[d]),v?(l=v.values[g[d][0]]||0,c=v.values[g[d+1][0]]||v.values[g[d][0]]||0,r=m(g[d][1]+l),a=m(g[d+1][1]+c),i&&(v.values[g[d][0]]=g[d][1]+l,d==_-1&&(v.values[g[d+1][0]]=g[d+1][1]+c))):(r=m(g[d][1]),a=m(g[d+1][1])),r>p&&a>p||0>r&&0>a||0>o&&0>s||o>u&&s>u||((y!=o||b!=r+t)&&h.moveTo(o,r+t),y=s,b=a+t,e.steps?(h.lineTo(y+t/2,r+t),h.lineTo(y+t/2,b)):h.lineTo(y,b))):e.fill&&d>0&&g[d][1]&&(h.stroke(),n(),x=null,h.closePath(),h.beginPath());(!e.fill||e.fill&&!e.fillBorder)&&h.stroke(),n(),h.closePath()}},extendYRange:function(e,t,i,n){var o=e.options;if(i.stacked&&(!o.max&&0!==o.max||!o.min&&0!==o.min)){var s,r,a=e.max,l=e.min,c=n.positiveSums||{},d=n.negativeSums||{};for(r=0;r<t.length;r++)s=t[r][0]+"",t[r][1]>0?(c[s]=(c[s]||0)+t[r][1],a=Math.max(a,c[s])):(d[s]=(d[s]||0)+t[r][1],l=Math.min(l,d[s]));n.negativeSums=d,n.positiveSums=c,e.max=a,e.min=l}i.steps&&(this.hit=function(e){var t,i=e.data,n=e.args,o=e.yScale,s=n[0],r=i.length,a=n[1],l=e.xInverse(s.relX),c=s.relY;for(t=0;r-1>t;t++)if(l>=i[t][0]&&l<=i[t+1][0]){Math.abs(o(i[t][1])-c)<8&&(a.x=i[t][0],a.y=i[t][1],a.index=t,a.seriesIndex=e.index);break}},this.drawHit=function(e){var t,i=e.context,n=e.args,o=e.data,s=e.xScale,r=n.index,a=s(n.x),l=e.yScale(n.y);o.length-1>r&&(t=e.xScale(o[r+1][0]),i.save(),i.strokeStyle=e.color,i.lineWidth=e.lineWidth,i.beginPath(),i.moveTo(a,l),i.lineTo(t,l),i.stroke(),i.closePath(),i.restore())},this.clearHit=function(e){var t,i=e.context,n=e.args,o=e.data,s=e.xScale,r=e.lineWidth,a=n.index,l=s(n.x),c=e.yScale(n.y);o.length-1>a&&(t=e.xScale(o[a+1][0]),i.clearRect(l-r,c-r,t-l+2*r,2*r))})}}),Flotr.addType("bars",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,horizontal:!1,stacked:!1,centered:!0,topPadding:.1,grouped:!1},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(e){var t=e.context;this.current+=1,t.save(),t.lineJoin="miter",t.lineWidth=e.lineWidth,t.strokeStyle=e.color,e.fill&&(t.fillStyle=e.fillStyle),this.plot(e),t.restore()},plot:function(e){var t,i,n,o,s,r,a=e.data,l=e.context,c=e.shadowSize;if(!(a.length<1))for(this.translate(l,e.horizontal),t=0;t<a.length;t++)i=this.getBarGeometry(a[t][0],a[t][1],e),null!==i&&(n=i.left,o=i.top,s=i.width,r=i.height,e.fill&&l.fillRect(n,o,s,r),c&&(l.save(),l.fillStyle="rgba(0,0,0,0.05)",l.fillRect(n+c,o+c,s,r),l.restore()),e.lineWidth&&l.strokeRect(n,o,s,r))},translate:function(e,t){t&&(e.rotate(-Math.PI/2),e.scale(-1,1))},getBarGeometry:function(e,t,i){var n,o,s,r,a,l=i.horizontal,c=i.barWidth,d=i.centered,h=i.stacked?this.stack:!1,u=i.lineWidth,p=d?c/2:0,f=l?i.yScale:i.xScale,m=l?i.xScale:i.yScale,g=l?t:e,v=l?e:t,_=0;return i.grouped&&(this.current/this.groups,g-=p,c/=this.groups,p=c/2,g=g+c*this.current-p),h&&(n=v>0?h.positive:h.negative,_=n[g]||_,n[g]=_+v),o=f(g-p),s=f(g+c-p),r=m(v+_),a=m(_),0>a&&(a=0),null===e||null===t?null:{x:g,y:v,xScale:f,yScale:m,top:r,left:Math.min(o,s)-u/2,width:Math.abs(s-o)-u,height:a-r}},hit:function(e){var t,i,n=e.data,o=e.args,s=o[0],r=o[1],a=e.xInverse(s.relX),l=e.yInverse(s.relY),c=this.getBarGeometry(a,l,e),d=c.width/2,h=c.left,u=c.y;for(i=n.length;i--;)t=this.getBarGeometry(n[i][0],n[i][1],e),(u>0&&u<t.y||0>u&&u>t.y)&&Math.abs(h-t.left)<d&&(r.x=n[i][0],r.y=n[i][1],r.index=i,r.seriesIndex=e.index)},drawHit:function(e){var t=e.context,i=e.args,n=this.getBarGeometry(i.x,i.y,e),o=n.left,s=n.top,r=n.width,a=n.height;t.save(),t.strokeStyle=e.color,t.lineWidth=e.lineWidth,this.translate(t,e.horizontal),t.beginPath(),t.moveTo(o,s+a),t.lineTo(o,s),t.lineTo(o+r,s),t.lineTo(o+r,s+a),e.fill&&(t.fillStyle=e.fillStyle,t.fill()),t.stroke(),t.closePath(),t.restore()},clearHit:function(e){var t=e.context,i=e.args,n=this.getBarGeometry(i.x,i.y,e),o=n.left,s=n.width,r=n.top,a=n.height,l=2*e.lineWidth;t.save(),this.translate(t,e.horizontal),t.clearRect(o-l,Math.min(r,r+a)-l,s+2*l,Math.abs(a)+2*l),t.restore()},extendXRange:function(e,t,i,n){this._extendRange(e,t,i,n),this.groups=this.groups+1||1,this.current=0},extendYRange:function(e,t,i,n){this._extendRange(e,t,i,n)},_extendRange:function(e,i,n){var o=e.options.max;if(!t.isNumber(o)&&!t.isString(o)){var s,r,a,l=e.min,c=e.max,d=n.horizontal,h=e.orientation,u=this.positiveSums||{},p=this.negativeSums||{};if((1==h&&!d||-1==h&&d)&&n.centered&&(c=Math.max(e.datamax+n.barWidth,c),l=Math.min(e.datamin-n.barWidth,l)),n.stacked&&(1==h&&d||-1==h&&!d))for(a=i.length;a--;)s=i[a][1==h?1:0]+"",r=i[a][1==h?0:1],r>0?(u[s]=(u[s]||0)+r,c=Math.max(c,u[s])):(p[s]=(p[s]||0)+r,l=Math.min(l,p[s]));(1==h&&d||-1==h&&!d)&&n.topPadding&&(e.max===e.datamax||n.stacked&&this.stackMax!==c)&&(c+=n.topPadding*(c-l)),this.stackMin=l,this.stackMax=c,this.negativeSums=p,this.positiveSums=u,e.max=c,e.min=l
}}}),Flotr.addType("bubbles",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,baseRadius:2},draw:function(e){var t=e.context,i=e.shadowSize;t.save(),t.lineWidth=e.lineWidth,t.fillStyle="rgba(0,0,0,0.05)",t.strokeStyle="rgba(0,0,0,0.05)",this.plot(e,i/2),t.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,i/4),t.strokeStyle=e.color,t.fillStyle=e.fillStyle,this.plot(e),t.restore()},plot:function(e,t){var i,n,o=e.data,s=e.context;for(t=t||0,n=0;n<o.length;++n)i=this.getGeometry(o[n],e),s.beginPath(),s.arc(i.x+t,i.y+t,i.z,0,2*Math.PI,!0),s.stroke(),e.fill&&s.fill(),s.closePath()},getGeometry:function(e,t){return{x:t.xScale(e[0]),y:t.yScale(e[1]),z:e[2]*t.baseRadius}},hit:function(e){var t,n,o,s,r=e.data,a=e.args,l=a[0],c=a[1],d=l.relX,h=l.relY;for(c.best=c.best||Number.MAX_VALUE,i=r.length;i--;)n=this.getGeometry(r[i],e),o=n.x-d,s=n.y-h,t=Math.sqrt(o*o+s*s),t<n.z&&n.z<c.best&&(c.x=r[i][0],c.y=r[i][1],c.index=i,c.seriesIndex=e.index,c.best=n.z)},drawHit:function(e){var t=e.context,i=this.getGeometry(e.data[e.args.index],e);t.save(),t.lineWidth=e.lineWidth,t.fillStyle=e.fillStyle,t.strokeStyle=e.color,t.beginPath(),t.arc(i.x,i.y,i.z,0,2*Math.PI,!0),t.fill(),t.stroke(),t.closePath(),t.restore()},clearHit:function(e){var t=e.context,i=this.getGeometry(e.data[e.args.index],e),n=i.z+e.lineWidth;t.save(),t.clearRect(i.x-n,i.y-n,2*n,2*n),t.restore()}}),Flotr.addType("candles",{options:{show:!1,lineWidth:1,wickLineWidth:1,candleWidth:.6,fill:!0,upFillColor:"#00A8F0",downFillColor:"#CB4B4B",fillOpacity:.5,barcharts:!1},draw:function(e){var t=e.context;t.save(),t.lineJoin="miter",t.lineCap="butt",t.lineWidth=e.wickLineWidth||e.lineWidth,this.plot(e),t.restore()},plot:function(e){var t,i,n,o,s,r,a,l,c,d,h,u,p,f,m,g=e.data,v=e.context,_=e.xScale,y=e.yScale,b=e.candleWidth/2,w=e.shadowSize,x=e.lineWidth,k=e.wickLineWidth,C=k%2/2;if(!(g.length<1))for(m=0;m<g.length;m++)i=g[m],n=i[0],s=i[1],r=i[2],a=i[3],l=i[4],c=_(n-b),d=_(n+b),h=y(a),u=y(r),p=y(Math.min(s,l)),f=y(Math.max(s,l)),t=e[s>l?"downFillColor":"upFillColor"],e.fill&&!e.barcharts&&(v.fillStyle="rgba(0,0,0,0.05)",v.fillRect(c+w,f+w,d-c,p-f),v.save(),v.globalAlpha=e.fillOpacity,v.fillStyle=t,v.fillRect(c,f+x,d-c,p-f),v.restore()),(x||k)&&(n=Math.floor((c+d)/2)+C,v.strokeStyle=t,v.beginPath(),e.barcharts?(v.moveTo(n,Math.floor(u+b)),v.lineTo(n,Math.floor(h+b)),o=Math.floor(s+b)+.5,v.moveTo(Math.floor(c)+C,o),v.lineTo(n,o),o=Math.floor(l+b)+.5,v.moveTo(Math.floor(d)+C,o),v.lineTo(n,o)):(v.strokeRect(c,f+x,d-c,p-f),v.moveTo(n,Math.floor(f+x)),v.lineTo(n,Math.floor(u+x)),v.moveTo(n,Math.floor(p+x)),v.lineTo(n,Math.floor(h+x))),v.closePath(),v.stroke())},extendXRange:function(e){null===e.options.max&&(e.max=Math.max(e.datamax+.5,e.max),e.min=Math.min(e.datamin-.5,e.min))}}),Flotr.addType("gantt",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(e){var t=this.ctx,i=e.gantt.barWidth,n=Math.min(e.gantt.lineWidth,i);if(t.save(),t.translate(this.plotOffset.left,this.plotOffset.top),t.lineJoin="miter",t.lineWidth=n,t.strokeStyle=e.color,t.save(),this.gantt.plotShadows(e,i,0,e.gantt.fill),t.restore(),e.gantt.fill){var o=e.gantt.fillColor||e.color;t.fillStyle=this.processColor(o,{opacity:e.gantt.fillOpacity})}this.gantt.plot(e,i,0,e.gantt.fill),t.restore()},plot:function(e,t,i,n){var o=e.data;if(!(o.length<1)){var s,r=e.xaxis,a=e.yaxis,l=this.ctx;for(s=0;s<o.length;s++){var c=o[s][0],d=o[s][1],h=o[s][2],u=!0,p=!0,f=!0;if(null!==d&&null!==h){var m=d,g=d+h,v=c-(e.gantt.centered?t/2:0),_=c+t-(e.gantt.centered?t/2:0);g<r.min||m>r.max||_<a.min||v>a.max||(m<r.min&&(m=r.min,u=!1),g>r.max&&(g=r.max,r.lastSerie!=e&&(p=!1)),v<a.min&&(v=a.min),_>a.max&&(_=a.max,a.lastSerie!=e&&(p=!1)),n&&(l.beginPath(),l.moveTo(r.d2p(m),a.d2p(v)+i),l.lineTo(r.d2p(m),a.d2p(_)+i),l.lineTo(r.d2p(g),a.d2p(_)+i),l.lineTo(r.d2p(g),a.d2p(v)+i),l.fill(),l.closePath()),e.gantt.lineWidth&&(u||f||p)&&(l.beginPath(),l.moveTo(r.d2p(m),a.d2p(v)+i),l[u?"lineTo":"moveTo"](r.d2p(m),a.d2p(_)+i),l[p?"lineTo":"moveTo"](r.d2p(g),a.d2p(_)+i),l[f?"lineTo":"moveTo"](r.d2p(g),a.d2p(v)+i),l.stroke(),l.closePath()))}}}},plotShadows:function(e,t){var i=e.data;if(!(i.length<1)){var n,o,s,r,a=e.xaxis,l=e.yaxis,c=this.ctx,d=this.options.shadowSize;for(n=0;n<i.length;n++)if(o=i[n][0],s=i[n][1],r=i[n][2],null!==s&&null!==r){var h=s,u=s+r,p=o-(e.gantt.centered?t/2:0),f=o+t-(e.gantt.centered?t/2:0);if(!(u<a.min||h>a.max||f<l.min||p>l.max)){h<a.min&&(h=a.min),u>a.max&&(u=a.max),p<l.min&&(p=l.min),f>l.max&&(f=l.max);var m=a.d2p(u)-a.d2p(h)-(a.d2p(u)+d<=this.plotWidth?0:d),g=l.d2p(p)-l.d2p(f)-(l.d2p(p)+d<=this.plotHeight?0:d);c.fillStyle="rgba(0,0,0,0.05)",c.fillRect(Math.min(a.d2p(h)+d,this.plotWidth),Math.min(l.d2p(f)+d,this.plotHeight),m,g)}}}},extendXRange:function(e){if(null===e.options.max){var t,i,n,o,s=e.min,r=e.max,a={},l=null;for(t=0;t<this.series.length;++t)if(n=this.series[t],o=n.gantt,o.show&&n.xaxis==e){for(i=0;i<n.data.length;i++)o.show&&(y=n.data[i][0]+"",a[y]=Math.max(a[y]||0,n.data[i][1]+n.data[i][2]),l=n);for(i in a)r=Math.max(a[i],r)}e.lastSerie=l,e.max=r,e.min=s}},extendYRange:function(e){if(null===e.options.max){var t,i,n,o,s=Number.MIN_VALUE,r=Number.MAX_VALUE,a=null;for(t=0;t<this.series.length;++t)if(n=this.series[t],o=n.gantt,o.show&&!n.hide&&n.yaxis==e){var l=Number.MIN_VALUE,c=Number.MAX_VALUE;for(i=0;i<n.data.length;i++)l=Math.max(l,n.data[i][0]),c=Math.min(c,n.data[i][0]);o.centered?(s=Math.max(l+.5,s),r=Math.min(c-.5,r)):(s=Math.max(l+1,s),r=Math.min(c,r)),o.barWidth+l>s&&(s=e.max+o.barWidth)}e.lastSerie=a,e.max=s,e.min=r,e.tickSize=Flotr.getTickSize(e.options.noTicks,r,s,e.options.tickDecimals)}}}),function(){function e(e){return"object"==typeof e&&e.constructor&&(Image?!0:e.constructor===Image)}Flotr.defaultMarkerFormatter=function(e){return Math.round(100*e.y)/100+""},Flotr.addType("markers",{options:{show:!1,lineWidth:1,color:"#000000",fill:!1,fillColor:"#FFFFFF",fillOpacity:.4,stroke:!1,position:"ct",verticalMargin:0,labelFormatter:Flotr.defaultMarkerFormatter,fontSize:Flotr.defaultOptions.fontSize,stacked:!1,stackingType:"b",horizontal:!1},stack:{positive:[],negative:[],values:[]},draw:function(e){function t(e,t){return n=h.negative[e]||0,i=h.positive[e]||0,t>0?(h.positive[e]=n+t,n+t):(h.negative[e]=i+t,i+t)}var i,n,o,s,r,a,l,c=e.data,d=e.context,h=e.stacked?e.stack:!1,u=e.stackingType;for(d.save(),d.lineJoin="round",d.lineWidth=e.lineWidth,d.strokeStyle="rgba(0,0,0,0.5)",d.fillStyle=e.fillStyle,s=0;s<c.length;++s)r=c[s][0],a=c[s][1],h&&("b"==u?e.horizontal?a=t(a,r):r=t(r,a):"a"==u&&(o=h.values[r]||0,h.values[r]=o+a,a=o+a)),l=e.labelFormatter({x:r,y:a,index:s,data:c}),this.plot(e.xScale(r),e.yScale(a),l,e);d.restore()},plot:function(t,i,n,o){if(o.context,e(n)&&!n.complete)throw"Marker image not loaded.";this._plot(t,i,n,o)},_plot:function(t,i,n,o){var s,r=o.context,a=2,l=t,c=i;s=e(n)?{height:n.height,width:n.width}:o.text.canvas(n),s.width=Math.floor(s.width+2*a),s.height=Math.floor(s.height+2*a),-1!=o.position.indexOf("c")?l-=s.width/2+a:-1!=o.position.indexOf("l")&&(l-=s.width),-1!=o.position.indexOf("m")?c-=s.height/2+a:-1!=o.position.indexOf("t")?c-=s.height+o.verticalMargin:c+=o.verticalMargin,l=Math.floor(l)+.5,c=Math.floor(c)+.5,o.fill&&r.fillRect(l,c,s.width,s.height),o.stroke&&r.strokeRect(l,c,s.width,s.height),e(n)?r.drawImage(n,l+a,c+a):Flotr.drawText(r,n,l+a,c+a,{textBaseline:"top",textAlign:"left",size:o.fontSize,color:o.color})}})}(),function(){Flotr._,Flotr.defaultPieLabelFormatter=function(e,t){return(100*t/e).toFixed(2)+"%"},Flotr.addType("pie",{options:{show:!1,lineWidth:1,fill:!0,fillColor:null,fillOpacity:.6,explode:6,sizeRatio:.6,startAngle:Math.PI/4,labelFormatter:Flotr.defaultPieLabelFormatter,pie3D:!1,pie3DviewAngle:.8*(Math.PI/2),pie3DspliceThickness:20,epsilon:.1},draw:function(e){var t,i,n,o=e.data,s=e.context,r=s.canvas,a=e.lineWidth,l=e.shadowSize,c=e.sizeRatio,d=e.height,h=e.width,u=e.explode,p=e.color,f=e.fill,m=e.fillStyle,g=Math.min(r.width,r.height)*c/2,v=o[0][1],_=[],y=1,b=2*Math.PI*v/this.total,w=this.startAngle||2*Math.PI*e.startAngle,x=w+b,k=w+b/2,C=e.labelFormatter(this.total,v),j=u+g+4,T=Math.cos(k)*j,S=Math.sin(k)*j,D=0>T?"right":"left",E=S>0?"top":"bottom";if(s.save(),s.translate(h/2,d/2),s.scale(1,y),i=Math.cos(k)*u,n=Math.sin(k)*u,l>0&&(this.plotSlice(i+l,n+l,g,w,x,s),f&&(s.fillStyle="rgba(0,0,0,0.1)",s.fill())),this.plotSlice(i,n,g,w,x,s),f&&(s.fillStyle=m,s.fill()),s.lineWidth=a,s.strokeStyle=p,s.stroke(),t={size:1.2*e.fontSize,color:e.fontColor,weight:1.5},C&&(e.htmlText||!e.textEnabled?(divStyle="position:absolute;"+E+":"+(d/2+("top"===E?S:-S))+"px;",divStyle+=D+":"+(h/2+("right"===D?-T:T))+"px;",_.push('<div style="',divStyle,'" class="flotr-grid-label">',C,"</div>")):(t.textAlign=D,t.textBaseline=E,Flotr.drawText(s,C,T,S,t))),e.htmlText||!e.textEnabled){var M=Flotr.DOM.node('<div style="color:'+e.fontColor+'" class="flotr-labels"></div>');Flotr.DOM.insert(M,_.join("")),Flotr.DOM.insert(e.element,M)}s.restore(),this.startAngle=x,this.slices=this.slices||[],this.slices.push({radius:Math.min(r.width,r.height)*c/2,x:i,y:n,explode:u,start:w,end:x})},plotSlice:function(e,t,i,n,o,s){s.beginPath(),s.moveTo(e,t),s.arc(e,t,i,n,o,!1),s.lineTo(e,t),s.closePath()},hit:function(e){var t=e.data[0],i=e.args,n=e.index,o=i[0],s=i[1],r=this.slices[n],a=o.relX-e.width/2,l=o.relY-e.height/2,c=Math.sqrt(a*a+l*l),d=Math.atan(l/a),h=2*Math.PI,u=r.explode||e.explode,p=r.start%h,f=r.end%h,m=e.epsilon;0>a?d+=Math.PI:a>0&&0>l&&(d+=h),c<r.radius+u&&c>u&&(d>p&&f>d||p>f&&(f>d||d>p)||p===f&&(r.start===r.end&&Math.abs(d-p)<m||r.start!==r.end&&Math.abs(d-p)>m))&&(s.x=t[0],s.y=t[1],s.sAngle=p,s.eAngle=f,s.index=0,s.seriesIndex=n,s.fraction=t[1]/this.total)},drawHit:function(e){var t=e.context,i=this.slices[e.args.seriesIndex];t.save(),t.translate(e.width/2,e.height/2),this.plotSlice(i.x,i.y,i.radius,i.start,i.end,t),t.stroke(),t.restore()},clearHit:function(e){var t=e.context,i=this.slices[e.args.seriesIndex],n=2*e.lineWidth,o=i.radius+n;t.save(),t.translate(e.width/2,e.height/2),t.clearRect(i.x-o,i.y-o,2*o+n,2*o+n),t.restore()},extendYRange:function(e,t){this.total=(this.total||0)+t[0][1]}})}(),Flotr.addType("points",{options:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#FFFFFF",fillOpacity:1,hitRadius:null},draw:function(e){var t=e.context,i=(e.lineWidth,e.shadowSize);t.save(),i>0&&(t.lineWidth=i/2,t.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,i/2+t.lineWidth/2),t.strokeStyle="rgba(0,0,0,0.2)",this.plot(e,t.lineWidth/2)),t.lineWidth=e.lineWidth,t.strokeStyle=e.color,e.fill&&(t.fillStyle=e.fillStyle),this.plot(e),t.restore()},plot:function(e,t){var i,n,o,s=e.data,r=e.context,a=e.xScale,l=e.yScale;for(i=s.length-1;i>-1;--i)o=s[i][1],null!==o&&(n=a(s[i][0]),o=l(o),0>n||n>e.width||0>o||o>e.height||(r.beginPath(),t?r.arc(n,o+t,e.radius,0,Math.PI,!1):(r.arc(n,o,e.radius,0,2*Math.PI,!0),e.fill&&r.fill()),r.stroke(),r.closePath()))}}),Flotr.addType("radar",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,radiusRatio:.9},draw:function(e){var t=e.context,i=e.shadowSize;t.save(),t.translate(e.width/2,e.height/2),t.lineWidth=e.lineWidth,t.fillStyle="rgba(0,0,0,0.05)",t.strokeStyle="rgba(0,0,0,0.05)",this.plot(e,i/2),t.strokeStyle="rgba(0,0,0,0.1)",this.plot(e,i/4),t.strokeStyle=e.color,t.fillStyle=e.fillStyle,this.plot(e),t.restore()},plot:function(e,t){var i,n,o=e.data,s=e.context,r=Math.min(e.height,e.width)*e.radiusRatio/2,a=2*Math.PI/o.length,l=-Math.PI/2;for(t=t||0,s.beginPath(),i=0;i<o.length;++i)n=o[i][1]/this.max,s[0===i?"moveTo":"lineTo"](Math.cos(i*a+l)*r*n+t,Math.sin(i*a+l)*r*n+t);s.closePath(),e.fill&&s.fill(),s.stroke()},extendYRange:function(e){this.max=Math.max(e.max,this.max||-Number.MAX_VALUE)}}),Flotr.addType("timeline",{options:{show:!1,lineWidth:1,barWidth:.2,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(e){var t=e.context;t.save(),t.lineJoin="miter",t.lineWidth=e.lineWidth,t.strokeStyle=e.color,t.fillStyle=e.fillStyle,this.plot(e),t.restore()},plot:function(e){var t=e.data,i=e.context,n=e.xScale,o=e.yScale,s=e.barWidth,r=e.lineWidth;Flotr._.each(t,function(e){var t=e[0],a=e[1],l=e[2],c=s,d=Math.ceil(n(t)),h=Math.ceil(n(t+l))-d,u=Math.round(o(a)),p=Math.round(o(a-c))-u,f=d-r/2,m=Math.round(u-p/2)-r/2;i.strokeRect(f,m,h,p),i.fillRect(f,m,h,p)})},extendRange:function(e){var t=e.data,i=e.xaxis,n=e.yaxis,o=e.timeline.barWidth;if(null===i.options.min&&(i.min=i.datamin-o/2),null===i.options.max){var s=i.max;Flotr._.each(t,function(e){s=Math.max(s,e[0]+e[2])},this),i.max=s+o/2}null===n.options.min&&(n.min=n.datamin-o),null===n.options.min&&(n.max=n.datamax+o)}}),function(){var e=Flotr.DOM;Flotr.addPlugin("crosshair",{options:{mode:null,color:"#FF0000",hideCursor:!0},callbacks:{"flotr:mousemove":function(e,t){this.options.crosshair.mode&&(this.crosshair.clearCrosshair(),this.crosshair.drawCrosshair(t))}},drawCrosshair:function(t){var i=this.octx,n=this.options.crosshair,o=this.plotOffset,s=o.left+Math.round(t.relX)+.5,r=o.top+Math.round(t.relY)+.5;return t.relX<0||t.relY<0||t.relX>this.plotWidth||t.relY>this.plotHeight?(this.el.style.cursor=null,e.removeClass(this.el,"flotr-crosshair"),void 0):(n.hideCursor&&(this.el.style.cursor="none",e.addClass(this.el,"flotr-crosshair")),i.save(),i.strokeStyle=n.color,i.lineWidth=1,i.beginPath(),-1!=n.mode.indexOf("x")&&(i.moveTo(s,o.top),i.lineTo(s,o.top+this.plotHeight)),-1!=n.mode.indexOf("y")&&(i.moveTo(o.left,r),i.lineTo(o.left+this.plotWidth,r)),i.stroke(),i.restore(),void 0)},clearCrosshair:function(){var e=this.plotOffset,t=this.lastMousePos,i=this.octx;t&&(i.clearRect(Math.round(t.relX)+e.left,e.top,1,this.plotHeight+1),i.clearRect(e.left,Math.round(t.relY)+e.top,this.plotWidth+1,1))}})}(),function(){function e(e,t){var i="image/"+e,n=t.toDataURL(i),o=new Image;return o.src=n,o}var t=Flotr.DOM,i=Flotr._;Flotr.addPlugin("download",{saveImage:function(n,o,s,r){var a=null;if(Flotr.isIE&&Flotr.isIE<9)return a="<html><body>"+this.canvas.firstChild.innerHTML+"</body></html>",window.open().document.write(a);if("jpeg"===n||"png"===n)return a=e(n,this.canvas,o,s),i.isElement(a)&&r?(this.download.restoreCanvas(),t.hide(this.canvas),t.hide(this.overlay),t.setStyles({position:"absolute"}),t.insert(this.el,a),this.saveImageElement=a,void 0):window.open(a.src)},restoreCanvas:function(){t.show(this.canvas),t.show(this.overlay),this.saveImageElement&&this.el.removeChild(this.saveImageElement),this.saveImageElement=null}})}(),function(){var e=Flotr.EventAdapter,t=Flotr._;Flotr.addPlugin("graphGrid",{callbacks:{"flotr:beforedraw":function(){this.graphGrid.drawGrid()},"flotr:afterdraw":function(){this.graphGrid.drawOutline()}},drawGrid:function(){function i(e){for(a=0;a<e.length;++a){var t=e[a].v/r.max;for(l=0;y>=l;++l)c[0===l?"moveTo":"lineTo"](Math.cos(l*b+w)*_*t,Math.sin(l*b+w)*_*t)}}function n(e,i){t.each(t.pluck(e,"v"),function(e){e<=r.min||e>=r.max||(e==r.min||e==r.max)&&h.outlineWidth||i(Math.floor(r.d2p(e))+c.lineWidth/2)})}function o(e){c.moveTo(e,0),c.lineTo(e,g)}function s(e){c.moveTo(0,e),c.lineTo(v,e)}var r,a,l,c=this.ctx,d=this.options,h=d.grid,u=h.verticalLines,p=h.horizontalLines,f=h.minorVerticalLines,m=h.minorHorizontalLines,g=this.plotHeight,v=this.plotWidth;if((u||f||p||m)&&e.fire(this.el,"flotr:beforegrid",[this.axes.x,this.axes.y,d,this]),c.save(),c.lineWidth=1,c.strokeStyle=h.tickColor,h.circular){c.translate(this.plotOffset.left+v/2,this.plotOffset.top+g/2);var _=Math.min(g,v)*d.radar.radiusRatio/2,y=this.axes.x.ticks.length,b=2*(Math.PI/y),w=-Math.PI/2;c.beginPath(),r=this.axes.y,p&&i(r.ticks),m&&i(r.minorTicks),u&&t.times(y,function(e){c.moveTo(0,0),c.lineTo(Math.cos(e*b+w)*_,Math.sin(e*b+w)*_)}),c.stroke()}else c.translate(this.plotOffset.left,this.plotOffset.top),h.backgroundColor&&(c.fillStyle=this.processColor(h.backgroundColor,{x1:0,y1:0,x2:v,y2:g}),c.fillRect(0,0,v,g)),c.beginPath(),r=this.axes.x,u&&n(r.ticks,o),f&&n(r.minorTicks,o),r=this.axes.y,p&&n(r.ticks,s),m&&n(r.minorTicks,s),c.stroke();c.restore(),(u||f||p||m)&&e.fire(this.el,"flotr:aftergrid",[this.axes.x,this.axes.y,d,this])},drawOutline:function(){var e,t,n,o,s=this,r=s.options,a=r.grid,l=a.outline,c=s.ctx,d=a.backgroundImage,h=s.plotOffset,u=h.left,p=h.top,f=s.plotWidth,m=s.plotHeight;if(a.outlineWidth){if(c.save(),a.circular){c.translate(u+f/2,p+m/2);var g=Math.min(m,f)*r.radar.radiusRatio/2,v=this.axes.x.ticks.length,_=2*(Math.PI/v),y=-Math.PI/2;for(c.beginPath(),c.lineWidth=a.outlineWidth,c.strokeStyle=a.color,c.lineJoin="round",i=0;v>=i;++i)c[0===i?"moveTo":"lineTo"](Math.cos(i*_+y)*g,Math.sin(i*_+y)*g);c.stroke()}else{c.translate(u,p);var b=a.outlineWidth,w=.5-b+(b+1)%2/2,x="lineTo",k="moveTo";c.lineWidth=b,c.strokeStyle=a.color,c.lineJoin="miter",c.beginPath(),c.moveTo(w,w),f-=b/2%1,m+=b/2,c[-1!==l.indexOf("n")?x:k](f,w),c[-1!==l.indexOf("e")?x:k](f,m),c[-1!==l.indexOf("s")?x:k](w,m),c[-1!==l.indexOf("w")?x:k](w,w),c.stroke(),c.closePath()}c.restore(),d&&(t=d.src||d,n=(parseInt(d.left,10)||0)+h.left,o=(parseInt(d.top,10)||0)+h.top,e=new Image,e.onload=function(){c.save(),d.alpha&&(c.globalAlpha=d.alpha),c.globalCompositeOperation="destination-over",c.drawImage(e,0,0,e.width,e.height,n,o,f,m),c.restore()},e.src=t)}}})}(),function(){var e=Flotr.DOM,t=Flotr._,i=Flotr,n="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;";Flotr.addPlugin("hit",{callbacks:{"flotr:mousemove":function(e,t){this.hit.track(t)},"flotr:click":function(e){var i=this.hit.track(e);t.defaults(e,i)},"flotr:mouseout":function(){this.hit.clearHit()},"flotr:destroy":function(){this.mouseTrack=null}},track:function(e){return this.options.mouse.track||t.any(this.series,function(e){return e.mouse&&e.mouse.track})?this.hit.hit(e):void 0},executeOnType:function(e,n,o){function s(e,s){t.each(t.keys(i.graphTypes),function(t){e[t]&&e[t].show&&this[t][n]&&(r=this.getOptions(e,t),r.fill=!!e.mouse.fillColor,r.fillStyle=this.processColor(e.mouse.fillColor||"#ffffff",{opacity:e.mouse.fillOpacity}),r.color=e.mouse.lineColor,r.context=this.octx,r.index=s,o&&(r.args=o),this[t][n].call(this[t],r),a=!0)},this)}var r,a=!1;return t.isArray(e)||(e=[e]),t.each(e,s,this),a},drawHit:function(e){var t=this.octx,i=e.series;if(i.mouse.lineColor){if(t.save(),t.lineWidth=i.points?i.points.lineWidth:1,t.strokeStyle=i.mouse.lineColor,t.fillStyle=this.processColor(i.mouse.fillColor||"#ffffff",{opacity:i.mouse.fillOpacity}),t.translate(this.plotOffset.left,this.plotOffset.top),!this.hit.executeOnType(i,"drawHit",e)){var n=e.xaxis,o=e.yaxis;t.beginPath(),t.arc(n.d2p(e.x),o.d2p(e.y),i.points.hitRadius||i.points.radius||i.mouse.radius,0,2*Math.PI,!0),t.fill(),t.stroke(),t.closePath()}t.restore(),this.clip(t)}this.prevHit=e},clearHit:function(){var t=this.prevHit,i=this.octx,n=this.plotOffset;if(i.save(),i.translate(n.left,n.top),t){if(!this.hit.executeOnType(t.series,"clearHit",this.prevHit)){var o=t.series,s=o.points?o.points.lineWidth:1;offset=(o.points.hitRadius||o.points.radius||o.mouse.radius)+s,i.clearRect(t.xaxis.d2p(t.x)-offset,t.yaxis.d2p(t.y)-offset,2*offset,2*offset)}e.hide(this.mouseTrack),this.prevHit=null}i.restore()},hit:function(e){var i,n,o,s,r,a,l,c=this.options,d=this.prevHit;if(0!==this.series.length)return l={relX:e.relX,relY:e.relY,absX:e.absX,absY:e.absY},c.mouse.trackY&&!c.mouse.trackAll&&this.hit.executeOnType(this.series,"hit",[e,l])&&!t.isUndefined(l.seriesIndex)?(s=this.series[l.seriesIndex],l.series=s,l.mouse=s.mouse,l.xaxis=s.xaxis,l.yaxis=s.yaxis):(i=this.hit.closest(e),i&&(i=c.mouse.trackY?i.point:i.x,o=i.seriesIndex,s=this.series[o],r=s.xaxis,a=s.yaxis,n=2*s.mouse.sensibility,(c.mouse.trackAll||i.distanceX<n/r.scale&&(!c.mouse.trackY||i.distanceY<n/a.scale))&&(l.series=s,l.xaxis=s.xaxis,l.yaxis=s.yaxis,l.mouse=s.mouse,l.x=i.x,l.y=i.y,l.dist=i.distance,l.index=i.dataIndex,l.seriesIndex=o))),d&&d.index===l.index&&d.seriesIndex===l.seriesIndex||(this.hit.clearHit(),l.series&&l.mouse&&l.mouse.track&&(this.hit.drawMouseTrack(l),this.hit.drawHit(l),Flotr.EventAdapter.fire(this.el,"flotr:hit",[l,this]))),l},closest:function(e){function t(e){e.distance=o,e.distanceX=s,e.distanceY=r,e.seriesIndex=h,e.dataIndex=u,e.x=c,e.y=d,b=!0}var i,n,o,s,r,a,l,c,d,h,u,p=this.series,f=(this.options,e.relX),m=e.relY,g=Number.MAX_VALUE,v=Number.MAX_VALUE,_={},y={},b=!1;for(h=0;h<p.length;h++)for(i=p[h],n=i.data,a=i.xaxis.p2d(f),l=i.yaxis.p2d(m),u=n.length;u--;)c=n[u][0],d=n[u][1],null!==c&&null!==d&&(c<i.xaxis.min||c>i.xaxis.max||(s=Math.abs(c-a),r=Math.abs(d-l),o=s*s+r*r,g>o&&(g=o,t(_)),v>s&&(v=s,t(y))));return b?{point:_,x:y}:!1},drawMouseTrack:function(t){var i="",o=t.series,s=t.mouse.position,r=t.mouse.margin,a=t.x,l=t.y,c=n,d=this.mouseTrack,h=this.plotOffset,u=h.left,p=h.right,f=h.bottom,m=h.top,g=t.mouse.trackDecimals;if(this.options,d||(d=e.node('<div class="flotr-mouse-value"></div>'),this.mouseTrack=d,e.insert(this.el,d)),t.mouse.relative)if(o.pie&&o.pie.show){var v={x:this.plotWidth/2,y:this.plotHeight/2},_=Math.min(this.canvasWidth,this.canvasHeight)*o.pie.sizeRatio/2,y=t.sAngle<t.eAngle?(t.sAngle+t.eAngle)/2:(t.sAngle+t.eAngle+2*Math.PI)/2;i+="bottom:"+(r-m-v.y-Math.sin(y)*_/2+this.canvasHeight)+"px;top:auto;",i+="left:"+(r+u+v.x+Math.cos(y)*_/2)+"px;right:auto;"}else i+=/n/.test(s)?"bottom:"+(r-m-t.yaxis.d2p(t.y)+this.canvasHeight)+"px;top:auto;":"top:"+(r+m+t.yaxis.d2p(t.y))+"px;bottom:auto;",i+=/w/.test(s)?"right:"+(r-u-t.xaxis.d2p(t.x)+this.canvasWidth)+"px;left:auto;":"left:"+(r+u+t.xaxis.d2p(t.x))+"px;right:auto;";else"n"==s.charAt(0)?i+="top:"+(r+m)+"px;bottom:auto;":"s"==s.charAt(0)&&(i+="bottom:"+(r+f)+"px;top:auto;"),"e"==s.charAt(1)?i+="right:"+(r+p)+"px;left:auto;":"w"==s.charAt(1)&&(i+="left:"+(r+u)+"px;right:auto;");c+=i,d.style.cssText=c,(!g||0>g)&&(g=0),a&&a.toFixed&&(a=a.toFixed(g)),l&&l.toFixed&&(l=l.toFixed(g)),d.innerHTML=t.mouse.trackFormatter({x:a,y:l,series:t.series,index:t.index,nearest:t,fraction:t.fraction}),e.show(d),t.mouse.relative&&(/[ew]/.test(s)?/[ns]/.test(s)||(d.style.top=m+t.yaxis.d2p(t.y)-e.size(d).height/2+"px"):d.style.left=u+t.xaxis.d2p(t.x)-e.size(d).width/2+"px")}})}(),function(){function e(e){return e.which?1===e.which:0===e.button||1===e.button}function t(e,t){return Math.min(Math.max(0,e),t.plotWidth-1)}function i(e,t){return Math.min(Math.max(0,e),t.plotHeight)}var n=(Flotr.DOM,Flotr.EventAdapter),o=Flotr._;Flotr.addPlugin("selection",{options:{pinchOnly:null,mode:null,color:"#B6D9FF",fps:20},callbacks:{"flotr:mouseup":function(e){var t=this.options.selection,i=this.selection,n=this.getEventPosition(e);t&&t.mode&&(i.interval&&clearInterval(i.interval),this.multitouches?i.updateSelection():t.pinchOnly||i.setSelectionPos(i.selection.second,n),i.clearSelection(),i.selecting&&i.selectionIsSane()&&(i.drawSelection(),i.fireSelectEvent(),this.ignoreClick=!0))},"flotr:mousedown":function(t){var i=this.options.selection,n=this.selection,s=this.getEventPosition(t);i&&i.mode&&(!i.mode||!e(t)&&o.isUndefined(t.touches)||(i.pinchOnly||n.setSelectionPos(n.selection.first,s),n.interval&&clearInterval(n.interval),this.lastMousePos.pageX=null,n.selecting=!1,n.interval=setInterval(o.bind(n.updateSelection,this),1e3/i.fps)))},"flotr:destroy":function(){clearInterval(this.selection.interval)}},getArea:function(){var e,t,i,n,o=this.selection.selection,s=this.axes;return o.first,o.second,e=s.x.p2d(o.first.x),t=s.x.p2d(o.second.x),i=s.y.p2d(o.first.y),n=s.y.p2d(o.second.y),{x1:Math.min(e,t),y1:Math.min(i,n),x2:Math.max(e,t),y2:Math.max(i,n),xfirst:e,xsecond:t,yfirst:i,ysecond:n}},selection:{first:{x:-1,y:-1},second:{x:-1,y:-1}},prevSelection:null,interval:null,fireSelectEvent:function(e){var t=this.selection.getArea();e=e||"select",t.selection=this.selection.selection,n.fire(this.el,"flotr:"+e,[t,this])},setSelection:function(e,n){var o=this.options,s=this.axes.x,r=this.axes.y,a=r.scale,l=s.scale,c=-1!=o.selection.mode.indexOf("x"),d=-1!=o.selection.mode.indexOf("y"),h=this.selection.selection;this.selection.clearSelection(),h.first.y=i(c&&!d?0:(r.max-e.y1)*a,this),h.second.y=i(c&&!d?this.plotHeight-1:(r.max-e.y2)*a,this),h.first.x=t(d&&!c?0:(e.x1-s.min)*l,this),h.second.x=t(d&&!c?this.plotWidth:(e.x2-s.min)*l,this),this.selection.drawSelection(),n||this.selection.fireSelectEvent()},setSelectionPos:function(e,n){var o=this.options.selection.mode,s=this.selection.selection;e.x=-1==o.indexOf("x")?e==s.first?0:this.plotWidth:t(n.relX,this),e.y=-1==o.indexOf("y")?e==s.first?0:this.plotHeight-1:i(n.relY,this)},drawSelection:function(){this.selection.fireSelectEvent("selecting");var e=this.selection.selection,t=this.octx,i=this.options,n=this.plotOffset,o=this.selection.prevSelection;if(!o||e.first.x!=o.first.x||e.first.y!=o.first.y||e.second.x!=o.second.x||e.second.y!=o.second.y){t.save(),t.strokeStyle=this.processColor(i.selection.color,{opacity:.8}),t.lineWidth=1,t.lineJoin="miter",t.fillStyle=this.processColor(i.selection.color,{opacity:.4}),this.selection.prevSelection={first:{x:e.first.x,y:e.first.y},second:{x:e.second.x,y:e.second.y}};var s=Math.min(e.first.x,e.second.x),r=Math.min(e.first.y,e.second.y),a=Math.abs(e.second.x-e.first.x),l=Math.abs(e.second.y-e.first.y);t.fillRect(s+n.left+.5,r+n.top+.5,a,l),t.strokeRect(s+n.left+.5,r+n.top+.5,a,l),t.restore()}},updateSelection:function(){if(this.lastMousePos.pageX){if(this.selection.selecting=!0,this.multitouches)this.selection.setSelectionPos(this.selection.selection.first,this.getEventPosition(this.multitouches[0])),this.selection.setSelectionPos(this.selection.selection.second,this.getEventPosition(this.multitouches[1]));else{if(this.options.selection.pinchOnly)return;this.selection.setSelectionPos(this.selection.selection.second,this.lastMousePos)}this.selection.clearSelection(),this.selection.selectionIsSane()&&this.selection.drawSelection()}},clearSelection:function(){if(this.selection.prevSelection){var e=this.selection.prevSelection,t=1,i=this.plotOffset,n=Math.min(e.first.x,e.second.x),o=Math.min(e.first.y,e.second.y),s=Math.abs(e.second.x-e.first.x),r=Math.abs(e.second.y-e.first.y);this.octx.clearRect(n+i.left-t+.5,o+i.top-t,s+2*t+.5,r+2*t+.5),this.selection.prevSelection=null}},selectionIsSane:function(){var e=this.selection.selection;return Math.abs(e.second.x-e.first.x)>=5||Math.abs(e.second.y-e.first.y)>=5}})}(),function(){var e=Flotr.DOM;Flotr.addPlugin("labels",{callbacks:{"flotr:afterdraw":function(){this.labels.draw()}},draw:function(){function t(e,t,i){var n,s=i?t.minorTicks:t.ticks,a=1===t.orientation;for(1===t.n,n={color:t.options.color||f.grid.color,angle:Flotr.toRad(t.options.labelsAngle),textBaseline:"middle"},h=0;h<s.length&&(i?t.options.showMinorLabels:t.options.showLabels);++h)o=s[h],o.label+="",o.label&&o.label.length&&(x=Math.cos(h*l+c)*r,y=Math.sin(h*l+c)*r,n.textAlign=a?Math.abs(x)<.1?"center":0>x?"right":"left":"left",Flotr.drawText(m,o.label,a?x:3,a?y:-(t.ticks[h].v/t.max)*(r-f.fontSize),n))}function i(e,t,i,n){function s(e){return e.options.showLabels&&e.used}function r(e,t,i,n){return e.plotOffset.left+(t?n:i?-f.grid.labelMargin:f.grid.labelMargin+e.plotWidth)}function a(e,t,i,n){return e.plotOffset.top+(t?f.grid.labelMargin:n)+(t&&i?e.plotHeight:0)}var l,c,d=1===t.orientation,u=1===t.n;for(l={color:t.options.color||f.grid.color,textAlign:i,textBaseline:n,angle:Flotr.toRad(t.options.labelsAngle)},l=Flotr.getBestTextAlign(l.angle,l),h=0;h<t.ticks.length&&s(t);++h)o=t.ticks[h],o.label&&o.label.length&&(c=t.d2p(o.v),0>c||c>(d?e.plotWidth:e.plotHeight)||(Flotr.drawText(m,o.label,r(e,d,u,c),a(e,d,u,c),l),d||u||(m.save(),m.strokeStyle=l.color,m.beginPath(),m.moveTo(e.plotOffset.left+e.plotWidth-8,e.plotOffset.top+t.d2p(o.v)),m.lineTo(e.plotOffset.left+e.plotWidth,e.plotOffset.top+t.d2p(o.v)),m.stroke(),m.restore())))}function n(e,t){var i,n,r=1===t.orientation,a=1===t.n,l="",c=e.plotOffset;if(r||a||(m.save(),m.strokeStyle=t.options.color||f.grid.color,m.beginPath()),t.options.showLabels&&(a?!0:t.used))for(h=0;h<t.ticks.length;++h)o=t.ticks[h],!o.label||!o.label.length||(r?c.left:c.top)+t.d2p(o.v)<0||(r?c.left:c.top)+t.d2p(o.v)>(r?e.canvasWidth:e.canvasHeight)||(n=c.top+(r?(a?1:-1)*(e.plotHeight+f.grid.labelMargin):t.d2p(o.v)-t.maxLabel.height/2),i=r?c.left+t.d2p(o.v)-s/2:0,l="",0===h?l=" first":h===t.ticks.length-1&&(l=" last"),l+=r?" flotr-grid-label-x":" flotr-grid-label-y",u+=['<div style="position:absolute; text-align:'+(r?"center":"right")+"; ","top:"+n+"px; ",(r||a?"left:":"right:")+i+"px; ","width:"+(r?s:(a?c.left:c.right)-f.grid.labelMargin)+"px; ",t.options.color?"color:"+t.options.color+"; ":" ",'" class="flotr-grid-label'+l+'">'+o.label+"</div>"].join(" "),r||a||(m.moveTo(c.left+e.plotWidth-8,c.top+t.d2p(o.v)),m.lineTo(c.left+e.plotWidth,c.top+t.d2p(o.v))))}var o,s,r,a,l,c,d,h,u="",p=0,f=this.options,m=this.ctx,g=this.axes;for({size:f.fontSize},h=0;h<g.x.ticks.length;++h)g.x.ticks[h].label&&++p;s=this.plotWidth/p,f.grid.circular&&(m.save(),m.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2),r=this.plotHeight*f.radar.radiusRatio/2+f.fontSize,a=this.axes.x.ticks.length,l=2*(Math.PI/a),c=-Math.PI/2,t(this,g.x,!1),t(this,g.x,!0),t(this,g.y,!1),t(this,g.y,!0),m.restore()),!f.HtmlText&&this.textEnabled?(i(this,g.x,"center","top"),i(this,g.x2,"center","bottom"),i(this,g.y,"right","middle"),i(this,g.y2,"left","middle")):(g.x.options.showLabels||g.x2.options.showLabels||g.y.options.showLabels||g.y2.options.showLabels)&&!f.grid.circular&&(u="",n(this,g.x),n(this,g.x2),n(this,g.y),n(this,g.y2),m.stroke(),m.restore(),d=e.create("div"),e.setStyles(d,{fontSize:"smaller",color:f.grid.color}),d.className="flotr-labels",e.insert(this.el,d),e.insert(d,u))}})}(),function(){var e=Flotr.DOM,t=Flotr._;Flotr.addPlugin("legend",{options:{show:!0,noColumns:1,labelFormatter:function(e){return e},labelBoxBorderColor:"#CCCCCC",labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,container:null,position:"nw",margin:5,backgroundColor:"#F0F0F0",backgroundOpacity:.85},callbacks:{"flotr:afterinit":function(){this.legend.insertLegend()}},insertLegend:function(){if(this.options.legend.show){var i,n,o,s=this.series,r=this.plotOffset,a=this.options,l=a.legend,c=[],d=!1,h=this.ctx,u=t.filter(s,function(e){return e.label&&!e.hide}).length,p=l.position,f=l.margin,m=l.backgroundOpacity;if(u){var g=l.labelBoxWidth,v=l.labelBoxHeight,_=l.labelBoxMargin,y=r.left+f,b=r.top+f,w=0,x={size:1.1*a.fontSize,color:a.grid.color};for(i=s.length-1;i>-1;--i)s[i].label&&!s[i].hide&&(n=l.labelFormatter(s[i].label),w=Math.max(w,this._text.measureText(n,x).width));var k=Math.round(g+3*_+w),C=Math.round(u*(_+v)+_);if(m||0===m||(m=.1),a.HtmlText||!this.textEnabled||l.container){for(i=0;i<s.length;++i)if(s[i].label&&!s[i].hide){0===i%l.noColumns&&(c.push(d?"</tr><tr>":"<tr>"),d=!0);var j=s[i],T=l.labelBoxWidth,S=l.labelBoxHeight;n=l.labelFormatter(j.label),o="background-color:"+(j.bars&&j.bars.show&&j.bars.fillColor&&j.bars.fill?j.bars.fillColor:j.color)+";",c.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',l.labelBoxBorderColor,';padding:1px">','<div style="width:',T-1,"px;height:",S-1,"px;border:1px solid ",s[i].color,'">','<div style="width:',T,"px;height:",S,"px;",o,'"></div>',"</div>","</div>","</td>",'<td class="flotr-legend-label">',n,"</td>")}if(d&&c.push("</tr>"),c.length>0){var D='<table style="font-size:smaller;color:'+a.grid.color+'">'+c.join("")+"</table>";if(l.container)e.empty(l.container),e.insert(l.container,D);else{var E={position:"absolute",zIndex:"2",border:"1px solid "+l.labelBoxBorderColor};"n"==p.charAt(0)?(E.top=f+r.top+"px",E.bottom="auto"):"c"==p.charAt(0)?(E.top=f+(this.plotHeight-C)/2+"px",E.bottom="auto"):"s"==p.charAt(0)&&(E.bottom=f+r.bottom+"px",E.top="auto"),"e"==p.charAt(1)?(E.right=f+r.right+"px",E.left="auto"):"w"==p.charAt(1)&&(E.left=f+r.left+"px",E.right="auto");var M=e.create("div");if(M.className="flotr-legend",e.setStyles(M,E),e.insert(M,D),e.insert(this.el,M),!m)return;var A=l.backgroundColor||a.grid.backgroundColor||"#ffffff";t.extend(E,e.size(M),{backgroundColor:A,zIndex:"",border:""}),E.width+="px",E.height+="px",M=e.create("div"),M.className="flotr-legend-bg",e.setStyles(M,E),e.opacity(M,m),e.insert(M," "),e.insert(this.el,M)
}}}else{"s"==p.charAt(0)&&(b=r.top+this.plotHeight-(f+C)),"c"==p.charAt(0)&&(b=r.top+this.plotHeight/2-(f+C/2)),"e"==p.charAt(1)&&(y=r.left+this.plotWidth-(f+k)),o=this.processColor(l.backgroundColor,{opacity:m}),h.fillStyle=o,h.fillRect(y,b,k,C),h.strokeStyle=l.labelBoxBorderColor,h.strokeRect(Flotr.toPixel(y),Flotr.toPixel(b),k,C);var F=y+_,O=b+_;for(i=0;i<s.length;i++)s[i].label&&!s[i].hide&&(n=l.labelFormatter(s[i].label),h.fillStyle=s[i].color,h.fillRect(F,O,g-1,v-1),h.strokeStyle=l.labelBoxBorderColor,h.lineWidth=1,h.strokeRect(Math.ceil(F)-1.5,Math.ceil(O)-1.5,g+2,v+2),Flotr.drawText(h,n,F+g+_,O+v,x),O+=v+_)}}}}})}(),function(){function e(e){if(this.options.spreadsheet.tickFormatter)return this.options.spreadsheet.tickFormatter(e);var t=i.find(this.axes.x.ticks,function(t){return t.v==e});return t?t.label:e}var t=Flotr.DOM,i=Flotr._;Flotr.addPlugin("spreadsheet",{options:{show:!1,tabGraphLabel:"Graph",tabDataLabel:"Data",toolbarDownload:"Download CSV",toolbarSelectAll:"Select all",csvFileSeparator:",",decimalSeparator:".",tickFormatter:null,initialTab:"graph"},callbacks:{"flotr:afterconstruct":function(){if(this.options.spreadsheet.show){var e,i=this.spreadsheet,n=t.node('<div class="flotr-tabs-group" style="position:absolute;left:0px;width:'+this.canvasWidth+'px"></div>'),o=t.node('<div style="float:left" class="flotr-tab selected">'+this.options.spreadsheet.tabGraphLabel+"</div>"),s=t.node('<div style="float:left" class="flotr-tab">'+this.options.spreadsheet.tabDataLabel+"</div>");i.tabsContainer=n,i.tabs={graph:o,data:s},t.insert(n,o),t.insert(n,s),t.insert(this.el,n),e=t.size(s).height+2,this.plotOffset.bottom+=e,t.setStyles(n,{top:this.canvasHeight-e+"px"}),this.observe(o,"click",function(){i.showTab("graph")}).observe(s,"click",function(){i.showTab("data")}),"graph"!==this.options.spreadsheet.initialTab&&i.showTab(this.options.spreadsheet.initialTab)}}},loadDataGrid:function(){if(this.seriesData)return this.seriesData;var e=this.series,t={};return i.each(e,function(e,n){i.each(e.data,function(e){var i=e[0],o=e[1],s=t[i];if(s)s[n+1]=o;else{var r=[];r[0]=i,r[n+1]=o,t[i]=r}})}),this.seriesData=i.sortBy(t,function(e,t){return parseInt(t,10)}),this.seriesData},constructDataGrid:function(){if(this.spreadsheet.datagrid)return this.spreadsheet.datagrid;var n,o,s,r=this.series,a=this.spreadsheet.loadDataGrid(),l=["<colgroup><col />"],c=['<table class="flotr-datagrid"><tr class="first-row">'];c.push("<th>&nbsp;</th>"),i.each(r,function(e,t){c.push('<th scope="col">'+(e.label||String.fromCharCode(65+t))+"</th>"),l.push("<col />")}),c.push("</tr>"),i.each(a,function(t){c.push("<tr>"),i.times(r.length+1,function(n){var o="td",s=t[n],r=i.isUndefined(s)?"":Math.round(1e5*s)/1e5;if(0===n){o="th";var a=e.call(this,r);a&&(r=a)}c.push("<"+o+("th"==o?' scope="row"':"")+">"+r+"</"+o+">")},this),c.push("</tr>")},this),l.push("</colgroup>"),s=t.node(c.join("")),n=t.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarDownload+"</button>"),o=t.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarSelectAll+"</button>"),this.observe(n,"click",i.bind(this.spreadsheet.downloadCSV,this)).observe(o,"click",i.bind(this.spreadsheet.selectAllData,this));var d=t.node('<div class="flotr-datagrid-toolbar"></div>');t.insert(d,n),t.insert(d,o);var h=this.canvasHeight-t.size(this.spreadsheet.tabsContainer).height-2,u=t.node('<div class="flotr-datagrid-container" style="position:absolute;left:0px;top:0px;width:'+this.canvasWidth+"px;height:"+h+'px;overflow:auto;z-index:10"></div>');return t.insert(u,d),t.insert(u,s),t.insert(this.el,u),this.spreadsheet.datagrid=s,this.spreadsheet.container=u,s},showTab:function(e){if(this.spreadsheet.activeTab!==e){switch(e){case"graph":t.hide(this.spreadsheet.container),t.removeClass(this.spreadsheet.tabs.data,"selected"),t.addClass(this.spreadsheet.tabs.graph,"selected");break;case"data":this.spreadsheet.datagrid||this.spreadsheet.constructDataGrid(),t.show(this.spreadsheet.container),t.addClass(this.spreadsheet.tabs.data,"selected"),t.removeClass(this.spreadsheet.tabs.graph,"selected");break;default:throw"Illegal tab name: "+e}this.spreadsheet.activeTab=e}},selectAllData:function(){if(this.spreadsheet.tabs){var e,t,i,n,o=this.spreadsheet.constructDataGrid();return this.spreadsheet.showTab("data"),setTimeout(function(){(i=o.ownerDocument)&&(n=i.defaultView)&&n.getSelection&&i.createRange&&(e=window.getSelection())&&e.removeAllRanges?(t=i.createRange(),t.selectNode(o),e.removeAllRanges(),e.addRange(t)):document.body&&document.body.createTextRange&&(t=document.body.createTextRange())&&(t.moveToElementText(o),t.select())},0),!0}return!1},downloadCSV:function(){var t="",n=this.series,o=this.options,s=this.spreadsheet.loadDataGrid(),r=encodeURIComponent(o.spreadsheet.csvFileSeparator);if(o.spreadsheet.decimalSeparator===o.spreadsheet.csvFileSeparator)throw"The decimal separator is the same as the column separator ("+o.spreadsheet.decimalSeparator+")";i.each(n,function(e,i){t+=r+'"'+(e.label||String.fromCharCode(65+i)).replace(/\"/g,'\\"')+'"'}),t+="%0D%0A",t+=i.reduce(s,function(t,i){var n=e.call(this,i[0])||"";n='"'+(n+"").replace(/\"/g,'\\"')+'"';var s=i.slice(1).join(r);return"."!==o.spreadsheet.decimalSeparator&&(s=s.replace(/\./g,o.spreadsheet.decimalSeparator)),t+n+r+s+"%0D%0A"},"",this),Flotr.isIE&&Flotr.isIE<9?(t=t.replace(new RegExp(r,"g"),decodeURIComponent(r)).replace(/%0A/g,"\n").replace(/%0D/g,"\r"),window.open().document.write(t)):window.open("data:text/csv,"+t)}})}(),function(){var e=Flotr.DOM;Flotr.addPlugin("titles",{callbacks:{"flotr:afterdraw":function(){this.titles.drawTitles()}},drawTitles:function(){var t,i=this.options,n=i.grid.labelMargin,o=this.ctx,s=this.axes;if(!i.HtmlText&&this.textEnabled){var r={size:i.fontSize,color:i.grid.color,textAlign:"center"};i.subtitle&&Flotr.drawText(o,i.subtitle,this.plotOffset.left+this.plotWidth/2,this.titleHeight+this.subtitleHeight-2,r),r.weight=1.5,r.size*=1.5,i.title&&Flotr.drawText(o,i.title,this.plotOffset.left+this.plotWidth/2,this.titleHeight-2,r),r.weight=1.8,r.size*=.8,s.x.options.title&&s.x.used&&(r.textAlign=s.x.options.titleAlign||"center",r.textBaseline="top",r.angle=Flotr.toRad(s.x.options.titleAngle),r=Flotr.getBestTextAlign(r.angle,r),Flotr.drawText(o,s.x.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+s.x.maxLabel.height+this.plotHeight+2*n,r)),s.x2.options.title&&s.x2.used&&(r.textAlign=s.x2.options.titleAlign||"center",r.textBaseline="bottom",r.angle=Flotr.toRad(s.x2.options.titleAngle),r=Flotr.getBestTextAlign(r.angle,r),Flotr.drawText(o,s.x2.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top-s.x2.maxLabel.height-2*n,r)),s.y.options.title&&s.y.used&&(r.textAlign=s.y.options.titleAlign||"right",r.textBaseline="middle",r.angle=Flotr.toRad(s.y.options.titleAngle),r=Flotr.getBestTextAlign(r.angle,r),Flotr.drawText(o,s.y.options.title,this.plotOffset.left-s.y.maxLabel.width-2*n,this.plotOffset.top+this.plotHeight/2,r)),s.y2.options.title&&s.y2.used&&(r.textAlign=s.y2.options.titleAlign||"left",r.textBaseline="middle",r.angle=Flotr.toRad(s.y2.options.titleAngle),r=Flotr.getBestTextAlign(r.angle,r),Flotr.drawText(o,s.y2.options.title,this.plotOffset.left+this.plotWidth+s.y2.maxLabel.width+2*n,this.plotOffset.top+this.plotHeight/2,r))}else{t=[],i.title&&t.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;font-size:1em;font-weight:bold;text-align:center;width:",this.plotWidth,'px;" class="flotr-title">',i.title,"</div>"),i.subtitle&&t.push('<div style="position:absolute;top:',this.titleHeight,"px;left:",this.plotOffset.left,"px;font-size:smaller;text-align:center;width:",this.plotWidth,'px;" class="flotr-subtitle">',i.subtitle,"</div>"),t.push("</div>"),t.push('<div class="flotr-axis-title" style="font-weight:bold;">'),s.x.options.title&&s.x.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight+i.grid.labelMargin+s.x.titleSize.height,"px;left:",this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",s.x.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x1">',s.x.options.title,"</div>"),s.x2.options.title&&s.x2.used&&t.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",s.x2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x2">',s.x2.options.title,"</div>"),s.y.options.title&&s.y.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-s.y.titleSize.height/2,"px;left:0;text-align:",s.y.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y1">',s.y.options.title,"</div>"),s.y2.options.title&&s.y2.used&&t.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-s.y.titleSize.height/2,"px;right:0;text-align:",s.y2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y2">',s.y2.options.title,"</div>"),t=t.join("");var a=e.create("div");e.setStyles({color:i.grid.color}),a.className="flotr-titles",e.insert(this.el,a),e.insert(a,t)}}})}(),Flotr}),define("orochart/js/chart_form",["underscore","jquery"],function(e,t){return{options:{blocks:["settings","data_schema"],parent:null,selectors:{name:null},templates:{name:"<%= parent %>_name",parent:"<%= parent %>_<%= block %> > div",target:"<%= parent %>_<%= block %>_<%= chart %>"}},initialize:function(t,i){var n=this;n.options=e.extend({},n.options,{parent:t},i),n.options.selectors.name=e.template(n.options.templates.name,{parent:n.options.parent}),n.updateChartFormVisibility(),n.addHandler()},addHandler:function(){var i=this;t(i.options.selectors.name).on("change",e.bind(function(){i.updateChartFormVisibility()},i))},updateChartFormVisibility:function(){var i=this,n=t(i.options.selectors.name).val();e.each(i.options.blocks,function(o){var s=e.template(i.options.templates.parent,{parent:i.options.parent,block:o});t(s).hide();var r=e.template(i.options.templates.target,{parent:i.options.parent,block:o,chart:n});t(r).show()})}}}),function(){function e(e){this._value=e}function t(e,t,i){var n,o,s=Math.pow(10,t);return o=(Math.round(e*s)/s).toFixed(t),i&&(n=new RegExp("0{1,"+i+"}$"),o=o.replace(n,"")),o}function i(e,t){var i;return i=t.indexOf("$")>-1?o(e,t):t.indexOf("%")>-1?s(e,t):t.indexOf(":")>-1?r(e,t):l(e._value,t)}function n(e,t){var i,n,o,s,r,l=t,c=["KB","MB","GB","TB","PB","EB","ZB","YB"],d=!1;if(t.indexOf(":")>-1)e._value=a(t);else if(t===f)e._value=0;else{for("."!==u[p].delimiters.decimal&&(t=t.replace(/\./g,"").replace(u[p].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+u[p].abbreviations.thousand+"(?:\\)|(\\"+u[p].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+u[p].abbreviations.million+"(?:\\)|(\\"+u[p].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+u[p].abbreviations.billion+"(?:\\)|(\\"+u[p].currency.symbol+")?(?:\\))?)?$"),s=new RegExp("[^a-zA-Z]"+u[p].abbreviations.trillion+"(?:\\)|(\\"+u[p].currency.symbol+")?(?:\\))?)?$"),r=0;r<=c.length&&!(d=t.indexOf(c[r])>-1?Math.pow(1024,r+1):!1);r++);e._value=(d?d:1)*(l.match(i)?Math.pow(10,3):1)*(l.match(n)?Math.pow(10,6):1)*(l.match(o)?Math.pow(10,9):1)*(l.match(s)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=d?Math.ceil(e._value):e._value}return e._value}function o(e,t){var i,n=t.indexOf("$")<=1?!0:!1,o="";return t.indexOf(" $")>-1?(o=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(o=" ",t=t.replace("$ ","")):t=t.replace("$",""),i=l(e._value,t),n?i.indexOf("(")>-1||i.indexOf("-")>-1?(i=i.split(""),i.splice(1,0,u[p].currency.symbol+o),i=i.join("")):i=u[p].currency.symbol+o+i:i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,o+u[p].currency.symbol),i=i.join("")):i=i+o+u[p].currency.symbol,i}function s(e,t){var i,n="",o=100*e._value;return t.indexOf(" %")>-1?(n=" ",t=t.replace(" %","")):t=t.replace("%",""),i=l(o,t),i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,n+"%"),i=i.join("")):i=i+n+"%",i}function r(e){var t=Math.floor(e._value/60/60),i=Math.floor((e._value-60*60*t)/60),n=Math.round(e._value-60*60*t-60*i);return t+":"+(10>i?"0"+i:i)+":"+(10>n?"0"+n:n)}function a(e){var t=e.split(":"),i=0;return 3===t.length?(i+=60*60*Number(t[0]),i+=60*Number(t[1]),i+=Number(t[2])):2===t.length&&(i+=60*Number(t[0]),i+=Number(t[1])),Number(i)}function l(e,i){var n,o,s,r,a,l,c=!1,d=!1,h=!1,m="",g="",v="",_=Math.abs(e),y=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],b="",w=!1;if(0===e&&null!==f)return f;if(i.indexOf("(")>-1?(c=!0,i=i.slice(1,-1)):i.indexOf("+")>-1&&(d=!0,i=i.replace(/\+/g,"")),i.indexOf("a")>-1&&(i.indexOf(" a")>-1?(m=" ",i=i.replace(" a","")):i=i.replace("a",""),_>=Math.pow(10,12)?(m+=u[p].abbreviations.trillion,e/=Math.pow(10,12)):_<Math.pow(10,12)&&_>=Math.pow(10,9)?(m+=u[p].abbreviations.billion,e/=Math.pow(10,9)):_<Math.pow(10,9)&&_>=Math.pow(10,6)?(m+=u[p].abbreviations.million,e/=Math.pow(10,6)):_<Math.pow(10,6)&&_>=Math.pow(10,3)&&(m+=u[p].abbreviations.thousand,e/=Math.pow(10,3))),i.indexOf("b")>-1)for(i.indexOf(" b")>-1?(g=" ",i=i.replace(" b","")):i=i.replace("b",""),s=0;s<=y.length;s++)if(n=Math.pow(1024,s),o=Math.pow(1024,s+1),e>=n&&o>e){g+=y[s],n>0&&(e/=n);break}return i.indexOf("o")>-1&&(i.indexOf(" o")>-1?(v=" ",i=i.replace(" o","")):i=i.replace("o",""),v+=u[p].ordinal(e)),i.indexOf("[.]")>-1&&(h=!0,i=i.replace("[.]",".")),r=e.toString().split(".")[0],a=i.split(".")[1],l=i.indexOf(","),a?(a.indexOf("[")>-1?(a=a.replace("]",""),a=a.split("["),b=t(e,a[0].length+a[1].length,a[1].length)):b=t(e,a.length),r=b.split(".")[0],b=b.split(".")[1].length?u[p].delimiters.decimal+b.split(".")[1]:"",h&&0===Number(b.slice(1))&&(b="")):r=t(e,null),r.indexOf("-")>-1&&(r=r.slice(1),w=!0),l>-1&&(r=r.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+u[p].delimiters.thousands)),0===i.indexOf(".")&&(r=""),(c&&w?"(":"")+(!c&&w?"-":"")+(!w&&d?"+":"")+r+b+(v?v:"")+(m?m:"")+(g?g:"")+(c&&w?")":"")}function c(e,t){u[e]=t}var d,h="1.5.1",u={},p="en",f=null,m="0,0",g="undefined"!=typeof module&&module.exports;d=function(t){return d.isNumeral(t)?t=t.value():0===t||"undefined"==typeof t?t=0:Number(t)||(t=d.fn.unformat(t)),new e(Number(t))},d.version=h,d.isNumeral=function(t){return t instanceof e},d.language=function(e,t){if(!e)return p;if(e&&!t){if(!u[e])throw new Error("Unknown language : "+e);p=e}return(t||!u[e])&&c(e,t),d},d.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),d.zeroFormat=function(e){f="string"==typeof e?e:null},d.defaultFormat=function(e){m="string"==typeof e?e:"0.0"},d.fn=e.prototype={clone:function(){return d(this)},format:function(e){return i(this,e?e:m)},unformat:function(e){return n(this,e?e:m)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){return this._value=this._value+Number(e),this},subtract:function(e){return this._value=this._value-Number(e),this},multiply:function(e){return this._value=this._value*Number(e),this},divide:function(e){return this._value=this._value/Number(e),this},difference:function(e){var t=this._value-Number(e);return 0>t&&(t=-t),t}},g&&(module.exports=d),"undefined"==typeof ender&&(this.numeral=d),"function"==typeof define&&define.amd&&define("numeral",[],function(){return d})}.call(this),define("orolocale/js/formatter/number",["numeral","../locale-settings","underscore"],function(e,t,i){var n=function(){var n=function(e){var t=e.grouping_used?"0,0":"0";if(e.max_fraction_digits>0){t+=".";for(var i=0;i<e.max_fraction_digits;++i)e.min_fraction_digits==i&&(t+="["),t+="0";-1!==t.indexOf("[")&&(t+="]")}return"percent"==e.style&&(t+="%"),t},o={numeralFormat:function(t,i){e.language(),e.language("en");var o=e(t).format(n(i));return"0"===o&&(o=i.zero_digit_symbol),e.language("en"),o},addPrefixSuffix:function(e,t,i){var n="",o="";return i>=0?(n=t.positive_prefix,o=t.positive_suffix):0>i&&(e=e.replace("-",""),n=t.negative_prefix,o=t.negative_suffix),n+e+o},replaceSeparator:function(e,t){var i=",",n=".";return i!=t.grouping_separator_symbol&&(e=e.replace(i,t.grouping_separator_symbol)),n!=t.decimal_separator_symbol&&(e=e.replace(n,t.decimal_separator_symbol)),e},replaceMonetarySeparator:function(e,t){var i=",",n=".";return i!=t.monetary_grouping_separator_symbol&&(e=e.replace(i,t.monetary_grouping_separator_symbol)),n!=t.monetary_separator_symbol&&(e=e.replace(n,t.monetary_separator_symbol)),e},clearPercent:function(e){return e.replace("%","")},replaceCurrency:function(e,i){return e.replace(i.currency_symbol,t.getCurrencySymbol(i.currency_code))}},s=function(e,t,i){for(var n=e,o=0;o<i.length;++o){var s=i[o];n=s.call(this,n,t,e)}return n};return{formatDecimal:function(e){var i=t.getNumberFormats("decimal");i.style="decimal";var n=[o.numeralFormat,o.replaceSeparator,o.addPrefixSuffix];return s(e,i,n)},formatInteger:function(e){var n=i.extend({},t.getNumberFormats("decimal"));n.style="integer",n.max_fraction_digits=0,n.min_fraction_digits=0;var r=[o.numeralFormat,o.replaceSeparator,o.addPrefixSuffix];return s(e,n,r)},formatPercent:function(e){var i=t.getNumberFormats("percent");i.style="percent";var n=[o.numeralFormat,o.replaceSeparator,o.clearPercent,o.addPrefixSuffix];return s(e,i,n)},formatCurrency:function(e,i){var n=t.getNumberFormats("currency");i||(i=t.getCurrency()),n.style="currency",n.currency_code=i;var r=[o.numeralFormat,o.replaceSeparator,o.addPrefixSuffix,o.replaceCurrency];return s(e,n,r)},unformat:function(i){var n=t.getNumberFormats("decimal"),o=String(i),s=",",r=".";o=o.replace(n.grouping_separator_symbol,s),o=o.replace(n.decimal_separator_symbol,r);var a=e.language();return o=e().unformat(o),e.language(a),o}}},o=n();return o}),define("orochart/js/data_formatter",["orolocale/js/formatter/number","orolocale/js/formatter/datetime"],function(e,t){return{formatValue:function(i,n){switch(n){case"integer":case"smallint":case"bigint":return e.formatInteger(i);case"decimal":case"float":return e.formatDecimal(i);case"boolean":return e.formatInteger(i);case"month":var o=new Date;return o.setTime(i),t.getMomentForBackendDate(o).format("MMM YYYY");case"date":var o=new Date;return o.setTime(i),t.formatDate(o);case"datetime":var o=new Date;return o.setTime(i),t.formatDateTime(o);case"money":case"currency":return e.formatCurrency(i);case"percent":return e.formatPercent(i);default:return null}},parseValue:function(e,i){switch(i){case"integer":case"smallint":case"bigint":case"boolean":return null===e&&(e=0),parseInt(e);case"decimal":case"float":case"money":case"currency":case"percent":return null===e&&(e=0),parseFloat(e);case"date":case"month":return Date.parse(e);case"datetime":var n=t.unformatBackendDateTime(e);return n.getTime();default:return null}},isValueNumerical:function(e){switch(e){case"integer":case"smallint":case"bigint":case"boolean":case"decimal":case"float":case"money":case"currency":case"percent":case"date":case"month":case"datetime":return!0;default:return!1}}}}),define("orochart/js/flotr2/funnel",["jquery","flotr2"],function(e,t){t.addType("funnel",{options:{show:!1,lineWidth:2,fill:!0,fillColor:null,fillOpacity:.5,fontColor:"#B2B2B2",explode:5,marginX:450,marginY:20,leftMargin:160,colors:["#ACD39C","#BE9DE2","#6598DA","#ECC87E","#A4A2F6","#6487BF","#65BC87","#8985C2","#ECB574","#84A377"],nozzleSteps:[],tickFormatter:function(e,t){return e+": "+t},nozzleFormatter:function(e,t){return e+": "+t}},stack:[],stacked:!1,shiftLabels:!1,originData:[],plot:function(e){var i=this,n=e.marginX?e.width-e.marginX:e.width,o=e.marginY||e.explode?e.height-2*e.marginY-e.explode:e.height,s=e.extraHeight||0,r=e.data,a=e.context,l=0,c=0,d=0;t._.each(r,function(t,i){-1===e.nozzleSteps.indexOf(i)&&(l+=t)}),t._.each(r,function(t,n){0==t&&-1===e.nozzleSteps.indexOf(n)?(c+=2*(l/100),r[n]=2*(l/100),i.shiftLabels=!0):-1!==e.nozzleSteps.indexOf(n)?(c+=10*(l/100),r[n]=10*(l/100),i.shiftLabels=!0):c+=t}),l=c,a.lineJoin="round",a.translate(.5,.5),a.beginPath(),a.moveTo(e.leftMargin||0,e.marginY),i.stack[0]={},i.stack[0].x1=e.leftMargin||0,i.stack[0].y1=e.marginY;var h={prevStepWidth:n,prevStepWidthDelta:0,prevStepHeight:o+s,funnelSumm:e.marginY};t._.each(r,function(t){var s=o/l*t;e.explode>0&&s>e.explode&&(s-=e.explode),h=i.calculateSegment(e,s,d,n,h,!0),e.explode>0&&Object.keys(r).length!=d+1&&(h=i.calculateSegment(e,e.explode,d,n,h,!1)),d++})},hit:function(e){var t=this,i=e.args,n=i[0],o=n.relX,s=n.relY;for(var r in t.stack){var a=!0,l=t.stack[r];if(o>=l.x1&&o<=l.x4&&s>=l.y1&&s<=l.y4){var c=(l.x1-o)*(l.y4-l.y1)-(l.x1-l.x1)*(l.y1-s),d=(l.x1-o)*(l.y4-l.y4)-(l.x4-l.x1)*(l.y4-s),h=(l.x4-o)*(l.y1-l.y4)-(l.x1-l.x4)*(l.y4-s);(0==c||0==d||0==h||c>0&&d>0&&h>0||0>c&&0>d&&0>h)&&(a=!1)}if(o>=l.x3&&o<=l.x2&&s>=l.y2&&s<=l.y3){var c=(l.x3-o)*(l.y2-l.y3)-(l.x2-l.x3)*(l.y3-s),d=(l.x2-o)*(l.y3-l.y2)-(l.x2-l.x2)*(l.y2-s),h=(l.x2-o)*(l.y3-l.y3)-(l.x3-l.x2)*(l.y3-s);(0==c||0==d||0==h||c>0&&d>0&&h>0||0>c&&0>d&&0>h)&&(a=!1)}if(s>=l.y1&&s<=l.y3&&o>=l.x1&&o<=l.x2&&0!=a){if(t.stacked===r)return;return t.stacked=r,t.clearHit(e),t.drawHit(e,r),void 0}}t.stacked=!1,t.clearHit(e)},drawHit:function(e,t){var i=this,n=e.context;n.save(),n.lineJoin="round",n.strokeStyle="#FF3F19",n.lineWidth=e.lineWidth,n.beginPath(),n.moveTo(i.stack[t].x1+2*e.lineWidth,i.stack[t].y1),n.lineTo(i.stack[t].x2+2*e.lineWidth,i.stack[t].y2),n.lineTo(i.stack[t].x3+2*e.lineWidth,i.stack[t].y3),n.lineTo(i.stack[t].x4+2*e.lineWidth,i.stack[t].y4),n.closePath(),n.stroke(),n.restore()},clearHit:function(e){var t=this,i=e.context;i.save();for(var n in t.stack)i.clearRect(t.stack[n].x1-2*e.lineWidth,t.stack[n].y1-e.lineWidth,t.stack[n].x2-t.stack[n].x1+5*e.lineWidth,t.stack[n].y4-t.stack[n].y1+5*e.lineWidth);i.restore()},draw:function(e){var t=e.context;t.save(),t.lineJoin="miter",t.lineWidth=e.lineWidth,this.originData=_.clone(e.data),this.plot(e),t.restore()},calculateSegment:function(e,i,n,o,s,r){var a=e.context,l=s.prevStepWidth,c=s.prevStepWidthDelta,d=s.prevStepHeight,h=s.funnelSumm,u=!0,p=Object.keys(e.data)[n];-1===e.nozzleSteps.indexOf(p)&&(u=!1),a.lineWidth=e.lineWidth,a.strokeStyle=e.colors[n],a.fillStyle=t.Color.parse(e.colors[n]).alpha(e.fillOpacity).toString();var f=this,m=Math.ceil(l/2),g=Math.ceil(m*(d-i)/d);if(r){this.stack[n].x2=l+c+(e.leftMargin||0),this.stack[n].y2=h;var v=Math.round(o/2+g)+(e.leftMargin||0),_=Math.round(o/2-g)+(e.leftMargin||0);u&&(v=this.stack[n].x2,_=Math.ceil(o/2-m)+(e.leftMargin||0)),this.stack[n].x3=v,this.stack[n].x4=_,this.stack[n].y3=this.stack[n].y4=h+i,a.lineTo(this.stack[n].x2,this.stack[n].y2),a.lineTo(this.stack[n].x3,this.stack[n].y3),this.stack[n].x3!=this.stack[n].x4&&a.lineTo(this.stack[n].x4,this.stack[n].y4),a.closePath(),a.stroke(),a.fill(),f.renderLabel(a,e,p,h,n,u)}h+=i,a.beginPath();var y=Math.ceil(o/2-g)+(e.leftMargin||0);return u&&(y=Math.ceil(o/2-m)+(e.leftMargin||0)),a.moveTo(y,h),f.stack[n+1]={},f.stack[n+1].x1=y,f.stack[n+1].y1=h,{prevStepWidth:u?2*m:2*g,prevStepWidthDelta:u?o/2-m:o/2-g,prevStepHeight:d-i,funnelSumm:h}},renderLabel:function(i,n,o,s,r,a){var l=e(n.element).find(".flotr-grid-label").last(),c=(n.width-n.marginX)/2,d=l[0]?this.shiftLabels?l.position().top+l.height()+1.2*n.fontSize:s:n.marginY,h={size:1.2*n.fontSize,color:n.fontColor,weight:1.5};n.htmlText=!0,h.textAlign="left",h.textBaseline="top",h.wordWrap="break-word";var u=[],p="position:absolute;"+h.textBaseline+":"+(d-h.size)+"px;"+h.textAlign+":"+(c+(n.marginX+n.width)/3+10)+"px;",f=a?n.nozzleFormatter(o,this.originData[o]):n.tickFormatter(o,this.originData[o]);u.push('<div style="',p,'" class="flotr-grid-label">',f,"</div>");var m=t.DOM.node('<div style="color:#454545" class="flotr-labels"></div>');t.DOM.insert(m,u.join("")),t.DOM.insert(n.element,m),i.beginPath(),i.lineWidth=1,i.strokeStyle=n.fontColor,i.moveTo(this.stack[r].x2,this.stack[r].y2),i.lineTo(c+(n.marginX+n.width)/3,d),i.stroke()}})}),define("text!orochart/js/templates/base-chart-template.html",[],function(){return'<div class="chart-container">\n    <div class="clearfix">\n        <div id="{{ containerId }}-chart" class="pie-chart chart-content pull-left"></div>\n        <div id="{{ containerId }}-legend" class="pie-chart-legend chart-legend pull-left"></div>\n    </div>\n</div>\n'}),define("oroui/js/app/components/base/component",["underscore","backbone","chaplin"],function(e,t,i){var n,o;return o=["model","collection"],n=function(t){this.cid=e.uniqueId("component"),e.extend(this,e.pick(t,o)),this.initialize(t),this.delegateListeners()},e.extend(n,{init:function(e){var t,i;return t=this,i=new t(e),i.defer&&(i=i.defer.promise()),i},extend:t.Model.extend}),e.extend(n.prototype,t.Events,i.EventBroker,e.pick(i.View.prototype,["delegateListeners","delegateListener"]),{defer:null,disposed:!1,initialize:function(){},dispose:function(){return this.disposed?void 0:(this.trigger("dispose",this),this.unsubscribeAllEvents(),this.stopListening(),this.off(),e.each(this.subComponents||[],function(e){e&&"function"==typeof e.dispose&&e.dispose()}),e.each(this,function(e,t){e&&"function"==typeof e.dispose&&e.dispose(),delete this[t]},this),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)}}),n}),define("orochart/js/app/components/base-chart-component",["require","underscore","jquery","text!orochart/js/templates/base-chart-template.html","oroui/js/app/components/base/component"],function(e){var t,i=e("underscore"),n=e("jquery"),o=e("text!orochart/js/templates/base-chart-template.html"),s=e("oroui/js/app/components/base/component");return t=s.extend({template:i.template(o),initialize:function(e){this.data=e.data,this.options=e.options,this.config=e.config,this.$el=n(e._sourceElement),this.$chart=null,this.renderBaseLayout(),this.$chart.bind("update."+this.cid,n.proxy(this.update,this)),n(window).bind("resize."+this.cid,n.proxy(this.update,this))},dispose:function(){this.$chart.unbind("."+this.cid),n(window).unbind("."+this.cid),t.__super__.dispose.call(this)},renderBaseLayout:function(){this.$el.html(this.template()),this.$chart=this.$el.find(".chart-content")},update:function(){this.setChartSize()&&(this.draw(),this.fixSize())},delayUpdate:function(){},setChartSize:function(){var e=this.$chart,t=e.parents(".chart-container").parent(),i=Math.round(.9*t.width());return i>0&&i!==e.width()?(e.width(i),e.height(Math.min(Math.round(.4*i),350)),!0):!1},setChartContainerSize:function(){this.$chart.closest(".clearfix").width(this.$chart.width())},fixSize:function(){var e=this.$chart,t=e.find(".flotr-grid-label-x"),i=t.height(),o=t.height();t.each(function(e,t){var s=n(t).height();s>i?i=s:o>s&&(o=s)}),e.height(e.height()+(i-o)),this.setChartContainerSize()},draw:function(){this.$el.html("copmonent")}})}),define("orochart/js/app/components/bar-chart-component",["require","flotr2","orolocale/js/formatter/number","orochart/js/app/components/base-chart-component"],function(e){var t,i=e("flotr2"),n=e("orolocale/js/formatter/number"),o=e("orochart/js/app/components/base-chart-component");return t=o.extend({initialize:function(e){o.prototype.initialize.call(this,e),this.update()},draw:function(){var e,t=this.$chart,o=this.data,s=this.options,r=this.options.settings,a=s.data_schema.value.formatter,l=0,c=[],d=[];for(var h in o)c.push([l++,parseInt(o[h].value)]),d.push(o[h].label);e={data:c,color:r.chartColors[0],markers:{show:!0,position:"ct",labelFormatter:function(e){return a?n[a](e.y):e.y}}},i.draw(t.get(0),[e],{colors:r.chartColors,fontColor:r.chartFontColor,fontSize:r.chartFontSize,bars:{show:!0,horizontal:!1,shadowSize:0,barWidth:.5},mouse:{track:!0,relative:!0,trackFormatter:function(e){var t;return a?(t=n[a](e.y),n[a](e.y)):(t=e.y,d[parseInt(e.x)]+": "+t)}},yaxis:{min:0,tickFormatter:function(e){return a?n.formatCurrency(e):e}},xaxis:{noTicks:r.xNoTicks,tickFormatter:function(e){return d[parseInt(e)]}},grid:{verticalLines:!1}})}})}),define("orochart/js/app/components/flow-chart-component",["require","flotr2","orolocale/js/formatter/number","orochart/js/app/components/base-chart-component","orochart/js/flotr2/funnel"],function(e){var t,i=e("flotr2"),n=e("orolocale/js/formatter/number"),o=e("orochart/js/app/components/base-chart-component");return e("orochart/js/flotr2/funnel"),t=o.extend({initialize:function(e){o.prototype.initialize.call(this,e),this.date=e.date,this.update()},draw:function(){var e=this,t=this.$chart,o=this.options;if(t.get(0).clientWidth){var s=this.data,r={},a=[];_.each(s,function(e,t){e.value<=0&&(s[t].value=1e-4),r[e.label]=e.value,e.isNozzle&&a.push(e.label)}),i.draw(t.get(0),new Array(r),{funnel:{show:!0,formatter:n.formatCurrency,nozzleSteps:a,colors:o.settings.chartColors,tickFormatter:function(e,t){return e+": "+n.formatCurrency(t)},nozzleFormatter:function(t,i){return t+" (from "+e.date+"): "+n.formatCurrency(i)}},mouse:{track:!0,relative:!0},grid:{outlineWidth:0}})}}})}),define("orochart/js/app/components/pie-chart-component",["require","flotr2","orochart/js/app/components/base-chart-component"],function(e){var t,i=e("flotr2"),n=e("orochart/js/app/components/base-chart-component");return t=n.extend({initialize:function(e){n.prototype.initialize.call(this,e),this.$legend=this.$el.find(".chart-legend"),this.options.settings.ratio=e.ratio,this.update()},setChartSize:function(){var e=this.$chart,t=e.parents(".chart-container").parent(),i=this.$legend,n=Math.min(Math.round(t.width()*Number(this.options.settings.ratio)),350);return n>0&&n!=e.width()?(e.width(n),e.height(n),i.height(n),!0):!1},setChartContainerSize:function(){var e=this.$chart,t=this.$legend,i=t.find("table"),n=i.find("td"),o=parseInt(n.css("padding-bottom"));if(o>0&&i.height()+20>t.height())for(;i.height()+20>t.height()&&(o-=1,n.css("padding-bottom",o+"px"),!(0>=o)););else if(7>o&&i.height()+20<t.height())for(;i.height()+20<t.height()&&(o+=1,n.css("padding-bottom",o+"px"),!(o>=7)););e.closest(".clearfix").width(e.width()+i.outerWidth()+parseInt(i.css("margin-left")))},draw:function(){var e=this.$chart,t=this.$legend,n=this.data,o=this.options.settings,s=[];for(var r in n)s.push({data:[[0,n[r].fraction]],label:n[r].label});i.draw(e.get(0),s,{colors:o.chartColors,fontColor:o.chartFontColor,fontSize:o.chartFontSize,shadowSize:0,HtmlText:!0,xaxis:{showLabels:!1},yaxis:{showLabels:!1},grid:{color:o.chartFontColor,verticalLines:!1,horizontalLines:!1,outlineWidth:0},pie:{show:!0,explode:0,sizeRatio:.8,startAngle:Math.PI/3.5},mouse:{track:!0,relative:!0,lineColor:o.chartHighlightColor,trackFormatter:function(e){return e.series.label+"&nbsp;&nbsp;&nbsp;"+parseFloat(100*e.fraction).toFixed(2)+" %"}},legend:{position:"ne",container:t.get(0),labelBoxWidth:20,labelBoxHeight:13,labelBoxMargin:0}})}})}),define("orochart/js/app/components/line-chart-component",["require","flotr2","orochart/js/data_formatter","orochart/js/app/components/base-chart-component"],function(e){var t,i=e("flotr2"),n=e("orochart/js/data_formatter"),o=e("orochart/js/app/components/base-chart-component");return t=o.extend({initialize:function(e){o.prototype.initialize.call(this,e),this.update()},draw:function(){var e=this.$chart,t=this.options,o=t.data_schema.label.type,s=t.data_schema.value.type;if(e.get(0).clientWidth){var r=this.data;n.isValueNumerical(o)&&r.sort(function(e,t){if(null==e.label)return-1;if(null==t.label)return 1;var i=n.parseValue(e.label,o),s=n.parseValue(t.label,o);return i-s});var a=t.settings.connect_dots_with_line,l=this.config.default_settings.chartColors,c=[],d=null,h=null,u=null,p=null,f=function(e){var t=n.formatValue(e,o);if(null===t){var i=parseInt(e);t=r.length>i?null===r[i].label?"N/A":r[i].label:""}return t},m=function(e){var t=n.formatValue(e,s);if(null===t){var i=parseInt(e);t=r.length>i?null===r[e].value?"N/A":r[e].value:""}return t};for(var g in r){var v=n.parseValue(r[g].value,s);v=null===v?parseInt(g):v;
var _=n.parseValue(r[g].label,o);_=null===_?parseInt(g):_,null===u&&(u=_,d=v,h=v,p=_),u=_>u?_:u,p=p>_?_:p,d=v>d?v:d,h=h>v?v:h;var y=[_,v];c.push(y)}var b=u-p,w=d-h,x=b>0?b/r.length:1,k=w>0?w/r.length:1;u+=x,d+=k,p-=x,h-=k;var C={data:c,color:l[0],markers:{show:!0,position:"ct",labelFormatter:function(e){return m(e.y)}},points:{show:!a}};i.draw(e.get(0),[C],{colors:t.settings.chartColors,fontColor:t.settings.chartFontColor,fontSize:t.settings.chartFontSize,lines:{show:a},mouse:{track:!0,relative:!0,trackFormatter:function(e){return f(e.x)+": "+m(e.y)}},yaxis:{max:d,min:h,tickFormatter:function(e){return m(e)},title:t.data_schema.value.label},xaxis:{max:u,min:p,tickFormatter:function(e){return f(e)},title:t.data_schema.label.label},HtmlText:!1,grid:{verticalLines:!1}})}}})}),define("orochart/js/app/components/multiline-chart-component",["require","flotr2","orochart/js/data_formatter","orochart/js/app/components/base-chart-component"],function(e){var t,i=e("flotr2"),n=e("orochart/js/data_formatter"),o=e("orochart/js/app/components/base-chart-component");return t=o.extend({initialize:function(e){o.prototype.initialize.call(this,e),this.update()},draw:function(){var e=this.options,t=this.$chart,o=e.data_schema.label.type,s=e.data_schema.value.type;if(t.get(0).clientWidth){var r=this.data;if(n.isValueNumerical(o)){var a=function(e){e.sort(function(e,t){if(null==e.label)return-1;if(null==t.label)return 1;var i=n.parseValue(e.label,o),s=n.parseValue(t.label,o);return i-s})};_.each(r,a)}var l=e.settings.connect_dots_with_line,c=this.config.default_settings.chartColors,d=0,h=[],u=function(e){var t=n.formatValue(e,o);if(null===t){var i=parseInt(e);t=r.length>i?null===r[i].label?"N/A":r[i].label:""}return t},p=function(e){var t=n.formatValue(e,s);if(null===t){var i=parseInt(e);t=r.length>i?null===r[e].value?"N/A":r[e].value:""}return t},f=function(e,t,i){var r=[];for(var a in e){var d=n.parseValue(e[a].value,s);d=null===d?parseInt(a):d;var h=n.parseValue(e[a].label,o);h=null===h?parseInt(a):h;var u=[h,d];r.push(u)}return{label:i,data:r,color:c[t%c.length],markers:{show:!1},points:{show:!l}}};_.each(r,function(e,t){var i=f(e,d,t);d++,h.push(i)}),i.draw(t.get(0),h,{colors:c,fontColor:e.settings.chartFontColor,fontSize:e.settings.chartFontSize,lines:{show:l},mouse:{track:!0,relative:!0,trackFormatter:function(e){return e.series.label+", "+u(e.x)+": "+p(e.y)}},yaxis:{autoscale:!0,autoscaleMargin:1,tickFormatter:function(e){return p(e)},title:e.data_schema.value.label},xaxis:{autoscale:!0,autoscaleMargin:0,tickFormatter:function(e){return u(e)},title:e.data_schema.label.label},HtmlText:!1,grid:{verticalLines:!1},legend:{show:!0,noColumns:1,position:"nw"}})}}})}),define("oroconfig/js/form/state",["underscore","backbone","oroui/js/mediator","orotranslation/js/translator"],function(e,t,i,n){var o=t.$,s=function(){this.initialize.apply(this,arguments)};return e.extend(s.prototype,{UNLOAD_EVENT:"beforeunload.configFormState",LOAD_EVENT:"ready.configFormState",CONFIRMATION_MESSAGE:n("You have unsaved changes, are you sure you want to leave this page?"),data:null,form:null,initialize:function(){i.once("page:request",this._onDestroyHandler,this),this.form=o(".system-configuration-container").parents("form"),o(window).on(this.LOAD_EVENT,e.bind(this._collectHandler,this)),this._collectHandler(),o(window).on(this.UNLOAD_EVENT,e.bind(function(){return this.isChanged()?this.CONFIRMATION_MESSAGE:void 0},this)),i.on("openLink:before",this._confirmOpenLink,this)},isChanged:function(){return e.isNull(this.data)||this.form.data("sent")?!1:this.data!==this.getState()},getState:function(){return this.form.length?JSON.stringify(e.reject(this.form.serializeArray(),function(e){return"input_action"===e.name})):!1},_confirmOpenLink:function(e){this.isChanged()&&(e.prevented=!confirm(this.CONFIRMATION_MESSAGE))},_collectHandler:function(){this.data=this.getState()},_onDestroyHandler:function(){e.isNull(this.data)?i.off("page:afterChange",this._collectHandler,this):this.data=null,i.off("openLink:before",this._confirmOpenLink,this),o(window).off(this.UNLOAD_EVENT),o(document).off(this.LOAD_EVENT)}}),s}),define("oroconfig/js/form/default",["jquery","underscore"],function(e,t){return function(){e(function(){var i,n,o=e(".parent-scope-checkbox input");o.on("change",function(){i=e(this).is(":checked"),n=e(this).parents(".controls").find(":input").not(o),n.each(function(n,o){e(o).prop("disabled",i).data("disabled",i),!t.isUndefined(e.uniform)&&t.contains(e.uniform.elements,o)&&e(o).uniform("update")})})})}}),define("orodashboard/js/widget/dashboard-item",["underscore","backbone","orotranslation/js/translator","oroui/js/mediator","oro/block-widget"],function(e,t,i,n,o){var s=t.$;return o.extend({widgetEvents:{"click .collapse-expand-action-container .collapse-action":function(e){e.preventDefault(),this.state.expanded?this.collapse():this.expand()},"click .default-actions-container .move-action":function(e){e.preventDefault(),this.onMove()},"click .default-actions-container .remove-action":function(e){e.preventDefault(),this.onRemoveFromDashboard()}},state:{id:0,expanded:!0,layoutPosition:[0,0]},options:e.extend({},o.prototype.options,{type:"dashboard-item",actionsContainer:".widget-actions-container",contentContainer:".row-fluid",contentClasses:[],allowEdit:!1,template:e.template('<div class="box-type1 dashboard-widget <%= allowEdit ? \'editable\' : \'\' %>"><div class="pull-left actions-container"><div class="pull-left collapse-expand-action-container"><a class="collapse-action <%= collapsed ? \'collapsed\' : \'\' %>" href="#" data-collapsed-title="<%- _.__(\'oro.dashboard.widget.expand\') %>" data-expanded-title="<%- _.__(\'oro.dashboard.widget.collapse\') %>"></a></div></div><div class="title sortable"><span class="widget-title"><%- title %></span></div><div class="pull-right actions-container"><div class="pull-right default-actions-container"><span class="action-wrapper sortable"><a class="move-action" href="#" title="<%- _.__(\'oro.dashboard.widget.move\') %>"><i class="icon-move hide-text"></i></a></span><span class="action-wrapper"><a class="remove-action" href="#" title="<%- _.__(\'oro.dashboard.widget.remove\') %>"><i class="icon-trash hide-text"></i></a></span></div><div class="pull-left widget-actions-container"></div></div><div class="row-fluid <%= contentClasses.join(\' \') %>"></div></div>')}),initialize:function(t){this.options=e.defaults(t||{},this.options),this.options.templateParams.allowEdit=this.options.allowEdit,this.options.templateParams.collapsed=t.state.expanded,o.prototype.initialize.apply(this,arguments)},initializeWidget:function(e){this._initState(e),o.prototype.initializeWidget.apply(this,arguments)},_initState:function(t){if(t.state&&(this.state=e.extend({},this.state,t.state)),this.state.layoutPosition&&(this.state.layoutPosition=e.map(this.state.layoutPosition,function(e){return parseInt(e)})),!this.state.id)throw new Error("Dashboard widget id should be defined.");this.once("renderComplete",this._initWidgetCollapseState)},_initWidgetCollapseState:function(){this.isCollapsed()?this._setCollapsed(!0):this._setExpanded(!0)},collapse:function(){this._setCollapsed()},_setCollapsed:function(e){if(!this.widgetContentContainer.is(":animated")){this.state.expanded=!1;var t=s(".collapse-expand-action-container",this.widget).find(".collapse-action");if(t.attr("title",t.data("collapsed-title")).toggleClass("collapsed"),e)this.widget.addClass("collapsed"),this.widgetContentContainer.slideUp("slow");else{this.trigger("collapse",this.$el,this),n.trigger("widget:dashboard:collapse:"+this.getWid(),this.$el,this);var i=this;this.widgetContentContainer.slideUp({complete:function(){i.widget.addClass("collapsed")}})}}},expand:function(){this._setExpanded()},_setExpanded:function(e){if(!this.widgetContentContainer.is(":animated")){this.state.expanded=!0;var t=s(".collapse-expand-action-container",this.widget).find(".collapse-action"),i=this.$el.find(".chart");t.attr("title",t.data("expanded-title")).toggleClass("collapsed"),this.widget.removeClass("collapsed"),e||(this.trigger("expand",this.$el,this),n.trigger("widget:dashboard:expand:"+this.getWid(),this.$el,this),this.widgetContentContainer.slideDown()),i.length>0&&i.trigger("update")}},isCollapsed:function(){return!this.state.expanded},onMove:function(){this.trigger("move",this.$el,this),n.trigger("widget:dashboard:move:"+this.getWid(),this.$el,this)},onRemoveFromDashboard:function(){this.trigger("removeFromDashboard",this.$el,this),n.trigger("widget:dashboard:removeFromDashboard:"+this.getWid(),this.$el,this)}})}),define("orodashboard/js/dashboard-container",["jquery","underscore","backbone","routing","orotranslation/js/translator","oroui/js/mediator","oroui/js/widget-manager","orodashboard/js/widget/dashboard-item","jquery-ui"],function(e,t,i,n,o,s,r,a){return{widgets:{},options:{widgetIds:[],handle:".dashboard-widget .sortable",columnsSelector:".dashboard-column",emptyTextSelector:"> .empty-text",allowEdit:!1,placeholder:{element:function(t){var i=e(t).height();return e('<div><div class="widget-placeholder" style="height: '+i+'px;">'+o("oro.dashboard.drop_placeholder_label")+"</div></div>")[0]},update:function(){}}},initialize:function(i){var n=this;this.options=t.extend({},this.options,i),s.off("dashboard:widget:add",this.addToDashboard,this),s.on("dashboard:widget:add",this.addToDashboard,this),this.widgets={},t.each(this.options.widgetIds,function(e){r.getWidgetInstance(e,function(e){n.add(e)})}),this._updateEmptyTextVisibility(),this.options.allowEdit&&e(this.options.columnsSelector).sortable({handle:this.options.handle,placeholder:this.options.placeholder,connectWith:this.options.columnsSelector,start:function(){n._lockLayoutHeight(),n._hideEmptyText()},stop:function(){n._releaseLayoutHeight(),n.saveLayoutPosition(),n._updateEmptyTextVisibility()}})},addToDashboard:function(t){var i="dashboard-widget-"+t.id,o="widget-container-"+i,s=t.layout_position[0]?t.layout_position[0]:0;e("#dashboard-column-"+s).prepend(e('<div id="'+o+'"></div>'));var r={id:t.id,expanded:t.expanded,layoutPosition:t.layout_position},l={widgetType:"dashboard-item",wid:i,url:n.generate(t.config.route,t.config.route_parameters),state:r,loadingMaskEnabled:!1,container:"#"+o,allowEdit:this.options.allowEdit},c=new a(l);c.render(),this.add(c),this.options.allowEdit&&e(this.options.columnsSelector).sortable("refresh")},saveLayoutPosition:function(){var t=this,i={layoutPositions:{}};e(this.options.columnsSelector).each(function(n,o){e("> div",o).each(function(o,s){var r=e(".widget-content",s).data("wid");if(t.widgets[r]){var a=t.widgets[r],l=a.state.id;i.layoutPositions[l]=a.state.layoutPosition=[n,o]}})}),e.ajax({url:this._getSaveLayoutPositionsUrl(),type:"PUT",data:e.param(i)})},add:function(e){var t=e.getWid();this.widgets[t]=e,this._updateEmptyTextVisibility(),e.off("removeFromDashboard",this._onRemove,this),e.on("removeFromDashboard",this._onRemove,this),e.off("collapse expand",this._onCollapseOrExpand,this),e.on("collapse expand",this._onCollapseOrExpand,this)},_onRemove:function(t,i){var n=i.widget.parent();i.remove(),n.remove(),delete this.widgets[i.getWid()],this._updateEmptyTextVisibility(),e.ajax({url:this._getRemoveWidgetUrl(i),type:"DELETE"})},_onCollapseOrExpand:function(t,i){e.ajax({url:this._getUpdateWidgetUrl(i),type:"PUT",data:{isExpanded:i.state.expanded?1:0}})},_lockLayoutHeight:function(){this._releaseLayoutHeight();var t=e(this.options.columnsSelector),i=t.parents(".scrollable-container").first(),n=i.find(".dashboard-container"),o=parseInt(n.css("paddingBottom"))+parseInt(n.css("paddingTop")),s=i.height()-o;t.each(function(t,i){var n=e(i).height();s=s>n?s:n}),t.css({minHeight:s+"px"}),t.sortable("refresh")},_releaseLayoutHeight:function(){e(this.options.columnsSelector).css({minHeight:"0px"})},_hideEmptyText:function(){e(this.options.emptyTextSelector,this.options.columnsSelector).addClass("hidden-empty-text")},_updateEmptyTextVisibility:function(){var t=this;e(this.options.columnsSelector).each(function(i,n){t._isEmptyColumn(i)?e(t.options.emptyTextSelector,n).removeClass("hidden-empty-text"):e(t.options.emptyTextSelector,n).addClass("hidden-empty-text")})},_isEmptyColumn:function(e){var i=!0;return t.each(this.widgets,function(t){t.state.layoutPosition[0]==e&&(i=!1)}),i},_getSaveLayoutPositionsUrl:function(){return n.generate("oro_api_put_dashboard_widget_positions",{dashboardId:this.options.dashboardId})},_getUpdateWidgetUrl:function(e){return n.generate("oro_api_put_dashboard_widget",{dashboardId:this.options.dashboardId,widgetId:e.state.id})},_getRemoveWidgetUrl:function(e){return n.generate("oro_api_delete_dashboard_widget",{dashboardId:this.options.dashboardId,widgetId:e.state.id})}}}),define("orodashboard/js/widget-picker",["underscore","oroui/js/modal","oroui/js/mediator","orotranslation/js/translator","routing"],function(e,t,i,n,o){var s=t.extend({open:function(){Backbone.BootstrapModal.prototype.open.apply(this,arguments);var e=$(".add-widget-button"),t=$(".dashboard-picker-collapse");t.unbind("click",this.options.collapseCallback),t.bind("click",{},this.options.collapseCallback),e.unbind("click",this.options.clickAddToDashboardCallback),e.bind("click",{controls:e},this.options.clickAddToDashboardCallback)}});return{targetColumn:0,dialog:null,dashboardId:null,init:function(t){this.dashboardId=t,this.dialog=new s({content:$("#available-dashboard-widgets").html(),className:"modal dashboard-widgets-wrapper",title:n("oro.dashboard.add_dashboard_widgets.title"),clickAddToDashboardCallback:e.bind(this._onClickAddToDashboard,this),collapseCallback:this._collapseDelegate}),$(".dashboard-widgets-add").bind("click",e.bind(this._onClickAddWidget,this))},_collapseDelegate:function(){var e=$(this),t=e.parents(".dashboard-widget-container");e.toggleClass("collapsed-state"),t.find(".dashboard-widgets-description").fadeToggle()},_onClickAddToDashboard:function(e){var t=$(e.target);if(!t.hasClass("disabled")){var n=t.parents(".dashboard-widget-container"),s=e.data.controls,r=this;this._startLoading(s,n),$.post(o.generate("oro_api_post_dashboard_widget_add_widget"),{widgetName:t.data("widget-name"),dashboardId:this.dashboardId,targetColumn:this.targetColumn},function(e){i.trigger("dashboard:widget:add",e),r._endLoading(s,n)},"json")}},_startLoading:function(e,t){e.addClass("disabled");var i=t.find(".dashboard-widgets-pick-wrapper");i.addClass("loading-content"),i.find(".add-widget-button").hide()},_endLoading:function(e,t){e.removeClass("disabled");var i=t.find(".dashboard-widgets-pick-wrapper");i.removeClass("loading-content"),i.find(".add-widget-button").css("display","inline-block");var n=t.css("background-color"),o=function(){o=function(){t.css({backgroundColor:""})},t.animate({backgroundColor:n},o)};t.animate({backgroundColor:"#F5F55B"},50,o)},_onClickAddWidget:function(e){e.preventDefault();var t=$(e.target).closest(".dashboard-column").index();this.targetColumn=-1==t?0:t,this.dialog.open()}}}),function(e){if("object"==typeof exports)module.exports=e(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)define("backbone-pageable-collection",["underscore","backbone"],e);else if("undefined"!=typeof _&&"undefined"!=typeof Backbone){var t=Backbone.PageableCollection,i=Backbone.PageableCollection=e(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=t,i}}}(function(e,t){function i(t,i){if(!e.isNumber(t)||e.isNaN(t)||!e.isFinite(t)||~~t!==t)throw new TypeError("`"+i+"` must be a finite integer");return t}function n(e){for(var t,i,n,o,s={},r=decodeURIComponent,a=e.split("&"),l=0,c=a.length;c>l;l++){var d=a[l];t=d.split("="),i=t[0],n=t[1]||!0,i=r(i),o=s[i],f(o)?o.push(n):s[i]=o?[o,n]:n}return s}function o(){var t=arguments[0],i=e.toArray(arguments).slice(1),n=t.comparator;t.comparator=null;try{t.reset.apply(t,i)}finally{t.comparator=n,n&&t.sort()}return t}var s=e.extend,r=e.omit,a=e.clone,l=e.each,c=e.pick,d=e.contains,h=e.isEmpty,u=e.pairs,p=e.invert,f=e.isArray,m=e.isFunction,g=e.isObject,v=e.keys,_=e.isUndefined,y=e.result,b=Math.ceil,w=Math.floor,x=Math.max,k=t.Collection.prototype,C=/[\s'"]/g,j=/[<>\s'"]/g,T=t.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},initialize:function(e,t){t=t||{};var i=this.mode=t.mode||this.mode||S.mode,n=s({},S.queryParams,this.queryParams,t.queryParams||{});n.directions=s({},S.queryParams.directions,this.queryParams.directions,n.directions||{}),this.queryParams=n;var o=this.state=s({},S.state,this.state,t.state||{});o.currentPage=null==o.currentPage?o.firstPage:o.currentPage,f(e)||(e=e?[e]:[]),"server"==i||null!=o.totalRecords||h(e)||(o.totalRecords=e.length),this.switchMode(i,s({fetch:!1,resetState:!1,models:e},t));var r=t.comparator;if(o.sortKey&&!r&&this.setSorting(o.sortKey,o.order,t),"server"!=i){if(r&&t.full){delete this.comparator;var l=this.fullCollection;l.comparator=r,l.sort()}e&&!h(e)&&(this.getPage(o.currentPage),e.splice.apply(e,[0,e.length].concat(this.models)))}this._initState=a(this.state)},_makeFullCollection:function(e,i){var n,o,s,r=["url","model","sync","comparator"],a=this.constructor.prototype,l={};for(n=0,o=r.length;o>n;n++)s=r[n],_(a[s])||(l[s]=a[s]);var c=new(t.Collection.extend(l))(e,i);for(n=0,o=r.length;o>n;n++)s=r[n],this[s]!==a[s]&&(c[s]=this[s]);return c},_makeCollectionEventHandler:function(e,t){return function(i,n,r,c){var d=e._handlers;l(v(d),function(i){var n=d[i];e.off(i,n),t.off(i,n)});var h=a(e.state),u=h.firstPage,p=0===u?h.currentPage:h.currentPage-1,f=h.pageSize,m=p*f,g=m+f;if("add"==i){var y,w,x,k,c=c||{};if(r==t)w=t.indexOf(n),w>=m&&g>w&&(k=e,y=x=w-m);else{y=e.indexOf(n),w=m+y,k=t;var x=_(c.at)?w:c.at+m}if(++h.totalRecords,e.state=e._checkState(h),k){k.add(n,s({},c||{},{at:x}));var C=y>=f?n:!_(c.at)&&g>x&&e.length>f?e.at(f):null;if(C){var j=r._events.add||[],T={onAdd:!0};if(j.length){var S=j[j.length-1],D=S.callback;S.callback=function(){try{D.apply(this,arguments),e.remove(C,T)}finally{S.callback=D}}}else e.remove(C,T)}}}if("remove"==i)if(c.onAdd)delete c.onAdd;else{if(--h.totalRecords){var E=h.totalPages=b(h.totalRecords/f);h.lastPage=0===u?E-1:E,h.currentPage>E&&(h.currentPage=h.lastPage)}else h.totalRecords=null,h.totalPages=null;e.state=e._checkState(h);var M,A=c.index;r==e?((M=t.at(g))&&e.push(M),t.remove(n)):A>=m&&g>A&&(e.remove(n),M=t.at(p*(f+A)),M&&e.push(M))}if("reset"==i||"sort"==i){if(c=r,r=n,r==e&&"reset"==i){var F=t.models.slice(0,m),O=t.models.slice(m+e.models.length);c=s(c,{silent:!0}),o(t,F.concat(e.models).concat(O),c)}("reset"==i||r==t)&&((h.totalRecords=t.models.length)||(h.totalRecords=null,h.totalPages=null,h.lastPage=h.currentPage=h.firstPage),e.state=e._checkState(h),r==e&&t.trigger(i,t,c),o(e,t.models.slice(m,g),s({},c,{parse:!1})))}l(v(d),function(i){var n=d[i];l([e,t],function(e){e.on(i,n);var t=e._events[i]||[];t.unshift(t.pop())})})}},_checkState:function(e){var t=this.mode,n=this.links,o=e.totalRecords,s=e.pageSize,r=e.currentPage,a=e.firstPage,l=e.totalPages;if(null!=o&&null!=s&&null!=r&&null!=a&&("infinite"==t?n:!0)){if(o=i(o,"totalRecords"),s=i(s,"pageSize"),r=i(r,"currentPage"),a=i(a,"firstPage"),1>s)throw new RangeError("`pageSize` must be >= 1");if(l=e.totalPages=b(o/s),0>a||a>1)throw new RangeError("`firstPage must be 0 or 1`");if(e.lastPage=0===a?x(0,l-1):l,"infinite"==t){if(!n[r+""])throw new RangeError("No link found for page "+r)}else if(a>r||l>0&&(a?r>l:r>=l))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(a?">":">=")+" totalPages if "+a+"-based. Got "+r+".")}return e},setPageSize:function(e,t){return e=i(e,"pageSize"),t=t||{},this.state=this._checkState(s({},this.state,{pageSize:e,totalPages:b(this.state.totalRecords/e)})),this.getPage(this.state.currentPage,t)},switchMode:function(t,i){if(!d(["server","client","infinite"],t))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');i=i||{fetch:!0,resetState:!0};var n=this.state=i.resetState?a(this._initState):this._checkState(s({},this.state));this.mode=t;var o,c=this,h=this.fullCollection,u=this._handlers=this._handlers||{};if("server"==t||h)"server"==t&&h&&(l(v(u),function(e){o=u[e],c.off(e,o),h.off(e,o)}),delete this._handlers,this._fullComparator=h.comparator,delete this.fullCollection);else{h=this._makeFullCollection(i.models||[]),h.pageableCollection=this,this.fullCollection=h;var p=this._makeCollectionEventHandler(this,h);l(["add","remove","reset","sort"],function(t){u[t]=o=e.bind(p,{},t),c.on(t,o),h.on(t,o)}),h.comparator=this._fullComparator}if("infinite"==t)for(var f=this.links={},m=n.firstPage,g=b(n.totalRecords/n.pageSize),_=0===m?x(0,g-1):g||m,y=n.firstPage;_>=y;y++)f[y]=this.url;else this.links&&delete this.links;return i.fetch?this.fetch(r(i,"fetch","resetState")):this},hasPrevious:function(){var e=this.state,t=e.currentPage;return"infinite"!=this.mode?t>e.firstPage:!!this.links[t-1]},hasNext:function(){var e=this.state,t=this.state.currentPage;return"infinite"!=this.mode?t<e.lastPage:!!this.links[t+1]},getFirstPage:function(e){return this.getPage("first",e)},getPreviousPage:function(e){return this.getPage("prev",e)},getNextPage:function(e){return this.getPage("next",e)},getLastPage:function(e){return this.getPage("last",e)},getPage:function(e,t){var n=this.mode,a=this.fullCollection;t=t||{fetch:!1};var l=this.state,c=l.firstPage,d=l.currentPage,u=l.lastPage,p=l.pageSize,f=e;switch(e){case"first":f=c;break;case"prev":f=d-1;break;case"next":f=d+1;break;case"last":f=u;break;default:f=i(e,"index")}this.state=this._checkState(s({},l,{currentPage:f}));var m=(0===c?f:f-1)*p,g=a&&a.length?a.models.slice(m,m+p):[];return"client"!=n&&("infinite"!=n||h(g))||t.fetch?("infinite"==n&&(t.url=this.links[f]),this.fetch(r(t,"fetch"))):o(this,g,r(t,"fetch"))},getPageByOffset:function(e,t){if(0>e)throw new RangeError("`offset must be > 0`");e=i(e);var n=w(e/this.state.pageSize);return 0!==this.state.firstPage&&n++,n>this.state.lastPage&&(n=this.state.lastPage),this.getPage(n,t)},sync:function(e,i,n){var o=this;if("infinite"==o.mode){var r=n.success,a=o.state.currentPage;n.success=function(e,t,i){var l=o.links,c=o.parseLinks(e,s({xhr:i},n));c.first&&(l[o.state.firstPage]=c.first),c.prev&&(l[a-1]=c.prev),c.next&&(l[a+1]=c.next),r&&r(e,t,i)}}return(k.sync||t.sync).call(o,e,i,n)},parseLinks:function(e,t){var i={},o=t.xhr.getResponseHeader("Link");if(o){var s=["first","prev","previous","next","last"];l(o.split(","),function(e){var t=e.split(";"),n=t[0].replace(j,""),o=t.slice(1);l(o,function(e){var t=e.split("="),o=t[0].replace(C,""),r=t[1].replace(C,"");"rel"==o&&d(s,r)&&("previous"==r?i.prev=n:i[r]=n)})});var r,c,h=i.last||"";if(c=(r=h.indexOf("?"))?h.slice(r+1):""){var u=n(c),p=a(this.state),f=this.queryParams,m=p.pageSize,g=1*u[f.totalRecords],v=1*u[f.currentPage],_=u[f.totalPages];g||(v?g=(0===p.firstPage?v+1:v)*m:_&&(g=_*m)),g&&(p.totalRecords=g),this.state=this._checkState(p)}}return delete i.last,i},parse:function(e){var t=this.parseState(e,a(this.queryParams),a(this.state));return t&&(this.state=this._checkState(s({},this.state,t))),this.parseRecords(e)},parseState:function(t,i,n){if(t&&2===t.length&&g(t[0])&&f(t[1])){var o=a(n),s=t[0];return l(u(r(i,"directions")),function(t){var i=t[0],n=t[1],r=s[n];_(r)||e.isNull(r)||(o[i]=s[n])}),s.order&&(o.order=1*p(i.directions)[s.order]),o}},parseRecords:function(e){return e&&2===e.length&&g(e[0])&&f(e[1])?e[1]:e},fetch:function(e){e=e||{};var t=this._checkState(this.state),i=this.mode;"infinite"!=i||e.url||(e.url=this.links[t.currentPage]);var l=e.data||{},d=y(e,"url")||y(this,"url")||"",h=d.indexOf("?");-1!=h&&(s(l,n(d.slice(h+1))),d=d.slice(0,h)),e.url=d,e.data=l;var p,f,g,b,w="client"==this.mode?c(this.queryParams,"sortKey","order"):r(c(this.queryParams,v(S.queryParams)),"directions"),x=u(w),C=a(this);for(p=0;p<x.length;p++)f=x[p],g=f[0],b=f[1],b=m(b)?b.call(C):b,null!=t[g]&&null!=b&&(l[b]=t[g]);t.sortKey&&t.order?l[w.order]=this.queryParams.directions[t.order+""]:t.sortKey||delete l[w.order];var j=u(r(this.queryParams,v(S.queryParams)));for(p=0;p<j.length;p++)f=j[p],b=f[1],b=m(b)?b.call(C):b,l[f[0]]=b;var T=this.fullCollection,D=this.links;if("server"!=i){var E=this,M=e.success;return e.success=function(n,r,a){a=a||{},_(e.silent)?delete a.silent:a.silent=e.silent;var l=n.models,c=t.currentPage;if("client"==i)o(T,l,a);else if(D[c]){var d=t.pageSize,h=(0===t.firstPage?c:c-1)*d,u=T.models,p=u.slice(0,h),f=u.slice(h+d);u=p.concat(l).concat(f);var m=T.set||T.update;m.call(T,u,s({silent:!0,sort:!1},a)),T.comparator&&T.sort(),T.trigger("reset",T,a)}else T.add(l,s({at:T.length,silent:!0},a)),T.trigger("reset",T,a);M&&M(n,r,a)},k.fetch.call(E,s({},e,{silent:!0}))}return k.fetch.call(this,e)},_makeComparator:function(e,t){var i=this.state;return e=e||i.sortKey,t=t||i.order,e&&t?function(i,n){var o,s=i.get(e),r=n.get(e);return 1===t&&(o=s,s=r,r=o),s===r?0:r>s?-1:1}:void 0},setSorting:function(e,t,i){var n=this.state;n.sortKey=e,n.order=t=t||n.order;var o=this.fullCollection,r=!1,a=!1;e||(r=a=!0);var l=this.mode;i=s({side:"client"==l?l:"server",full:!0},i);var c=this._makeComparator(e,t),d=i.full,h=i.side;return"client"==h?d?(o&&(o.comparator=c),r=!0):(this.comparator=c,a=!0):"server"!=h||d||(this.comparator=c),r&&delete this.comparator,a&&o&&delete o.comparator,this}}),S=T.prototype;return T}),define("oro/datagrid/action/delete-action",["underscore","oroui/js/messenger","orotranslation/js/translator","oroui/js/delete-confirmation","./model-action"],function(e,t,i,n,o){var s;return s=o.extend({confirmModalConstructor:n,defaultMessages:{confirm_title:"Delete Confirmation",confirm_content:"Are you sure you want to delete this item?",confirm_ok:"Yes, Delete",confirm_cancel:"Cancel",success:"Item deleted"},execute:function(){this.getConfirmDialog(e.bind(this.doDelete,this)).open()},doDelete:function(){this.model.destroy({url:this.getLink(),wait:!0,error:function(){var e=i("You do not have permission to perform this action.");t.notificationFlashMessage("error",e)},success:function(){var e=i("Item deleted");t.notificationFlashMessage("success",e)}})}})}),define("oro/datagrid/action/ajaxdelete-action",["./model-action","oroui/js/delete-confirmation","oroui/js/mediator"],function(e,t,i){var n;return n=e.extend({confirmation:!0,confirmModalConstructor:t,defaultMessages:{confirm_title:"Delete Confirmation",confirm_content:"Are you sure you want to remove this item?",confirm_ok:"Yes",confirm_cancel:"Cancel",success:"Removed.",error:"Not removed.",empty_selection:"Please, select item to remove."},_doAjaxRequest:function(){i.trigger("datagrid:beforeRemoveRow:"+this.datagrid.name,this.model),n.__super__._doAjaxRequest.apply(this,arguments)},_onAjaxSuccess:function(){i.trigger("datagrid:afterRemoveRow:"+this.datagrid.name),n.__super__._onAjaxSuccess.apply(this,arguments)}})}),define("oro/datagrid/action/mass-action",["underscore","oroui/js/messenger","orotranslation/js/translator","oroui/js/modal","./abstract-action"],function(e,t,i,n,o){var s;return s=o.extend({defaultMessages:{confirm_title:"Mass Action Confirmation",confirm_content:"Are you sure you want to do this?",confirm_ok:"Yes, do it",confirm_cancel:"Cancel",success:"Mass action performed.",error:"Mass action is not performed.",empty_selection:"Please, select items to perform mass action."},initialize:function(){s.__super__.initialize.apply(this,arguments);var t={};t[this.datagrid.name]=this.datagrid.collection.urlParams||{},e.extend(this.route_parameters,t,{gridName:this.datagrid.name,actionName:this.name})},execute:function(){var n=this.datagrid.getSelectionState();e.isEmpty(n.selectedModels)&&n.inset?t.notificationFlashMessage("warning",i(this.messages.empty_selection)):s.__super__.execute.call(this)},getActionParameters:function(){var t,i,n,o;return t=this.datagrid.getSelectionState(),i=this.datagrid.collection,n=e.map(t.selectedModels,function(e){return e.get(this.identifierFieldName)},this),o={inset:t.inset?1:0,values:n.join(",")},o=i.processFiltersParams(o,null,"filters")},_onAjaxSuccess:function(){this.datagrid.resetSelectionState(),s.__super__._onAjaxSuccess.apply(this,arguments)}})}),define("oro/datagrid/action/delete-mass-action",["oroui/js/delete-confirmation","./mass-action"],function(e,t){var i;return i=t.extend({confirmModalConstructor:e,defaultMessages:{confirm_title:"Delete Confirmation",confirm_content:"Are you sure you want to do remove selected items?",confirm_ok:"Yes, Delete",confirm_cancel:"Cancel",success:"Selected items were removed.",error:"Selected items were not removed.",empty_selection:"Please, select items to remove."}})}),define("oro/datagrid/action/navigate-action",["underscore","orotranslation/js/translator","oroui/js/mediator","./model-action"],function(e,t,i,n){var o;return o=n.extend({useDirectLauncherLink:!0,initialize:function(t){o.__super__.initialize.apply(this,arguments),t.useDirectLauncherLink&&(this.useDirectLauncherLink=t.useDirectLauncherLink),this.on("preExecute",e.bind(this._preExecuteSubscriber,this)),this.useDirectLauncherLink&&(this.launcherOptions=e.extend({link:this.getLink(),runAction:!1},this.launcherOptions))},execute:function(){i.execute("redirectTo",{url:this.getLink()})},_preExecuteSubscriber:function(e,n){i.once("page:beforeError",function(e,n){var o;403===e.status&&(n.stopPageProcessing=!0,o=t("You do not have permission to perform this action."),i.execute("addMessage","error",o,{flash:!0}))}),i.trigger("grid_action:navigateAction:preExecute",e,n)}})}),define("oro/datagrid/action/refresh-collection-action",["./abstract-action"],function(e){var t;return t=e.extend({collection:void 0,initialize:function(e){var i=e||{};if(!i.datagrid)throw new TypeError("'datagrid' is required");this.collection=i.datagrid.collection,t.__super__.initialize.apply(this,arguments)},execute:function(){this.datagrid.setAdditionalParameter("refresh",!0),this.collection.fetch({reset:!0}),this.datagrid.removeAdditionalParameter("refresh")}})}),define("oro/datagrid/action/reset-collection-action",["./abstract-action"],function(e){var t;return t=e.extend({collection:void 0,initialize:function(e){var i=e||{};if(!i.datagrid)throw new TypeError("'datagrid' is required");this.collection=i.datagrid.collection,t.__super__.initialize.apply(this,arguments)},execute:function(){this.collection.updateState(this.collection.initialState),this.collection.fetch({reset:!0})}})}),define("oro/datagrid/action/export-action",["jquery","underscore","./abstract-action"],function(e,t,i){var n;return n=i.extend({collection:void 0,initialize:function(e){this.launcherOptions={runAction:!1},this.route="oro_datagrid_export_action",this.route_parameters={gridName:e.datagrid.name},this.collection=e.datagrid.collection,n.__super__.initialize.apply(this,arguments)},createLauncher:function(){var i=n.__super__.createLauncher.apply(this,arguments);return this.listenTo(i,"expand",function(i){var n=this.collection.getFetchData();t.each(i.$el.find(".dropdown-menu a"),function(i){var o=e(i);o.attr("href",this.getLink(t.extend({format:o.data("key")},n)))},this)}),i}})}),define("orodatagrid/js/datagrid/actions-panel",["underscore","backbone"],function(e,t){var i;return i=t.View.extend({className:"btn-group",actions:[],launchers:[],initialize:function(e){var t=e||{};this.subviews=[],t.actions&&this.setActions(t.actions),i.__super__.initialize.apply(this,arguments)},dispose:function(){this.disposed||(delete this.launchers,delete this.actions,i.__super__.dispose.apply(this,arguments))},render:function(){return this.$el.empty(),e.each(this.launchers,function(e){this.$el.append(e.render().$el)},this),this},haveActions:function(){return!e.isEmpty(this.actions)},setActions:function(t){this.actions=[],this.launchers=[],e.each(t,function(e){this.actions.push(e),this.launchers.push(e.createLauncher())
},this),this.subviews.push.apply(this.subviews,this.actions)},disable:function(){return e.each(this.launchers,function(e){e.disable()}),this},enable:function(){return e.each(this.launchers,function(e){e.enable()}),this}})}),define("oro/datagrid/cell/action-cell",["jquery","underscore","backgrid"],function(e,t,i){var n;return n=i.Cell.extend({className:"action-cell",actions:void 0,launchers:void 0,template:t.template('<div class="more-bar-holder"><div class="dropdown"><a data-toggle="dropdown" class="dropdown-toggle" href="javascript:void(0);">...</a><ul class="dropdown-menu pull-right launchers-dropdown-menu"></ul></div></div>'),launchersListTemplate:t.template('<% if (withIcons) { %><li><ul class="nav nav-pills icons-holder launchers-list"></ul></li><% } else { %><li class="well-small"><ul class="unstyled launchers-list"></ul></li><% } %>'),launcherItemTemplate:t.template('<li class="launcher-item"></li>'),events:{click:"_toggleDropdown","mouseover .dropdown-toggle":"_toggleDropdown","mouseleave .dropdown-menu":"_toggleDropdown"},initialize:function(){this.subviews=[],n.__super__.initialize.apply(this,arguments),this.actions=this.createActions(),t.each(this.actions,function(e){this.listenTo(e,"run",this.onActionRun)},this),this.launchers=this.createLaunchers(),this.subviews.push.apply(this.subviews,this.actions)},dispose:function(){this.disposed||(delete this.launchers,delete this.actions,delete this.column,this.$(".dropdown-toggle").dropdown("destroy"),n.__super__.dispose.apply(this,arguments))},onActionRun:function(){this.$(".dropdown.open").removeClass("open")},createActions:function(){var e,i,n;return e=[],i=this.column.get("actions"),n=this.model.get("action_configuration"),t.each(i,function(t,i){n&&n[i]===!1||e.push(this.createAction(t))},this),e},createAction:function(e){return new e({model:this.model,datagrid:this.column.get("datagrid")})},createLaunchers:function(){var e=[];return t.each(this.actions,function(t){var i,n;i={},n=t.createLauncher(i),e.push(n)},this),e},render:function(){var e,i;return t.isEmpty(this.launchers)?(this.$el.empty(),this):(this.$el.empty().append(this.template()),e=this.getLaunchersByIcons(),i=this.$(".launchers-dropdown-menu"),e.withIcons.length&&this.renderLaunchersList(e.withIcons,{withIcons:!0}).appendTo(i),e.withIcons.length&&e.withoutIcons.length&&i.append('<li class="divider"></li>'),e.withoutIcons.length&&this.renderLaunchersList(e.withoutIcons,{withIcons:!1}).appendTo(i),this)},renderLaunchersList:function(i,n){var o,s;return n=n||{},o=e(this.launchersListTemplate(n)),s=o.filter(".launchers-list").length?o:e(".launchers-list",o),t.each(i,function(e){s.append(this.renderLauncherItem(e))},this),o},renderLauncherItem:function(t,i){var n,o;return i=i||{},n=e(this.launcherItemTemplate(i)),o=n.filter(".launcher-item").length?n:e(".launcher-item",n),o.append(t.render().$el),n},getLaunchersByIcons:function(){var e={withIcons:[],withoutIcons:[]};return t.each(this.launchers,function(t){t.icon?e.withIcons.push(t):e.withoutIcons.push(t)},this),e},_toggleDropdown:function(e){this.$(".dropdown-toggle").dropdown("toggle"),e.stopPropagation()}})}),define("orodatagrid/js/datagrid/header-cell/action-header-cell",["underscore","backbone","backgrid","../actions-panel"],function(e,t,i,n){var o,s;return o=t.$,s=t.View.extend({className:"action-column",tagName:"th",template:"#template-datagrid-action-header-cell",options:{controls:"[data-toggle=dropdown]"},initialize:function(e){var t;i.requireOptions(e,["column","collection"]),this.column=e.column,this.column instanceof i.Column||(this.column=new i.Column(this.column)),this.subviews=[],this.createActionsPanel(),t=this.column.get("datagrid"),this.listenTo(t,"enable",this.enable),this.listenTo(t,"disable",this.disable)},dispose:function(){this.disposed||(delete this.actionsPanel,delete this.column,s.__super__.dispose.apply(this,arguments))},createActionsPanel:function(){var t=[],i=this.column.get("datagrid");e.each(this.column.get("massActions"),function(e){var n=new e({datagrid:i});t.push(n)}),this.actionsPanel=new n,this.actionsPanel.setActions(t),this.subviews.push(this.actionsPanel)},render:function(){var e=this.actionsPanel;return this.$el.empty(),e.haveActions()&&(this.$el.append(o(this.template).text()),e.setElement(this.$("[data-action-panel]")),e.render(),e.$el.children().wrap("<li/>")),this},enable:function(){this.actionsPanel.enable(),this.$(this.options.controls).removeClass("disabled")},disable:function(){this.actionsPanel.disable(),this.$(this.options.controls).addClass("disabled")}})}),define("orodatagrid/js/datagrid/column/action-column",["underscore","backgrid","oro/datagrid/cell/action-cell","../header-cell/action-header-cell"],function(e,t,i,n){var o;return o=t.Column.extend({defaults:e.defaults({name:"",label:"test",sortable:!1,editable:!1,cell:i,headerCell:n,datagrid:null,actions:[],massActions:[]},t.Column.prototype.defaults),initialize:function(t){var i=t||{};i.cell||(i.cell=this.defaults.cell),i.name||(i.name=this.defaults.name),e.isEmpty(i.actions)&&e.isEmpty(i.massActions)&&this.set("renderable",!1),o.__super__.initialize.apply(this,arguments)}})}),define("orodatagrid/js/datagrid/row",["jquery","underscore","backgrid"],function(e,t,i){var n,o;return o=window.document,n=i.Row.extend({events:{click:"onClick"},clickData:{counter:0,timeout:100,hasSelectedText:!1},dispose:function(){this.disposed||(t.each(this.cells,function(e){e.dispose()}),delete this.cells,delete this.columns,n.__super__.dispose.call(this))},onClick:function(i){var n,o;n=i.target,o=e(i.target).parent().get(0),(this.el===n||this.el===o)&&(this.clickData.counter+=1,1!==this.clickData.counter||this._hasSelectedText()?this.clickData.counter=0:t.delay(t.bind(function(){this._hasSelectedText()||1!==this.clickData.counter||this.trigger("clicked",this,i),this.clickData.counter=0},this),this.clickData.timeout))},_hasSelectedText:function(){var e="";return t.isFunction(window.getSelection)?e=window.getSelection().toString():t.isUndefined(o.selection)||"Text"!==o.selection.type||(e=o.selection.createRange().text),!t.isEmpty(e)},makeCell:function(e){var t=new(e.get("cell"))({column:e,model:this.model});return e.has("align")&&t.$el.css("text-align",e.get("align")),this._listenToCellEvents(t),t},_listenToCellEvents:function(e){e.listenRowClick&&t.isFunction(e.onRowClicked)&&this.on("clicked",e.onRowClicked,e)}})}),define("orodatagrid/js/datagrid/body",["underscore","backgrid","./row"],function(e,t,i){var n;return n=t.Body.extend({row:i,rowClassName:void 0,initialize:function(e){var t=e||{};t.row||(t.row=this.row),t.rowClassName&&(this.rowClassName=t.rowClassName),n.__super__.initialize.apply(this,arguments),this._listenToRowsEvents(this.rows)},dispose:function(){this.disposed||(e.each(this.rows,function(e){e.dispose()}),delete this.rows,delete this.columns,n.__super__.dispose.call(this))},refresh:function(){return this._stopListeningToRowsEvents(this.rows),n.__super__.refresh.apply(this,arguments),this._listenToRowsEvents(this.rows),this},insertRow:function(e,t){n.__super__.insertRow.apply(this,arguments);var i=t.indexOf(e);i<this.rows.length&&this._listenToOneRowEvents(this.rows[i])},removeRow:function(t,i,o){o&&!e.isUndefined(o.index)&&this._stopListeningToOneRowEvents(this.rows[o.index]),n.__super__.removeRow.apply(this,arguments)},_listenToRowsEvents:function(t){e.each(t,function(e){this._listenToOneRowEvents(e)},this)},_stopListeningToRowsEvents:function(t){e.each(t,function(e){this._stopListeningToOneRowEvents(e)},this)},_listenToOneRowEvents:function(e){this.listenTo(e,"clicked",function(e,t){this.trigger("rowClicked",e,t)})},_stopListeningToOneRowEvents:function(e){this.stopListening(e)},render:function(){return n.__super__.render.apply(this,arguments),this.rowClassName&&this.$("> *").addClass(this.rowClassName),this}})}),define("oro/datagrid/cell/boolean-cell",["backgrid","orotranslation/js/translator"],function(e,t){var i;return i=e.BooleanCell.extend({listenRowClick:!0,render:function(){if(this.column.get("editable"))i.__super__.render.apply(this,arguments);else{this.$el.empty();var e=this.formatter.fromRaw(this.model.get(this.column.get("name")))?t("Yes"):t("No");this.$el.append("<span>").text(e),this.delegateEvents()}return this},enterEditMode:function(e){if(i.__super__.enterEditMode.apply(this,arguments),this.column.get("editable")){var t=this.currentEditor.$el;t.prop("checked",!t.prop("checked")).change(),e.stopPropagation()}},onRowClicked:function(e,t){this.$el.is(t.target)||this.$el.has(t.target).length||this.enterEditMode(t)}})}),define("orodatagrid/js/datagrid/formatter/cell-formatter",["underscore","backgrid"],function(e,t){var i=function(){};return i.prototype=new t.CellFormatter,e.extend(i.prototype,{fromRaw:function(e){return null===e?"":t.CellFormatter.prototype.fromRaw.apply(this,arguments)}}),i}),define("oro/datagrid/cell/string-cell",["backgrid","orodatagrid/js/datagrid/formatter/cell-formatter"],function(e,t){var i;return i=e.StringCell.extend({formatter:new t,enterEditMode:function(e){return this.column.get("editable")&&e.stopPropagation(),i.__super__.enterEditMode.apply(this,arguments)}})}),define("oro/datagrid/cell/html-cell",["./string-cell"],function(e){var t;return t=e.extend({render:function(){return this.$el.empty().html(this.formatter.fromRaw(this.model.get(this.column.get("name")))),this}})}),define("orodatagrid/js/datagrid/formatter/datetime-formatter",["underscore","backgrid","orolocale/js/formatter/datetime"],function(e,t,i){var n=function(t){e.extend(this,t)};return n.prototype=new t.CellFormatter,e.extend(n.prototype,{type:"dateTime",fromRaw:function(e){return null===e||""===e?"":this._getFormatterFunction("format").call(i,e)},toRaw:function(e){return null===e||""===e?null:this._getFormatterFunction("convert","ToBackendFormat").call(i,e)},_getFormatterFunction:function(e,t){function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}t=t||"";var o=e+n(this.type)+t;if(!i.hasOwnProperty(o)||"function"!=typeof i[o])throw new Error("Can't use formatter function with name "+o);return i[o]}}),n}),define("oro/datagrid/cell/datetime-cell",["./string-cell","orodatagrid/js/datagrid/formatter/datetime-formatter"],function(e,t){var i;return i=e.extend({formatterPrototype:t,type:"dateTime",className:"datetime-cell",initialize:function(){i.__super__.initialize.apply(this,arguments),this.formatter=this.createFormatter()},createFormatter:function(){return new this.formatterPrototype({type:this.type})}})}),define("oro/datagrid/cell/date-cell",["./datetime-cell"],function(e){var t;return t=e.extend({type:"date",className:"date-cell"})}),define("orodatagrid/js/datagrid/formatter/number-formatter",["underscore","./cell-formatter","orolocale/js/formatter/number"],function(e,t,i){function n(t){var n="format"+t.charAt(0).toUpperCase()+t.slice(1);if(!e.isFunction(i[n]))throw new Error("Formatter doesn't support '"+t+"' number style");return i[n]}function o(t){t=t?e.clone(t):{},e.extend(this,t),this.formatter=n(this.style)}return o.prototype=new t,e.extend(o.prototype,{style:"decimal",fromRaw:function(e){return null===e||""===e?"":this.formatter.apply(this,arguments)},toRaw:function(e){return null===e||""===e?null:i.unformat(e)}}),o}),define("oro/datagrid/cell/number-cell",["underscore","backgrid","orodatagrid/js/datagrid/formatter/number-formatter"],function(e,t,i){var n;return n=t.NumberCell.extend({formatterPrototype:i,style:"decimal",initialize:function(t){e.extend(this,t),n.__super__.initialize.apply(this,arguments),this.formatter=this.createFormatter()},createFormatter:function(){return new this.formatterPrototype({style:this.style})},enterEditMode:function(e){return this.column.get("editable")&&e.stopPropagation(),n.__super__.enterEditMode.apply(this,arguments)}})}),define("oro/datagrid/cell/select-cell",["underscore","backgrid"],function(e,t){var i;return i=t.SelectCell.extend({initialize:function(){this.choices&&(this.optionValues=[],e.each(this.choices,function(e,t){this.optionValues.push([e,t])},this)),i.__super__.initialize.apply(this,arguments)},enterEditMode:function(e){return this.column.get("editable")&&e.stopPropagation(),i.__super__.enterEditMode.apply(this,arguments)}})}),define("oro/datagrid/cell/select-row-cell",["jquery","backbone","backgrid"],function(e,t,i){var n;return n=t.View.extend({className:"select-row-cell",tagName:"td",events:{"change :checkbox":"onChange",click:"enterEditMode"},initialize:function(e){i.requireOptions(e,["model","column"]),this.column=e.column,this.column instanceof i.Column||(this.column=new i.Column(this.column)),this.listenTo(this.model,"backgrid:select",function(e,t){this.$checkbox.prop("checked",t).change()})},dispose:function(){this.disposed||(delete this.column,delete this.$checkbox,n.__super__.dispose.apply(this,arguments))},enterEditMode:function(e){this.$checkbox[0]!==e.target&&this.$checkbox.prop("checked",!this.$checkbox.prop("checked")).change(),e.stopPropagation()},onChange:function(t){this.model.trigger("backgrid:selected",this.model,e(t.target).prop("checked"))},render:function(){var e={selected:!1};return this.$el.empty().append('<input tabindex="-1" type="checkbox" />'),this.$checkbox=this.$(":checkbox"),this.model.trigger("backgrid:isSelected",this.model,e),e.selected&&this.$checkbox.prop("checked","checked"),this}})}),define("orodatagrid/js/datagrid/formatter/phone-formatter",["underscore","backgrid"],function(e,t){var i=function(e){t.CellFormatter.call(this,e)};return i.prototype=Object.create(t.CellFormatter),e.extend(i.prototype,{fromRaw:function(e){return null===e?"":this.generateLinkHTML(e)},generateLinkHTML:function(t){return'<a href="tel:'+e.escape(t)+'">'+e.escape(t)+"</a>"}}),i}),define("oro/datagrid/cell/phone-cell",["oro/datagrid/cell/html-cell","orodatagrid/js/datagrid/formatter/phone-formatter"],function(e,t){var i;return i=e.extend({className:"phone-cell",events:{click:"stopPropagation"},formatter:new t,stopPropagation:function(e){e.stopPropagation()}})}),define("orodatagrid/js/pageable-collection",["underscore","backbone","backbone-pageable-collection","oroui/js/tools"],function(e,t,i,n){var o=i.extend({model:t.Model,initialState:{currentPage:1,pageSize:25,totals:null,filters:{},sorters:{}},queryParams:e.extend({},i.prototype.queryParams,{directions:{"-1":"ASC",1:"DESC"},totalRecords:void 0,totalPages:void 0}),additionalParameters:{view:"gridView"},multipleSorting:!0,urlParams:{},initialize:function(t,i){i=i||{},this.initialState=n.deepClone(this.initialState),e.defaults(this.initialState,this.state),i.initialState&&(i.initialState.sorters&&e.each(i.initialState.sorters,function(e,t){i.initialState.sorters[t]=this.getSortDirectionKey(e)},this),e.extend(this.initialState,i.initialState)),this.state=n.deepClone(this.state),i.state&&(i.state.sorters&&e.each(i.state.sorters,function(e,t){i.state.sorters[t]=this.getSortDirectionKey(e)},this),e.extend(this.state,i.state)),i.url&&(this.url=i.url,this.urlParams=i.urlParams),i.model&&(this.model=i.model),i.inputName&&(this.inputName=i.inputName),e.extend(this.queryParams,{currentPage:this.inputName+"[_pager][_page]",pageSize:this.inputName+"[_pager][_per_page]",sortBy:this.inputName+"[_sort_by][%field%]",parameters:this.inputName+"[_parameters]"}),this.on("remove",this.onRemove,this),o.__super__.initialize.call(this,t,i),t.options&&(this.state.totals=t.options.totals)},onRemove:function(){this.state.totalRecords>0&&this.state.totalRecords--},processFiltersParams:function(t,i,n){return i||(i=this.state),n||(n=this.inputName+"[_filter]"),i.filters&&e.extend(t,this.generateParameterStrings(i.filters,n)),t},processAdditionalParams:function(t){var t=n.deepClone(t);return t.parameters=t.parameters||{},e.each(this.additionalParameters,e.bind(function(i,n){e.isUndefined(t[i])||(t.parameters[n]=t[i])},this)),t},generateParameterStrings:function(t,i){var n={},o=i;return e.each(t,function(t,i){if(i=i.toString(),"__"!=i.substr(0,2)){var s=o+"["+i+"]";e.isObject(t)?e.extend(n,this.generateParameterStrings(t,s)):n[s]=t}},this),n},parse:function(e){return e.options=e.options||{},this.state.totalRecords=e.options.totalRecords||0,this.state.hideToolbar=e.options.hideToolbar,this.state=this._checkState(this.state),e.data},reset:function(e,t){this.trigger("beforeReset",this,e,t),i.prototype.reset.apply(this,arguments)},updateState:function(t){var i=e.extend({},this.state,t);this.state=this._checkState(i),this.trigger("updateState",this,this.state)},_checkState:function(e){var t=this.mode,i=this.links,n=e.totalRecords,o=e.pageSize,s=e.currentPage,r=e.firstPage,a=e.totalPages;if(null!=n&&null!=o&&null!=s&&null!=r&&("infinite"==t?i:!0)){if(e.totalRecords=n=this.finiteInt(n,"totalRecords"),e.pageSize=o=this.finiteInt(o,"pageSize"),e.currentPage=s=this.finiteInt(s,"currentPage"),e.firstPage=r=this.finiteInt(r,"firstPage"),0>o)throw new RangeError("`pageSize` must be >= 0");if(e.totalPages=0==o?1:a=e.totalPages=Math.ceil(n/o),0>r||r>1)throw new RangeError("`firstPage` must be 0 or 1");if(e.lastPage=0===r?a-1:a,s>e.lastPage&&e.pageSize>0&&(e.currentPage=s=e.lastPage),0==e.pageSize&&(e.currentPage=s=1),0==n&&(e.currentPage=s=r),"infinite"==t){if(!i[s+""])throw new RangeError("No link found for page "+s)}else if(a>0){if(0===r&&(r>s||s>=a))throw new RangeError("`currentPage` must be firstPage <= currentPage < totalPages if 0-based. Got "+s+".");if(1===r&&(r>s||s>a))throw new RangeError("`currentPage` must be firstPage <= currentPage <= totalPages if 1-based. Got "+s+".")}else if(s!==r)throw new RangeError("`currentPage` must be "+r+". Got "+s+".")}return e},finiteInt:function(t,i){if(t*=1,!e.isNumber(t)||e.isNaN(t)||!e.isFinite(t)||~~t!==t)throw new TypeError("`"+i+"` must be a finite integer");return t},getFetchData:function(){var t={},i=e.result(this,"url")||"",o=i.indexOf("?");if(-1!=o)for(var s=i.slice(o+1).split("&"),r=0;r<s.length;r++){var a=s[r].split("=");t[n.decodeUriComponent(a[0])]=n.decodeUriComponent(a[1])}var l=this._checkState(this.state);return t=this.processQueryParams(t,l),t=this.processFiltersParams(t,l)},fetch:function(i){this.trigger("beforeFetch",this,i);var o=t.Collection.prototype;i=e.defaults(i||{},{reset:!0});var s=this._checkState(this.state),r=this.mode;"infinite"!=r||i.url||(i.url=this.links[s.currentPage]);var a=i.data||{},l=i.url||e.result(this,"url")||"",c=l.indexOf("?");-1!=c&&(e.extend(a,n.unpackFromQueryString(l.slice(c+1))),l=l.slice(0,c)),i.url=l,i.data=a,a=this.processQueryParams(a,s),a=this.processFiltersParams(a,s);var d=this.fullCollection,h=this.links;if("server"!=r){var u=this,p=i.success;return i.success=function(t,n,o){o=o||{},e.isUndefined(i.silent)?delete o.silent:o.silent=i.silent;var a=t.models,l=s.currentPage;if("client"==r)resetQuickly(d,a,o);else if(h[l]){var c=s.pageSize,u=(0===s.firstPage?l:l-1)*c,f=d.models,m=f.slice(0,u),g=f.slice(u+c);f=m.concat(a).concat(g),d.update(f,e.extend({silent:!0,sort:!1},o)),d.comparator&&d.sort(),d.trigger("reset",d,o)}else d.add(a,e.extend({at:d.length,silent:!0},o)),d.trigger("reset",d,o);p&&p(t,n,o)},o.fetch.call(u,e.extend({},i,{silent:!0}))}return o.fetch.call(this,i)},processQueryParams:function(t,i){i=this.processAdditionalParams(i);var n,s,r,a,l=o.prototype,c="client"==this.mode?e.pick(this.queryParams,"sorters"):e.omit(e.pick(this.queryParams,e.keys(l.queryParams)),"directions"),d=e.pairs(c),h=e.clone(this);for(n=0;n<d.length;n++)s=d[n],r=s[0],a=s[1],a=e.isFunction(a)?a.call(h):a,null!=i[r]&&null!=a&&(t[a]=i[r]);i.sorters&&e.each(i.sorters,function(e,i){var n=this.queryParams.sortBy.replace("%field%",i);t[n]=this.queryParams.directions[e]},this);var u=e.pairs(e.omit(this.queryParams,e.keys(l.queryParams)));for(n=0;n<u.length;n++)s=u[n],a=s[1],a=e.isFunction(a)?a.call(h):a,t[s[0]]=a;return delete t[c.order],delete t[c.sortKey],t},getSortDirectionKey:function(t){var i=null;return e.each(this.queryParams.directions,function(e,n){e==t&&(i=n)}),i},setSorting:function(t,i,n){var o=this.state;o.sorters=o.sorters||{},this.multipleSorting?(e.keys(o.sorters).length<=1&&!i&&(i=this.getSortDirectionKey("ASC")),delete o.sorters[t]):o.sorters={},i&&(o.sorters[t]=i);var s=this.fullCollection,r=!1,a=!1;i||(r=a=!0);var l=this.mode;n=e.extend({side:"client"==l?l:"server",full:!0},n);var c=this._makeComparator(t,i),d=n.full,h=n.side;return"client"==h?d?(s&&(s.comparator=c),r=!0):(this.comparator=c,a=!0):"server"!=h||d||(this.comparator=c),r&&delete this.comparator,a&&s&&delete s.comparator,this},clone:function(){var e={};e.url=this.url,e.inputName=this.inputName;var t=new o(this.toJSON(),e);return t.state=n.deepClone(this.state),t.initialState=n.deepClone(this.initialState),t}});return o}),define("orodatagrid/js/datagrid/header-cell/header-cell",["underscore","backgrid","../../pageable-collection"],function(e,t,i){var n;return n=t.HeaderCell.extend({template:e.template('<% if (sortable) { %><a href="#"><%= label %> <span class="caret"></span></a><% } else { %><span><%= label %></span><% } %>'),allowNoSorting:!0,initialize:function(){this.allowNoSorting=this.collection.multipleSorting,n.__super__.initialize.apply(this,arguments),this._initCellDirection(this.collection),this.listenTo(this.collection,"reset",this._initCellDirection)},dispose:function(){this.disposed||(delete this.column,n.__super__.dispose.apply(this,arguments))},_resetCellDirection:function(){},_initCellDirection:function(t){var i,n,o;t===this.collection&&(i=t.state,n=null,o=this.column.get("name"),this.column.get("sortable")&&e.has(i.sorters,o)&&(1===parseInt(i.sorters[o],10)?n="descending":-1===parseInt(i.sorters[o],10)&&(n="ascending")),n!==this.direction()&&this.direction(n))},render:function(){return this.$el.empty(),this.$el.append(this.template({label:this.column.get("label"),sortable:this.column.get("sortable")})),this.column.has("width")&&this.$el.width(this.column.get("width")),e.isUndefined(this.column.attributes.cell.prototype.className)||this.$el.addClass(this.column.attributes.cell.prototype.className),this.column.has("align")&&this.$el.css("text-align",this.column.get("align")),this},onClick:function(e){e.preventDefault();var t=this.column.get("name");this.column.get("sortable")&&("ascending"===this.direction()?this.sort(t,"descending",function(e,i){var n,o,s;return n=e.get(t),o=i.get(t),s=1,n===o?s=0:n>o&&(s=-1),s}):this.allowNoSorting&&"descending"===this.direction()?this.sort(t,null):this.sort(t,"ascending",function(e,i){var n,o,s;return n=e.get(t),o=i.get(t),s=1,n===o?s=0:o>n&&(s=-1),s}))},sort:function(e,t,n){n=n||this._cidComparator;var o,s=this.collection;s instanceof i?(o="ascending"===t?-1:"descending"===t?1:null,s.setSorting(e,o),"client"===s.mode?(s.fullCollection.comparator||(s.fullCollection.comparator=n),s.fullCollection.sort()):s.fetch({reset:!0})):(s.comparator=n,s.sort()),this.collection.trigger("backgrid:sort",e,t,n,this.collection)}})}),define("orodatagrid/js/datagrid/header",["underscore","backbone","backgrid","./header-cell/header-cell"],function(e,t,i,n){var o;return o=i.Header.extend({tagName:"thead",row:i.HeaderRow,headerCell:n,initialize:function(e){if(!e.collection)throw new TypeError("'collection' is required");if(!e.columns)throw new TypeError("'columns' is required");this.columns=e.columns,this.columns instanceof t.Collection||(this.columns=new i.Columns(this.columns)),this.row=new this.row({columns:this.columns,collection:this.collection,headerCell:this.headerCell}),this.subviews=[this.row]},dispose:function(){this.disposed||(e.each(this.row.cells,function(e){e.dispose()}),delete this.row.cells,delete this.row,delete this.columns,o.__super__.dispose.apply(this,arguments))}})}),define("orodatagrid/js/datagrid/footer/footer-cell",["underscore","backbone","backgrid"],function(e,t,i){var n;return n=t.View.extend({tagName:"th",template:e.template('<span><%= label  %><%= total ? (label? ": " : "") + total : "" %></span>'),initialize:function(e){this.options=e||{},i.requireOptions(e,["column","collection"]),this.column=e.column,this.column instanceof i.Column||(this.column=new i.Column(this.column)),this.listenTo(e.collection,"reset",this.render)},render:function(){var t,i,n,o;if(this.$el.empty(),t=this.column.get("name"),n=this.collection.state||{},o=n.totals||{},e.isUndefined(o[this.options.rowName]))return this.$el.hide(),void 0;if(!e.isUndefined(o[this.options.rowName])&&e.has(o[this.options.rowName].columns,t)){if(this.$el.show(),i=o[this.options.rowName].columns[t],!i.label&&!i.total)return this;this.$el.append(this.template({label:i.label,total:i.total}))}return e.isUndefined(this.column.attributes.cell.prototype.className)||this.$el.addClass(this.column.attributes.cell.prototype.className),this.column.has("align")&&this.$el.css("text-align",this.column.get("align")),this}})}),define("orodatagrid/js/datagrid/footer/footer-row",["underscore","backgrid","./footer-cell"],function(e,t,i){var n;return n=t.Row.extend({footerCell:i,requiredOptions:["columns","collection","footerCell"],initialize:function(e){this.options=e||{},n.__super__.initialize.apply(this,arguments)},dispose:function(){this.disposed||(e.each(this.cells,function(e){e.dispose()}),delete this.cells,delete this.columns,n.__super__.dispose.call(this))},makeCell:function(e,t){var i=e.get("footerCell")||t.footerCell||this.footerCell;return new i({column:e,collection:this.collection,rowName:this.options.rowName})}})}),define("orodatagrid/js/datagrid/footer",["underscore","backbone","backgrid","./footer/footer-row","./footer/footer-cell"],function(e,t,i,n,o){var s;return s=i.Footer.extend({tagName:"tfoot",row:n,rows:[],footerCell:o,renderable:!1,initialize:function(n){var o;if(this.rows=[],!n.collection)throw new TypeError("'collection' is required");if(!n.columns)throw new TypeError("'columns' is required");this.columns=n.columns,this.columns instanceof t.Collection||(this.columns=new i.Columns(this.columns)),o=n.collection.state||{},o.totals&&Object.keys(o.totals).length&&(this.renderable=!0,e.each(o.totals,function(e,t){this.rows[this.rows.length]=new this.row({columns:this.columns,collection:this.collection,footerCell:this.footerCell,rowName:t})},this))},dispose:function(){this.disposed||(e.each(this.rows,function(e){e.dispose()}),delete this.rows,delete this.columns,s.__super__.dispose.call(this))},render:function(){return this.renderable&&e.each(this.rows,function(e){this.$el.append(e.render().$el)},this),this.delegateEvents(),this}})}),define("orodatagrid/js/datagrid/pagination",["jquery","underscore","backbone"],function(e,t,i){var n;return n=i.View.extend({windowSize:10,enabled:!0,hidden:!1,template:"#template-datagrid-toolbar-pagination",events:{"click a":"onChangePage"},fastForwardHandleConfig:{prev:{label:"Prev",wrapClass:"icon-chevron-left hide-text"},next:{label:"Next",wrapClass:"icon-chevron-right hide-text"}},initialize:function(i){if(i=i||{},!i.collection)throw new TypeError("'collection' is required");this.collection=i.collection,this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"reset",this.render),this.hidden=1==i.hide,this.template=t.template(e(i.template||this.template).html()),n.__super__.initialize.call(this,i)},disable:function(){return this.enabled=!1,this.render(),this},enable:function(){return this.enabled=!0,this.render(),this},onChangePage:function(i){if(i.preventDefault(),this.enabled){var n=e.trim(e(i.target).text()),o=this.fastForwardHandleConfig,s=this.collection,r=s.state;if(o){var a=t.has(o.prev,"label")?o.prev.label:void 0,l=t.has(o.next,"label")?o.next.label:void 0;switch(n){case a:return s.hasPrevious()&&s.getPreviousPage(),void 0;case l:return s.hasNext()&&s.getNextPage(),void 0}}var c=1*e(i.target).text()-r.firstPage;s.getPage(0===r.firstPage?c:c+1)}},makeHandles:function(e){e=e||[];var i=this.collection,n=i.state,o=n.lastPage?n.lastPage:n.firstPage;o=0===n.firstPage?o:o-1;var s=0===n.firstPage?n.currentPage:n.currentPage-1,r=Math.floor(s/this.windowSize)*this.windowSize,a=r+this.windowSize;if(a=o>=a?a:o+1,"infinite"!==i.mode)for(var l=r;a>l;l++)e.push({label:l+1,title:"No. "+(l+1),className:s===l?"active":void 0});var c=this.fastForwardHandleConfig;return c.prev&&e.unshift({label:t.has(c.prev,"label")?c.prev.label:void 0,wrapClass:t.has(c.prev,"wrapClass")?c.prev.wrapClass:void 0,className:i.hasPrevious()?void 0:"disabled"}),c.next&&e.push({label:t.has(c.next,"label")?c.next.label:void 0,wrapClass:t.has(c.next,"wrapClass")?c.next.wrapClass:void 0,className:i.hasNext()?void 0:"disabled"}),e},render:function(){var t=this.collection.state;return null==t.totalRecords?this:(this.$el.empty(),this.$el.append(e(this.template({disabled:!this.enabled||!t.totalRecords,handles:this.makeHandles(),state:t}))),this.hidden&&this.$el.hide(),this)}})}),define("orodatagrid/js/datagrid/pagination-input",["jquery","underscore","./pagination","jquery.numeric"],function(e,t,i){var n;return n=i.extend({template:"#template-datagrid-toolbar-pagination-input",events:{"click a":"onChangePage","blur input":"onChangePageByInput","change input":"onChangePageByInput","keyup input":function(e){13===e.which&&this.onChangePageByInput(e)}},windowSize:0,onChangePageByInput:function(i){i.preventDefault();var n=parseInt(e(i.target).val(),10),o=this.collection,s=o.state;return t.isNaN(n)?(e(i.target).val(s.currentPage),void 0):(n=0==s.firstPage?n-1:n,n<s.firstPage?(n=s.firstPage,e(i.target).val(0==s.firstPage?s.firstPage+1:s.firstPage)):s.lastPage<=n&&(n=s.lastPage,e(i.target).val(0==s.firstPage?s.lastPage+1:s.lastPage)),s.currentPage!==n&&o.getPage(n),void 0)},makeHandles:function(){var e=[];return e.push({type:"input"}),n.__super__.makeHandles.call(this,e)},render:function(){return n.__super__.render.apply(this,arguments),this.$("input").numeric({decimal:!1,negative:!1}),this}})}),define("orodatagrid/js/datagrid/page-size",["jquery","underscore","backbone"],function(e,t,i){var n;return n=i.View.extend({template:"#template-datagrid-toolbar-page-size",events:{"click a":"onChangePageSize"},items:[10,25,50,100],enabled:!0,hidden:!1,initialize:function(i){if(i=i||{},!i.collection)throw new TypeError("'collection' is required");i.items&&(this.items=i.items),this.template=t.template(e(i.template||this.template).html()),this.collection=i.collection,this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"reset",this.render),this.enabled=0!=i.enable,this.hidden=1==i.hide,n.__super__.initialize.call(this,i)},disable:function(){return this.enabled=!1,this.render(),this},enable:function(){return this.enabled=!0,this.render(),this},onChangePageSize:function(t){t.preventDefault();var i=parseInt(e(t.target).data("size"),10);i!==this.collection.state.pageSize&&this.changePageSize(i)},changePageSize:function(e){return this.collection.state.pageSize=e,this.collection.fetch({reset:!0}),this},render:function(){this.$el.empty();var i=t.filter(this.items,t.bind(function(e){return void 0===e.size?this.collection.state.pageSize==e:this.collection.state.pageSize==e.size},this));return i=void 0==i[0].label?i[0]:i[0].label,this.$el.append(e(this.template({disabled:!this.enabled||!this.collection.state.totalRecords,collectionState:this.collection.state,items:this.items,currentSizeLabel:i}))),this.hidden&&this.$el.hide(),this}})}),define("orodatagrid/js/datagrid/toolbar",["underscore","backbone","orotranslation/js/translator","./pagination-input","./page-size","./actions-panel"],function(e,t,i,n,o,s){var r,a;return r=t.$,a=t.View.extend({template:"#template-datagrid-toolbar",pagination:n,pageSize:o,actionsPanel:s,extraActionsPanel:s,initialize:function(t){if(t=t||{},!t.collection)throw new TypeError("'collection' is required");this.collection=t.collection,this.subviews={pagination:new this.pagination(e.defaults({collection:this.collection},t.pagination)),pageSize:new this.pageSize(e.defaults({collection:this.collection},t.pageSize)),actionsPanel:new this.actionsPanel(e.extend({},t.actionsPanel)),extraActionsPanel:new this.extraActionsPanel},t.actions&&this.subviews.actionsPanel.setActions(t.actions),t.extraActions&&this.subviews.extraActionsPanel.setActions(t.extraActions),e.has(t,"enable")&&!t.enable&&this.disable(),(t.hide||this.collection.state.hideToolbar)&&this.hide(),this.template=e.template(r(t.template||this.template).html()),a.__super__.initialize.call(this,t)
},enable:function(){return this.subviews.pagination.enable(),this.subviews.pageSize.enable(),this.subviews.actionsPanel.enable(),this.subviews.extraActionsPanel.enable(),this},disable:function(){return this.subviews.pagination.disable(),this.subviews.pageSize.disable(),this.subviews.actionsPanel.disable(),this.subviews.extraActionsPanel.disable(),this},hide:function(){return this.$el.hide(),this},render:function(){var e;return this.$el.empty(),this.$el.append(this.template()),e=this.subviews.pagination.render().$el,e.attr("class",this.$(".pagination").attr("class")),this.$(".pagination").replaceWith(e),this.$(".page-size").append(this.subviews.pageSize.render().$el),this.$(".actions-panel").append(this.subviews.actionsPanel.render().$el),this.subviews.extraActionsPanel.haveActions()?this.$(".extra-actions-panel").append(this.subviews.extraActionsPanel.render().$el):this.$(".extra-actions-panel").hide(),this}})}),define("orodatagrid/js/datagrid/header-cell/select-all-header-cell",["underscore","backgrid","backbone"],function(e,t,i){var n,o;return n=i.$,o=i.View.extend({className:"select-all-header-cell",tagName:"th",events:{click:"onClick"},template:"#template-select-all-header-cell",initialize:function(e){t.requireOptions(e,["column","collection"]),this.column=e.column,this.column instanceof t.Column||(this.column=new t.Column(this.column)),this.initialState(),this.listenTo(this.collection,{remove:this.removeModel,updateState:this.initialState,"backgrid:selected":this.selectModel,"backgrid:selectAll":this.selectAll,"backgrid:selectAllVisible":this.selectAllVisible,"backgrid:selectNone":this.selectNone,"backgrid:isSelected":this.isSelected,"backgrid:getSelected":this.getSelected})},dispose:function(){this.disposed||(delete this.selectedModels,delete this.column,o.__super__.dispose.apply(this,arguments))},initialState:function(t){this.selectedModels={},this.inset=e.isUndefined(t)?!0:t,this.updateState()},updateState:function(){var t=this.$(":checkbox");e.isEmpty(this.selectedModels)?(t.prop("indeterminate",!1),t.prop("checked",!this.inset)):(t.prop("indeterminate",!0),t.prop("checked",!1))},getSelectionState:function(){return{selectedModels:this.selectedModels,inset:this.inset}},isSelectedModel:function(t){return this.inset===e.has(this.selectedModels,t.id||t.cid)},removeModel:function(e){delete this.selectedModels[e.id||e.cid],this.updateState()},selectModel:function(e,t){t===this.inset?(this.selectedModels[e.id||e.cid]=e,this.updateState()):this.removeModel(e)},selectAll:function(){this.initialState(!1),this._markSelected(!0)},selectNone:function(){this.initialState(),this._markSelected(!1)},selectAllVisible:function(){this.inset||this.initialState(),this._markSelected(!0)},_markSelected:function(e){this.collection.each(function(t){t.trigger("backgrid:select",t,e)})},render:function(){return this.$el.html(e.template(n(this.template).text())),this},onClick:function(t){var i=n(t.target);i.is("[data-select]")?(this.inset&&e.isEmpty(this.selectedModels)===this.inset?this.selectAll():this.selectNone(),i.is(":checkbox")&&t.stopPropagation()):i.is("[data-select-all]")?(this.selectAll(),t.preventDefault()):i.is("[data-select-all-visible]")?(this.selectAllVisible(),t.preventDefault()):i.is("[data-select-none]")&&(this.selectNone(),t.preventDefault())},isSelected:function(e,t){n.isPlainObject(t)&&(t.selected=this.isSelectedModel(e))},getSelected:function(t){n.isEmptyObject(t)&&(t.selected=e.keys(this.selectedModels),t.inset=this.inset)}})}),define("orodatagrid/js/datagrid/grid",["require","jquery","underscore","backgrid","orotranslation/js/translator","oroui/js/mediator","oroui/js/loading-mask","./header","./body","./footer","./toolbar","./column/action-column","oro/datagrid/cell/select-row-cell","./header-cell/select-all-header-cell","oro/datagrid/action/refresh-collection-action","oro/datagrid/action/reset-collection-action","oro/datagrid/action/export-action"],function(e){var t,i=e("jquery"),n=e("underscore"),o=e("backgrid"),s=e("orotranslation/js/translator"),r=e("oroui/js/mediator"),a=e("oroui/js/loading-mask"),l=e("./header"),c=e("./body"),d=e("./footer"),h=e("./toolbar"),u=e("./column/action-column"),p=e("oro/datagrid/cell/select-row-cell"),f=e("./header-cell/select-all-header-cell"),m=e("oro/datagrid/action/refresh-collection-action"),g=e("oro/datagrid/action/reset-collection-action"),v=e("oro/datagrid/action/export-action");return t=o.Grid.extend({name:"datagrid",tagName:"div",requestsCount:0,className:"clearfix",template:n.template('<div class="toolbar"></div><div class="container-fluid grid-container-parent"><div class="grid-container"><table class="grid table-hover table table-bordered table-condensed"></table><div class="no-data"></div></div><div class="loading-mask"></div></div>'),noDataTemplate:n.template("<span><%= hint %><span>"),selectors:{grid:".grid",toolbar:".toolbar",noDataBlock:".no-data",loadingMask:".loading-mask",filterBox:".filter-box"},header:l,body:c,footer:d,toolbar:h,loadingMask:a,actionsColumn:u,noColumnsFlag:!1,defaults:{rowClickActionClass:"row-click-action",rowClassName:"",toolbarOptions:{addResetAction:!0,addRefreshAction:!0},rowClickAction:void 0,multipleSorting:!0,rowActions:[],massActions:[]},initialize:function(e){var i=e||{};if(this.subviews=[],!i.collection)throw new TypeError("'collection' is required");if(this.collection=i.collection,!i.columns)throw new TypeError("'columns' is required");0===i.columns.length&&(this.noColumnsFlag=!0),n.extend(this,this.defaults,i),this.toolbarOptions={},n.extend(this.toolbarOptions,this.defaults.toolbarOptions,i.toolbarOptions),this.exportOptions={},n.extend(this.exportOptions,i.exportOptions),this.collection.multipleSorting=this.multipleSorting,this._initRowActions(),this.rowClickAction&&(i.rowClassName=this.rowClickActionClass+" "+this.rowClassName),i.columns.push(this._createActionsColumn()),i.multiSelectRowEnabled&&i.columns.unshift(this._createSelectRowColumn()),this.loadingMask=this._createLoadingMask(),this.toolbar=this._createToolbar(this.toolbarOptions),t.__super__.initialize.apply(this,arguments),this._listenToCollectionEvents(),this._listenToBodyEvents(),this._listenToCommands()},dispose:function(){var e;this.disposed||(n.each(this.columns.models,function(e){e.dispose()}),this.columns.dispose(),delete this.columns,delete this.refreshAction,delete this.resetAction,delete this.exportAction,e=["header","body","footer","toolbar","loadingMask"],n.each(e,function(e){this[e].dispose(),delete this[e]},this),t.__super__.dispose.call(this))},_initRowActions:function(){this.rowClickAction||(this.rowClickAction=n.find(this.rowActions,function(e){return Boolean(e.prototype.rowAction)}))},_createActionsColumn:function(){var e;return e=new this.actionsColumn({datagrid:this,actions:this.rowActions,massActions:this.massActions})},_createSelectRowColumn:function(){var e;return e=new o.Column({name:"massAction",label:s("Selected Rows"),renderable:!0,sortable:!1,editable:!1,cell:p,headerCell:f})},getSelectionState:function(){var e=this.header.row.cells[0];return e.getSelectionState()},resetSelectionState:function(){this.collection.trigger("backgrid:selectNone")},_createLoadingMask:function(){return new this.loadingMask},_createToolbar:function(e){var t,i;return t={collection:this.collection,actions:this._getToolbarActions(),extraActions:this._getToolbarExtraActions()},n.defaults(t,e),i=new this.toolbar(t)},_getToolbarActions:function(){var e=[];return this.toolbarOptions.addRefreshAction&&e.push(this.getRefreshAction()),this.toolbarOptions.addResetAction&&e.push(this.getResetAction()),e},_getToolbarExtraActions:function(){var e=[];return n.isEmpty(this.exportOptions)||e.push(this.getExportAction()),e},getRefreshAction:function(){return this.refreshAction||(this.refreshAction=new m({datagrid:this,launcherOptions:{label:s("oro_datagrid.action.refresh"),className:"btn",iconClassName:"icon-refresh"}}),this.listenTo(r,"datagrid:doRefresh:"+this.name,function(){this.$el.is(":visible")&&this.refreshAction.execute()}),this.listenTo(this.refreshAction,"preExecute",function(e,t){this.$el.trigger("preExecute:refresh:"+this.name,[e,t])})),this.refreshAction},getResetAction:function(){return this.resetAction||(this.resetAction=new g({datagrid:this,launcherOptions:{label:s("oro_datagrid.action.reset"),className:"btn",iconClassName:"icon-repeat"}}),this.listenTo(r,"datagrid:doReset:"+this.name,function(){this.$el.is(":visible")&&this.resetAction.execute()}),this.listenTo(this.resetAction,"preExecute",function(e,t){this.$el.trigger("preExecute:reset:"+this.name,[e,t])})),this.resetAction},getExportAction:function(){if(!this.exportAction){var e=[];n.each(this.exportOptions,function(t,i){e.push({key:i,label:t.label,attributes:{"class":"no-hash",download:null}})}),this.exportAction=new v({datagrid:this,launcherOptions:{label:s("oro.datagrid.extension.export.label"),title:s("oro.datagrid.extension.export.tooltip"),className:"btn",iconClassName:"icon-download-alt",links:e}}),this.listenTo(this.exportAction,"preExecute",function(e,t){this.$el.trigger("preExecute:export:"+this.name,[e,t])})}return this.exportAction},_listenToCollectionEvents:function(){this.listenTo(this.collection,"request",function(e,t){this._beforeRequest();var i=this,n=t.always;t.always=function(){n.apply(this,arguments),i._afterRequest()}}),this.listenTo(this.collection,"remove",this._onRemove),this.listenTo(this.collection,"change",function(e){this.$el.trigger("datagrid:change:"+this.name,e)})},_listenToBodyEvents:function(){this.listenTo(this.body,"rowClicked",function(e){this.trigger("rowClicked",this,e),this._runRowClickAction(e)})},_runRowClickAction:function(e){var t,i;this.rowClickAction&&(t=new this.rowClickAction({datagrid:this,model:e.model}),this.subviews.push(t),i=e.model.get("action_configuration"),i&&i[t.name]===!1||t.run())},_listenToCommands:function(){this.listenTo(r,"datagrid:setParam:"+this.name,function(e,t){this.setAdditionalParameter(e,t)}),this.listenTo(r,"datagrid:restoreState:"+this.name,function(e,t,i,o){this.collection.each(function(s){-1!==n.indexOf(i,s.get(t))&&s.set(e,!0),-1!==n.indexOf(o,s.get(t))&&s.set(e,!1)})})},render:function(){return this.$el.empty(),this.$el.append(this.template()),this.renderToolbar(),this.renderGrid(),this.renderNoDataBlock(),this.renderLoadingMask(),this.listenTo(this.collection,"reset",this.renderNoDataBlock),this.trigger("rendered"),r.trigger("grid_render:complete",this.$el),this},renderGrid:function(){var e=this.$(this.selectors.grid);e.append(this.header.render().$el),this.footer&&e.append(this.footer.render().$el),e.append(this.body.render().$el),r.trigger("grid_load:complete",this.collection,e)},renderToolbar:function(){this.$(this.selectors.toolbar).append(this.toolbar.render().$el)},renderLoadingMask:function(){this.$(this.selectors.loadingMask).append(this.loadingMask.render().$el),this.loadingMask.hide()},_defineNoDataBlock:function(){var e={entityHint:(this.entityHint||s("oro.datagrid.entityHint")).toLowerCase()},t=n.isEmpty(this.collection.state.filters)?"oro.datagrid.no.entities":"oro.datagrid.no.results";t=this.noColumnsFlag?"oro.datagrid.no.columns":t,this.$(this.selectors.noDataBlock).html(i(this.noDataTemplate({hint:s(t,e).replace("\n","<br />")}))).hide()},_beforeRequest:function(){this.requestsCount+=1,this.showLoading()},_afterRequest:function(){this.requestsCount-=1,0===this.requestsCount&&(this.hideLoading(),r.trigger("grid_load:complete",this.collection,this.$el))},showLoading:function(){this.loadingMask.show(),this.toolbar.disable(),this.trigger("disable")},hideLoading:function(){this.loadingMask.hide(),this.toolbar.enable(),this.trigger("enable")},renderNoDataBlock:function(){this._defineNoDataBlock(),this.collection.models.length>0&&!this.noColumnsFlag?(this.$(this.selectors.toolbar).show(),this.$(this.selectors.grid).show(),this.$(this.selectors.filterBox).show(),this.$(this.selectors.noDataBlock).hide()):(this.$(this.selectors.grid).hide(),this.$(this.selectors.toolbar).hide(),this.$(this.selectors.filterBox).hide(),this.$(this.selectors.noDataBlock).show())},_onRemove:function(e){r.trigger("datagrid:beforeRemoveRow:"+this.name,e),this.collection.fetch({reset:!0}),r.trigger("datagrid:afterRemoveRow:"+this.name)},setAdditionalParameter:function(e,t){var i=this.collection.state;n.has(i,"parameters")||(i.parameters={}),i.parameters[e]=t},removeAdditionalParameter:function(e){var t=this.collection.state;n.has(t,"parameters")&&delete t.parameters[e]}})}),define("orodatagrid/js/datagrid/grid-views/model",["backbone","underscore"],function(e,t){var i;return i=e.Model.extend({idAttribute:"name",defaults:{filters:[],sorters:[]},directions:{ASC:"-1",DESC:"1"},initialize:function(e){if(!e.name)throw new TypeError("'name' is required");t.each(e.sorters,t.bind(function(t,i){e.sorters[i]=this.directions[t]},this))},toGridState:function(){return{filters:this.get("filters"),sorters:this.get("sorters"),gridView:this.get("name")}}})}),define("orodatagrid/js/datagrid/grid-views/collection",["backbone","./model"],function(e,t){var i;return i=e.Collection.extend({model:t})}),define("orodatagrid/js/datagrid/grid-views/view",["backbone","underscore","orotranslation/js/translator","./collection"],function(e,t,i,n){var o,s;return o=e.$,s=e.View.extend({className:"btn-group grid-views",events:{"click a":"onChange"},template:t.template('<button data-toggle="dropdown" class="btn dropdown-toggle <% if (disabled) { %>disabled<% } %>"><%=  current %><span class="caret"></span></button><ul class="dropdown-menu pull-right"><% _.each(choices, function (choice) { %><li><a href="#" data-value="<%= choice.value %>"><%= choice.label %></a></li><% }); %></ul>'),enabled:!0,choices:[],viewsCollection:n,initialize:function(e){if(e=e||{},!e.collection)throw new TypeError("'collection' is required");e.choices&&(this.choices=t.union(this.choices,e.choices)),this.collection=e.collection,this.enabled=0!=e.enable,this.listenTo(this.collection,"updateState",this.render),this.listenTo(this.collection,"beforeFetch",this.render),e.views=e.views||[],this.viewsCollection=new this.viewsCollection(e.views),s.__super__.initialize.call(this,e)},dispose:function(){this.disposed||(this.viewsCollection.dispose(),delete this.viewsCollection,s.__super__.dispose.call(this))},disable:function(){return this.enabled=!1,this.render(),this},enable:function(){return this.enabled=!0,this.render(),this},onChange:function(e){e.preventDefault();var t=o(e.target).data("value");t!==this.collection.state.gridView&&this.changeView(t)},changeView:function(e){var i,n;return i=this.viewsCollection.get(e),i&&(n=t.extend({},this.collection.initialState,i.toGridState()),this.collection.updateState(n),this.collection.fetch({reset:!0})),this},render:function(){var e,n,o;return this.$el.empty(),this.choices.length>0&&(e=t.filter(this.choices,function(e){return e.value==this.collection.state.gridView},this),n=e.length?t.first(e).label:i("Please select view"),o=this.template({disabled:!this.enabled,choices:this.choices,current:n}),this.$el.append(o)),this}})}),define("orodatagrid/js/grid-views-builder",["require","jquery","underscore","orodatagrid/js/datagrid/grid-views/view"],function(e){var t,i,n=e("jquery"),o=e("underscore"),s=e("orodatagrid/js/datagrid/grid-views/view");return i=".page-title > .navbar-extra .pull-left-extra",t={init:function(e,i){var n={metadata:o.defaults(i.metadata,{gridViews:{}})};i.gridPromise.done(function(i){var o=t.build.call(n,i.collection);e.resolve(o)}).fail(function(){e.reject()})},build:function(e){var r,a;return r=t.combineGridViewsOptions.call(this),n.isEmptyObject(r)||(a=new s(o.extend({collection:e},r)),n(i).append(a.render().$el)),a},combineGridViewsOptions:function(){return this.metadata.gridViews}}}),define("orodatagrid/js/totals-builder",["jquery","underscore","oroui/js/mediator"],function(){var e=function(e){e.on("beforeReset",function(e,t){e.state.totals=t.options.totals})};return{init:function(t,i){i.gridPromise.done(function(i){e(i.collection),t.resolve()}).fail(function(){t.reject()})}}}),define("orodatagrid/js/datagrid/listener/abstract-listener",["underscore","jquery","backbone"],function(e,t,i){var n;return n=i.Model.extend({columnName:"id",dataField:"id",initialize:function(t){if(!e.has(t,"columnName"))throw new Error("Data column name is not specified");if(this.columnName=t.columnName,t.dataField&&(this.dataField=t.dataField),n.__super__.initialize.apply(this,arguments),!t.$gridContainer)throw new Error("gridSelector is not specified");this.$gridContainer=t.$gridContainer,this.gridName=t.gridName,this.setDatagridAndSubscribe()},dispose:function(){this.disposed||(this.$gridContainer.off(this.gridEvents),delete this.$gridContainer,delete this.gridEvents,n.__super__.dispose.call(this))},setDatagridAndSubscribe:function(){this.gridEvents=this.getGridEvents(),this.$gridContainer.on(this.gridEvents)},getGridEvents:function(){var t={};return t["datagrid:change:"+this.gridName]=e.bind(this._onModelEdited,this),t},_onModelEdited:function(t,i){if(i.hasChanged(this.columnName)){var n=i.get(this.dataField);e.isUndefined(n)||this._processValue(n,i)}},_processValue:function(){throw new Error("_processValue method is abstract and must be implemented")}})}),define("orodatagrid/js/datagrid/listener/column-form-listener",["jquery","underscore","orotranslation/js/translator","oroui/js/mediator","oroui/js/modal","./abstract-listener"],function(e,t,i,n,o,s){var r;return r=s.extend({selectors:{included:null,excluded:null},initialize:function(e){if(!t.has(e,"selectors"))throw new Error("Field selectors is not specified");this.selectors=e.selectors,this.confirmModal={},r.__super__.initialize.apply(this,arguments)},dispose:function(){this.disposed||(t.each(this.confirmModal,function(e){e.dispose()}),delete this.confirmModal,r.__super__.dispose.call(this))},setDatagridAndSubscribe:function(){r.__super__.setDatagridAndSubscribe.apply(this,arguments),this._clearState(),this._restoreState(),n.bind("pagestate_restored",function(){this._restoreState()},this)},getGridEvents:function(){var e=r.__super__.getGridEvents.call(this);return e["preExecute:refresh:"+this.gridName]=t.bind(this._onExecuteRefreshAction,this),e["preExecute:reset:"+this.gridName]=t.bind(this._onExecuteResetAction,this),e},_processValue:function(e,i){var n,o=this.get("original"),s=this.get("included"),r=this.get("excluded"),a=i.get(this.columnName);t.has(o,e)?n=o[e]:(n=!a,o[e]=n),a?(s=n?t.without(s,[e]):t.union(s,[e]),r=t.without(r,e)):(s=t.without(s,e),r=n?t.union(r,[e]):t.without(r,[e])),this.set("included",s),this.set("excluded",r),this.set("original",o),this._synchronizeState()},_clearState:function(){this.set("included",[]),this.set("excluded",[]),this.set("original",{})},_synchronizeState:function(){var t=this.get("included"),i=this.get("excluded");this.selectors.included&&e(this.selectors.included).val(t.join(",")),this.selectors.excluded&&e(this.selectors.excluded).val(i.join(",")),n.trigger("datagrid:setParam:"+this.gridName,"data_in",t),n.trigger("datagrid:setParam:"+this.gridName,"data_not_in",i)},_explode:function(e){return e?t.map(e.split(","),function(e){return e?parseInt(e,10):null}):[]},_restoreState:function(){var t="",i="";this.selectors.included&&e(this.selectors.included).length&&(t=this._explode(e(this.selectors.included).val()),this.set("included",t)),this.selectors.excluded&&e(this.selectors.excluded).length&&(i=this._explode(e(this.selectors.excluded).val()),this.set("excluded",i)),(t||i)&&(n.trigger("datagrid:setParam:"+this.gridName,"data_in",t),n.trigger("datagrid:setParam:"+this.gridName,"data_not_in",i),n.trigger("datagrid:restoreState:"+this.gridName,this.columnName,this.dataField,t,i))},_onExecuteRefreshAction:function(e,t,n){this._confirmAction(t,n,"refresh",{title:i("Refresh Confirmation"),content:i("Your local changes will be lost. Are you sure you want to refresh grid?")})},_onExecuteResetAction:function(e,t,n){this._confirmAction(t,n,"reset",{title:i("Reset Confirmation"),content:i("Your local changes will be lost. Are you sure you want to reset grid?")})},_confirmAction:function(e,t,i,n){this.confirmed=this.confirmed||{},!this.confirmed[i]&&this._hasChanges()&&(t.doExecute=!1,this._openConfirmDialog(i,n,function(){this.confirmed[i]=!0,this._clearState(),this._synchronizeState(),e.run()})),this.confirmed[i]=!1},_hasChanges:function(){return!t.isEmpty(this.get("included"))||!t.isEmpty(this.get("excluded"))},_openConfirmDialog:function(e,n,s){this.confirmModal[e]||(this.confirmModal[e]=new o(t.extend({title:i("Confirmation"),okText:i("Ok, got it."),className:"modal modal-primary",okButtonClass:"btn-primary btn-large"},n)),this.confirmModal[e].on("ok",t.bind(s,this))),this.confirmModal[e].open()}}),r.init=function(e,i){var n,o;n=i.metadata.options||{},o=i.gridPromise;var s=n.rowSelection||n.columnListener;s?o.done(function(i){var n,o;o=t.defaults({$gridContainer:i.$el,gridName:i.name},s),n=new r(o),e.resolve(n)}).fail(function(){e.reject()}):e.reject()},r}),define("orodatagrid/js/datagrid/listener/callback-listener",["underscore","./abstract-listener"],function(e,t){var i;return i=t.extend({processCallback:null,initialize:function(t){if(!e.has(t,"processCallback"))throw new Error("Process callback is not specified");this.processCallback=t.processCallback,i.__super__.initialize.apply(this,arguments)},_processValue:function(e,t){this.processCallback(e,t,this)}})}),define("orodatagrid/js/map-action-module-name",[],function(){var e="oro/datagrid/action/{{type}}-action";return function(t){return e.replace("{{type}}",t)}}),define("orodatagrid/js/map-cell-module-name",[],function(){var e="oro/datagrid/cell/{{type}}-cell",t={integer:"number",decimal:"number",percent:"number",currency:"number"};return function(i){return e.replace("{{type}}",t[i]||i)}}),define("orodatagrid/js/content-manager",["underscore","backbone","oroui/js/mediator","oroui/js/tools"],function(e,t,i,n){function o(t){var i=e.pick(t,e.keys(c));return i=n.invertKeys(i,c),n.packToQueryString(i)}function s(e){return"grid["+e+"]"}function r(e){var t;return t=o(e.state),t===o(e.initialState)&&(t=null),t}function a(e){var t,n,o;t=e.inputName,n=s(t),o=r(e),i.execute("pageCache:state:save",n,e.clone(),o)}var l,c;return c={currentPage:"i",pageSize:"p",sorters:"s",filters:"f",gridView:"v"},l={get:function(e){var t,n,o,a;return t=s(e),n=i.execute("pageCache:state:fetch",t),n&&(o=r(n),a=i.execute("pageCache:state:check",t,o),n=a?n.clone():void 0),n},trace:function(e){a(e),l.listenTo(e,"beforeReset",a),i.once("page:beforeChange",function(){l.stopListening(e)})}},e.extend(l,t.Events),l}),define("orodatagrid/js/app/components/datagrid-component",["require","jquery","underscore","oroui/js/tools","oroui/js/mediator","oroui/js/app/components/base/component","orodatagrid/js/pageable-collection","orodatagrid/js/datagrid/grid","orodatagrid/js/map-action-module-name","orodatagrid/js/map-cell-module-name","orodatagrid/js/content-manager"],function(e){function t(e,t,i){if(!r.has(i,"init")||!s.isFunction(i.init))throw e.resolve(),new TypeError("Builder does not have init method");r.defer(r.bind(i.init,i),e,t)}var i,n,o,s=e("jquery"),r=e("underscore"),a=e("oroui/js/tools"),l=e("oroui/js/mediator"),c=e("oroui/js/app/components/base/component"),d=e("orodatagrid/js/pageable-collection"),h=e("orodatagrid/js/datagrid/grid"),u=e("orodatagrid/js/map-action-module-name"),p=e("orodatagrid/js/map-cell-module-name"),f=e("orodatagrid/js/content-manager");return o=window.document,n={cellType:function(e){return e+"Cell"},actionType:function(e){return e+"Action"}},i=c.extend({initialize:function(i){var n,o;o=this,this.defer=s.Deferred(),this.built=s.Deferred(),i=i||{},this.processOptions(i),this.initDataGrid(i),n=[this.built.promise()],r.each(i.builders,function(o){var a=s.Deferred();n.push(a.promise()),e([o],r.partial(t,a,i))}),s.when.apply(s,n).always(function(){s(i.el).html(i.$el.children()),o.subComponents=r.compact(arguments),o.defer.resolve(o)})},processOptions:function(e){e.$el=s(o.createDocumentFragment()),e.gridName=e.gridName||e.metadata.options.gridName,e.builders=e.builders||[],e.builders.push("orodatagrid/js/grid-views-builder"),e.gridPromise=this.built.promise()},initDataGrid:function(e){this.$el=e.$el,this.gridName=e.gridName,this.data=e.data,this.metadata=r.defaults(e.metadata,{columns:[],options:{},state:{},rowActions:{},massActions:{}}),this.modules={},this.collectModules(),a.loadModules(this.modules,this.build,this)},collectModules:function(){var e=this.modules,t=this.metadata;r.each(t.columns,function(t){var i=t.type;e[n.cellType(i)]=p(i)}),r.each(r.values(t.rowActions),function(t){var i=t.frontend_type;e[n.actionType(i)]=u(i)}),r.each(r.values(t.massActions),function(t){var i=t.frontend_type;e[n.actionType(i)]=u(i)})},build:function(){var e,t,i,n,o;n=this.gridName,i=f.get(n),i||(t=this.combineCollectionOptions(),i=new d(this.data,t)),e=this.combineGridOptions(),l.trigger("datagrid_create_before",e,i),o=new h(r.extend({collection:i},e)),this.grid=o,this.$el.append(o.render().$el),l.trigger("datagrid:rendered"),e.routerEnabled!==!1&&f.trace(i),this.built.resolve(o)},combineCollectionOptions:function(){return r.extend({inputName:this.gridName,parse:!0,url:"/user/json",state:r.extend({filters:{},sorters:{}},this.metadata.state),initialState:this.metadata.initialState||{}},this.metadata.options)},combineGridOptions:function(){var e,t={},i={},o={sortable:!1},s=this.modules,a=this.metadata;return e=r.map(a.columns,function(e){var t=["name","label","renderable","editable","sortable","align"],i=r.extend({},o,r.pick.apply(null,[e].concat(t))),a=r.omit.apply(null,[e].concat(t.concat("type"))),l=s[n.cellType(e.type)];return r.isEmpty(a)||(l=l.extend(a)),i.cell=l,i}),r.each(a.rowActions,function(e,i){t[i]=s[n.actionType(e.frontend_type)].extend(e)}),r.each(a.massActions,function(e,t){i[t]=s[n.actionType(e.frontend_type)].extend(e)}),{name:this.gridName,columns:e,rowActions:t,massActions:i,toolbarOptions:a.options.toolbarOptions||{},multipleSorting:a.options.multipleSorting||!1,entityHint:a.options.entityHint,exportOptions:a.options.export||{},routerEnabled:r.isUndefined(a.options.routerEnabled)?!0:a.options.routerEnabled,multiSelectRowEnabled:a.options.multiSelectRowEnabled||!r.isEmpty(i)}}})}),define("oroembeddedform/js/embedded-form-watcher",["jquery","backbone","routing","oroui/js/mediator","orotranslation/js/translator","oroui/js/delete-confirmation"],function(e,t,i,n,o,s){function r(e,t){return!(e===p&&t===f)}function a(){if(m)return m=!1,void 0;var e=c.val();if(!r(d.val(),h.val()))return l(e),void 0;var t=new s({title:o("embedded_form.confirm_box.title"),okText:o("embedded_form.confirm_box.ok_text"),content:o("embedded_form.confirm_box.content")});t.on("ok",function(){l(e)}),t.on("cancel",function(){m=!0,c.val(u).trigger("change")}),t.open()}function l(t){if(t){n.execute("showLoading");var o=i.generate("oro_embedded_form_default_data",{formType:t});e.get(o).done(function(e){d.val(e.css),h.val(e.successMessage),p=e.css,f=e.successMessage,u=t}).always(function(){n.execute("hideLoading")})}}var c,d,h,u,p,f,m;return t.View.extend({initialize:function(t){c=e("#"+t.formTypeFieldId),d=e("#"+t.cssFieldId),h=e("#"+t.successMessageFieldId),u=c.val(),p=t.defaultCss,f=t.defaultSuccessMessage,m=!1},startWatching:function(e){c.change(a),!0===e&&c.trigger("change")}})}),require(["jquery","underscore","orotranslation/js/translator","oroui/js/modal","oroui/js/mediator","routing"],function(e,t,i,n,o,s){e(function(){e(document).on("click",".entity-extend-apply",function(){function t(){var t,c,d;t=e(r).data("url"),d=e("#progressbar").clone(),d.removeAttr("id").find("h3").remove(),c=new n({allowCancel:!1,title:a,content:l}),c.open(),c.$el.find(".modal-footer").html(d),d.show(),e.post(t,function(){o.once("page:beforeChange",function(){c.close()}),o.once("page:afterChange",function(){o.execute("showFlashMessage","success",i("oro.entity_extend.schema_updated"))}),o.execute("redirectTo",{url:s.generate("oro_entityconfig_index",{_enableContentProviders:"mainMenu"})})}).fail(function(){c.close(),o.execute("showFlashMessage","error",i("oro.entity_extend.schema_update_failed"))})}var r=e(this),a=(r.data("message"),i("Schema update confirmation")),l="<p>"+i("Your config changes will be applied to schema.")+"</p>"+"</p>"+i("It may take few minutes...")+"</p>",c=new n({allowCancel:!0,cancelText:i("Cancel"),okText:i("Yes, Proceed"),title:a,content:l});return c.on("ok",t),c.open(),!1})})}),define("oroentityextend/js/init-entity-extend-apply",function(){}),require(["jquery","routing"],function(e,t){e(function(){e(document).on("change","form select.extend-rel-target-name",function(){var i=e(this),n=i.find("option:selected").attr("value").replace(/\\/g,"_"),o=t.generate.apply(t,["oro_entityconfig_field_search",{id:n}]),s=e("form select.extend-rel-target-field");return e(s).each(function(t,i){var n="undefined"!=typeof e(i).attr("multiple")&&e(i).attr("multiple")!==!1;n?e(i).empty().append('<option value="">Loading...</option>'):e(i).prev("span").text("loading...")}),e.getJSON(o,function(t){e(s).each(function(i,n){var o=[];e.each(t,function(e,t){o.push("<option value='"+e+"'>"+t+"</option>")}),e(n).empty().append(o.join("")),e(n).prev("span").text("Please choice target field...")})}),!1})})}),define("oroentityextend/js/init-entity-extend-relation",function(){}),define("oro/datagrid/action/merge-mass-action",["underscore","orotranslation/js/translator","oro/datagrid/action/mass-action","oroui/js/messenger"],function(e,t,i,n){var o;return o=i.extend({initialize:function(){o.__super__.initialize.apply(this,arguments),this.on("preExecute",this.onPreExecute,this)},onPreExecute:function(e,i){var o,s,r,a,l,c;c=this.max_element_count,o=this.datagrid.getSelectionState(),s=o.inset,r=Object.keys(o.selectedModels).length,s||(a=this.datagrid.collection.state.totalRecords,r=a-r),r>c&&(i.doExecute=!1,l=t("oro.entity_merge.mass_action.validation.maximum_records_error",{number:c}),n.notificationFlashMessage("error",l)),2>r&&(i.doExecute=!1,n.notificationFlashMessage("error",t("oro.entity_merge.mass_action.validation.minimum_records_error",{number:c})))}})}),define("oroentitymerge/js/merge-view",["jquery"],function(e){return{entitySelectAllHandler:function(){var t=e(this).data("entity-key");e('.entity-merge-field-choice[value="'+t+'"]').click()},entityValueSelectHandler:function(t){t.stopImmediatePropagation();var i=e(this),n=i.attr("name"),o=i.val();e('.merge-entity-representative[data-entity-field-name="'+n+'"]').each(function(t,i){var n=e(i);n.data("entity-key")!=o?n.addClass("entity-merge-not-selected"):n.removeClass("entity-merge-not-selected")})},resetViewState:function(){e('input[type="radio"]:checked').click()},fixTableWidth:function(){var t=e(".entity-merge-column"),i=e(".merge-first-column"),n=parseInt(i.css("width")),o=parseInt(e(".entity-merge-table").css("width")),s=(o-n)/t.length;t.css("width",s)},columnClickHandler:function(){e(this).find(".entity-merge-field-choice").click()},init:function(){e(".entity-merge-select-all").click(this.entitySelectAllHandler),e(".entity-merge-field-choice").click(this.entityValueSelectHandler),e(document).ready(this.fixTableWidth),e(window).resize(this.fixTableWidth),e(".entity-merge-decision-container").click(this.columnClickHandler),this.resetViewState()}}}),define("oroui/js/dropdown-mask",["jquery"],function(e){function t(){i=e("<div></div>"),i.attr("id","oro-dropdown-mask").attr("class","oro-dropdown-mask"),i.hide(),i.appendTo("body"),i.on("mousedown touchstart click",function(e){e.preventDefault(),e.stopPropagation(),i.hide(),n&&n()})}var i,n;return{show:function(){return i||t(),i.show(),{onhide:function(e){n=e}}},hide:function(){i&&(i.hide(),n=null)}}}),function(e){var t=0,i=e(document);e.widget("ech.multiselect",{options:{header:!0,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:null,hide:null,autoOpen:!1,multiple:!0,position:{},appendTo:"body"},_create:function(){var i=this.element.hide(),n=this.options;
this.speed=e.fx.speeds._default,this._isOpen=!1,this._namespaceID=this.eventNamespace||"multiselect"+t;var o=(this.button=e('<button type="button"><span class="ui-icon ui-icon-triangle-1-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(n.classes).attr({title:i.attr("title"),"aria-haspopup":!0,tabIndex:i.attr("tabIndex")}).insertAfter(i),s=((this.buttonlabel=e("<span />")).html(n.noneSelectedText).appendTo(o),(this.menu=e("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(n.classes).appendTo(e(n.appendTo))),r=(this.header=e("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(s);(this.headerLinkContainer=e("<ul />")).addClass("ui-helper-reset").html(function(){return n.header===!0?'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+n.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+n.uncheckAllText+"</span></a></li>":"string"==typeof n.header?"<li>"+n.header+"</li>":""}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(r),(this.checkboxContainer=e("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(s),this._bindEvents(),this.refresh(!0),n.multiple||s.addClass("ui-multiselect-single"),t++},_init:function(){this.options.header===!1&&this.header.hide(),this.options.multiple||this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide(),this.options.autoOpen&&this.open(),this.element.is(":disabled")&&this.disable()},refresh:function(i){var n=this.element,o=this.options,s=this.menu,r=this.checkboxContainer,a=[],l="",c=n.attr("id")||t++;n.find("option").each(function(t){e(this);var i,n=this.parentNode,s=this.innerHTML,r=this.title,d=this.value,h="ui-multiselect-"+(this.id||c+"-option-"+t),u=this.disabled,p=this.selected,f=["ui-corner-all"],m=(u?"ui-multiselect-disabled ":" ")+this.className;"OPTGROUP"===n.tagName&&(i=n.getAttribute("label"),-1===e.inArray(i,a)&&(l+='<li class="ui-multiselect-optgroup-label '+n.className+'"><a href="#">'+i+"</a></li>",a.push(i))),u&&f.push("ui-state-disabled"),p&&!o.multiple&&f.push("ui-state-active"),l+='<li class="'+m+'">',l+='<label for="'+h+'" title="'+r+'" class="'+f.join(" ")+'">',l+='<input id="'+h+'" name="multiselect_'+c+'" type="'+(o.multiple?"checkbox":"radio")+'" value="'+d+'" title="'+r+'"',p&&(l+=' checked="checked"',l+=' aria-selected="true"'),u&&(l+=' disabled="disabled"',l+=' aria-disabled="true"'),l+=" /><span>"+s+"</span></label></li>"}),r.html(l),this.labels=s.find("label"),this.inputs=this.labels.children("input"),this._setButtonWidth(),this._setMenuWidth(),this.button[0].defaultValue=this.update(),i||this._trigger("refresh")},update:function(){var t,i=this.options,n=this.inputs,o=n.filter(":checked"),s=o.length;return t=0===s?i.noneSelectedText:e.isFunction(i.selectedText)?i.selectedText.call(this,s,n.length,o.get()):/\d/.test(i.selectedList)&&i.selectedList>0&&s<=i.selectedList?o.map(function(){return e(this).next().html()}).get().join(", "):i.selectedText.replace("#",s).replace("#",n.length),this._setButtonValue(t),t},_setButtonValue:function(e){this.buttonlabel.text(e)},_bindEvents:function(){function t(){return n[n._isOpen?"close":"open"](),!1}var n=this,o=this.button;o.find("span").bind("click.multiselect",t),o.bind({click:t,keypress:function(e){switch(e.which){case 27:case 38:case 37:n.close();break;case 39:case 40:n.open()}},mouseenter:function(){o.hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},mouseleave:function(){e(this).removeClass("ui-state-hover")},focus:function(){o.hasClass("ui-state-disabled")||e(this).addClass("ui-state-focus")},blur:function(){e(this).removeClass("ui-state-focus")}}),this.header.delegate("a","click.multiselect",function(t){e(this).hasClass("ui-multiselect-close")?n.close():n[e(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"](),t.preventDefault()}),this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(t){t.preventDefault();var i=e(this),o=i.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),s=o.get(),r=i.parent().text();n._trigger("beforeoptgrouptoggle",t,{inputs:s,label:r})!==!1&&(n._toggleChecked(o.filter(":checked").length!==o.length,o),n._trigger("optgrouptoggle",t,{inputs:s,label:r,checked:s[0].checked}))}).delegate("label","mouseenter.multiselect",function(){e(this).hasClass("ui-state-disabled")||(n.labels.removeClass("ui-state-hover"),e(this).addClass("ui-state-hover").find("input").focus())}).delegate("label","keydown.multiselect",function(t){switch(t.preventDefault(),t.which){case 9:case 27:n.close();break;case 38:case 40:case 37:case 39:n._traverse(t.which,this);break;case 13:e(this).find("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(t){var i=e(this),o=this.value,s=this.checked,r=n.element.find("option");return this.disabled||n._trigger("click",t,{value:o,text:this.title,checked:s})===!1?(t.preventDefault(),void 0):(i.focus(),i.attr("aria-selected",s),r.each(function(){this.value===o?this.selected=s:n.options.multiple||(this.selected=!1)}),n.options.multiple||(n.labels.removeClass("ui-state-active"),i.closest("label").toggleClass("ui-state-active",s),n.close()),n.element.trigger("change"),setTimeout(e.proxy(n.update,n),10),void 0)}),i.bind("mousedown."+this._namespaceID,function(t){var i=t.target;!n._isOpen||i===n.button[0]||i===n.menu[0]||e.contains(n.menu[0],i)||e.contains(n.button[0],i)||n.close()}),e(this.element[0].form).bind("reset.multiselect",function(){setTimeout(e.proxy(n.refresh,n),10)})},_setButtonWidth:function(){var e=this.element.outerWidth(),t=this.options;/\d/.test(t.minWidth)&&e<t.minWidth&&(e=t.minWidth),this.button.outerWidth(e)},_setMenuWidth:function(){var e=this.menu;e.outerWidth(this.button.outerWidth())},_traverse:function(t,i){var n=e(i),o=38===t||37===t,s=n.parent()[o?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)").first();if(s.length)s.find("label").trigger("mouseover");else{var r=this.menu.find("ul").last();this.menu.find("label")[o?"last":"first"]().trigger("mouseover"),r.scrollTop(o?r.height():0)}},_toggleState:function(e,t){return function(){this.disabled||(this[e]=t),t?this.setAttribute("aria-selected",!0):this.removeAttribute("aria-selected")}},_toggleChecked:function(t,i){var n=i&&i.length?i:this.inputs,o=this;n.each(this._toggleState("checked",t)),n.eq(0).focus(),this.update();var s=n.map(function(){return this.value}).get();this.element.find("option").each(function(){!this.disabled&&e.inArray(this.value,s)>-1&&o._toggleState("selected",t).call(this)}),n.length&&this.element.trigger("change")},_toggleDisabled:function(t){this.button.attr({disabled:t,"aria-disabled":t})[t?"addClass":"removeClass"]("ui-state-disabled");var i=this.menu.find("input"),n="ech-multiselect-disabled";i=t?i.filter(":enabled").data(n,!0):i.filter(function(){return e.data(this,n)===!0}).removeData(n),i.attr({disabled:t,"arial-disabled":t}).parent()[t?"addClass":"removeClass"]("ui-state-disabled"),this.element.attr({disabled:t,"aria-disabled":t})},open:function(){var t=this,i=this.button,n=this.menu,o=this.speed,s=this.options,r=[];if(this._trigger("beforeopen")!==!1&&!i.hasClass("ui-state-disabled")&&!this._isOpen){var a=n.find("ul").last(),l=s.show;e.isArray(s.show)&&(l=s.show[0],o=s.show[1]||t.speed),l&&(r=[l,o]),a.scrollTop(0).height(s.height),this.position(),e.fn.show.apply(n,r),this.labels.filter(":not(.ui-state-disabled)").eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus"),i.addClass("ui-state-active"),this._isOpen=!0,this._trigger("open")}},close:function(){if(this._trigger("beforeclose")!==!1){var t=this.options,i=t.hide,n=this.speed,o=[];e.isArray(t.hide)&&(i=t.hide[0],n=t.hide[1]||this.speed),i&&(o=[i,n]),e.fn.hide.apply(this.menu,o),this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave"),this._isOpen=!1,this._trigger("close")}},enable:function(){this._toggleDisabled(!1)},disable:function(){this._toggleDisabled(!0)},checkAll:function(){this._toggleChecked(!0),this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(!1),this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){return e.Widget.prototype.destroy.call(this),i.unbind(this._namespaceID),this.button.remove(),this.menu.remove(),this.element.show(),this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},getButton:function(){return this.button},position:function(){var t=this.options;if(e.ui.position&&!e.isEmptyObject(t.position))t.position.of=t.position.of||this.button,this.menu.show().position(t.position).hide();else{var i=this.button.offset();this.menu.css({top:i.top+this.button.outerHeight(),left:i.left})}},_setOption:function(t,i){var n=this.menu;switch(t){case"header":n.find("div.ui-multiselect-header")[i?"show":"hide"]();break;case"checkAllText":n.find("a.ui-multiselect-all span").eq(-1).text(i);break;case"uncheckAllText":n.find("a.ui-multiselect-none span").eq(-1).text(i);break;case"height":n.find("ul").last().height(parseInt(i,10));break;case"minWidth":this.options[t]=parseInt(i,10),this._setButtonWidth(),this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[t]=i,this.update();break;case"classes":n.add(this.button).removeClass(this.options.classes).addClass(i);break;case"multiple":n.toggleClass("ui-multiselect-single",!i),this.options.multiple=i,this.element[0].multiple=i,this.refresh();break;case"position":this.position()}e.Widget.prototype._setOption.apply(this,arguments)}})}(jQuery),define("jquery.multiselect",["jquery-ui"],function(){}),define("orofilter/js/extend/multiselect",["jquery","oroui/js/dropdown-mask","jquery-ui","jquery.multiselect"],function(e,t){e.widget("orofilter.multiselect",e.ech.multiselect,{open:function(){this._superApply(arguments),t.show().onhide(e.proxy(this.close,this))},close:function(){t.hide(),this._superApply(arguments)},updatePos:function(){var e=this.menu.is(":visible");this.position(),e&&this.menu.show()}}),e.widget("ech.multiselect",e.orofilter.multiselect,{})}),function(e){var t=/[\-\[\]{}()*+?.,\\\^$|#\s]/g;e.widget("ech.multiselectfilter",{options:{label:"Filter:",width:null,placeholder:"Enter keywords",autoReset:!1},_create:function(){var t=this.options,i=e(this.element),n=this.instance=i.data("echMultiselect")||i.data("multiselect")||i.data("ech-multiselect");this.header=n.menu.find(".ui-multiselect-header").addClass("ui-multiselect-hasfilter");var o=this.wrapper=e('<div class="ui-multiselect-filter">'+(t.label.length?t.label:"")+'<input placeholder="'+t.placeholder+'" type="search"'+(/\d/.test(t.width)?'style="width:'+t.width+'px"':"")+" /></div>").prependTo(this.header);this.inputs=n.menu.find('input[type="checkbox"], input[type="radio"]'),this.input=o.find("input").bind({keydown:function(e){13===e.which&&e.preventDefault()},keyup:e.proxy(this._handler,this),click:e.proxy(this._handler,this)}),this.updateCache(),n._toggleChecked=function(t,i){var o=i&&i.length?i:this.labels.find("input"),s=this,r=n._isOpen?":disabled, :hidden":":disabled";o=o.not(r).each(this._toggleState("checked",t)),this.update();var a=o.map(function(){return this.value}).get();this.element.find("option").filter(function(){!this.disabled&&e.inArray(this.value,a)>-1&&s._toggleState("selected",t).call(this)}),o.length&&this.element.trigger("change")};var s=e(document).bind("multiselectrefresh",e.proxy(function(){this.updateCache(),this._handler()},this));this.options.autoReset&&s.bind("multiselectclose",e.proxy(this._reset,this))},_handler:function(i){var n=e.trim(this.input[0].value.toLowerCase()),o=this.rows,s=this.inputs,r=this.cache;if(n){o.hide();var a=new RegExp(n.replace(t,"\\$&"),"gi");this._trigger("filter",i,e.map(r,function(e,t){return-1!==e.search(a)?(o.eq(t).show(),s.get(t)):null}))}else o.show();this.instance.menu.find(".ui-multiselect-optgroup-label").each(function(){var t=e(this),i=t.nextUntil(".ui-multiselect-optgroup-label").filter(function(){return"none"!==e.css(this,"display")}).length;t[i?"show":"hide"]()})},_reset:function(){this.input.val("").trigger("keyup")},updateCache:function(){this.rows=this.instance.menu.find(".ui-multiselect-checkboxes li:not(.ui-multiselect-optgroup-label)"),this.cache=this.element.children().map(function(){var t=e(this);return"optgroup"===this.tagName.toLowerCase()&&(t=t.children()),t.map(function(){return this.innerHTML.toLowerCase()}).get()}).get()},widget:function(){return this.wrapper},destroy:function(){e.Widget.prototype.destroy.call(this),this.input.val("").trigger("keyup"),this.wrapper.remove()}})}(jQuery),define("jquery.multiselect.filter",["jquery.multiselect"],function(){}),define("orofilter/js/extend/multiselect-filter",["jquery","jquery-ui","jquery.multiselect.filter"],function(e){e.widget("ech.multiselectfilter",e.ech.multiselectfilter,{_create:function(){var t=this.options,i=e(this.element),n=this.instance=i.data("echMultiselect")||i.data("multiselect")||i.data("ech-multiselect");this.header=n.menu.find(".ui-multiselect-header").addClass("ui-multiselect-hasfilter");var o=this.wrapper=e('<div class="ui-multiselect-filter">'+(t.label.length?t.label:"")+'<input placeholder="'+t.placeholder+'" type="search"'+(/\d/.test(t.width)?'style="width:'+t.width+'px"':"")+" /></div>").prependTo(this.header);this.inputs=n.menu.find('input[type="checkbox"], input[type="radio"]'),this.input=o.find("input").bind({keydown:function(e){13===e.which&&e.preventDefault()},keyup:e.proxy(this._handler,this),click:e.proxy(this._handler,this)}),this.updateCache(),n._toggleChecked=function(t,i){var o=i&&i.length?i:this.labels.find("input"),s=this,r=n._isOpen?":disabled, :hidden":":disabled";o=o.not(r).each(this._toggleState("checked",t)),this.update();var a=o.map(function(){return this.value}).get();this.element.find("option").filter(function(){!this.disabled&&e.inArray(this.value,a)>-1&&s._toggleState("selected",t).call(this)}),o.length&&this.element.trigger("change")};var s=e(document).bind("multiselectrefresh"+this.eventNamespace,e.proxy(function(){this.updateCache(),this._handler()},this));this.options.autoReset&&s.bind("multiselectclose"+this.eventNamespace,e.proxy(this._reset,this))},_destroy:function(){e(document).off(this.eventNamespace),this._super()}})}),define("oro/filter/abstract-filter",["jquery","underscore","orotranslation/js/translator","backbone","oroui/js/tools"],function(e,t,i,n,o){var s;return s=n.View.extend({template:"",templateSelector:"",templateTheme:"",canDisable:!0,enabled:!1,defaultEnabled:!1,name:"input_name",placeholder:i("All"),label:i("Input Label"),showLabel:!0,buttonActiveClass:"open-filter",nullLink:"javascript:void(0);",initialize:function(e){var i=t.pick(e||{},"enabled","canDisable","placeholder","showLabel","label","templateSelector","templateTheme");t.extend(this,i),this._defineTemplate(),this.defaultEnabled=this.enabled,t.isUndefined(this.emptyValue)&&(this.emptyValue={}),this.value=o.deepClone(this.emptyValue),s.__super__.initialize.apply(this,arguments)},dispose:function(){this.disposed||(delete this.value,delete this.emptyValue,s.__super__.dispose.call(this))},enable:function(){return this.enabled||(this.enabled=!0,this.show(),this.trigger("enable",this)),this},disable:function(){return this.enabled&&(this.enabled=!1,this.hide(),this.trigger("disable",this),this.reset()),this},show:function(){return this.$el.css("display","inline-block"),this},hide:function(){return this.$el.hide(),this},reset:function(){return this.setValue(this.emptyValue),this},getValue:function(){return o.deepClone(this.value)},setValue:function(e){if(!o.isEqualsLoosely(this.value,e)){var t=this.value;this.value=o.deepClone(e),this._updateDOMValue(),this._onValueUpdated(this.value,t)}return this},_formatRawValue:function(e){return e},_formatDisplayValue:function(e){return e},_onValueUpdated:function(e,t){this._triggerUpdate(e,t)},_onClickResetFilter:function(e){e.stopPropagation(),this.reset()},_triggerUpdate:function(){this.trigger("update")},isEmpty:function(){return o.isEqualsLoosely(this.getValue(),this.emptyValue)},isEmptyValue:function(){return t.has(this.emptyValue,"value")&&t.has(this.value,"value")?o.isEqualsLoosely(this.value.value,this.emptyValue.value):!0},_getInputValue:function(t){var i=void 0,n=this.$(t);switch(n.attr("type")){case"radio":n.each(function(){e(this).is(":checked")&&(i=e(this).val())});break;default:i=n.val()}return i},_setInputValue:function(t,i){var n=this.$(t);switch(n.attr("type")){case"radio":n.each(function(){var t=e(this);t.attr("value")==i?(t.attr("checked",!0),t.click()):e(this).removeAttr("checked")});break;default:n.val(i)}return this},_updateDOMValue:function(){return this._writeDOMValue(this._getDisplayValue())},_getCriteriaHint:function(){return""},_getDisplayValue:function(){var e=arguments.length>0?arguments[0]:this.getValue();return this._formatDisplayValue(e)},_writeDOMValue:function(){throw new Error("Method _writeDOMValue is abstract and must be implemented")},_readDOMValue:function(){throw new Error("Method _readDOMValue is abstract and must be implemented")},_setButtonPressed:function(e,t){t?e.parent().addClass(this.buttonActiveClass):e.parent().removeClass(this.buttonActiveClass)},_preventEnterProcessing:function(e){13==e.keyCode&&(e.preventDefault(),e.stopPropagation())},applyValue:function(){this.setValue(this._formatRawValue(this._readDOMValue()))},_defineTemplate:function(){this.template=this._getTemplate(this.templateSelector)},_getTemplate:function(i){var n=this.templateTheme,o=n&&e(i+"-"+n).text()||e(i).text();return t.template(o)}})}),define("oro/filter/empty-filter",["jquery","underscore","oroui/js/tools","./abstract-filter"],function(e,t,i,n){var o;return o=n.extend({emptyOption:"filter_empty_option",notEmptyOption:"filter_not_empty_option",query:null,revertQuery:!1,updateSelector:".filter-update",updateSelectorEmptyClass:"filter-update-empty",setValue:function(e){var t=this.value;return this.value=i.deepClone(e),this._updateDOMValue(),this._onValueUpdated(this.value,t),this},_onClickChoiceValue:function(t){e(t.currentTarget).parent().parent().find("li").each(function(){e(this).removeClass("active")}),e(t.currentTarget).parent().addClass("active");var i=e(t.currentTarget).parent().parent().parent(),n=e(t.currentTarget).attr("data-value"),o=e(t.currentTarget).html();i.find(this.criteriaValueSelectors.type).val(n).trigger("change"),o+='<span class="caret"></span>',i.find(".dropdown-toggle").html(o),this._handleEmptyFilter(n),t.preventDefault()},_onClickCriteriaSelector:function(t){t.stopPropagation(),e("body").trigger("click"),this.popupCriteriaShowed?this._hideCriteria():this._showCriteria(),this._handleEmptyFilter()},_handleEmptyFilter:function(){var e=this.$(this.criteriaSelector),t=e.find(this.criteriaValueSelectors.value),i=e.find(this.criteriaValueSelectors.type).val(),n=e.find(this.updateSelector);if(this.isEmptyType(i)){var o=t.val();return this.isEmptyType(o)||(this.query=o,this.revertQuery=!0),t.hide().val(i),n.addClass(this.updateSelectorEmptyClass),void 0}this.revertQuery&&(t.val(this.query),this.query=null,this.revertQuery=!1),n.removeClass(this.updateSelectorEmptyClass),t.show()},isEmptyValue:function(){return this.isEmptyType(this.value.type)?!1:t.has(this.emptyValue,"value")&&t.has(this.value,"value")?i.isEqualsLoosely(this.value.value,this.emptyValue.value):!0},isEmptyType:function(e){return t.contains([this.emptyOption,this.notEmptyOption],e)}})}),define("oro/filter/text-filter",["jquery","underscore","orotranslation/js/translator","./empty-filter"],function(e,t,i,n){var o;return o=n.extend({wrappable:!0,wrapperTemplate:"",wrapperTemplateSelector:"#filter-wrapper-template",templateSelector:"#text-filter-template",criteriaHintSelector:".filter-criteria-hint",criteriaSelector:".filter-criteria",limitCriteriaTo:"#container",criteriaValueSelectors:{value:'input[name="value"]',nested:{end:"input"}},events:{"keyup input":"_onReadCriteriaInputKey",'keydown [type="text"]':"_preventEnterProcessing","click .filter-update":"_onClickUpdateCriteria","click .filter-criteria-selector":"_onClickCriteriaSelector","click .filter-criteria .filter-criteria-hide":"_onClickCloseCriteria","click .disable-filter":"_onClickDisableFilter","click .reset-filter":"_onClickResetFilter"},initialize:function(){t.isUndefined(this.emptyValue)&&(this.emptyValue={value:""}),o.__super__.initialize.apply(this,arguments)},ensurePopupCriteriaClosed:function(){this.popupCriteriaShowed&&(this._hideCriteria(),this.applyValue())},_onReadCriteriaInputKey:function(e){13===e.which&&(this._hideCriteria(),this.applyValue())},_onClickUpdateCriteria:function(){this._hideCriteria(),this.applyValue()},_onClickCloseCriteria:function(){this._hideCriteria(),this._updateDOMValue()},_onClickDisableFilter:function(e){e.preventDefault(),this.disable()},_onClickOutsideCriteria:function(e){var t=this.$(this.criteriaSelector);t.get(0)===e.target||t.has(e.target).length||(this._hideCriteria(),this.applyValue(),e.stopPropagation())},render:function(){var t=e(this.template());return this._wrap(t),this},_wrap:function(e){this._appendFilter(e)},_appendFilter:function(e){this.$el.append(e)},_showCriteria:function(){this.$(this.criteriaSelector).show(),this._alignCriteria(),this._focusCriteria(),this._setButtonPressed(this.$(this.criteriaSelector),!0),setTimeout(t.bind(function(){this.popupCriteriaShowed=!0},this),100)},_alignCriteria:function(){var t=e(this.limitCriteriaTo),i=this.$(this.criteriaSelector),n=t.prop("clientWidth")+t.offset().left-this.$el.offset().left-i.outerWidth();i.css("margin-left",0>n?n:0)},_hideCriteria:function(){this.$(this.criteriaSelector).hide(),this._setButtonPressed(this.$(this.criteriaSelector),!1),setTimeout(t.bind(function(){this.popupCriteriaShowed=!1},this),100)},_focusCriteria:function(){this.$(this.criteriaSelector+" input").focus().select()},_writeDOMValue:function(e){return this._setInputValue(this.criteriaValueSelectors.value,e.value),this},_readDOMValue:function(){return{value:this._getInputValue(this.criteriaValueSelectors.value)}},_onValueUpdated:function(){o.__super__._onValueUpdated.apply(this,arguments),this._updateCriteriaHint()},_updateCriteriaHint:function(){return this.$(this.criteriaHintSelector).html(t.escape(this._getCriteriaHint())).closest(".filter-criteria-selector").toggleClass("filter-default-value",this.isEmptyValue()),this},_getCriteriaHint:function(){var e=arguments.length>0?this._getDisplayValue(arguments[0]):this._getDisplayValue();return e.value?'"'+e.value+'"':this.placeholder}})}),define("oro/filter/choice-filter",["jquery","underscore","orotranslation/js/translator","oroui/js/tools","./text-filter"],function(e,t,i,n,o){var s;return s=o.extend({templateSelector:"#choice-filter-template",criteriaValueSelectors:{value:'input[name="value"]',type:'input[type="hidden"]'},wrapHintValue:!0,events:{"keyup input":"_onReadCriteriaInputKey",'keydown [type="text"]':"_preventEnterProcessing","click .filter-update":"_onClickUpdateCriteria","click .filter-criteria-selector":"_onClickCriteriaSelector","click .filter-criteria .filter-criteria-hide":"_onClickCloseCriteria","click .disable-filter":"_onClickDisableFilter","click .choice-value":"_onClickChoiceValue","click .reset-filter":"_onClickResetFilter"},initialize:function(i){var n=t.pick(i||{},"choices");t.extend(this,n),t.isUndefined(this.choices)&&(this.choices=[]),e.isPlainObject(this.choices)&&(this.choices=t.map(this.choices,function(e,t){return{value:t.toString(),label:e}})),t.isUndefined(this.emptyValue)&&(this.emptyValue={type:t.isEmpty(this.choices)?"":t.first(this.choices).value,value:""}),s.__super__.initialize.apply(this,arguments)},dispose:function(){this.disposed||(delete this.choices,delete this.emptyValue,s.__super__.dispose.call(this))},render:function(){return this._wrap(""),""===this.$el.html()&&this._renderCriteria(),this},_renderCriteria:function(){var i=t.extend({},this.emptyValue,this.value),n="";if(!t.isEmpty(this.choices)){var o=t.find(this.choices,function(e){return e.value==i.type});n=o.label}var s=e(this.template({name:this.name,choices:this.choices,selectedChoice:i.type,selectedChoiceLabel:n,value:i.value}));this._appendFilter(s),this._criteriaRenderd=!0},_showCriteria:function(){this._criteriaRenderd||this._renderCriteria(),s.__super__._showCriteria.apply(this,arguments)},_getCriteriaHint:function(){var e=arguments.length>0?this._getDisplayValue(arguments[0]):this._getDisplayValue(),i=null;if(!t.isUndefined(e.type)){var n=e.type;if(i=this._getChoiceOption(n),this.isEmptyType(n))return i?i.label:this.placeholder}if(!e.value)return this.placeholder;var o=this.wrapHintValue?'"'+e.value+'"':e.value;return(i?i.label+" ":"")+o},_getChoiceOption:function(e){return t.findWhere(this.choices,{value:e.toString()})},_writeDOMValue:function(e){return this._setInputValue(this.criteriaValueSelectors.value,e.value),this._setInputValue(this.criteriaValueSelectors.type,e.type),this},_readDOMValue:function(){return{value:this._getInputValue(this.criteriaValueSelectors.value),type:this._getInputValue(this.criteriaValueSelectors.type)}},_triggerUpdate:function(e,t){n.isEqualsLoosely(e,t)||this.trigger("update")},_onValueUpdated:function(t,i){var n=this.$(".choice-filter .dropdown-menu");n.find("li a").each(function(){var o=e(this);o.data("value")==i.type&&o.parent().hasClass("active")?o.parent().removeClass("active"):o.data("value")!=t.type||o.parent().hasClass("active")||(o.parent().addClass("active"),n.parent().find("button").html(o.html()+'<span class="caret"></span>'))}),s.__super__._onValueUpdated.apply(this,arguments)}})}),define("orofilter/js/datevariables-widget",["jquery","underscore","orotranslation/js/translator","oroui/js/layout","jquery-ui"],function(e,t,i,n){return e.widget("orofilter.dateVariables",{options:{$input:null,value:null,part:"value",dateParts:null,dateVars:null,tooltipTemplate:'<i class="icon-info-sign" data-content="<%- content %>" data-placement="top" data-toggle="popover" data-original-title="<%- title %>"></i>',htmlTemplate:'<div class="ui-datevariables-div <%- attributes %>"><b><%- title %></b><%= tooltipHTML %><ul><% _.each(dateVars, function(dateVariable, varCode) { %><li><a class="ui_date_variable" href="#" data-code="<%- varCode %>"><%- dateVariable %></a></li><% }); %></ul></div>'},_create:function(){this.render()},_destroy:function(){this.widget().find(".ui-datevariables-div a.ui_date_variable").off()},setPart:function(e){this.options.part=e,this.render()},onSelectVar:function(e){var t=e.target.text;this.options.$input.val(t),this.options.$input.trigger("change"),e.preventDefault()},render:function(){var o=this.options,s=o.part,r=this._getVariablesByPart(s),a=t.template(o.tooltipTemplate),l=t.template(o.htmlTemplate),c=e(l({attributes:"",title:i("oro.filter.date.variable.title"),tooltipHTML:a({content:i("oro.filter.date.variable.tooltip"),title:i("oro.filter.date.variable.tooltip_title")}),dateVars:r})),d=this.widget();d.empty().append(c),n.initPopover(d),d.find(".ui-datevariables-div a.ui_date_variable").click(t.bind(this.onSelectVar,this))},_getVariablesByPart:function(e){var t=this.options.dateVars;return t[e]?t[e]:t.value}}),e}),define("oro/filter/date-filter",["jquery","underscore","orotranslation/js/translator","./choice-filter","orolocale/js/locale-settings","orofilter/js/datevariables-widget"],function(e,t,i,n,o){var s;return s=n.extend({templateSelector:"#date-filter-template",fieldTemplateSelector:"#select-field-template",dropdownTemplateSelector:"#date-filter-dropdown-template",criteriaValueSelectors:{type:"select[name!=date_part]",part:"select[name=date_part]",value:{start:'input[name="start"]',end:'input[name="end"]'}},inputClass:"date-visual-element",dateWidgetOptions:{changeMonth:!0,changeYear:!0,yearRange:"-80:+1",dateFormat:o.getVendorDateTimeFormat("jquery_ui","date","mm/dd/yy"),altFormat:"yy-mm-dd",className:"date-filter-widget",showButtonPanel:!0},externalWidgetOptions:{},typeValues:{between:1,notBetween:2,moreThan:3,lessThan:4},defaultTabs:[{name:"calendar",label:"oro.filter.date.tab.calendar"},{name:"variables",label:"oro.filter.date.tab.variables"}],dateWidgetSelector:"div#ui-datepicker-div.ui-datepicker",dateParts:[],hasPartsElement:!1,initialize:function(){if(t.extend(this.dateWidgetOptions,this.externalWidgetOptions),this.hasPartsElement=""!=this.templateTheme,t.isUndefined(this.emptyValue)&&(this.emptyValue={type:t.isEmpty(this.choices)?"":t.first(this.choices).value,part:"value",value:{start:"",end:""}}),t.isUndefined(this.dateParts)&&(this.dateParts=[]),e.isPlainObject(this.dateParts)&&(this.dateParts=t.map(this.dateParts,function(e,t){return{value:t.toString(),label:e}})),t.isUndefined(this.emptyPart)){var i=t.first(this.dateParts).value;this.emptyPart={type:t.isEmpty(this.dateParts)?"":i,value:i}}this.dateWidgets={},s.__super__.initialize.apply(this,arguments)},dispose:function(){this.disposed||(delete this.dateParts,delete this.emptyPart,delete this.emptyValue,t.each(this.dateWidgets,function(e,t){"_vars"===t.slice(-5)?this._destroyDateVariablesWidget(t):this._destroyDateWidget(t),delete this.dateWidgets[t]},this),delete this.dateWidgets,s.__super__.dispose.call(this))},onChangeFilterType:function(e){var t=this.$el.find(e.currentTarget),i=t.val()||t.data("value");this.changeFilterType(i)},changeFilterType:function(e){this.dateWidgets.start_vars&&e.length>1&&(this.$el.find(this.criteriaValueSelectors.value.start).val(""),this.dateWidgets.start_vars.dateVariables("setPart",e)),this.dateWidgets.end_vars&&e.length>1&&(this.$el.find(this.criteriaValueSelectors.value.end).val(""),this.dateWidgets.end_vars.dateVariables("setPart",e)),e=parseInt(e,10),e===parseInt(e)&&this.$el.find(".filter-separator").show().end().find("input").show(),this.typeValues.moreThan===e?(this.$el.find(".filter-separator").hide(),this.$el.find(this.criteriaValueSelectors.value.end).val("").hide()):this.typeValues.lessThan===e&&(this.$el.find(".filter-separator").hide(),this.$el.find(this.criteriaValueSelectors.value.start).val("").hide())},_renderCriteria:function(){var i=t.extend({},this.emptyValue,this.getValue()),n={value:i.part,type:i.part},o=this._getSelectedChoiceLabel("choices",i),s=this._getSelectedChoiceLabel("dateParts",n);this.dateWidgetOptions.part=n.type;var r=this._getTemplate(this.fieldTemplateSelector),a=this._getTemplate(this.dropdownTemplateSelector),l=[];""!==this.templateTheme&&l.push(r({name:this.name+"_part",choices:this.dateParts,selectedChoice:i.part,selectedChoiceLabel:s})),l.push(r({name:this.name,choices:this.choices,selectedChoice:i.type,selectedChoiceLabel:o}));var c=this._formatDisplayValue(i),d=e(this.template({inputClass:this.inputClass,value:c,parts:l}));this._appendFilter(d),this.$(this.criteriaSelector).attr("tabindex","0"),this.changeFilterType(i.type),d.find("select:first").bind("change",t.bind(this.onChangeFilterType,this)),t.each(this.criteriaValueSelectors.value,t.bind(this._appendDropdown,this,a)),this._isDateVariable(c.value.start)||this.dateWidgets.start.datepicker("setDate",c.value.start),this._isDateVariable(c.value.end)||this.dateWidgets.end.datepicker("setDate",c.value.end),this.$(".nav-tabs a").click(function(t){t.preventDefault(),e(this).tab("show")}),this._criteriaRenderd=!0},_isDateVariable:function(e){var i,n;return n=this.dateWidgetOptions.dateVars,i=t.some(n.value,function(t,i){var n="{{"+i+"}}";return n===e.substr(0,n.length)||t===e.substr(0,t.length)})},_appendDropdown:function(e,n,o){var s,r=this.$el,a=this.$(n),l=a.wrap('<div class="dropdown datefilter">').parent(),c="-"+this.cid+"-"+o,d=t.extend({onSelect:function(e){a.val(e).trigger("change")
}},this.dateWidgetOptions),h=[];t.each(d.tabs||this.defaultTabs,function(e){var n=t.clone(e);n.label=i(n.label),h.push(n)}),a.after(e({tabs:h,suffix:c})),a.on("focus, click",function(){r.find(".dropdown.open").removeClass("open"),l.addClass("open"),s.datepicker("refresh")}),s=this.dateWidgets[o]=this._initializeDateWidget("#calendar"+c,d),s.addClass(d.className).click(function(e){e.stopImmediatePropagation()}),s.data("datepicker").inline=!1,s.datepicker("refresh"),s.on("click",".ui-datepicker-close",function(){l.removeClass("open")}),d=t.extend({$input:a},this.dateWidgetOptions),this.dateWidgets[o+"_vars"]=this._initializeDateVariablesWidget("#variables"+c,d)},_initializeDateWidget:function(e,t){return this.$(e).datepicker(t)},_destroyDateWidget:function(e){this.dateWidgets[e].datepicker("destroy")},_initializeDateVariablesWidget:function(e,t){this.$(e).dateVariables(t);var i=this.$(e).dateVariables("widget");return i.addClass(t.className),i},_destroyDateVariablesWidget:function(e){this.dateWidgets[e].dateVariables("destroy")},_getCriteriaHint:function(){var e,t,n,o,s="",r=arguments.length>0?this._getDisplayValue(arguments[0]):this._getDisplayValue();if(r.value){switch(t=r.value.start,n=r.value.end,o=r.type?r.type.toString():""){case this.typeValues.moreThan.toString():s+=[i("more than"),t].join(" ");break;case this.typeValues.lessThan.toString():s+=[i("less than"),n].join(" ");break;case this.typeValues.notBetween.toString():t&&n?(e=this._getChoiceOption(this.typeValues.notBetween),s+=[e.label,t,i("and"),n].join(" ")):t?s+=[i("before"),t].join(" "):n&&(s+=[i("after"),n].join(" "));break;case this.typeValues.between.toString():default:t&&n?(e=this._getChoiceOption(this.typeValues.between),s+=[e.label,t,i("and"),n].join(" ")):t?s+=[i("from"),t].join(" "):n&&(s+=[i("to"),n].join(" "))}if(s)return s}return this.placeholder},_formatDisplayValue:function(e){var t=this.dateWidgetOptions.altFormat,i=this.dateWidgetOptions.dateFormat;return e.value&&e.value.start&&(e.value.start=this._replaceDateVars(e.value.start,"display")),e.value&&e.value.end&&(e.value.end=this._replaceDateVars(e.value.end,"display")),this._formatValueDates(e,t,i)},_formatRawValue:function(e){var t=this.dateWidgetOptions.dateFormat,i=this.dateWidgetOptions.altFormat;return e.value&&e.value.start&&(e.value.start=this._replaceDateVars(e.value.start,"raw")),e.value&&e.value.end&&(e.value.end=this._replaceDateVars(e.value.end,"raw")),this._formatValueDates(e,t,i)},_formatValueDates:function(e,t,i){return e.value&&e.value.start&&(e.value.start=this._formatDate(e.value.start,t,i)),e.value&&e.value.end&&(e.value.end=this._formatDate(e.value.end,t,i)),e},_replaceDateVars:function(e,t){var i=this.dateWidgetOptions.dateVars;if("raw"==t){for(var n in i)if(i.hasOwnProperty(n))for(var o in i[n])i[n].hasOwnProperty(o)&&(e=e.replace(new RegExp(i[n][o],"g"),"{{"+o+"}}"))}else for(var n in i)if(i.hasOwnProperty(n))for(var o in i[n])i[n].hasOwnProperty(o)&&(e=e.replace(new RegExp("{+"+o+"}+","gi"),i[n][o]));return e},_formatDate:function(t,i,n){var o;return this._isDateVariable(t)?t:(o=e.datepicker.parseDate(i,t),o||(o=e.datepicker.parseDate(n,t))?e.datepicker.formatDate(n,o):"")},_writeDOMValue:function(e){return this._setInputValue(this.criteriaValueSelectors.value.start,e.value.start),this._setInputValue(this.criteriaValueSelectors.value.end,e.value.end),this._setInputValue(this.criteriaValueSelectors.type,e.type),e.part&&this._setInputValue(this.criteriaValueSelectors.part,e.part),this},_readDOMValue:function(){return{type:this._getInputValue(this.criteriaValueSelectors.type),part:this.hasPartsElement?this._getInputValue(this.criteriaValueSelectors.part):"value",value:{start:this._getInputValue(this.criteriaValueSelectors.value.start),end:this._getInputValue(this.criteriaValueSelectors.value.end)}}},_focusCriteria:function(){this.$(this.criteriaSelector).focus()},_hideCriteria:function(){s.__super__._hideCriteria.apply(this,arguments)},_getSelectedChoiceLabel:function(e,i){var n="";if(!t.isEmpty(this[e])){var o=t.find(this[e],function(e){return e.value==i.type});n=o.label}return n}})}),define("oro/filter/datetime-filter",["jquery","underscore","./date-filter","orolocale/js/locale-settings","jquery-ui-timepicker"],function(e,t,i,n){var o;return o=i.extend({inputClass:"datetime-visual-element",criteriaValueSelectors:{type:"select[name!=datetime_part]",part:"select[name=datetime_part]",value:{start:'input[name="start"]',end:'input[name="end"]'}},dateWidgetOptions:t.extend({timeFormat:n.getVendorDateTimeFormat("jquery_ui","time","HH:mm"),altFieldTimeOnly:!1,altSeparator:" ",altTimeFormat:"HH:mm"},i.prototype.dateWidgetOptions),_initializeDateWidget:function(t,i){return e.timepicker.log=function(){},this.$(t).datetimepicker(i)},_destroyDateWidget:function(e){this.dateWidgets[e].datetimepicker("destroy")},_formatDisplayValue:function(e){var t=this.dateWidgetOptions.altFormat,i=this.dateWidgetOptions.dateFormat,n=this.dateWidgetOptions.altTimeFormat,o=this.dateWidgetOptions.timeFormat;return e.value&&e.value.start&&(e.value.start=this._replaceDateVars(e.value.start,"display")),e.value&&e.value.end&&(e.value.end=this._replaceDateVars(e.value.end,"display")),this._formatValueDatetimes(e,t,i,n,o)},_formatRawValue:function(e){var t=this.dateWidgetOptions.dateFormat,i=this.dateWidgetOptions.altFormat,n=this.dateWidgetOptions.timeFormat,o=this.dateWidgetOptions.altTimeFormat;return e.value&&e.value.start&&(e.value.start=this._replaceDateVars(e.value.start,"raw")),e.value&&e.value.end&&(e.value.end=this._replaceDateVars(e.value.end,"raw")),this._formatValueDatetimes(e,t,i,n,o)},_formatValueDatetimes:function(e,t,i,n,o){return e.value&&e.value.start&&(e.value.start=this._formatDatetime(e.value.start,t,i,n,o),e.value.start=e.value.start.replace(/^\s+|\s+$/g,"")),e.value&&e.value.end&&(e.value.end=this._formatDatetime(e.value.end,t,i,n,o),e.value.end=e.value.end.replace(/^\s+|\s+$/g,"")),e},_formatDatetime:function(t,i,o,s,r){try{var a=this.dateWidgetOptions.altSeparator,l={timeFormat:s,separator:n.getDateTimeFormatSeparator()};i==this.dateWidgetOptions.altFormat&&(a=n.getDateTimeFormatSeparator(),l.separator=this.dateWidgetOptions.altSeparator);var c=e.datepicker.parseDateTime(i,s,t,{},l),d={hour:c.getHours(),minute:c.getMinutes(),second:c.getSeconds()};return e.datepicker.formatDate(o,c)+a+e.datepicker.formatTime(r,d)}catch(h){return t}},_formatTime:function(t,i,n){var o=e.datepicker.parseTime(i,t);return o||(o=e.datepicker.parseTime(n,t))?e.datepicker.formatTime(n,o):t}})}),define("orofilter/js/multiselect-decorator",["jquery","underscore","jquery.multiselect","jquery.multiselect.filter"],function(e,t){var i=function(e){this.initialize(e)};return i.prototype={element:null,parameters:{height:"auto"},contextSearch:!0,initialize:function(e){if(!e.element)throw new Error("Select element must be defined");this.element=e.element,t.has(e,"contextSearch")&&(this.contextSearch=e.contextSearch),e.parameters=e.parameters||{},t.defaults(e.parameters,this.parameters),this.multiselect(e.parameters),this.contextSearch&&this.multiselectfilter({label:"",placeholder:"",autoReset:!0})},dispose:function(){this.contextSearch&&this.multiselectfilter("destroy"),this.multiselect("destroy"),this.element.hide(),delete this.element},setViewDesign:function(e){e.$(".ui-multiselect").removeClass("ui-widget").removeClass("ui-state-default"),e.$(".ui-multiselect span.ui-icon").remove()},_setDropdownDesign:function(){var e=this.getWidget();e.addClass("dropdown-menu"),e.removeClass("ui-widget-content"),e.removeClass("ui-widget"),e.find(".ui-widget-header").removeClass("ui-widget-header"),e.find(".ui-multiselect-filter").removeClass("ui-multiselect-filter"),e.find("ul li label").removeClass("ui-corner-all")},onOpenDropdown:function(){this._setDropdownDesign(),this.getWidget().find('input[type="search"]').focus(),e("body").trigger("click")},getMinimumDropdownWidth:function(){var i,n=0;return this.getWidget().find(".ui-multiselect-checkboxes").removeClass("fixed-li"),i=this.getWidget().find(".ui-multiselect-checkboxes li"),t.each(i,function(t){var i=this._getTextWidth(e(t).find("label"));i>n&&(n=i)},this),this.getWidget().find(".ui-multiselect-checkboxes").addClass("fixed-li"),n},_getTextWidth:function(e){var t,i,n;return t=e.html(),i="<span>"+t+"</span>",e.html(i),n=e.outerWidth(),e.html(t),n},getWidget:function(){return this.multiselect("widget")},multiselect:function(e){return this.element.multiselect(e)},multiselectfilter:function(e){return this.element.multiselectfilter(e)},updateDropdownPosition:function(){this.multiselect("updatePos")}},i}),define("oro/filter/select-filter",["jquery","underscore","orotranslation/js/translator","./abstract-filter","orofilter/js/multiselect-decorator"],function(e,t,i,n,o){var s;return s=n.extend({templateSelector:"#select-filter-template",populateDefault:!0,containerSelector:".filter-select",disableSelector:".disable-filter",buttonSelector:".filter-criteria-selector",inputSelector:"select",selectWidget:null,cachedMinimumWidth:null,widgetOptions:{multiple:!1,classes:"select-filter-widget"},selectDropdownOpened:!1,contextSearch:!0,events:{"keydown select":"_preventEnterProcessing","click .filter-select":"_onClickFilterArea","click .disable-filter":"_onClickDisableFilter","change select":"_onSelectChange","click .reset-filter":"_onClickResetFilter"},initialize:function(e){var i=t.pick(e||{},"choices");t.extend(this,i),t.isUndefined(this.choices)&&(this.choices=[]),this.choices=t.map(this.choices,function(e,i){return t.isString(e)?{value:i,label:e}:e}),t.isUndefined(this.emptyValue)&&(this.emptyValue={value:""}),s.__super__.initialize.apply(this,arguments)},dispose:function(){this.disposed||(delete this.choices,this.selectWidget.dispose(),delete this.selectWidget,s.__super__.dispose.call(this))},render:function(){var e=this.choices.slice(0);return this.populateDefault&&e.unshift({value:"",label:this.placeholder}),this.setElement(this.template({label:this.label,showLabel:this.showLabel,options:e,placeholder:this.placeholder,nullLink:this.nullLink,canDisable:this.canDisable,selected:t.extend({},this.emptyValue,this.value),isEmpty:this.isEmpty()})),this._initializeSelectWidget(),this},_initializeSelectWidget:function(){this.selectWidget=new o({element:this.$(this.inputSelector),parameters:t.extend({noneSelectedText:this.placeholder,selectedText:t.bind(function(e,t,i){return this._getSelectedText(i)},this),position:{my:"left top+7",at:"left bottom",of:this.$(this.containerSelector)},open:t.bind(function(){this.selectWidget.onOpenDropdown(),this._setDropdownWidth(),this._setButtonPressed(this.$(this.containerSelector),!0),this._clearChoicesStyle(),this.selectDropdownOpened=!0},this),close:t.bind(function(){this._setButtonPressed(this.$(this.containerSelector),!1),setTimeout(t.bind(function(){this.selectDropdownOpened=!1},this),100)},this)},this.widgetOptions),contextSearch:this.contextSearch}),this.selectWidget.setViewDesign(this),this.$(this.buttonSelector).append('<span class="caret"></span>'),this.selectWidget.getWidget().on("keyup",t.bind(function(e){27===e.keyCode&&this._onClickFilterArea(e)},this))},_clearChoicesStyle:function(){var e=this.selectWidget.getWidget().find("label");e.removeClass("ui-state-hover"),t.isEmpty(this.value.value)&&e.removeClass("ui-state-active")},_getSelectedText:function(e){if(t.isEmpty(e))return this.placeholder;var i=[];return t.each(e,function(e){var t=e.getAttribute("title");t&&i.push(t)}),i.join(", ")},_getCriteriaHint:function(){var e=arguments.length>0?this._getDisplayValue(arguments[0]):this._getDisplayValue(),i=t.find(this.choices,function(t){return t.value==e.value});return t.isUndefined(i)?this.placeholder:i.label},_setDropdownWidth:function(){this.cachedMinimumWidth||(this.cachedMinimumWidth=this.selectWidget.getMinimumDropdownWidth()+24);var e=this.selectWidget.getWidget(),t=this.$(this.containerSelector).width(),i=Math.max(t+24,this.cachedMinimumWidth);e.width(i).css("min-width",i+"px"),e.find('input[type="search"]').width(i-30)},_onClickFilterArea:function(e){this.selectDropdownOpened?setTimeout(t.bind(function(){this.selectWidget.multiselect("close")},this),50):setTimeout(t.bind(function(){this.selectWidget.multiselect("open")},this),50),e.stopPropagation()},_onSelectChange:function(){this.applyValue(),this.selectWidget.updateDropdownPosition()},_onClickDisableFilter:function(e){e.preventDefault(),this.disable()},_onValueUpdated:function(){s.__super__._onValueUpdated.apply(this,arguments),this.selectWidget.multiselect("refresh"),this.$(this.buttonSelector).toggleClass("filter-default-value",this.isEmpty())},_writeDOMValue:function(e){return this._setInputValue(this.inputSelector,e.value),this},_readDOMValue:function(){return{value:this._getInputValue(this.inputSelector)}}})}),define("oro/filter/multiselect-filter",["underscore","orotranslation/js/translator","oroui/js/tools","./select-filter"],function(e,t,i,n){var o,s="";return o=n.extend({templateSelector:"#multiselect-filter-template",widgetOptions:{multiple:!0,classes:"select-filter-widget multiselect-filter-widget"},minimumDropdownWidth:120,initialize:function(){e.isUndefined(this.emptyValue)&&(this.emptyValue={value:[s]}),o.__super__.initialize.apply(this,arguments)},_onSelectChange:function(){o.__super__._onSelectChange.apply(this,arguments),this._setDropdownWidth()},_setDropdownWidth:function(){this.cachedMinimumWidth||(this.cachedMinimumWidth=Math.max(this.minimumDropdownWidth,this.selectWidget.getMinimumDropdownWidth())+24);var e=this.selectWidget.getWidget(),t=this.cachedMinimumWidth;e.width(t).css({minWidth:t,maxWidth:t}),e.find('input[type="search"]').width(t-30)},setValue:function(e){var t;t=this._normalizeValue(i.deepClone(e)),null==e.value&&i.isEqualsLoosely(this.value,t)&&(this._updateDOMValue(),this._onValueUpdated(t,this.value)),o.__super__.setValue.call(this,t)},_normalizeValue:function(e){if(null==e.value)return e.value=[s],e;if(this.isEmpty()){if(e.value.length>1){var t=e.value.indexOf(s);-1!=t&&e.value.splice(t,1)}}else e.value&&-1==e.value.indexOf(s)||(e.value=[s]);return e}})}),define("oro/filter/none-filter",["jquery","underscore","orotranslation/js/translator","./abstract-filter"],function(e,t,i,n){var o;return o=n.extend({wrappable:!0,wrapperTemplate:"",wrapperTemplateSelector:"#filter-wrapper-template",templateSelector:"#none-filter-template",criteriaHintSelector:".filter-criteria-hint",criteriaSelector:".filter-criteria",popupHint:"Choose a value first",events:{"click .filter-criteria-selector":"_onClickCriteriaSelector","click .filter-criteria .filter-criteria-hide":"_onClickCloseCriteria","click .disable-filter":"_onClickDisableFilter","click .reset-filter":"_onClickResetFilter"},initialize:function(e){var i=t.pick(e||{},"popupHint");t.extend(this,i),this.label="None",o.__super__.initialize.apply(this,arguments)},ensurePopupCriteriaClosed:function(){this.popupCriteriaShowed&&this._hideCriteria()},_onClickCriteriaSelector:function(t){t.stopPropagation(),e("body").trigger("click"),this.popupCriteriaShowed?this._hideCriteria():this._showCriteria()},_onClickCloseCriteria:function(){this._hideCriteria(),this._updateDOMValue()},_onClickDisableFilter:function(e){e.preventDefault(),this.disable()},_onClickOutsideCriteria:function(e){var t=this.$(this.criteriaSelector);t.get(0)===e.target||t.has(e.target).length||(this._hideCriteria(),e.stopPropagation())},render:function(){var t=e(this.template({popupHint:this._getPopupHint()}));return this._wrap(t),this},_wrap:function(e){this.$el.append(e)},_showCriteria:function(){this.$(this.criteriaSelector).show(),this._setButtonPressed(this.$(this.criteriaSelector),!0),setTimeout(t.bind(function(){this.popupCriteriaShowed=!0},this),100)},_hideCriteria:function(){this.$(this.criteriaSelector).hide(),this._setButtonPressed(this.$(this.criteriaSelector),!1),setTimeout(t.bind(function(){this.popupCriteriaShowed=!1},this),100)},_writeDOMValue:function(){return this},_readDOMValue:function(){return{}},_getPopupHint:function(){return this.popupHint?this.popupHint:this.popupHint},_getCriteriaHint:function(){return this.criteriaHint?this.criteriaHint:this.placeholder}})}),define("orofilter/js/formatter/abstract-formatter",[],function(){var e=function(){};return e.prototype={fromRaw:function(e){return e},toRaw:function(e){return e}},e}),define("orofilter/js/formatter/number-formatter",["underscore","./abstract-formatter"],function(e,t){var i=function(t){if(t=t?e.clone(t):{},e.extend(this,this.defaults,t),this.decimals<0||this.decimals>20)throw new RangeError("decimals must be between 0 and 20")};return i.prototype=new t,e.extend(i.prototype,{defaults:{decimals:2,decimalSeparator:".",orderSeparator:","},HUMANIZED_NUM_RE:/(\d)(?=(?:\d{3})+$)/g,EMPTY_DECIMAL:"00",fromRaw:function(e){if(isNaN(e)||null===e)return"";e=e.toFixed(~~this.decimals);var t=e.split("."),i=t[0],n=t[1]&&t[1]==this.EMPTY_DECIMAL&&~~this.percent,o=t[1]&&!n?(this.decimalSeparator||".")+t[1]:"";return i.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+o},toRaw:function(t){for(var i="",n=t.trim().split(this.orderSeparator),o=0;o<n.length;o++)i+=n[o];var s=i.split(this.decimalSeparator);i="";for(var o=0;o<s.length;o++)i=i+s[o]+".";"."===i[i.length-1]&&(i=i.slice(0,i.length-1));var r=1*(1*i).toFixed(~~this.decimals);return e.isNumber(r)&&!e.isNaN(r)?r:void 0}}),i}),define("oro/filter/number-filter",["underscore","./choice-filter","orofilter/js/formatter/number-formatter"],function(e,t,i){var n;return n=t.extend({wrapHintValue:!1,initialize:function(){e.isUndefined(this.formatterOptions)&&(this.formatterOptions={}),this.formatter=new i(this.formatterOptions),n.__super__.initialize.apply(this,arguments)},dispose:function(){this.disposed||(delete this.formatter,n.__super__.dispose.call(this))},_formatRawValue:function(e){return e.value=""===e.value?void 0:this.formatter.toRaw(String(e.value)),e},_formatDisplayValue:function(t){return t.value&&e.isString(t.value)&&(t.value=parseFloat(t.value)),e.isNumber(t.value)&&(t.value=this.formatter.fromRaw(t.value)),t}})}),define("oro/filter/select-row-filter",["underscore","backbone","./select-filter"],function(e,t,i){var n;return n=i.extend({getValue:function(){return this._formatRawValue(e.omit(this.value,"in","out"))},_formatRawValue:function(t){if((e.has(t,"in")||e.has(t,"out"))&&this._initialSelection(t),""!==t.value){var i,n=this._getSelection();e.isArray(n.selected)&&(i=n.inset===Boolean(parseInt(t.value,10))?"in":"out",t[i]=n.selected.join(","))}return t},_formatDisplayValue:function(t){return e.omit(t,"in","out")},_getSelection:function(){var t={};return this.collection.trigger("backgrid:getSelected",t),e.defaults(t,{inset:!0,selected:[]})},_initialSelection:function(i){var n=!0;Boolean(parseInt(i.value,10))!==e.has(i,"in")&&(this.collection.trigger("backgrid:selectAll"),n=!1),e.each(e.values(e.pick(i,"in","out"))[0].split(",")||[],e.partial(function(e,i){var o=e.get(i);o instanceof t.Model&&o.trigger("backgrid:select",o,n)},this.collection))}})}),define("orofilter/js/datafilter-wrapper",["jquery","underscore"],function(e,t){var i;return i={popupCriteriaShowed:!1,_getWrapperTemplate:function(){if(!this.wrapperTemplate){var i=e(this.wrapperTemplateSelector).text();this.wrapperTemplate=t.template(i)}return this.wrapperTemplate},_wrap:function(i){this.setElement(this._getWrapperTemplate()({label:this.label,showLabel:this.showLabel,criteriaHint:this._getCriteriaHint(),nullLink:this.nullLink,canDisable:this.canDisable,isEmpty:this.isEmptyValue()})),this._appendFilter(i),e("body").on("click"+this._eventNamespace(),t.bind(function(e){this.popupCriteriaShowed&&this._onClickOutsideCriteria(e)},this)),this.$el.on("keyup"+this._eventNamespace(),".dropdown-menu.filter-criteria",t.bind(function(e){27===e.keyCode&&this._hideCriteria()},this))},dispose:function(){this.disposed||(e("body").off(this._eventNamespace()),t.each(t.keys(i),function(e){delete this[e]},this),this.constructor.__super__.dispose.call(this))},_eventNamespace:function(){return".delegateEvents"+this.cid},_appendFilter:function(e){this.$(this.criteriaSelector).append(e)}}}),define("orofilter/js/filters-manager",["jquery","underscore","backbone","oroui/js/mediator","oroui/js/tools","orotranslation/js/translator","./multiselect-decorator","./datafilter-wrapper"],function(e,t,i,n,o,s,r,a){var l;return l=i.View.extend({filters:{},templateSelector:"#filter-container",template:null,filterSelector:"#add-filter-select",addButtonHint:s("oro_datagrid.label_add_filter"),selectWidget:null,buttonSelector:".ui-multiselect.filter-list",events:{"change #add-filter-select":"_onChangeFilterSelect","click #reset-filter-button":"_onReset","click a.dropdown-toggle":"_onDropdownToggle"},initialize:function(i){this.template=t.template(e(this.templateSelector).html()),i.filters&&(this.filters=i.filters),t.each(this.filters,function(e){e.wrappable&&t.extend(e,a),this.listenTo(e,{update:this._onFilterUpdated,disable:this._onFilterDisabled})},this),i.addButtonHint&&(this.addButtonHint=i.addButtonHint),l.__super__.initialize.apply(this,arguments),o.isMobile()&&this.listenTo(this.collection,"beforeFetch",this.closeDropdown)},dispose:function(){this.disposed||(t.each(this.filters,function(e){e.dispose()}),delete this.filters,this.selectWidget&&(this.selectWidget.dispose(),delete this.selectWidget),l.__super__.dispose.call(this))},_onFilterUpdated:function(e){this.trigger("updateFilter",e)},_onFilterDisabled:function(e){this.trigger("disableFilter",e),this.disableFilter(e)},getValues:function(){var e={};return t.each(this.filters,function(t){t.enabled&&(e[t.name]=t.getValue())},this),e},setValues:function(e){t.each(e,function(e,i){t.has(this.filters,i)&&this.filters[i].setValue(e)},this)},_onChangeFilterSelect:function(){this.trigger("updateList",this),this._processFilterStatus()},enableFilter:function(e){return this.enableFilters([e])},disableFilter:function(e){return this.disableFilters([e])},enableFilters:function(e){if(t.isEmpty(e))return this;var i=[];t.each(e,function(e){e.enable(),i.push('option[value="'+e.name+'"]:not(:selected)')},this);var n=this.$(this.filterSelector).find(i.join(","));return n.length&&n.attr("selected",!0),i.length&&this.selectWidget.multiselect("refresh"),this},disableFilters:function(e){if(t.isEmpty(e))return this;var i=[];t.each(e,function(e){e.disable(),i.push('option[value="'+e.name+'"]:selected')},this);var n=this.$(this.filterSelector).find(i.join(","));return n.length&&n.removeAttr("selected"),i.length&&this.selectWidget.multiselect("refresh"),this},render:function(){var i=e(this.template({filters:this.filters}));this.setElement(i);var n=document.createDocumentFragment();return t.each(this.filters,function(e){e.render(),e.enabled||e.hide(),n.appendChild(e.$el.get(0))},this),this.trigger("rendered"),t.isEmpty(this.filters)?i.hide():(i.find(".filter-container").append(n),this._initializeSelectWidget()),this},_initializeSelectWidget:function(){this.selectWidget=new r({element:this.$(this.filterSelector),parameters:{multiple:!0,selectedList:0,selectedText:this.addButtonHint,classes:"filter-list select-filter-widget",open:e.proxy(function(){this.selectWidget.onOpenDropdown(),this._setDropdownWidth(),this._updateDropdownPosition()},this)}}),this.selectWidget.setViewDesign(this),this.$(".filter-list span:first").replaceWith('<a id="add-filter-button" href="javascript:void(0);">'+this.addButtonHint+'<span class="caret"></span></a>')},_setDropdownWidth:function(){var e=this.selectWidget.getWidget(),t=this.selectWidget.getMinimumDropdownWidth()+24;e.width(t).css("min-width",t+"px"),e.find('input[type="search"]').width(t-30)},_processFilterStatus:function(){var e=this.$(this.filterSelector).val();t.each(this.filters,function(i,n){i.enabled||-1===t.indexOf(e,n)?i.enabled&&-1===t.indexOf(e,n)&&this.disableFilter(i):this.enableFilter(i)},this),this._updateDropdownPosition()},_updateDropdownPosition:function(){var t=this.$(this.buttonSelector),i=t.offset(),n=this.selectWidget.getWidget().outerWidth(),o=e(window).width(),s=i.left;i.left+n>o&&(s=i.left+t.outerWidth()-n),this.selectWidget.getWidget().css({top:i.top+t.outerHeight(),left:s})},_onReset:function(){n.trigger("datagrid:doReset:"+this.collection.inputName)},_onDropdownToggle:function(e){e.preventDefault(),e.stopPropagation(),this.$el.find(".dropdown").toggleClass("oro-open")},closeDropdown:function(){this.$el.find(".dropdown").removeClass("oro-open")}})}),define("orofilter/js/collection-filters-manager",["underscore","./filters-manager"],function(e,t){var i;return i=t.extend({initialize:function(e){this.collection=e.collection,this.listenTo(this.collection,{beforeFetch:this._beforeCollectionFetch,updateState:this._onUpdateCollectionState,reset:this._onCollectionReset}),i.__super__.initialize.apply(this,arguments)},render:function(){return i.__super__.render.apply(this,arguments),this._onUpdateCollectionState(this.collection),this},_onFilterUpdated:function(){this.ignoreFiltersUpdateEvents||(this.collection.state.currentPage=1,this.collection.fetch({reset:!0}),i.__super__._onFilterUpdated.apply(this,arguments))},_beforeCollectionFetch:function(e){e.state.filters=this._createState()},_onUpdateCollectionState:function(e){this.ignoreFiltersUpdateEvents=!0,this._applyState(e.state.filters||{}),this.ignoreFiltersUpdateEvents=!1},_onCollectionReset:function(t){var i,n;i=t.state.totalRecords>0,n=!e.isEmpty(t.state.filters),i||n?this.$el.show():this.$el.hide()},_createState:function(){var t={};return e.each(this.filters,function(e,i){var n="__"+i;e.enabled?e.isEmpty()?e.defaultEnabled||(t[n]=1):t[i]=e.getValue():e.defaultEnabled&&(t[n]=0)},this),t},_applyState:function(t){var i=[],n=[];return e.each(this.filters,function(o,s){var r,a="__"+s;e.has(t,s)?(r=t[s],e.isObject(r)||(r={value:r}),o.setValue(r),i.push(o)):e.has(t,a)?(o.reset(),Number(t[a])?i.push(o):n.push(o)):(o.reset(),o.defaultEnabled?i.push(o):n.push(o))},this),this.enableFilters(i),this.disableFilters(n),this}})}),define("orofilter/js/map-filter-module-name",[],function(){var e="oro/filter/{{type}}-filter",t={string:"choice",choice:"select",selectrow:"select-row",multichoice:"multiselect","boolean":"select"};return function(i){return e.replace("{{type}}",t[i]||i)}}),define("orofilter/js/datafilter-builder",["jquery","underscore","oroui/js/tools","oroui/js/mediator","./map-filter-module-name","./collection-filters-manager"],function(e,t,i,n,o,s){var r={initBuilder:function(){var e;t.defaults(this.metadata,{filters:{}}),e=r.collectModules.call(this),i.loadModules(e,function(e){this.modules=e,r.build.call(this)},this)},collectModules:function(){var e={};return t.each(this.metadata.filters||{},function(t){var i=t.type;e[i]=o(i)}),e},build:function(){var e,t;this.collection&&this.modules&&(e=r.combineOptions.call(this),e.collection=this.collection,t=new s(e),this.$el.prepend(t.render().$el),n.trigger("datagrid_filters:rendered",this.collection),this.metadata.state.filters=this.metadata.state.filters||[],0===this.collection.length&&0===this.metadata.state.filters.length&&t.$el.hide(),this.deferred.resolve(t))},combineOptions:function(){var e={},i=this.modules,n=this.collection;return t.each(this.metadata.filters,function(o){if(t.has(o,"name")&&t.has(o,"type")){"selectrow"===o.type&&(o.collection=n);var s=i[o.type].extend(o);e[o.name]=new s}}),{filters:e}}};return{init:function(e,t){var i;i={deferred:e,$el:t.$el,gridName:t.gridName,metadata:t.metadata,collection:null,modules:null},r.initBuilder.call(i),t.gridPromise.done(function(e){i.collection=e.collection,r.build.call(i)}).fail(function(){e.reject()})}}}),define("oroform/js/optional-validation-handler",["jquery"],function(e){return{hasNotEmptyInput:function(t){for(var i='input[type!="checkbox"][type!="radio"][type!="button"][data-required]input[type="radio"][data-required]:checked, input[type="checkbox"][data-required]:checked',n=t.find(i),o=0;o<n.length;o++)if(!this.isValueEmpty(e(n[o]).val()))return!0;return!1},hasNotEmptySelect:function(t){for(var i=t.find("select[data-required]"),n=0;n<i.length;n++)if(!this.isValueEmpty(e(i[n]).find("option:selected").val()))return!0;return!1},isValueEmpty:function(t){return t=t?e.trim(t):"",""==t||0==t},handleGroupRequire:function(e,t){var i=e.parents("[data-validation-optional-group]");this.isValueEmpty(t)?this.hasNotEmptyInput(i)||this.hasNotEmptySelect(i)||i.find("label[data-required] em").hide():i.find("label[data-required] em").show()},inputHandler:function(e){this.handleGroupRequire(e,e.val())},selectHandler:function(e){this.handleGroupRequire(e,e.find("option:selected").val())},initialize:function(t){var i=t.find("[data-validation-optional-group]"),n=this,o=i.find("label[data-required]");o.find("em").hide().html("*"),o.addClass("required"),i.on("change","input",function(){n.inputHandler(e(this))}),i.on("change","select",function(){n.selectHandler(e(this))}),i.each(function(t,i){i=e(i),(n.hasNotEmptyInput(i)||n.hasNotEmptySelect(i))&&i.find("label[data-required] em").show()})}}}),function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0;var i=e.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(t.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(t){function n(){var n;return i.settings.submitHandler?(i.submitButton&&(n=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&n.remove(),!1):!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,i=e(this[0].form).validate();return this.each(function(){t=t&&i.element(this)}),t},removeAttrs:function(t){var i={},n=this;return e.each(t.split(/\s/),function(e,t){i[t]=n.attr(t),n.removeAttr(t)}),i},rules:function(t,i){var n=this[0];if(t){var o=e.data(n.form,"validator").settings,s=o.rules,r=e.validator.staticRules(n);switch(t){case"add":e.extend(r,e.validator.normalizeRule(i)),delete r.messages,s[n.name]=r,i.messages&&(o.messages[n.name]=e.extend(o.messages[n.name],i.messages));break;case"remove":if(!i)return delete s[n.name],r;var a={};return e.each(i.split(/\s/),function(e,t){a[t]=r[t],delete r[t]}),a}}var l=e.validator.normalizeRules(e.extend({},e.validator.classRules(n),e.validator.attributeRules(n),e.validator.dataRules(n),e.validator.staticRules(n)),n);if(l.required){var c=l.required;delete l.required,l=e.extend({required:c},l)}return l}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())
},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(9!==t.which||""!==this.elementValue(e))&&(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(n):e(t).addClass(i).removeClass(n)},unhighlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(n):e(t).removeClass(i).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this[0].form,"validator"),n="on"+t.type.replace(/^validate/,"");i.settings[n]&&i.settings[n].call(i,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};e.each(this.settings.groups,function(t,n){"string"==typeof n&&(n=n.split(/\s/)),e.each(n,function(e,n){i[n]=t})});var n=this.settings.rules;e.each(n,function(t,i){n[t]=e.validator.normalizeRule(i)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var i=this.check(t)!==!1;return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var i in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(e(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i=e(t).attr("type"),n=e(t).val();return"radio"===i||"checkbox"===i?e("input[name='"+e(t).attr("name")+"']:checked").val():"string"==typeof n?n.replace(/\r/g,""):n},check:function(t){t=this.validationTargetFor(this.clean(t));var i,n=e(t).rules(),o=!1,s=this.elementValue(t);for(var r in n){var a={method:r,parameters:n[r]};try{if(i=e.validator.methods[r].call(this,s,t,a.parameters),"dependency-mismatch"===i){o=!0;continue}if(o=!1,"pending"===i)return this.toHide=this.toHide.not(this.errorsFor(t)),void 0;if(!i)return this.formatAndAdd(t,a),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+a.method+"' method.",l),l}}return o?void 0:(this.objectLength(n)&&this.successList.push(t),!0)},customDataMessage:function(t,i){return e(t).data("msg-"+i.toLowerCase())||t.attributes&&e(t).attr("data-msg-"+i.toLowerCase())},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e];return void 0},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,i){var n=this.defaultMessage(t,i.method),o=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,t):o.test(n)&&(n=e.validator.format(n.replace(o,"{$1}"),i.parameters)),this.errorList.push({message:n,element:t}),this.errorMap[t.name]=n,this.submitted[t.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var i=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var n=this.errorsFor(t);n.length?(n.removeClass(this.settings.validClass).addClass(this.settings.errorClass),n.html(i)):(n=e("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(n=n.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(n).length||(this.settings.errorPlacement?this.settings.errorPlacement(n,e(t)):n.insertAfter(t))),!i&&this.settings.success&&(n.text(""),"string"==typeof this.settings.success?n.addClass(this.settings.success):this.settings.success(n,t)),this.toShow=this.toShow.add(n)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")===i})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,i){return!!e(t,i.form).length},"function":function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},n=e(t).attr("class");return n&&e.each(n.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i={},n=e(t),o=n[0].getAttribute("type");for(var s in e.validator.methods){var r;"required"===s?(r=n.get(0).getAttribute(s),""===r&&(r=!0),r=!!r):r=n.attr(s),/min|max/.test(s)&&(null===o||/number|range|text/.test(o))&&(r=Number(r)),r?i[s]=r:o===s&&"range"!==o&&(i[s]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(t){var i,n,o={},s=e(t);for(i in e.validator.methods)n=s.data("rule-"+i.toLowerCase()),void 0!==n&&(o[i]=n);return o},staticRules:function(t){var i={},n=e.data(t.form,"validator");return n.settings.rules&&(i=e.validator.normalizeRule(n.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(n,o){if(o===!1)return delete t[n],void 0;if(o.param||o.depends){var s=!0;switch(typeof o.depends){case"string":s=!!e(o.depends,i.form).length;break;case"function":s=o.depends.call(i,i)}s?t[n]=void 0!==o.param?o.param:!0:delete t[n]}}),e.each(t,function(n,o){t[n]=e.isFunction(o)?o(i):o}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,n){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==n?n:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var o=e(i).val();return o&&o.length>0}return this.checkable(i)?this.getLength(t,i)>0:e.trim(t).length>0},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i=0,n=0,o=!1;e=e.replace(/\D/g,"");for(var s=e.length-1;s>=0;s--){var r=e.charAt(s);n=parseInt(r,10),o&&(n*=2)>9&&(n-=9),i+=n,o=!o}return 0===i%10},minlength:function(t,i,n){var o=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||o>=n},maxlength:function(t,i,n){var o=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||n>=o},rangelength:function(t,i,n){var o=e.isArray(t)?t.length:this.getLength(e.trim(t),i);return this.optional(i)||o>=n[0]&&o<=n[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},equalTo:function(t,i,n){var o=e(n);return this.settings.onfocusout&&o.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(i).valid()}),t===o.val()},remote:function(t,i,n){if(this.optional(i))return"dependency-mismatch";var o=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),o.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=o.message,n="string"==typeof n&&{url:n}||n,o.old===t)return o.valid;o.old=t;var s=this;this.startRequest(i);var r={};return r[i.name]=t,e.ajax(e.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:r,success:function(n){s.settings.messages[i.name].remote=o.originalMessage;var r=n===!0||"true"===n;if(r){var a=s.formSubmitted;s.prepareElement(i),s.formSubmitted=a,s.successList.push(i),delete s.invalid[i.name],s.showErrors()}else{var l={},c=n||s.defaultMessage(i,"remote");l[i.name]=o.message=e.isFunction(c)?c(t):c,s.invalid[i.name]=!0,s.showErrors(l)}o.valid=r,s.stopRequest(i,r)}},n)),"pending"}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,i,n){var o=e.port;"abort"===e.mode&&(t[o]&&t[o].abort(),t[o]=n)});else{var i=e.ajax;e.ajax=function(n){var o=("mode"in n?n:e.ajaxSettings).mode,s=("port"in n?n:e.ajaxSettings).port;return"abort"===o?(t[s]&&t[s].abort(),t[s]=i.apply(this,arguments),t[s]):i.apply(this,arguments)}}}(jQuery),function(e){e.extend(e.fn,{validateDelegate:function(t,i,n){return this.bind(i,function(i){var o=e(i.target);return o.is(t)?n.apply(o,arguments):void 0})}})}(jQuery),define("jquery.validate",["jquery"],function(){}),define("oroform/js/extend/validate",["jquery","underscore","orotranslation/js/translator","oroui/js/tools","./../optional-validation-handler","jquery.validate"],function(e,t,i,n,o){function s(i){var n=e(i),o=n.parents("form").first(),s=e(o).data("validator");return t.filter(n.add(n.parentsUntil(o)).add(o).toArray(),function(t){var n=e(t);return n.data("validation")&&(n.is(i)||s.elementsOf(n).first().is(i))})}function r(i){var n=t.map(s(i),function(t){return e(t).data("validation")});return n.unshift({}),t.extend.apply(null,n)}function a(i,n){return n=n||e(i).data("violated"),t.find(s(i).reverse(),function(t){return e(t).data("validation").hasOwnProperty(n)})}function l(t){var i=e(a(t));return i.parent().is(".selector, .uploader, .input-append, .input-prepend")&&(i=i.parent()),i}e.validator.attributeRules=function(){return{}},e.validator.classRules=function(){return{}},e.validator.dataRules=function(i){var n={};return t.each(r(i),function(t,o){e.validator.methods[o]?n[o]={param:t}:e(i.form).data("validator").settings.debug&&console.error('Validation method "'+o+'" does not exist')}),t.each(["NotNull","NotBlank"],function(t){if(n[t]){var i={};i[t]=n[t],delete n[t],n=e.extend(i,n)}}),n},e.validator.prototype.elementsOf=function(t){return e(t).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore)},e.validator.prototype.defaultMessage=t.wrap(e.validator.prototype.defaultMessage,function(e){var n=e.apply(this,t.rest(arguments));return t.isString(n)?i(n):n}),e.validator.prototype.formatAndAdd=t.wrap(e.validator.prototype.formatAndAdd,function(i,n,o){return e(n).data("violated",o.method),i.apply(this,t.rest(arguments))}),e.validator.prototype.showLabel=t.wrap(e.validator.prototype.showLabel,function(e,i,n){var o=this.errorsFor(i);return n&&o.length&&this.settings.errorPlacement(o,i),e.apply(this,t.rest(arguments))}),e.validator.prototype.focusInvalid=t.wrap(e.validator.prototype.focusInvalid,function(i){var n=e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]);this.settings.focusInvalid&&n.is(".select2[type=hidden]")?n.parent().find("input.select2-focusser").focus().trigger("focusin"):i.apply(this,t.rest(arguments))}),e.validator.prototype.init=t.wrap(e.validator.prototype.init,function(t){o.initialize(e(this.currentForm)),t.apply(this,arguments)}),e.validator.loadMethod=function(i){n.loadModules(e.makeArray(i),function(i){t.each(i,function(t){e.validator.addMethod.apply(e.validator,t)})})},e.validator.setDefaults({errorElement:"span",errorClass:"validation-failed",errorPlacement:function(e,t){e.insertAfter(l(t))},highlight:function(e){this.settings.unhighlight.call(this,e);var t=l(e);t.addClass("error").closest(".controls").addClass("validation-error"),t.closest(".control-group").find(".control-label").addClass("validation-error")},unhighlight:function(t){var i=e(t);i.closest(".error").removeClass("error").closest(".controls").removeClass("validation-error"),i.closest(".control-group").find(".control-label").removeClass("validation-error")},ignore:":hidden:not([type=hidden])"});var c=["oroform/js/validator/count","oroform/js/validator/date","oroform/js/validator/datetime","oroform/js/validator/email","oroform/js/validator/length","oroform/js/validator/notblank","oroform/js/validator/notnull","oroform/js/validator/range","oroform/js/validator/regex","oroform/js/validator/repeated","oroform/js/validator/url"];e.validator.loadMethod(c),e.validator.dataRules=t.wrap(e.validator.dataRules,function(i,n){var o,s,r,a=i(n);return e.isEmptyObject(a)||(o=e(n).parents("[data-validation-optional-group]").get(0),s=e(n).parents("[data-validation-ignore]").get(0)),s?a={}:o&&(r=e(n.form).data("validator"),r.settings.unhighlight(n),t.each(a,function(i){i.depends=function(){return t.some(r.elementsOf(o),function(t){return e.validator.methods.required.call(r,r.elementValue(t),t)})}})),a}),e.fn.validateDelegate=t.wrap(e.fn.validateDelegate,function(e,t,i,n){return e.call(this,t,i,function(){return this[0]&&this[0].form&&n.apply(this,arguments)})})}),define("oroform/js/validator/number",["underscore","orotranslation/js/translator"],function(e,t){function i(t,i,n){var o=!0;return e.isUndefined(i)||i!==n?(e.isUndefined(i)||null===i||(o=t>=parseInt(i,10)||-1),o!==!0||e.isUndefined(n)||null===n||(o=t<=parseInt(n,10)||1)):o=t===parseInt(i,10)||0,o}var n={exactMessage:"",maxMessage:"",minMessage:""};return["Number",function(e,t,n){var o=i(Number(e),n.min,n.max);return o===!0},function(o,s,r,a){var l,c,d;switch(o=e.extend({},n,o),r=e.isUndefined(r)?this.elementValue(s):r,l=i(Number(r),o.min,o.max)){case 0:c=o.exactMessage,d=o.min;break;case 1:c=o.maxMessage,d=o.max;break;case-1:c=o.minMessage,d=o.min;break;default:return""}return e.isUndefined(a)&&(a={}),a.limit=d,e.isUndefined(a.value)&&(a.value=r),t(c,a,d)}]}),define("oroform/js/validator/count",["underscore","./number"],function(e,t){function i(e,t){return e.findByName(t.name).filter(":checked").length}var n={exactMessage:"This collection should contain exactly {{ limit }} element.|This collection should contain exactly {{ limit }} elements.",maxMessage:"This collection should contain {{ limit }} element or less.|This collection should contain {{ limit }} elements or less.",minMessage:"This collection should contain {{ limit }} element or more.|This collection should contain {{ limit }} elements or more."};return["Count",function(e,n,o){return e=i(this,n),t[1].call(this,e,n,o)},function(o,s){var r=i(this,s),a={};return o=e.extend({},n,o),a.count=r,t[2].call(this,o,s,r,a)}]}),define("oroform/js/validator/date",["underscore","orotranslation/js/translator","orolocale/js/formatter/datetime"],function(e,t,i){var n={message:"This value is not a valid date."};return["Date",function(e,t){return this.optional(t)||i.isDateValid(String(e))},function(i,o){var s=String(this.elementValue(o)),r={};return i=e.extend({},n,i),r.value=s,t(i.message,r)}]}),define("oroform/js/validator/datetime",["underscore","orotranslation/js/translator","orolocale/js/formatter/datetime"],function(e,t,i){var n={message:"This value is not a valid date."};return["DateTime",function(e,t){return this.optional(t)||i.isDateTimeValid(String(e))},function(i,o){var s=String(this.elementValue(o)),r={};return i=e.extend({},n,i),r.value=s,t(i.message,r)}]}),define("oroform/js/validator/email",["jquery","underscore","orotranslation/js/translator","jquery.validate"],function(e,t,i){var n={message:"This value is not a valid email address."};return["Email",function(e,t){return this.optional(t)||/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))$/i.test(e)},function(e,o){var s=this.elementValue(o),r={};return e=t.extend({},n,e),r.value=s,i(e.message,r)}]}),define("oroform/js/validator/length",["underscore","./number"],function(e,t){var i={exactMessage:"This value should have exactly {{ limit }} character.|This value should have exactly {{ limit }} characters.",maxMessage:"This value is too long. It should have {{ limit }} character or less.|This value is too long. It should have {{ limit }} characters or less.",minMessage:"This value is too short. It should have {{ limit }} character or more.|This value is too short. It should have {{ limit }} characters or more."};return["Length",function(e,i,n){return this.optional(i)||t[1].call(this,e.length,i,n)},function(n,o){var s=this.elementValue(o),r={};return n=e.extend({},i,n),r.value=s,t[2].call(this,n,o,s.length,r)}]}),define("oroform/js/validator/notblank",["jquery","underscore","orotranslation/js/translator","jquery.validate"],function(e,t,i){var n={message:"This value should not be blank."};return["NotBlank",function(){return e.validator.methods.required.apply(this,arguments)},function(e){return e=t.extend({},n,e),i(e.message)}]}),define("oroform/js/validator/notnull",["jquery","underscore","orotranslation/js/translator","jquery.validate"],function(e,t,i){var n={message:"This value should not be null."};return["NotNull",function(){return e.validator.methods.required.apply(this,arguments)},function(e){return e=t.extend({},n,e),i(e.message)}]}),define("oroform/js/validator/range",["underscore","orotranslation/js/translator","orolocale/js/formatter/number"],function(e,t,i){var n={minMessage:"This value should be {{ limit }} or more.",maxMessage:"This value should be {{ limit }} or less.",invalidMessage:"This value should be a valid number."};return["Range",function(e,t,n){return e=i.unformat(e),this.optional(t)||!(isNaN(e)||null!==n.min&&e<Number(n.min)||null!==n.max&&e>Number(n.max))},function(o,s){var r,a={},l=this.elementValue(s),c=i.unformat(l);return o=e.extend({},n,o),isNaN(c)?r=o.invalidMessage:null!==o.min&&c<Number(o.min)?(r=o.minMessage,a.limit=o.min):null!==o.max&&c>Number(o.max)&&(r=o.maxMessage,a.limit=o.max),a.value=l,t(r,a)}]}),define("oroform/js/validator/regex",["underscore","orotranslation/js/translator"],function(e,t){var i={message:"This value is not valid.",match:!0};return["Regex",function(t,n,o){var s=o.pattern.match(/^\/([\w\W]*?)\/(g?i?m?y?)$/),r=new RegExp(s[1],s[2]);return o=e.extend({},i,o),this.optional(n)||Boolean(o.match)===r.test(t)},function(n,o){var s=this.elementValue(o),r={};return n=e.extend({},i,n),r.value=s,t(n.message,r)}]}),define("oroform/js/validator/repeated",["jquery","underscore","orotranslation/js/translator","jquery.validate"],function(e,t,i){var n={invalid_message:"This value is not valid.",invalid_message_parameters:{}};return["Repeated",function(e,t,i){var n=t.id.slice(0,-(i.second_name||"").length)+(i.first_name||""),o=document.getElementById(n);return this.optional(o)||e===this.elementValue(o)},function(e){return e=t.extend({},n,e),i(e.invalid_message,e.invalid_message_parameters)}]}),define("oroform/js/validator/url",["jquery","underscore","orotranslation/js/translator","jquery.validate"],function(e,t,i){var n={message:"This value is not a valid URL."};return["Url",function(){return e.validator.methods.url.apply(this,arguments)},function(e){return e=t.extend({},n,e),i(e.message)}]}),define("oroform/js/select2-config",["jquery","underscore"],function(e,t){var i=function(e,t,i,n){this.config=e,this.url=t,this.perPage=i,this.excluded=n};return i.prototype={getConfig:function(){var e=this;if(void 0===this.config.ajax&&this.url&&(this.config.ajax={url:this.url,data:function(t,i){return{page:i,per_page:e.perPage,query:t}},results:function(e){return e}}),void 0!==this.config.ajax){void 0===this.config.initSelection&&(this.config.initSelection=t.bind(this.initSelection,this));var i=function(t){if(e.excluded){for(var i=[],n=t.results,o=0;o<n.length;o++)n[o].hasOwnProperty("id")&&e.excluded.indexOf(n[o].id)>-1&&i.push(o);for(o=0;o<i.length;o++)n.splice(i[o],1);t.results=n}return t},n=this.config.ajax.results;this.config.ajax.results=function(e,t){return i(n(e,t))},void 0===this.config.ajax.quietMillis&&(this.config.ajax.quietMillis=700)}else void 0===this.config.minimumResultsForSearch&&(this.config.minimumResultsForSearch=7);return void 0===this.config.formatResult&&(this.config.formatResult=this.format(this.config.result_template||!1)),void 0===this.config.formatSelection&&(this.config.formatSelection=this.format(this.config.selection_template||!1)),void 0===this.config.escapeMarkup&&(this.config.escapeMarkup=function(e){return e}),void 0===this.config.dropdownAutoWidth&&(this.config.dropdownAutoWidth=!0),void 0===this.config.openOnEnter&&(this.config.openOnEnter=null),this.config},format:function(i){var n=this;return i&&(i=t.template(i)),function(o,s,r){if(e.isEmptyObject(o))return void 0;var a="",l=function(e){return o.children?e:n.highlightSelection(e,r)};return void 0!==o._html?a=t.escape(o._html):i?(o=t.clone(o),o.highlight=l,void 0!==n.config.formatContext&&(o.context=n.config.formatContext()),a=i(o)):a=l(t.escape(n.getTitle(o,n.config.properties))),a}},initSelection:function(i,n){var o=this,s=function(e){o.config.multiple===!0?n(e):n(e.pop())},r=function(t){var n=i.data("select2"),o=n.opts.ajax,r=o.data(t,1,!0),a="function"==typeof o.url?o.url.call(n,t,1):o.url;r.search_by_id=!0,e.ajax({url:a,data:r,success:function(e){"function"==typeof o.results&&(e=o.results.call(n,e,1)),"undefined"!=typeof e.results&&s(e.results)}})},a=i.val(),l=i.data("selected-data");t.isArray(l)&&l.length>0&&l[0].id==a?s(l):r(a)},highlightSelection:function(e,t){return e&&t&&t.term?e.replace(new RegExp(t.term,"ig"),'<span class="select2-match">$&</span>'):e},getTitle:function(e,i){var n,o="";return e&&(void 0===i?void 0!==e.text&&(o=e.text):(n=[],t.each(i,function(t){n.push(e[t])}),o=n.join(" "))),o}},i}),define("oroform/js/multiple-entity/view",["underscore","backbone","oro/dialog-widget"],function(e,t,i){return t.View.extend({attributes:{"class":"entity-item clearfix span3 box-type1"},events:{"click .remove-btn":"removeElement","change .default-selector":"defaultSelected"},options:{name:null,hasDefault:!1,defaultRequired:!1,model:null,template:null},initialize:function(t){this.options=e.defaults(t||{},this.options),this.template=e.template(this.options.template),this.listenTo(this.model,"destroy",this.remove),this.options.defaultRequired&&this.listenTo(this.model,"change:isDefault",this.toggleDefault)},viewDetails:function(e){e.stopImmediatePropagation(),e.preventDefault();var t=new i({url:this.options.model.get("link"),title:this.options.model.get("label"),dialogOptions:{allowMinimize:!0,width:675,autoResize:!0}});t.render()},removeElement:function(){this.trigger("removal",this.model),this.model.set("id",null),this.model.destroy()},defaultSelected:function(e){this.options.model.set("isDefault",e.target.checked)},toggleDefault:function(){this.options.defaultRequired&&(this.$el.find(".remove-btn")[0].disabled=this.model.get("isDefault"))},render:function(){var t=this.model.toJSON();return t.hasDefault=this.options.hasDefault,t.name=this.options.name,this.$el.append(this.template(t)),this.$el.find("a.entity-info").click(e.bind(this.viewDetails,this)),this.toggleDefault(),this}})}),define("oroform/js/multiple-entity/model",["backbone"],function(e){return e.Model.extend({defaults:{id:null,link:null,label:null,isDefault:!1,extraData:[]}})
}),define("oroform/js/multiple-entity",["underscore","routing","backbone","./multiple-entity/view","./multiple-entity/model","oro/dialog-widget"],function(e,t,i,n,o,s){var r=i.$;return i.View.extend({options:{addedElement:null,allowAction:!0,collection:null,defaultElement:null,elementTemplate:null,entitiesContainerSelector:".entities",itemsPerRow:4,name:null,removedElement:null,selectionUrl:null,selectionRouteName:null,selectionRouteParams:{},selectorWindowTitle:null,template:null},events:{"click .add-btn":"addEntities"},initialize:function(t){this.options=e.defaults(t||{},this.options),this.template=e.template(this.options.template),this.listenTo(this.getCollection(),"add",this.addEntity),this.listenTo(this.getCollection(),"reset",this._onCollectionReset),this.listenTo(this.getCollection(),"remove",this.removeDefault),this.$addedEl=r(this.options.addedElement),this.$removedEl=r(this.options.removedElement),this.options.defaultElement?(this.listenTo(this.getCollection(),"defaultChange",this.updateDefault),this.$defaultEl=this.$el.closest("form").find('[name$="['+this.options.defaultElement+']"]')):this.$defaultEl=r(),this.initialCollectionItems=[],this.addedCollectionItems=[],this.removedCollectionItems=[],this.render()},handleRemove:function(t){var i=t&&t.get("id");if(i){var n=this.$addedEl.val(),o=this.$removedEl.val(),s=n&&n.split(",")||[],r=o&&o.split(",")||[];e.contains(s,i)&&(s=e.without(s,i)),e.contains(r,i)||r.push(i),this.addedCollectionItems=s,this.removedCollectionItems=r,this.$addedEl.val(s.join(",")),this.$removedEl.val(r.join(","))}},removeAll:function(){this.addedCollectionItems=[],this.$addedEl.val(""),this.removedCollectionItems=e.clone(this.initialCollectionItems),this.$removedEl.val(this.removedCollectionItems.join(",")),this.getCollection().reset([])},removeDefault:function(e){e.get("isDefault")&&this.$defaultEl.val("")},updateDefault:function(e){this.$defaultEl.val(e.get("id"))},getCollection:function(){return this.options.collection},_onCollectionReset:function(e){this._resortCollection(),this.$entitiesContainer.empty(),e.each(function(e){this.addEntity(e)},this),this.initialCollectionItems=this.getCollection().map(function(e){return e.get("id")}),this.addedCollectionItems=[],this.removedCollectionItems=[]},_isInitialCollectionItem:function(t){var i=!!e.find(this.initialCollectionItems,function(e){return String(e)===String(t)});return i},_isAddedCollectionItem:function(t){var i=!!e.find(this.addedCollectionItems,function(e){return String(e)===String(t)});return i},_isRemovedCollectionItem:function(t){var i=!!e.find(this.removedCollectionItems,function(e){return String(e)===String(t)});return i},_resortCollection:function(){this.getCollection().comparator=function(e){return e.get("isDefault")?"A":e.get("label")},this.getCollection().sort()},addEntity:function(t){t.get("id")==this.$defaultEl.val()&&t.set("isDefault",!0);var i=new n({model:t,name:this.options.name,hasDefault:this.options.defaultElement,template:this.options.elementTemplate});i.on("removal",e.bind(this.handleRemove,this)),this.$entitiesContainer.append(i.render().$el)},addEntities:function(){this.selectorDialog||(this.selectorDialog=new s({url:this._getSelectionWidgetUrl(),title:this.options.selectorWindowTitle,stateEnabled:!1,dialogOptions:{modal:!0,width:1024,height:500,close:e.bind(function(){this.selectorDialog=null},this)}}),this.selectorDialog.on("completeSelection",e.bind(this.processSelectedEntities,this)),this.selectorDialog.render())},_getSelectionWidgetUrl:function(){var e=this.options.selectionUrl||t.generate(this.options.selectionRouteName,this.options.selectionRouteParams),i=e.indexOf("?")>-1?"&":"?",n=this.$addedEl.val(),o=this.$removedEl.val(),s=this.$defaultEl.val();return e+i+"added="+(n||"")+"&removed="+(o||"")+"&default="+(s||"")},processSelectedEntities:function(t,i,n){var o=this;e.intersection(t,n).forEach(function(i){return o._isInitialCollectionItem(i)?(t=e.without(t,i),n=e.without(n,i),void 0):o._isAddedCollectionItem(i)?(t=e.without(t,i),void 0):(o._isRemovedCollectionItem(i)&&(n=e.without(n,i)),void 0)}),this.addedCollectionItems=t,this.removedCollectionItems=n,this.$addedEl.val(t.join(",")),this.$removedEl.val(n.join(",")),e.each(i,e.bind(function(e){this.getCollection().add(e)},this));for(var s=0;s<n.length;s++){var r=this.getCollection().get(n[s]);r&&(r.set("id",null),r.destroy())}this.selectorDialog.remove()},render:function(){return this.$el.html(this.template()),this.options.allowAction||this.$el.children(".actions.clearfix").remove(),this.$entitiesContainer=this.$el.find(this.options.entitiesContainerSelector),this}})}),define("oroform/js/multiple-entity/collection",["backbone","./model"],function(e,t){return e.Collection.extend({model:t,initialize:function(){this.on("change:isDefault",this.onIsDefaultChange,this)},onIsDefaultChange:function(e){if(e.get("isDefault")){var t=this.where({isDefault:!0});_.each(t,function(t){t.get("id")!==e.get("id")&&t.set("isDefault",!1)}),this.trigger("defaultChange",e)}}})}),define("oroform/js/select2_relevancy_order_handler",[],function(){return{handle:function(e){return e.ajax?(e.minimumInputLength=0,void 0):(e.sortResults=function(e,t,i){if(!i.term||i.term.length<1)return e;var n=new RegExp(i.term,"im"),o=function(e,t){var i=e.text.search(n),o=t.text.search(n);return-1==i||-1==o?o-i:i-o};return e.sort(o)},void 0)}}}),define("oroform/js/create-select-type-handler",["jquery","underscore","oroui/js/widget-manager","routing"],function(e,t,i,n){return function(o,s,r,a,l,c,d,h,u,p){var f=function(e,t){var i=e.find("span"),n=i.data("alt-label-"+t),o=i.data("label");n?(o||i.data("label",i.html()),i.html(n)):o&&i.html(o)},m=function(t){var i=e(o);f(i.find(".entity-select-btn"),t),f(i.find(".entity-create-btn"),t),f(i.find(".entity-cancel-btn"),t);var n=e(s);n.removeClass("create grid view").addClass(t),e(r).val(t);var a=n.find(".entity-create-block");"create"==t?a.removeAttr("data-validation-ignore"):a.attr("data-validation-ignore",!0)},g=function(){return e(r).val()},v=e(o),_=v.find(".entity-select-btn"),y=v.find(".entity-create-btn"),b=v.find(".entity-cancel-btn"),w=function(){i.getWidgetInstanceByAlias(c,function(e){e.firstRun?(e.render(),e.on("renderComplete",function(){m("grid")})):m("grid")})};_.on("click",function(){w()}),y.on("click",function(){m("create")}),b.on("click",function(){e(a).val()?m("view"):m("create")});var x=function(e,t){i.getWidgetInstanceByAlias(e.widget_alias,function(i){i.setUrl(n.generate(e.route_name,t)),i.render()})},k=function(t){for(var i=function(e,t){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=t.get(e[n]));return i},n={},o=0;o<d.length;o++){var s=i(d[o].grid_row_to_route,t),r=d[o].widget_alias;n[r]=s,x(d[o],s)}e(l).val(JSON.stringify(n))};i.getWidgetInstanceByAlias(c,function(t){t.on("grid-row-select",function(t){var i=t.model.get(h);i!=e(a).val()&&(e(a).val(i),k(t.model)),m("view")})});var C=function(){return JSON.parse(e(l).val())},j=function(e){switch(m(e),e){case"view":for(var t=C(),i=0;i<d.length;i++){var n=d[i].widget_alias;t[n]&&x(d[i],t[n])}break;case"grid":w()}},T=g(),S=C();(u!=T||"view"==T&&!t.isEqual(p,S))&&j(T)}}),define("oroform/js/select-create-inline-type-handler",["routing","oro/dialog-widget","oroui/js/widget-manager","orotranslation/js/translator","jquery.select2"],function(e,t,i,n){return function(o,s,r,a,l,c){var d=function(o){o.preventDefault();var c=new t({title:n("Select {{ entity }}",{entity:r}),url:e.generate(a.grid.route,a.grid.parameters),stateEnabled:!1,incrementalPosition:!1,dialogOptions:{modal:!0,allowMaximize:!0,width:1280,height:650}}),d=function(e){c._showLoading(),s.select2("val",e.model.get(l),!0),s.on("change",function(){i.getWidgetInstance(c._wid,function(e){e.remove(),s.select2("focus")})})};c.on("grid-row-select",_.bind(d,this)),c.render()},h=function(i){i.preventDefault();var o=new t({title:n("Create {{ entity }}",{entity:r}),url:e.generate(a.create.route,a.create.parameters),stateEnabled:!1,incrementalPosition:!1,dialogOptions:{modal:!0,allowMaximize:!0,width:1280,height:650}}),l=function(e){s.select2("val",e,!0),o.remove(),s.select2("focus")};o.on("formSave",_.bind(l,this)),o.render()};return o.find(".entity-select-btn").on("click",d),c&&o.find(".entity-create-btn").on("click",h),{getUrlParts:function(){return a},setUrlParts:function(e){a=e},setSelection:function(e){s.select2("val",e)},getSelection:function(){return s.select2("val")}}}}),define("oroimportexport/js/export-handler",["underscore","orotranslation/js/translator","oroui/js/messenger"],function(e,t,i){return{startExportNotificationMessage:function(){return i.notificationMessage("info",t("Export started, please wait..."))},handleExportResponse:function(e){var n,o;if(e.success)if(e.readsCount>0){n=t("Export performed successfully, {{ count }} entities were exported.",{count:e.readsCount});var s='<a href="'+e.url+'" class="no-hash" target="_blank">'+t("Download result file")+"</a>";n+=" "+s,o="success"}else n=t("No entities found for export."),o="info";else{n=t("Export operation fails, {{ count }} error(s) found.",{count:e.errorsCount});var r='<a href="'+e.url+'" class="no-hash" target="_blank">'+t("Download error log")+"</a>";n+=" "+r,o="error"}i.notificationMessage(o,n)}}}),define("oronote/js/app/views/note-view",["jquery","underscore","oroui/js/app/views/base/view","routing","orolocale/js/formatter/datetime","autolinker"],function(e,t,i,n,o,s){var r;return r=i.extend({options:{template:null},attributes:{"class":"list-item"},events:{"click .item-edit-button":"onEdit","click .item-remove-button":"onDelete","click .accordion-toggle":"onToggle"},listen:{"change model":"_onModelChanged"},initialize:function(i){this.options=t.defaults(i||{},this.options),this.collapsed=!1,this.options.template&&(this.template=t.template(e(this.options.template).html()))},getTemplateData:function(){var e=r.__super__.getTemplateData.call(this);return e.collapsed=this.collapsed,e.createdAt=o.formatDateTime(e.createdAt),e.updatedAt=o.formatDateTime(e.updatedAt),e.createdBy_url=null,e.updatedBy_url=null,e.createdBy_id&&e.createdBy_viewable&&(e.createdBy_url=n.generate("oro_user_view",{id:e.createdBy_id})),e.updatedBy_id&&e.updatedBy_viewable&&(e.updatedBy_url=n.generate("oro_user_view",{id:e.updatedBy_id})),e.message=t.escape(e.message),e.brief_message=e.message.replace(new RegExp("\r?\n","g")," "),e.message=e.message.replace(new RegExp("\r?\n","g"),"<br />"),e.message=s.link(e.message,{className:"no-hash"}),e.brief_message.length>200&&(e.brief_message=e.brief_message.substr(0,200)),e.brief_message=s.link(e.brief_message,{className:"no-hash"}),e},onEdit:function(){this.model.collection.trigger("toEdit",this.model)},onDelete:function(){this.model.collection.trigger("toDelete",this.model)},onToggle:function(e){e.preventDefault(),this.toggle()},toggle:function(e){t.isUndefined(e)&&(e=!this.isCollapsed()),this.$(".accordion-toggle").toggleClass("collapsed",e),this.$(".collapse").toggleClass("in",!e)},isCollapsed:function(){return this.$(".accordion-toggle").hasClass("collapsed")},_onModelChanged:function(){this.collapsed=this.isCollapsed(),this.render()}})}),define("oroui/js/app/views/base/collection-view",["underscore","chaplin","./view"],function(e,t,i){var n;return n=t.CollectionView.extend({initialize:function(t){e.extend(this,e.pick(t,["fallbackSelector","loadingSelector","itemSelector","listSelector"])),n.__super__.initialize.apply(this,arguments)},getTemplateFunction:i.prototype.getTemplateFunction,_ensureElement:i.prototype._ensureElement,_findRegionElem:i.prototype._findRegionElem})}),define("oronote/js/app/views/notes-view",["jquery","underscore","orotranslation/js/translator","oroui/js/app/views/base/collection-view","oroui/js/mediator","oroui/js/loading-mask","oro/dialog-widget","oroui/js/delete-confirmation"],function(e,t,i,n,o,s,r,a){var l;return l=n.extend({options:{template:null,itemTemplate:null,itemAddEvent:"note:add",itemViewIdPrefix:"note-",listSelector:".items.list-box",fallbackSelector:".no-data",loadingSelector:".loading-mask",collection:null,urls:{createItem:null,updateItem:null,deleteItem:null},messages:{}},listen:{"toEdit collection":"_editItem","toDelete collection":"_deleteItem"},initialize:function(n){this.options=t.defaults(n||{},this.options),t.defaults(this.options.messages,{addDialogTitle:i("oro.note.add_note_title"),editDialogTitle:i("oro.note.edit_note_title"),itemSaved:i("oro.note.note_saved"),itemRemoved:i("oro.note.note_removed"),deleteConfirmation:i("oro.note.note_delete_confirmation"),loadItemsError:i("oro.note.load_notes_error"),deleteItemError:i("oro.note.delete_note_error"),forbiddenError:i("oro.note.forbidden_error")}),this.template=t.template(e(this.options.template).html()),o.on(this.options.itemAddEvent,this._addItem,this),l.__super__.initialize.call(this,n)},render:function(){return l.__super__.render.apply(this,arguments),this.$loadingMaskContainer=this.$(".loading-mask"),this},expandAll:function(){t.each(this.subviews,function(e){e.toggle(!1)})},collapseAll:function(){t.each(this.subviews,function(e){e.toggle(!0)})},refresh:function(){this._reload()},toggleSorting:function(t){var i=e(t.currentTarget),n=i.data("title-alt"),o=i.data("icon-alt");i.data("title-alt",i.attr("title")),i.attr("title",n),i.data("icon-alt",i.find("i").attr("class").replace(/ hide-text/,"")),i.find("i").attr("class",o+" hide-text"),this._reload("DESC"===this.collection.getSorting()?"ASC":"DESC")},_reload:function(e){var i={};t.isUndefined(e)||this.collection.setSorting(e),this._showLoading();try{t.each(this.subviews,function(e){i[e.model.get("id")]=e.isCollapsed()}),this.collection.fetch({reset:!0,success:t.bind(function(){t.each(this.subviews,function(e){e.toggle(i[e.model.get("id")])}),this._hideLoading()},this),error:t.bind(function(e,t){this._showLoadItemsError(t.responseJSON||{})},this)})}catch(n){this._showLoadItemsError(n)}},_addItem:function(){this._openItemEditForm(this._getMessage("addDialogTitle"),this._getUrl("createItem"))},_editItem:function(e){this._openItemEditForm(this._getMessage("editDialogTitle"),this._getUrl("updateItem",e))},_deleteItem:function(e){var i=new a({content:this._getMessage("deleteConfirmation")});i.on("ok",t.bind(function(){this._onItemDelete(e)},this)),i.open()},_onItemDelete:function(e){this._showLoading();try{e.destroy({wait:!0,url:this._getUrl("deleteItem",e),success:t.bind(function(){this._hideLoading(),o.execute("showFlashMessage","success",this._getMessage("itemRemoved"))},this),error:t.bind(function(e,i){t.isUndefined(i.status)||403!==i.status?this._showDeleteItemError(i.responseJSON||{}):this._showForbiddenError(i.responseJSON||{})},this)})}catch(i){this._showDeleteItemError(i)}},_getUrl:function(e,i){return t.isFunction(this.options.urls[e])?this.options.urls[e](i):this.options.urls[e]},_getMessage:function(e){return this.options.messages[e]},_openItemEditForm:function(e,i){this.itemEditDialog||(this.itemEditDialog=new r({url:i,title:e,regionEnabled:!1,incrementalPosition:!1,dialogOptions:{modal:!0,resizable:!1,width:675,autoResize:!0,close:t.bind(function(){delete this.itemEditDialog},this)}}),this.itemEditDialog.render(),o.once("page:request",t.bind(function(){this.itemEditDialog&&this.itemEditDialog.remove()},this)),this.itemEditDialog.on("formSave",t.bind(function(e){var t,i;this.itemEditDialog.remove(),delete this.itemEditDialog,o.execute("showFlashMessage","success",this._getMessage("itemSaved")),t=this.collection.get(e.id),t?t.set(e):(i="DESC"===this.collection.sorting?0:this.collection.length,this.collection.add(e,{at:i}))},this)))},_showLoading:function(){this.$loadingMaskContainer.data("loading-mask-visible")||(this.loadingMask=new s,this.$loadingMaskContainer.data("loading-mask-visible",!0),this.$loadingMaskContainer.append(this.loadingMask.render().$el),this.loadingMask.show())},_hideLoading:function(){this.loadingMask&&(this.$loadingMaskContainer.data("loading-mask-visible",!1),this.loadingMask.remove(),this.loadingMask=null)},_showLoadItemsError:function(e){this._showError(this.options.messages.loadItemsError,e)},_showDeleteItemError:function(e){this._showError(this.options.messages.deleteItemError,e)},_showForbiddenError:function(e){this._showError(this.options.messages.forbiddenError,e)},_showError:function(e,t){this._hideLoading(),o.execute("showErrorMessage",e,t)}})}),define("oronote/js/app/models/note-model",["oroui/js/app/models/base/model"],function(e){var t;return t=e.extend({defaults:{id:"",message:"",createdAt:"",updatedAt:"",hasUpdate:!1,editable:!1,removable:!1,createdBy:null,createdBy_id:null,createdBy_viewable:!1,createdBy_avatar:null,updatedBy:null,updatedBy_id:null,updatedBy_viewable:!1,updatedBy_avatar:null}})}),define("oronote/js/app/models/notes-collection",["oroui/js/app/models/base/collection","./note-model"],function(e,t){var i;return i=e.extend({model:t,baseUrl:"",sorting:"DESC",url:function(){return this.baseUrl+"?sorting="+this.sorting},getSorting:function(){return this.sorting},setSorting:function(e){this.sorting=e}})}),define("oronote/js/app/components/notes-component",["require","oroui/js/app/components/base/component","jquery","underscore","routing","oroui/js/tools","oroui/js/mediator","oroui/js/widget-manager","../views/note-view","../views/notes-view","../models/note-model","../models/notes-collection","jquery"],function(e){var t,i=e("oroui/js/app/components/base/component"),n=e("jquery"),o=e("underscore"),s=e("routing"),r=e("oroui/js/tools"),a=(e("oroui/js/mediator"),e("oroui/js/widget-manager")),l=e("../views/note-view"),c=e("../views/notes-view"),d=e("../models/note-model"),h=e("../models/notes-collection");return e("jquery"),t=i.extend({defaults:{notesOptions:{urls:{},routes:{},itemView:l,itemModel:d},notesData:"[]",widgetId:"",modules:{}},initialize:function(e){e=e||{},this.processOptions(e),o.isEmpty(e.modules)?this.initView(e):(this.defer=n.Deferred(),r.loadModules(e.modules,function(t){o.extend(e.notesOptions,t),this.initView(e),this.defer.resolve(this)},this))},processOptions:function(e){var t;t=n.extend(!0,{},this.defaults),o.defaults(e,t),o.defaults(e.notesOptions,t.notesOptions),o.each(e.notesOptions.routes,function(t,i){e.notesOptions.urls[i+"Item"]=function(e){return s.generate(t,{id:e.get("id")})}}),delete e.notesOptions.routes,e.notesData=JSON.parse(e.notesData),e.notesOptions.el=e._sourceElement,o.each(["itemView","itemModel"],function(t){"string"==typeof e.notesOptions[t]&&(e.modules[t]=e.notesOptions[t])})},initView:function(e){var t,i;t=e.notesOptions,i=new h(e.notesData,{model:t.itemModel}),i.baseUrl=t.urls.list,t.collection=i,t.itemView=t.itemView.extend({template:o.template(n(t.itemTemplate).html())}),this.list=new c(t),this.registerWidget(e)},registerWidget:function(e){var t=this.list;a.getWidgetInstance(e.widgetId,function(e){e.getAction("collapse_all","adopted",function(e){e.on("click",o.bind(t.collapseAll,t))}),e.getAction("refresh","adopted",function(e){e.on("click",o.bind(t.refresh,t))}),e.getAction("toggle_sorting","adopted",function(e){e.on("click",o.bind(t.toggleSorting,t))})})}})}),define("oroui/js/dropdown-select",["jquery","underscore","jquery-ui"],function(e,t){return e.widget("oroui.dropdownSelect",{template:t.template('<% if (useButtonGroup) { %><div class="btn-group"><% } %><a href="#" class="<%= buttonClass %> dropdown-toggle" data-toggle="dropdown" data-value="<%= selected.value %>"><span><%= selected.label %></span><% if (useCaret) { %> <span class="caret"></span><% } %></a><ul class="dropdown-menu"><% _.each(options, function (option) { %><li<% if (selected.value == option.value) { %> class="selected"<% } %>><a href="#" data-value="<%= option.value %>"><%= option.label %></a></li><% }); %></ul><% if (useButtonGroup) { %></div><% } %>'),options:{options:[],selected:null,buttonClass:"btn",useButtonGroup:!0,useCaret:!0},_create:function(){this._mapSelectOptions(),this.element.append(this.template(this.options)),this._on({"click .dropdown-menu a":this._onSelect})},_mapSelectOptions:function(){var i=this.options.selected;this.options.options=e.map(this.options.options,function(e){var n=null;return t.isString(e)?n=e:t.isArray(e)?e=t.object(["value","label"],e):!t.isObject(e)||t.has(e,"value")&&t.has(e,"label")||(n=e.value||e.label),e=null!==n?{value:n,label:n}:e,t.isEmpty(i)||i!==e.value&&i.value!==e.value||(i=e),e}),t.isEmpty(i)&&(i=this.options.options[0]),this.options.selected=i},_onSelect:function(t){t.preventDefault(),this._select(e(t.target).data("value"))},_select:function(e){var i=t.findWhere(this.options.options,{value:e});i!==this.options.selected&&(this.options.selected=i,this.element.find(".dropdown-menu li").removeClass("selected").has("[data-value="+e+"]").addClass("selected"),this.element.find("[data-toggle=dropdown]").data("value",e).find("span:first-child").text(i.label),this.element.trigger({type:"change",value:e,option:t.clone(i)}))}}),e}),define("oroquerydesigner/js/condition-builder",["jquery","jquery-ui","oroui/js/dropdown-select"],function(e){return e.widget("oroquerydesigner.conditionBuilder",{options:{sortable:{placeholder:"sortable-placeholder",items:">[data-criteria]",connectWith:".conditions-group"},conditionsGroup:{items:">.condition[data-criteria]",cursorAt:"10 10",cancel:"a, input, .btn, select"},criteriaList:{helper:"clone",cancel:".disabled"},operations:["AND","OR"],criteriaListSelector:"#filter-criteria-list",sourceValueSelector:"",helperClass:"ui-grabbing",conditionHTML:'<li class="condition controls" />',conditionItemHTML:'<div class="condition-item" />',conditionsGroupHTML:'<ul class="conditions-group" />',validation:{"condition-item":{NotBlank:{message:"oro.query_designer.condition_builder.condition_item.not_blank"}},"conditions-group":{NotBlank:{message:"oro.query_designer.condition_builder.conditions_group.not_blank"}}}},_create:function(){var t;this.$criteriaList=e(this.options.criteriaListSelector),this._prepareOptions(),this._initCriteriaList(),this._initConditionBuilder(),this._on({"change .operator":"_onChangeOperator","click .close":"_onConditionClose"}),t=this.$criteriaList.find("[data-module]").map(function(){return e(this).data("module")}).get(),t.length?require(t,e.proxy(this._initControl,this)):this._initControl()},_getCreateOptions:function(){return e.extend(!0,{},this.options)},_prepareOptions:function(){var t=this.options;t.conditionsGroup=e.extend({},t.sortable,t.conditionsGroup),t.conditionsGroup.appendTo=t.criteriaListSelector,t.conditionsGroup.helper=e.proxy(this._createHelper,this),t.conditionsGroup.update=e.proxy(this._onHierarchyChange,this),t.conditionsGroup.remove=function(){e(this).trigger("changed")},t.criteriaList=e.extend({},t.sortable,t.criteriaList),t.criteriaList.start=e.proxy(this._onCriteriaGrab,this),t.criteriaList.stop=e.proxy(this._onCriteriaDrop,this)},getValue:function(){return this.$rootCondition.data("value")||[]},setValue:function(e){e=e||[],this.$rootCondition.data("initialized")?this._createConditionContent(this.$rootCondition.empty(),e):this.$rootCondition.data("value",e),this.$rootCondition.trigger("changed")},_initCriteriaList:function(){this.$criteriaList.sortable(this.options.criteriaList),this._on(this.$criteriaList,{mousedown:function(){e(":focus").blur()}})},_initConditionBuilder:function(){var t=this.element,i=this.options.sortable.connectWith;t.is(i)||(t=t.find(i),t.length||(t=e(this.options.conditionsGroupHTML).appendTo(this.element))),t.data("value",this._getSourceValue()),this._on(t,{changed:"_onChanged"}),this.$rootCondition=t},_initControl:function(){var e=this._createConditionContent(this.$rootCondition,this.$rootCondition.data("value"));this._initConditionsGroup(e),this._updateOperators(),this.$rootCondition.data("initialized",!0)},_initConditionsGroup:function(t){t.sortable(this.options.conditionsGroup),this._on(t,{"changed >[data-criteria]>[data-value]:not(.operator)":function(t){var i=e(t.currentTarget),n=i.parent(),o=n.data("criteria"),s=!e.isEmptyObject(i.data("value"));n.find(">input[name^=condition_item_]").prop("checked",s),s&&-1===e.inArray(o,["conditions-group","condition-item"])&&e.extend(i.data("value"),{criteria:o})},changed:function(){var i=[];t.find(">[data-criteria]>[data-value]").each(function(){i.push(e(this).data("value"))}),t.data("value",i)}})},_onCriteriaGrab:function(e,t){var i=t.item,n=i.clone();i.data("clone",n),n.data("origin",i).removeAttr("style").insertAfter(i),t.helper.addClass(this.options.helperClass)},_onCriteriaDrop:function(e,t){var i=t.item,n=i.data("clone");n.removeData("origin").replaceWith(i.removeData("clone"))},_getCriteriaOrigin:function(e){var t=this.$criteriaList.find('[data-criteria="'+e+'"]');return t.data("origin")||t},_createCondition:function(t,i){var n,o,s,r,a,l;return t||(t=e.isArray(i)?"conditions-group":i.criteria||"condition-item"),"conditions-group"===t?(n=this._createConditionContent(this.options.conditionsGroupHTML,i||[]),this._initConditionsGroup(n)):(n=this._createConditionContent(this.options.conditionItemHTML,i||{}),s=this._getCriteriaOrigin(t),a=s.data("options")||{},l=s.data("widget"),e.isFunction(n[l])&&n[l](a)),o=e(this.options.conditionHTML).attr("data-criteria",t).prepend(n).prepend('<a class="close" href="#">&times;</a>'),r=this._createValidationInput(t,n.data("value")),r&&o.append(r),o},_createConditionContent:function(t,i){var n,o=this,s=e(t);return e.isArray(i)&&(n=null,e.each(i,function(t,i){var r;"string"===e.type(i)?n=i:(r=o._createCondition(null,i),n&&(o._initConditionOperation(r,n),n=null),s.append(r))})),s.attr("data-value","").data("value",i)},_createValidationInput:function(t,i){var n,o=this.options.validation,s=o[t]||o["condition-item"];return s&&(n=e('<input class="select2-focusser select2-offscreen" type="checkbox"/>').prop("checked",!e.isEmptyObject(i)).attr("name","condition_item_"+Date.now()).data("validation",s)),n},_createHelper:function(e,t){var i=this._getCriteriaOrigin(t.data("criteria"));return i.clone().css({width:i.outerWidth(),height:i.outerHeight()}).addClass(this.options.helperClass)},_onHierarchyChange:function(e,t){var i;t.sender&&t.sender.is(this.$criteriaList)?(i=this._createCondition(t.item.data("criteria")),i.insertBefore(t.item)):i=t.item,i.trigger("changed"),this._updateOperators()},_updateOperators:function(){var t=this,i=this.options.conditionsGroup,n=this.element.find(i.connectWith+i.items);n.filter(":first-child").find(">.operator").each(function(){var t=e(this),i=t.parent();t.remove(),i.trigger("changed")}),n.filter(":not(:first-child)").not(":has(>.operator)").each(function(){t._initConditionOperation(this)}).trigger("changed")},_initConditionOperation:function(t,i){i=i||this.options.operations[0]||"",e('<div class="operator"/>').attr("data-value","").data("value",i).prependTo(t).dropdownSelect({buttonClass:"btn btn-mini",options:this.options.operations,selected:i})},_onChangeOperator:function(t){e(t.target).data("value",t.value).trigger("changed")},_onConditionClose:function(t){var i=e(t.target).parent(),n=i.parent();t.preventDefault(),i.remove(),this._updateOperators(),n.trigger("changed")},_onChanged:function(){this._setSourceValue(this.$rootCondition.data("value"))},_setSourceValue:function(t){this.options.sourceValueSelector&&e(this.options.sourceValueSelector).val(JSON.stringify(t))},_getSourceValue:function(){var t;return this.options.sourceValueSelector&&(t=e(this.options.sourceValueSelector).val()),t?JSON.parse(t):[]}}),e}),define("oroquerydesigner/js/field-condition",["jquery","underscore","orotranslation/js/translator","orofilter/js/map-filter-module-name","oroentity/js/field-choice","jquery-ui"],function(e,t,i,n){return e.widget("oroquerydesigner.fieldCondition",{options:{fieldChoice:{},fieldChoiceClass:"select",filters:[],filterContainerClass:"active-filter",hierarchy:[]},_create:function(){var t=this.element.data("value");this.options.filters.push({type:"none",applicable:{},popupHint:i("Choose a column first")}),this.$fieldChoice=e("<input>").addClass(this.options.fieldChoiceClass),this.$filterContainer=e("<span>").addClass(this.options.filterContainerClass),this.element.append(this.$fieldChoice,this.$filterContainer),this.$fieldChoice.fieldChoice(this.options.fieldChoice),t&&t.columnName&&(this.selectField(t.columnName),this._renderFilter(t.columnName)),this._on(this.$fieldChoice,{changed:function(t,i){e(":focus").blur(),this.element.data("value",{}),this._renderFilter(i),t.stopPropagation()}}),this._on(this.$filterContainer,{change:function(){this.filter&&this.filter.applyValue()}})},_destroy:function(){this.filter&&(this.filter.dispose(),delete this.filter)},_getCreateOptions:function(){return e.extend(!0,{},this.options)},_renderFilter:function(e){var t=this.$fieldChoice.fieldChoice("getApplicableConditions",e),i=this._getApplicableFilterId(t),n=this.options.filters[i];this._createFilter(n,e)},_getApplicableFilterId:function(e){var i=null,n=null,o=this;return t.isUndefined(e.filter)?(t.each(this.options.filters,function(s,r){var a;t.isEmpty(s.applicable)?t.isNull(i)&&(i=r):(a=o._matchApplicable(s.applicable,e),a&&(t.isNull(n)||t.size(n)<t.size(a)||1===t.size(n)&&t.has(n,"type"))&&(n=a,i=r))}),i):e.filter},_matchApplicable:function(e,i){var n=this.options.hierarchy[i.entity];return t.find(e,function(e){return t.every(e,function(e,o){return"entity"==o&&n.length?t.indexOf(n,i[o]):i[o]===e})})},_createFilter:function(e,o){var s=n(e.type),r=[s];e.init_module&&r.push(e.init_module);var a=setTimeout(t.bind(function(){this.$filterContainer.html('<span class="loading-indicator">'+i("Loading...")+"</span>")},this),100);require(r,t.bind(function(i,n){function s(){clearTimeout(a);var t=new(i.extend(e));this._appendFilter(t)}if(n){var r=n(e,this.$fieldChoice.fieldChoice("splitFieldId",o));r.done(t.bind(s,this))}else s.call(this)},this))},_appendFilter:function(e){var i=this.element.data("value");this.filter=e,i&&i.criterion&&(this.filter.value=i.criterion.data),this.filter.render(),this.$filterContainer.empty().append(this.filter.$el),this.filter.on("update",t.bind(this._onUpdate,this)),this._onUpdate()},_onUpdate:function(){var e;e=this.filter.isEmptyValue()?{}:{columnName:this.element.find("input.select").select2("val"),criterion:this._getFilterCriterion()},this.element.data("value",e),this.element.trigger("changed")},_getFilterCriterion:function(){var e=this.filter.getValue();return this.filter.filterParams&&(e.params=this.filter.filterParams),{filter:this.filter.name,data:e}},selectField:function(e){this.$fieldChoice.fieldChoice("setValue",e)}}),e}),define("oroquerydesigner/js/function-choice",["jquery","underscore","jquery-ui"],function(e,t){return e.widget("oroquerydesigner.functionChoice",{options:{fieldChoiceSelector:"",optionTemplate:t.template('<option value="<%- name %>" title="<%- title %>" data-group_name="<%- group_name %>" data-group_type="<%- group_type %>"><%- label %></option>'),converters:[],aggregates:[]},activeFunctionGroupKey:null,_create:function(){this._disable(!0),this._bindFieldChoice()},setActiveFunctions:function(e,i){var n=this,o=this.options,s=[],r=null,a="",l=[];t.each(o.converters,function(t,i){n._matchApplicable(t.applicable,e)&&s.push({group_name:i,group_type:"converters"})}),i||t.each(o.aggregates,function(t,i){n._matchApplicable(t.applicable,e)&&s.push({group_name:i,group_type:"aggregates"})}),t.isEmpty(s)||(r="",t.each(s,function(e){r+=e.group_type+":"+e.group_name+";"})),r&&r!==this.activeFunctionGroupKey&&(this._clearSelect(),t.each(s,function(e){t.each(o[e.group_type][e.group_name].functions,function(i){var n=-1;if(t.any(l,function(e,t){return e.name===i.name?(n=t,!0):!1}),-1!==n){var o=l[n].label,s=l[n].title;l[n]=t.extend({},e,i),t.isNull(l[n].label)&&(l[n].label=o),t.isNull(l[n].title)&&(l[n].title=s)}else l.push(t.extend({},e,i))})}),t.each(l,function(e){a+=o.optionTemplate(e)}),""!==a&&this.element.append(a),this.activeFunctionGroupKey=r),this._disable(!r),this.element.val("").trigger("change")},_matchApplicable:function(e,i){return t.find(e,function(e){return t.every(e,function(e,t){return i[t]===e})})},_clearSelect:function(){this.element.find("option").not('[value=""]').remove()
},_disable:function(e){var t=this.element;t.data("select2")?t.select2("enable",!e):t.attr("disabled",e),t.data("uniformed")&&t.parent().toggleClass("disabled",e)},_bindFieldChoice:function(){var t,i=this;this.options.fieldChoiceSelector&&(t=e(this.options.fieldChoiceSelector),t.change(function(n){var o=t.fieldChoice("getApplicableConditions",e(n.target).val());i.setActiveFunctions(o)}))}}),e}),define("oroquerydesigner/js/items-manager/grouping-model",["backbone"],function(e){return e.Model.extend({defaults:{name:null}})}),define("oroquerydesigner/js/items-manager/column-model",["backbone"],function(e){return e.Model.extend({defaults:{name:null,label:null,func:null,sorting:null}})}),define("oroquerydesigner/js/app/components/column-form",["require","underscore","oroentity/js/field-choice","oroquerydesigner/js/function-choice"],function(e){var t,i,n;return t=e("underscore"),i=e("oroentity/js/field-choice"),e("oroquerydesigner/js/function-choice"),n={showItems:["column","label","function","sorting","action"]},function(e){var o,s,r,a;e=i.extend({},n,e),o=e._sourceElement,s=o.find("[data-purpose=column-selector]"),r=o.find("[data-purpose=function-selector]"),a=o.find("[data-purpose=label]"),t.contains(e.showItems,"function")&&r.functionChoice({fieldChoiceSelector:s}),s.on("change",function(e){e.added&&a.val(e.added.text).trigger("change")})}}),define("oroquerydesigner/js/app/components/condition-builder",["require","oroquerydesigner/js/condition-builder","underscore"],function(e){var t,i,n;return t=e("oroquerydesigner/js/condition-builder"),i=e("underscore"),n={eriaListSelector:"",entityChoiceSelector:"",onFieldsUpdate:{toggleCriteria:[]}},function(e){var o,s,r,a,l;e=t.extend(!0,{},n,e),o=e._sourceElement,s=t(e.entityChoiceSelector),r=t(e.criteriaListSelector),l=e.onFieldsUpdate.toggleCriteria,a=r.find("[data-criteria]").filter(function(){return i.contains(l,t(this).data("criteria"))}),s.on("fieldsloaderupdate",function(e,i){o.conditionBuilder("setValue",[]),a.toggleClass("disabled",t.isEmptyObject(i))}),o.conditionBuilder({criteriaListSelector:r})}}),define("oroquerydesigner/js/enum-filter-initialized",["jquery","underscore","orotranslation/js/translator","routing","oroui/js/messenger"],function(e,t,i,n,o){function s(s,r,a){e.ajax({url:n.generate("oro_api_get_entity_extend_enum",{entityName:s.replace(/\\/g,"_")}),success:function(e){e=t.sortBy(e,"priority");var i=t.map(e,function(e){return{value:e.id,label:e.name}});r(i)},error:function(e){o.showErrorMessage(i("Sorry, unexpected error was occurred"),e.responseJSON),a&&a(e)}})}return function(e,i){var n=new jQuery.Deferred,o=t.last(i).field.related_entity_name;return s(o,function(i){var s=null,r={"class":o};e.nullValue&&(r.null_value=e.nullValue,s=t.find(e.choices,function(t){return t.value===e.nullValue}),s&&i.unshift(s)),e.filterParams=r,e.choices=i,n.resolveWith(e)}),n}}),define("ororeport/js/chart-options",["require","jquery","underscore","orotranslation/js/translator","oroui/js/mediator","oroentity/js/entity-fields-util","oroentity/js/fields-loader","jquery.select2"],function(e){var t=e("jquery"),i=e("underscore"),n=e("orotranslation/js/translator"),o=e("oroui/js/mediator"),s=e("oroentity/js/entity-fields-util");return e("oroentity/js/fields-loader"),e("jquery.select2"),{options:{childTemplate:"[id^=<%= id %>_]",optionsTemplate:"<%= field %>(<%= group %>,<%= name %>,<%= type %>)",fieldsLoaderSelector:"#oro_report_form_entity",fieldsTableIdentifier:"item-container"},initialize:function(e,t){var n=this;this.options=i.extend({},this.options,t),this.items=[],o.on("items-manager:table:reset:"+n.options.fieldsTableIdentifier,function(t){n.updateCollection(t),n.validateSelect2(e)}),o.once("items-manager:table:reset:"+n.options.fieldsTableIdentifier,function(){n.initSelect2(e),n.initializeListeners(e)})},initializeListeners:function(e){var t=this;o.on("items-manager:table:add:"+t.options.fieldsTableIdentifier,function(e){t.updateCollection(e)}),o.on("items-manager:table:change:"+t.options.fieldsTableIdentifier,function(i){t.updateCollection(i),t.validateSelect2(e)}),o.on("items-manager:table:remove:"+t.options.fieldsTableIdentifier,function(i){t.updateCollection(i),t.validateSelect2(e)})},updateCollection:function(e){var i=t(this.options.fieldsLoaderSelector).fieldsLoader("getEntityName"),n=t(this.options.fieldsLoaderSelector).fieldsLoader("getFieldsData");this.util=new s(i,n),this.items=e.toJSON()},validateSelect2:function(e){var n=this,o=i.template(this.options.childTemplate,{id:e});t("#"+e).find(o).each(function(){var e=t(this).val();if(e){var o=i.first(e.split("("));i.findWhere(n.items,{name:o})||t(this).select2("val","")}})},initSelect2:function(e){var o=i.template(this.options.childTemplate,{id:e}),s=this;t("#"+e).find(o).each(function(){var e=t(this).data("type-filter");t(this).select2({collapsibleResults:!0,placeholder:n("oro.entity.form.choose_entity_field"),data:function(){return s.data(e)},initSelection:function(e,t){var n=e.val().split("("),o=i.last(s.util.pathToEntityChain(n[0]));t({id:n.join("("),text:o.field.label})}})})},data:function(e){var n,o,r;return o=this.util,n={more:!1,results:[]},o?(r=i.template(this.options.optionsTemplate),t.each(this.items,function(){var a,l,c,d;a=this.func,l=o.pathToEntityChain(this.name).slice(1),c=l[l.length-1],d=n.results,c&&s.filterFields([c.field],e).length&&t.each(l,function(){var e,t;this.entity?(e=i.findWhere(d,{path:this.path}),e||(e={text:this.field.label,path:this.path,children:[]},d.push(e)),d=e.children):(t=a?r({field:this.path,group:a.name,name:a.group_name,type:a.group_type}):this.path,d.push({text:this.field.label,id:t}))})}),n):n}}}),define("orosegment/js/app/components/refresh-button",["require","jquery","orotranslation/js/translator","routing","oroui/js/delete-confirmation","oroui/js/mediator"],function(e){function t(e,t){r.execute("showLoading"),n.post(e,function(){t?(r.once("page:update",function(){r.execute("showFlashMessage","success",o(a.successMessage))}),r.execute("refreshPage")):r.execute("showFlashMessage","success",o(a.successMessage))}).error(function(){r.execute("showFlashMessage","error",o(a.errorMessage))}).always(function(){r.execute("hideLoading")})}function i(e,i){var r,l;i.preventDefault(),r=new s({title:o(a.title),okText:o(a.okText),content:o(a.content)}),l=n(i.target).data("url"),r.on("ok",n.proxy(t,null,l,e)),r.open()}var n=e("jquery"),o=e("orotranslation/js/translator"),s=(e("routing"),e("oroui/js/delete-confirmation")),r=e("oroui/js/mediator"),a={successMessage:"oro.segment.refresh_dialog.success",errorMessage:"oro.segment.refresh_dialog.error",title:"oro.segment.refresh_dialog.title",okText:"oro.segment.refresh_dialog.okText",content:"oro.segment.refresh_dialog.content",reloadRequired:!1};return function(e){_.extend(a,e||{});var t,o;t=Boolean(a.reloadRequired),o=a._sourceElement,o.click(n.proxy(i,null,t))}}),define("orosegment/js/segment-choice",["jquery","underscore","routing","jquery-ui","jquery.select2"],function(e,t,i){return e.widget("orosegment.segmentChoice",{options:{entity:null,data:{},segmentData:{},select2:{collapsibleResults:!0,dropdownAutoWidth:!0},exclude:[],fieldsLoaderSelector:""},_create:function(){this._on({change:function(e){e.added&&this.element.trigger("changed",e.added.id)}}),this._bindFieldsLoader()},_init:function(){this._processSelect2Options(),this._updateData(this.options.entity,this.options.segmentData)},_setOption:function(t,i){return e.isPlainObject(i)?e.extend(this.options[t],i):this._super(t,i),this},_getCreateOptions:function(){return e.extend(!0,{},this.options)},_processSelect2Options:function(){var n,o=this.options.select2;o.formatSelectionTemplate&&(n=t.template(o.formatSelectionTemplate),o.formatSelection=function(e){return e&&e.id?n(e):""});var s=this.options.select2.ajax&&i.generate(this.options.select2.ajax.url,{entityName:this.options.entity.replace(/\\/g,"_"),_format:"json"});this.options.select2.ajax=t.extend({},this.options.select2.ajax,{url:s,data:t.bind(function(e,t){return{page:t,pageLimit:this.options.pageLimit,term:e,currentSegment:this.options.currentSegment}},this),results:function(e){return e}}),this.options.select2.initSelection=function(t,i){var n=t.data("data");e.isEmptyObject(n)||i(n)}},_bindFieldsLoader:function(){var t;this.options.fieldsLoaderSelector&&(t=e(this.options.fieldsLoaderSelector),this._updateData(t.val(),this.options.segmentData))},_updateData:function(e,t){this.options.entity=e,this.element.data("entity",e).data("data",t),this.element.select2(this.options.select2)},setValue:function(e){this.element.select2("val",e,!0)},setSelectedData:function(e){this.element.select2("data",e)}}),e}),define("orosegment/js/app/components/segment-component",["require","jquery","underscore","oroui/js/app/components/base/component","oroui/js/app/models/base/collection","orotranslation/js/translator","oroui/js/loading-mask","oroquerydesigner/js/items-manager/grouping-model","oroquerydesigner/js/items-manager/column-model","oroui/js/delete-confirmation","oroentity/js/entity-fields-util","oroentity/js/field-choice","oroentity/js/fields-loader","orosegment/js/segment-choice","oroui/js/items-manager/editor","oroui/js/items-manager/table","oroquerydesigner/js/condition-builder"],function(e){var t,i=e("jquery"),n=e("underscore"),o=e("oroui/js/app/components/base/component"),s=e("oroui/js/app/models/base/collection"),r=e("orotranslation/js/translator"),a=e("oroui/js/loading-mask"),l=e("oroquerydesigner/js/items-manager/grouping-model"),c=e("oroquerydesigner/js/items-manager/column-model"),d=e("oroui/js/delete-confirmation"),h=e("oroentity/js/entity-fields-util");return e("oroentity/js/field-choice"),e("oroentity/js/fields-loader"),e("orosegment/js/segment-choice"),e("oroui/js/items-manager/editor"),e("oroui/js/items-manager/table"),e("oroquerydesigner/js/condition-builder"),t=o.extend({defaults:{entityChoice:"",valueSource:"",fieldsLoader:{loadingMaskParent:"",router:null,routingParams:{},fieldsData:[],confirmMessage:""},filters:{criteriaList:"",conditionBuilder:""},grouping:{editor:{},form:"",itemContainer:"",itemTemplate:""},column:{editor:{},form:"",itemContainer:"",itemTemplate:""},select2FieldChoiceTemplate:"",select2SegmentChoiceTemplate:"",entities:[],metadata:{}},initialize:function(e){this.processOptions(e),this.$storage=i(this.options.valueSource),this.initEntityFieldsUtil(),this.initFieldsLoader(),this.initGrouping(),this.initColumn(),this.configureFilters(),this.$entityChoice&&this.trigger("fieldsLoaded",this.$entityChoice.val(),this.$entityChoice.fieldsLoader("getFieldsData")),t.__super__.initialize.call(this,e),this.form=this.$storage.parents("form"),this.form.submit(n.bind(this.onBeforeSubmit,this))},onBeforeSubmit:function(e){var t,i=[];return this.trigger("find-unsaved-components",i),i.length?(t=new d({title:r("oro.segment.confirm.unsaved_changes.title"),content:r("oro.segment.confirm.unsaved_changes.message",{components:i.join(", ")}),okCloses:!0,okText:r("Ok")}),t.open(n.bind(function(){this.trigger("before-submit"),this.form.trigger("submit")},this)),e.preventDefault(),void 0):(this.trigger("before-submit"),void 0)},dispose:function(){this.disposed||(this.trigger("dispose:before"),delete this.options,delete this.$storage,t.__super__.dispose.call(this))},formatChoice:function(e,t){var i;if(e)try{i=this.entityFieldsUtil.pathToEntityChain(e)}catch(n){}return i?t(i):e},load:function(e){var t={},i=this.$storage.val();if(i)try{t=JSON.parse(i)}catch(n){return void 0}return e?t[e]:t},save:function(e,t){var i=this.load();t?i[t]=e:i=t,this.$storage.val(JSON.stringify(i))},processOptions:function(e){this.options={},i.extend(!0,this.options,this.defaults,e),this.options.fieldChoiceOptions={select2:{formatSelectionTemplate:i(this.options.select2FieldChoiceTemplate).text()}},this.options.columnFieldChoiceOptions||(this.options.columnFieldChoiceOptions={}),n.defaults(this.options.columnFieldChoiceOptions,this.options.fieldChoiceOptions),this.options.segmentChoiceOptions={},i.extend(!0,this.options.segmentChoiceOptions,this.options.fieldChoiceOptions,{select2:{formatSelectionTemplate:i(this.options.select2SegmentChoiceTemplate).text()}})},initEntityFieldsUtil:function(){this.entityFieldsUtil=new h,this.on("fieldsLoaded",this.entityFieldsUtil.init,this.entityFieldsUtil),this.once("dispose:before",function(){delete this.entityFieldsUtil})},initFieldsLoader:function(){var e,t,o,s,l;e=this,t=this.options.fieldsLoader,s=new a,i(t.loadingMaskParent).append(s.render().$el),o=new d({title:r("Change Entity Confirmation"),okText:r("Yes"),content:r(t.confirmMessage)}),l=this.$entityChoice=i(t.entityChoice),l.fieldsLoader({router:t.router,routingParams:t.routingParams,confirm:o,requireConfirm:function(){var t=e.load();return t?n.some(t,function(e){return!n.isEmpty(e)}):!1}}).on("fieldsloaderstart",n.bind(s.show,s)).on("fieldsloadercomplete",n.bind(s.hide,s)).on("fieldsloaderupdate",function(t,n){e.trigger("fieldsLoaded",i(t.target).val(),n)}).on("fieldsloadercomplete",function(){var t={};e.trigger("resetData",t),e.save(t)}),n.isEmpty(t.fieldsData)||l.fieldsLoader("setFieldsData",JSON.parse(t.fieldsData)),this.once("dispose:before",function(){s.dispose(),o.dispose(),delete this.$entityChoice},this)},initGrouping:function(){var e,t,o,a,c,h,u,p,f;e=this,t=this.options.grouping,c=i(t.itemContainer),h=i(t.form),n.isEmpty(c)||n.isEmpty(h)||(o=n.extend({},this.options.fieldChoiceOptions,this.options.metadata.grouping,{select2:{}}),u=h.find("[data-purpose=column-selector]"),u.fieldChoice(o),this.on("fieldsLoaded",function(e,t){u.fieldChoice("updateData",e,t)}),p=new s(this.load("grouping_columns"),{model:l}),this.listenTo(p,"add remove sort change",function(){this.save(p.toJSON(),"grouping_columns")}),a=new d({content:""}),a.on("ok",function(){p.remove(this.model)}),a.on("hidden",function(){delete this.model}),h.itemsManagerEditor(i.extend(t.editor,{collection:p})),this.on("find-unsaved-components",function(e){h.itemsManagerEditor("hasChanges")&&e.push(r("oro.segment.grouping_editor"))}),this.on("before-submit",function(){h.itemsManagerEditor("reset")}),f=n.template(this.options.fieldChoiceOptions.select2.formatSelectionTemplate),c.itemsManagerTable({collection:p,itemTemplate:i(t.itemTemplate).html(),itemRender:function(t,i){return i.name=e.formatChoice(i.name,f),t(i)},deleteHandler:function(e,t){a.setContent(t.message),a.model=e,a.open()}}),this.on("resetData",function(e){e.grouping_columns=[],c.itemsManagerTable("reset"),h.itemsManagerEditor("reset")}),this.once("dispose:before",function(){a.dispose(),p.dispose(),h.itemsManagerEditor("destroy"),c.itemsManagerTable("destroy")},this))},initColumn:function(){var e,t,o,a,l,h,u,p,f,m,g;e=this,t=this.options.column,o=this.options.metadata,h=i(t.itemContainer),u=i(t.form),n.isEmpty(h)||n.isEmpty(u)||(a=n.extend({},this.options.columnFieldChoiceOptions,{select2:{}}),p=u.find("[data-purpose=column-selector]"),p.fieldChoice(a),this.on("fieldsLoaded",function(e,t){p.fieldChoice("updateData",e,t)}),f=new s(this.load("columns"),{model:c}),this.listenTo(f,"add remove sort change",function(){this.save(f.toJSON(),"columns")}),l=new d({content:""}),l.on("ok",function(){f.remove(this.model)}),l.on("hidden",function(){delete this.model}),u.find("[data-purpose=function-selector]").functionChoice({converters:o.converters,aggregates:o.aggregates}),u.itemsManagerEditor(i.extend(t.editor,{collection:f,setter:function(e,t,i){return"func"===t&&(i=i.name),i},getter:function(e,t,i){return"func"===t&&(i=i&&{name:i,group_type:e.find(":selected").data("group_type"),group_name:e.find(":selected").data("group_name")}),i}})),g={},u.find("select[name*=sorting]").find('option:not([value=""])').each(function(){g[this.value]=i(this).text()}),this.on("find-unsaved-components",function(e){u.itemsManagerEditor("hasChanges")&&e.push(r("oro.segment.report_column_editor"))}),this.on("before-submit",function(){u.itemsManagerEditor("reset")}),m=n.template(this.options.columnFieldChoiceOptions.select2.formatSelectionTemplate),h.itemsManagerTable({collection:f,itemTemplate:i(t.itemTemplate).html(),itemRender:function(t,i){var s,r,a=i.func;return i.name=e.formatChoice(i.name,m),a&&a.name?(s=o[a.group_type][a.group_name],s&&(r=n.findWhere(s.functions,{name:a.name}),r&&(i.func=r.label))):i.func="",i.sorting&&g[i.sorting]&&(i.sorting=g[i.sorting]),t(i)},deleteHandler:function(e,t){l.setContent(t.message),l.model=e,l.open()}}),this.on("resetData",function(e){e.columns=[],h.itemsManagerTable("reset"),u.itemsManagerEditor("reset")}),this.once("dispose:before",function(){l.dispose(),f.dispose(),u.itemsManagerEditor("destroy"),h.itemsManagerTable("destroy")},this))},configureFilters:function(){var e,t,o,s,r,a,l;e=this,t=this.options.filters,o=this.options.metadata,a=i(t.conditionBuilder),l=i(t.criteriaList),n.isEmpty(a)||n.isEmpty(l)||(s=l.find("[data-criteria=condition-item]"),n.isEmpty(s)||i.extend(!0,s.data("options"),{fieldChoice:this.options.fieldChoiceOptions,filters:o.filters,hierarchy:o.hierarchy}),r=l.find("[data-criteria=condition-segment]"),n.isEmpty(r)||i.extend(!0,r.data("options"),{segmentChoice:this.options.segmentChoiceOptions,filters:o.filters}),a.conditionBuilder({criteriaListSelector:t.criteriaList}),a.conditionBuilder("setValue",this.load("filters")),a.on("changed",function(){e.save(a.conditionBuilder("getValue"),"filters")}),this.on("resetData",function(e){e.filters=[],a.conditionBuilder("setValue",e.filters)}),this.once("dispose:before",function(){a.conditionBuilder("destroy")},this))}})}),define("orosidebar/js/constants",[],function(){var e={};return e.SIDEBAR_LEFT="SIDEBAR_LEFT",e.SIDEBAR_RIGHT="SIDEBAR_RIGHT",e.SIDEBAR_MINIMIZED="SIDEBAR_MINIMIZED",e.SIDEBAR_MAXIMIZED="SIDEBAR_MAXIMIZED",e.WIDGET_MINIMIZED="WIDGET_MINIMIZED",e.WIDGET_MAXIMIZED="WIDGET_MAXIMIZED",e.WIDGET_MAXIMIZED_HOVER="WIDGET_MAXIMIZED_HOVER",e}),define("orosidebar/js/model",["backbone","routing","./constants"],function(e,t,i){return e.Model.extend({defaults:{position:i.SIDEBAR_LEFT,state:i.SIDEBAR_MINIMIZED},toggleState:function(){switch(this.get("state")){case i.SIDEBAR_MINIMIZED:this.set("state",i.SIDEBAR_MAXIMIZED);break;case i.SIDEBAR_MAXIMIZED:this.set("state",i.SIDEBAR_MINIMIZED)}}})}),define("text!orosidebar/js/widget-container/templates/icon-template.html",[],function(){return'<% if (iconClass) { %>\n    <i class="<%= iconClass %>" title="<%= title %>"></i>\n<% } else { %>\n    <img src="<%= icon %>" alt="<%= title %>" title="<%= title %>"/>\n<% } %>'}),define("orosidebar/js/widget-container/icon-view",["require","underscore","backbone","text!./templates/icon-template.html","../constants"],function(e){var t=e("underscore"),i=e("backbone"),n=e("text!./templates/icon-template.html"),o=e("../constants");return i.View.extend({className:"sidebar-icon",events:{click:"onClick"},initialize:function(){var e=this;e.template=t.template(n),e.listenTo(e.model,"change",e.render)},render:function(){var e=this,t=e.model;return e.$el.html(e.template(t.toJSON())),e.$el.attr("data-cid",t.cid),t.get("state")===o.WIDGET_MAXIMIZED_HOVER?e.$el.addClass("sidebar-icon-active"):e.$el.removeClass("sidebar-icon-active"),e},onClick:function(e){if(e.stopPropagation(),e.preventDefault(),!this.model.isDragged){var t=this.$el.offset();i.trigger("showWidgetHover",this.model.cid,t)}}})}),define("text!orosidebar/js/widget-container/templates/widget-min-template.html",[],function(){return'<div class="sidebar-widget-header">\n    <span class="sidebar-widget-header-title">\n        <a href="#" class="sidebar-widget-header-toggle">\n            <i class="icon-caret-right"></i>\n        </a>\n        <% if (iconClass) { %>\n            <i class="<%= iconClass %>" title="<%= title %>"></i>\n        <% } else { %>\n            <img src="<%= icon %>" alt="<%= title %>" title="<%= title %>"/>\n        <% } %>\n        <span  class="widget-title"><%= title %></span>\n    </span>\n</div>'}),define("text!orosidebar/js/widget-container/templates/widget-max-template.html",[],function(){return'<div class="sidebar-widget">\n    <div class="sidebar-widget-header">\n        <span class="sidebar-widget-header-title">\n            <a href="#" class="sidebar-widget-header-toggle">\n                <i class="icon-caret-down"></i>\n            </a>\n            <% if (iconClass) { %>\n                <i class="<%= iconClass %>" title="<%= title %>"></i>\n            <% } else { %>\n                <img src="<%= icon %>" alt="<%= title %>" title="<%= title %>"/>\n            <% } %>\n            <span class="widget-title"><%= title %></span>\n        </span>\n        <span class="sidebar-widget-header-wrap">\n            <a href="#" class="sidebar-widget-refresh">\n                <i class="icon-refresh"></i>\n            </a>\n            <a href="#" class="sidebar-widget-settings">\n                <i class="icon-cog"></i>\n            </a>\n            <a href="#" class="sidebar-widget-remove">\n                <i class="icon-trash"></i>\n            </a>\n            <a href="#" class="sidebar-widget-close">\n                <i class="icon-remove"></i>\n            </a>\n        </span>\n    </div>\n    <div class="sidebar-widget-content">\n    </div>\n</div>\n'}),define("orosidebar/js/widget-container/view",["jquery","underscore","backbone","../constants","text!./templates/widget-min-template.html","text!./templates/widget-max-template.html"],function(e,t,i,n,o,s){return i.View.extend({templateMin:t.template(o),templateMax:t.template(s),events:{"click .sidebar-widget-header-toggle":"onClickToggle","click .sidebar-widget-refresh":"onClickRefresh","click .sidebar-widget-settings":"onClickSettings","click .sidebar-widget-remove":"onClickRemove","click .sidebar-widget-close":"onClickClose"},initialize:function(){var e=this;e.stopListening(e.model,"change"),e.listenTo(e.model,"change",e.render)},render:function(){var e=this,t=e.model,i=null;return i=t.get("state")===n.WIDGET_MINIMIZED?e.templateMin:e.templateMax,e.$el.html(i(t.toJSON())),e.$el.attr("data-cid",t.cid),e.model.get("cssClass")&&e.$el.attr("class",e.model.get("cssClass")),t.get("state")!==n.WIDGET_MINIMIZED&&t.get("module")&&requirejs([t.get("module")],function(i){var n=e.$el.find(".sidebar-widget-content");e.contentView||(e.contentView=new i.ContentView({model:t})),e.contentView.setElement(n),e.contentView.render()}),t.get("state")===n.WIDGET_MAXIMIZED_HOVER?e.$el.addClass("sidebar-widget-popup"):e.$el.removeClass("sidebar-widget-popup"),e},setOffset:function(e){var t=this;t.$el.offset(e)},onClickToggle:function(e){e.stopPropagation(),e.preventDefault(),this.model.toggleState(),this.model.save()},onClickRefresh:function(e){e.stopPropagation(),e.preventDefault(),i.trigger("refreshWidget",this.model.cid)},onClickSettings:function(e){e.stopPropagation(),e.preventDefault(),i.trigger("setupWidget",this.model.cid)},onClickRemove:function(e){e.stopPropagation(),e.preventDefault(),i.trigger("removeWidget",this.model.cid)},onClickClose:function(e){e.stopPropagation(),e.preventDefault(),i.trigger("closeWidget",this.model.cid)}})}),define("text!orosidebar/js/widget-container/templates/widget-add-template.html",[],function(){return'<div title="<%= _.__(\'oro.sidebar.widget.add.content.section_title\') %>">\n    <div class="sidebar-widgetadd-widgets">\n        <ol>\n            <% _.each(availableWidgets, function (widget, name) { %>\n            <li class="ui-state-default" data-widget-name="<%= name %>">\n                <% if (widget.iconClass) { %>\n                    <i class="<%= widget.iconClass %>" title="<%= widget.title %>"></i>\n                <% } else { %>\n                    <img src="<%= widget.icon %>" alt="<%= widget.title %>" title="<%= widget.title %>"/>\n                <% } %>\n                <span><%= widget.title %></span>\n            </li>\n            <% }); %>\n        </ol>\n    </div>\n</div>\n'}),define("orosidebar/js/widget-container/model",["backbone","../constants"],function(e,t){return e.Model.extend({defaults:{icon:"",iconClass:"",module:"",position:0,title:"",settings:{},state:t.WIDGET_MINIMIZED,widgetName:""},initialize:function(){this.stateSnapshot=this.get("state"),this.isDragged=!1},toggleState:function(){var e=this,i=e.get("state");i!==t.WIDGET_MAXIMIZED_HOVER&&(i===t.WIDGET_MINIMIZED?e.set("state",t.WIDGET_MAXIMIZED):e.set("state",t.WIDGET_MINIMIZED),this.save())},snapshotState:function(){this.stateSnapshot=this.get("state")},restoreState:function(){this.set({state:this.stateSnapshot},{silent:!0}),this.save()},update:function(e){this.set(_.omit(e,"settings","placement"))}})}),define("orosidebar/js/widget-container/widget-add-view",["require","jquery","underscore","text!./templates/widget-add-template.html","./model","oroui/js/modal","../constants","orotranslation/js/translator"],function(e){var t=e("jquery"),i=e("underscore"),n=e("text!./templates/widget-add-template.html"),o=e("./model"),s=e("oroui/js/modal"),r=e("../constants"),a=e("orotranslation/js/translator");return s.extend({className:"modal oro-modal-normal",options:{sidebar:null},initialize:function(e){this.options=i.defaults(e||{},this.options),e.content=i.template(n,{availableWidgets:e.sidebar.getAvailableWidgets()}),e.title=a("oro.sidebar.widget.add.dialog.title"),s.prototype.initialize.apply(this,arguments)},open:function(){var e=this,i=this.options.sidebar.getPosition();s.prototype.open.apply(this,arguments);var n=null;e.$el.find("ol").selectable({selected:function(e,t){n=t.selected}}),e.once("ok",function(){if(!n)return e.close(),void 0;var s=this.options.sidebar.getAvailableWidgets(),a=this.options.sidebar.getWidgets(),l=t(n).closest("li").data("widget-name"),c=s[l],d=null;i===r.SIDEBAR_LEFT?d="left":i===r.SIDEBAR_RIGHT&&(d="right");var h=new o({widgetName:l,position:a.length,placement:d});h.update(c),h.set("settings",t.extend(!0,{},c.settings)),a.push(h),h.save(),e.close()})}})}),define("orosidebar/js/widget-container/widget-setup-view",["require","oroui/js/modal"],function(e){var t=e("oroui/js/modal");return t.extend({className:"modal oro-modal-normal widget-setup",initialize:function(e){var i=this,n=i.model;e.content='<div class="sidebar-widget-setup"></div>',e.snapshot=e.snapshot||{};var o=n.get("module");requirejs([o],function(t){i.setupView=new t.SetupView({model:n}),i.setupView.render(),i.$el.find(".sidebar-widget-setup").append(i.setupView.$el),i.once("ok",function(){i.setupView.trigger("ok")}),i.on("ok",function(){n.save()}),i.once("cancel",function(){i.setupView.trigger("cancel"),i.setupView.remove()}),i.on("cancel",function(){n.set(JSON.parse(e.snapshot),{silent:!0}),n.trigger("change")}),i.setupView.once("close",function(){i.setupView.remove(),i.close()})}),t.prototype.initialize.apply(this,arguments)}})}),define("text!orosidebar/js/templates/template.html",[],function(){return'<div class="sidebar-wrap sidebar-wrap-1">\n    <div class="sidebar-wrap sidebar-wrap-2">\n        <div class="sidebar-resize">\n            <a href="#"></a>\n        </div>\n        <div class="sidebar-content"></div>\n        <div class="sidebar-add">\n            <a href="#" >\n                <i class="icon-plus"></i>\n            </a>\n        </div>\n    </div>\n    <div class="sidebar-toggle">\n        <div class="sidebar-toggle-holder">\n            <a href="#">\n                <i class="icon-forward"></i>\n                <i style="display: none;" class="icon-backward"></i>\n            </a>\n        </div>\n    </div>\n</div>\n'}),define("orosidebar/js/view",["require","jquery-ui","underscore","backbone","orotranslation/js/translator","oroui/js/mediator","oroui/js/delete-confirmation","./constants","./widget-container/icon-view","./widget-container/view","./widget-container/widget-add-view","./widget-container/widget-setup-view","text!./templates/template.html","jquery-ui"],function(e){function t(e,t){return e.toLowerCase().replace("_","-")+"-"+t.slice(8).toLowerCase()}e("jquery-ui");var i=e("underscore"),n=e("backbone"),o=e("orotranslation/js/translator"),s=e("oroui/js/mediator"),r=e("oroui/js/delete-confirmation"),a=e("./constants"),l=e("./widget-container/icon-view"),c=e("./widget-container/view"),d=e("./widget-container/widget-add-view"),h=e("./widget-container/widget-setup-view"),u=e("text!./templates/template.html");e("jquery-ui");var p=100;return n.View.extend({template:i.template(u),events:{"click .sidebar-add a":"onClickAdd","click .sidebar-resize a":"onClickToggle","click .sidebar-toggle a":"onClickToggle"},options:{availableWidgets:null,widgets:null},initialize:function(e){var t,o,s;this.options=i.defaults(e||{},this.options),t=this,o=t.model,s=this.getWidgets(),t.iconViews={},t.hoverViews={},t.widgetViews={},t.listenTo(o,"change",t.render),t.listenTo(s,"reset",t.onWidgetsReset),t.listenTo(s,"add",t.onWidgetAdded),t.listenTo(s,"remove",t.onWidgetRemoved),t.listenTo(s,"reset",t.render),t.listenTo(s,"add",t.render),t.listenTo(s,"remove",t.render),t.listenTo(n,"showWidgetHover",t.onShowWidgetHover),t.listenTo(n,"refreshWidget",t.onRefreshWidget),t.listenTo(n,"removeWidget",t.onRemoveWidget),t.listenTo(n,"closeWidget",t.onCloseWidget),t.listenTo(n,"setupWidget",t.onSetupWidget)},getAvailableWidgets:function(){return this.options.availableWidgets},getWidgets:function(){return this.options.widgets},getPosition:function(){return this.model.get("position")},render:function(){var e=this,i=e.model,n=e.options.$main,o=i.get("state")===a.SIDEBAR_MAXIMIZED,r=i.get("state")===a.SIDEBAR_MINIMIZED;return e.$el.html(e.template(i.toJSON())),e.$el.toggleClass("sidebar-maximized",o),n.toggleClass(t(i.get("position"),a.SIDEBAR_MAXIMIZED),o),n.toggleClass(t(i.get("position"),a.SIDEBAR_MINIMIZED),r),r?e.renderIcons():e.renderWidgets(),s.trigger("layout:adjustHeight"),e},renderIcons:function(){var e=this,t=e.$el.find(".sidebar-content");return this.getWidgets().each(function(i){var n=e.iconViews[i.cid];n&&(n.render().delegateEvents(),t.append(n.$el))}),t.sortable({axis:"y",containment:"parent",delay:p,revert:!0,tolerance:"pointer",start:function(t,i){var n=i.item.data("cid");e.onIconDragStart(n)},stop:function(t,i){var n=i.item.data("cid");e.onIconDragStop(n),e.reorderWidgets()}}),e},renderWidgets:function(){var e=this,t=e.$el.find(".sidebar-content");return this.getWidgets().each(function(i){var n=e.widgetViews[i.cid];n&&(i.get("state")===a.WIDGET_MAXIMIZED_HOVER&&i.set({state:a.WIDGET_MAXIMIZED},{silent:!0}),n.render().delegateEvents(),t.append(n.$el))}),t.sortable({axis:"y",containment:"parent",delay:p,revert:!0,tolerance:"pointer",start:function(t,i){var n=i.item.data("cid");e.onIconDragStart(n)},stop:function(t,i){var n=i.item.data("cid");e.onIconDragStop(n),e.reorderWidgets()}}),e},onIconDragStart:function(e){var t=this.getWidgets().get(e);t&&(t.isDragged=!0)},onIconDragStop:function(e){var t=this.getWidgets().get(e);t&&(t.isDragged=!1)},reorderWidgets:function(){var e=this,t=e.$el.find(".sidebar-content"),n=t.sortable("toArray",{attribute:"data-cid"}),o=i.object(n,i.range(n.length));this.getWidgets().each(function(e){var t=o[e.cid];e.set({position:t},{silent:!0}),e.save()}),this.getWidgets().sort()},onClickAdd:function(e){e.stopPropagation(),e.preventDefault();var t=new d({sidebar:this});t.open()},onClickToggle:function(e){e.stopPropagation(),e.preventDefault(),this.model.toggleState(),this.model.save()},onWidgetsReset:function(){var e=this;this.getWidgets().each(function(t){e.widgetViews[t.cid]=new c({model:t}),e.iconViews[t.cid]=new l({model:t})})},onWidgetAdded:function(e){this.widgetViews[e.cid]=new c({model:e}),this.iconViews[e.cid]=new l({model:e})},onWidgetRemoved:function(e){var t=e.cid,i=this.widgetViews[t];i&&(i.contentView&&i.contentView.remove(),i.remove(),delete this.widgetViews[t]);var n=this.iconViews[t];n&&(n.remove(),delete this.iconViews[t]);var o=this.hoverViews[t];o&&(o.contentView.remove(),o.remove(),delete this.hoverViews[t])},onShowWidgetHover:function(e,t){var i=this,n=this.getWidgets().get(e);n&&(i.hideAllWidgetHovers(),n.snapshotState(),n.set({state:a.WIDGET_MAXIMIZED_HOVER},{silent:!0}),n.save(),i.hoverViews.hasOwnProperty(e)||(i.hoverViews[e]=new c({model:n})),i.$el.append(i.hoverViews[e].render().$el),i.hoverViews[e].setOffset({top:t.top}))
},onRefreshWidget:function(e){var t=this.getWidgets().get(e);if(t){var i,n=t.get("state");n==a.WIDGET_MAXIMIZED?i=this.widgetViews[e]:n==a.WIDGET_MAXIMIZED_HOVER&&(i=this.hoverViews[e]),i&&i.contentView.trigger("refresh")}},hideWidgetHover:function(e){var t=this.hoverViews[e];t&&(t.model.restoreState(),t.contentView.remove(),t.remove(),delete this.hoverViews[e])},hideAllWidgetHovers:function(){var e=this;this.getWidgets().each(function(t){e.hideWidgetHover(t.cid)})},onRemoveWidget:function(e){var t=this.getWidgets().get(e);if(t){var i=new r({content:o("oro.sidebar.widget.remove.confirm.message")});i.on("ok",function(){t.destroy(),i.off()}),i.on("cancel",function(){i.off()}),i.open()}},onCloseWidget:function(e){var t=this,i=this.getWidgets().get(e);i&&t.hideWidgetHover(e)},onSetupWidget:function(e){var t=this.getWidgets().get(e);if(t){var i=new h({model:t,okCloses:!1,snapshot:JSON.stringify(t)});i.open()}}})}),define("orosidebar/js/widget-container/collection",["require","backbone","./model"],function(e){var t=e("backbone"),i=e("./model");return t.Collection.extend({model:i,comparator:"position"})}),define("orosidebar/widget/sticky-note",["jquery","underscore","backbone"],function(e,t,i){var n={};return n.ContentView=i.View.extend({initialize:function(){var e=this;e.listenTo(e.model,"change",e.render)},render:function(){var e=this,i=e.model.get("settings")||{},n=t.escape(String(i.content)).replace(/\r?\n/g,"<br/>");return e.$el.html(n),e}}),n.SetupView=i.View.extend({template:t.template('<h3>Sticky Note settings</h3><textarea class="sidebar-widget-sticky-note-settings"><%= settings.content %></textarea>'),initialize:function(){this.on("ok",this.onSubmit),i.View.prototype.initialize.apply(this,arguments)},render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),e},onSubmit:function(){var e=this,t=e.model,i=e.$el.find("textarea").val(),n=t.get("settings");n.content!=i&&(n.content=i,t.set({settings:n},{silent:!0}),t.trigger("change")),this.trigger("close")}}),n});var CryptoJS=CryptoJS||function(e,t){var i={},n=i.lib={},o=function(){},s=n.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=s.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var o=0;e>o;o++)t[n+o>>>2]|=(255&i[o>>>2]>>>24-8*(o%4))<<24-8*((n+o)%4);else if(65535<i.length)for(o=0;e>o;o+=4)t[n+o>>>2]=i[o>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-8*(i%4),t.length=e.ceil(i/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;t>n;n+=4)i.push(0|4294967296*e.random());return new r.init(i,t)}}),a=i.enc={},l=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;e>n;n++){var o=255&t[n>>>2]>>>24-8*(n%4);i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-4*(n%8);return new r.init(i,t/2)}},c=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;e>n;n++)i.push(String.fromCharCode(255&t[n>>>2]>>>24-8*(n%4)));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-8*(n%4);return new r.init(i,t)}},d=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,o=i.sigBytes,s=this.blockSize,a=o/(4*s),a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*s,o=e.min(4*t,o),t){for(var l=0;t>l;l+=s)this._doProcessBlock(n,l);l=n.splice(0,t),i.sigBytes-=o}return new r.init(l,o)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=h.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new u.HMAC.init(e,i).finalize(t)}}});var u=i.algo={};return i}(Math);define("cryptojs/core",function(){}),function(){var e=CryptoJS,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp(),e=[];for(var o=0;i>o;o+=3)for(var s=(255&t[o>>>2]>>>24-8*(o%4))<<16|(255&t[o+1>>>2]>>>24-8*((o+1)%4))<<8|255&t[o+2>>>2]>>>24-8*((o+2)%4),r=0;4>r&&i>o+.75*r;r++)e.push(n.charAt(63&s>>>6*(3-r)));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var i=e.length,n=this._map,o=n.charAt(64);o&&(o=e.indexOf(o),-1!=o&&(i=o));for(var o=[],s=0,r=0;i>r;r++)if(r%4){var a=n.indexOf(e.charAt(r-1))<<2*(r%4),l=n.indexOf(e.charAt(r))>>>6-2*(r%4);o[s>>>2]|=(a|l)<<24-8*(s%4),s++}return t.create(o,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),define("cryptojs/enc-base64",["cryptojs/core"],function(){}),function(){var e=CryptoJS,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,i){e=this._hasher=new e.init,"string"==typeof i&&(i=t.parse(i));var n=e.blockSize,o=4*n;i.sigBytes>o&&(i=e.finalize(i)),i.clamp();for(var s=this._oKey=i.clone(),r=this._iKey=i.clone(),a=s.words,l=r.words,c=0;n>c;c++)a[c]^=1549556828,l[c]^=909522486;s.sigBytes=r.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),define("cryptojs/hmac",["cryptojs/core"],function(){}),function(e){for(var t=CryptoJS,i=t.lib,n=i.WordArray,o=i.Hasher,i=t.algo,s=[],r=[],a=function(e){return 0|4294967296*(e-(0|e))},l=2,c=0;64>c;){var d;e:{d=l;for(var h=e.sqrt(d),u=2;h>=u;u++)if(!(d%u)){d=!1;break e}d=!0}d&&(8>c&&(s[c]=a(e.pow(l,.5))),r[c]=a(e.pow(l,1/3)),c++),l++}var p=[],i=i.SHA256=o.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],o=i[1],s=i[2],a=i[3],l=i[4],c=i[5],d=i[6],h=i[7],u=0;64>u;u++){if(16>u)p[u]=0|e[t+u];else{var f=p[u-15],m=p[u-2];p[u]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+p[u-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+p[u-16]}f=h+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&c^~l&d)+r[u]+p[u],m=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&o^n&s^o&s),h=d,d=c,c=l,l=0|a+f,a=s,s=o,o=n,n=0|f+m}i[0]=0|i[0]+n,i[1]=0|i[1]+o,i[2]=0|i[2]+s,i[3]=0|i[3]+a,i[4]=0|i[4]+l,i[5]=0|i[5]+c,i[6]=0|i[6]+d,i[7]=0|i[7]+h},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;return i[o>>>5]|=128<<24-o%32,i[(o+64>>>9<<4)+14]=e.floor(n/4294967296),i[(o+64>>>9<<4)+15]=n,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(i),t.HmacSHA256=o._createHmacHelper(i)}(Math),define("cryptojs/sha256",["cryptojs/core"],function(){}),function(){var e=CryptoJS,t=e.lib,i=t.Base,n=t.WordArray,t=e.algo,o=t.HMAC,s=t.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=o.create(i.hasher,e),r=n.create(),a=n.create([1]),l=r.words,c=a.words,d=i.keySize,i=i.iterations;l.length<d;){var h=s.update(t).finalize(a);s.reset();for(var u=h.words,p=u.length,f=h,m=1;i>m;m++){f=s.finalize(f),s.reset();for(var g=f.words,v=0;p>v;v++)u[v]^=g[v]}r.concat(h),c[0]++}return r.sigBytes=4*d,r}});e.PBKDF2=function(e,t,i){return s.create(i).compute(e,t)}}(),define("cryptojs/pbkdf2",["cryptojs/core"],function(){}),function(e,t){e("when",["require"],function(e){function i(e,t,i,n){return o(e).then(t,i,n)}function n(e,t){this._message=e,this.inspect=t}function o(e){return a(function(t){t(e)})}function s(e){return i(e,d)}function r(){function e(e,s,r){t.resolve=t.resolver.resolve=function(t){return n?o(t):(n=!0,e(t),i)},t.reject=t.resolver.reject=function(e){return n?o(d(e)):(n=!0,s(e),i)},t.notify=t.resolver.notify=function(e){return r(e),e}}var t,i,n;return t={promise:B,resolve:B,reject:B,notify:B,resolver:{resolve:B,reject:B,notify:B}},t.promise=i=a(e),t}function a(e){return l(e,q.PromiseStatus&&q.PromiseStatus())}function l(e,t){function i(e,t,i,n){function o(o){o._message(e,t,i,n)}h?h.push(o):M(function(){o(c)})}function o(){return c?c.inspect():E()}function s(e){h&&(c=p(e),g(h,c),h=B,t&&v(c,t))}function r(e){s(d(e))}function a(e){h&&g(h,u(e))}var l,c,h=[];l=new n(i,o),l._status=t;try{e(s,r,a)}catch(f){r(f)}return l}function c(e){return h(new f(e),function(){return S(e)})}function d(e){return h(new m(e),function(){return D(e)})}function h(e,t){return new n(function(t,i,n){try{n(e[t].apply(e,i))}catch(o){n(d(o))}},t)}function u(e){return new n(function(t,i,n,o){var s=i[2];try{o("function"==typeof s?s(e):e)}catch(r){o(r)}})}function p(e){return e instanceof n?e:e===Object(e)&&"then"in e?a(function(t,i,n){M(function(){try{var o=e.then;"function"==typeof o?I(o,e,t,i,n):t(c(e))}catch(s){i(s)}})}):c(e)}function f(e){this.value=e}function m(e){this.reason=e}function g(e,t){M(function(){for(var i,n=0;i=e[n++];)i(t)})}function v(e,t){function i(){t.fulfilled()}function n(e){t.rejected(e)}e.then(i,n)}function _(e){return e&&"function"==typeof e.then}function y(e,t,n,o,s){return i(e,function(e){function r(n,o,s){function r(e){p(e)}function a(e){u(e)}var l,c,d,h,u,p,f,m;if(f=e.length>>>0,l=Math.max(0,Math.min(t,f)),d=[],c=f-l+1,h=[],l)for(p=function(e){h.push(e),--c||(u=p=F,o(h))},u=function(e){d.push(e),--l||(u=p=F,n(d))},m=0;f>m;++m)m in e&&i(e[m],a,r,s);else n(d)}return a(r).then(n,o,s)})}function b(e,t,i,n){function o(e){return t?t(e[0]):e[0]}return y(e,1,o,i,n)}function w(e,t,i,n){return j(e,F).then(t,i,n)}function x(){return j(arguments,F)}function k(e){return j(e,S,D)}function C(e,t){return j(e,t)}function j(e,t,n){return i(e,function(e){function o(o,s,r){function a(e,a){i(e,t,n).then(function(e){l[a]=e,r(e),--d||o(l)},s)}var l,c,d,h;if(d=c=e.length>>>0,l=[],!d)return o(l),void 0;for(h=0;c>h;h++)h in e?a(e[h],h):--d}return l(o)})}function T(e,t){var n=I(P,arguments,1);return i(e,function(e){var o;return o=e.length,n[0]=function(e,n,s){return i(e,function(e){return i(n,function(i){return t(e,i,s,o)})})},O.apply(e,n)})}function S(e){return{state:"fulfilled",value:e}}function D(e){return{state:"rejected",reason:e}}function E(){return{state:"pending"}}function M(e){1===N.push(e)&&z(A)}function A(){for(var e,t=0;e=N[t++];)e();N=[]}function F(e){return e}i.promise=a,i.resolve=o,i.reject=s,i.defer=r,i.join=x,i.all=w,i.map=C,i.reduce=T,i.settle=k,i.any=b,i.some=y,i.isPromise=_,i.isPromiseLike=_,n.prototype={then:function(){var e,t;return e=arguments,t=this._message,l(function(i,n,o){t("when",e,i,o)},this._status&&this._status.observed())},otherwise:function(e){return this.then(B,e)},ensure:function(e){function t(){return o(e())}return this.then(t,t).yield(this)},yield:function(e){return this.then(function(){return e})},tap:function(e){return this.then(e).yield(this)},spread:function(e){return this.then(function(t){return w(t,function(t){return e.apply(B,t)})})},always:function(e,t){return this.then(e,e,t)}},f.prototype.when=function(e){return"function"==typeof e?e(this.value):this.value},m.prototype.when=function(e,t){if("function"==typeof t)return t(this.reason);throw this.reason};var O,P,I,z,N,R,$,L,H,q,W,B;if(W=e,N=[],R=t.setTimeout,q="undefined"!=typeof console?console:i,"function"==typeof setImmediate)z=setImmediate.bind(t);else if("undefined"!=typeof MessageChannel){var V=new MessageChannel;V.port1.onmessage=A,z=function(){V.port2.postMessage(0)}}else if("object"==typeof process&&process.nextTick)z=process.nextTick;else try{z=W("vertx").runOnLoop||W("vertx").runOnContext}catch(U){z=function(e){R(e,0)}}return $=Function.prototype,L=$.call,I=$.bind?L.bind(L):function(e,t){return e.apply(t,P.call(arguments,2))},H=[],P=H.slice,O=H.reduce||function(e){var t,i,n,o,s;if(s=0,t=Object(this),o=t.length>>>0,i=arguments,i.length<=1)for(;;){if(s in t){n=t[s++];break}if(++s>=o)throw new TypeError}else n=i[1];for(;o>s;++s)s in t&&(n=e(n,t[s],s,t));return n},i})}("function"==typeof define&&define.amd?define:function(e){module.exports=e(require)},this),define("orosync/js/extend/when",["when"],function(e){return window.when=e,e}),define("orosync/js/sync",["jquery","underscore","backbone","orotranslation/js/translator","oroui/js/messenger"],function(e,t,i,n,o){var s,r=[],a=function(e){if(!(t.isObject(e)&&t.isFunction(e.subscribe)&&t.isFunction(e.unsubscribe)))throw new Error("Synchronization service does not fit requirements");s=e;var i=function(){o.notificationFlashMessage("success",n("sync.connection.established"))};for(s.on("connection_lost",function(e){e=e||{};var t=e.retries||0;t&&(e.remain=e.maxretries-e.retries+1),o.notificationMessage("error",n("sync.connection.lost",e,t),{flash:Boolean(t)}),s.off(null,i).once("connection_established",i)});r.length;)s.subscribe.apply(s,r.shift());return a},l=function(e){e.id&&(e["[[SetCallback]]"]=e["[[SetCallback]]"]||t.bind(e.set,e),a.subscribe(t.result(e,"url"),e["[[SetCallback]]"]),e.on("remove",c))},c=function(e){if(e.id){var i=[t.result(e,"url")];t.isFunction(e["[[SetCallback]]"])&&i.push(e["[[SetCallback]]"]),a.unsubscribe.apply(s,i)}},d={add:l,error:function(e){t.each(e.models,c)},reset:function(e,i){t.each(i.previousModels,function(t){t.urlRoot=e.url,c(t)}),t.each(e.models,l)}};return a.keepRelevant=function(e){return e instanceof i.Collection?(t.each(e.models,l),e.on(d)):e instanceof i.Model&&l(e),this},a.stopTracking=function(e){return e instanceof i.Collection?(t.each(e.models,c),e.off(d)):e instanceof i.Model&&c(e),this},a.reconnect=function(){s.connect()},a.subscribe=function(){var e=t.toArray(arguments);s?s.subscribe.apply(s,e):r.push(e)},a.unsubscribe=function(e,i){var n,o=t.toArray(arguments);s?s.unsubscribe.apply(s,o):(n=i?function(t){return e===t[0]&&i===t[1]}:function(t){return e===t[0]},r=t.reject(r,n))},a}),define("orosync/js/sync/wamp",["jquery","underscore","backbone","autobahn"],function(e,t,i,n){var o={port:80,debug:!1},s=function(e){var t=function(t,i){e(i)};return t.origCallback=e,t},r=function(e){this.session=e,this.trigger("connection_established"),t.each(this.channels,function(i,n){t.each(i,function(t){e.subscribe(n,t)})})},a=function(e,i,n){0!==e&&this.trigger("connection_lost",t.extend({code:e},n||{})),this.session=null},l=function(i){if(this.options=t.extend({},o,i),!this.options.host)throw new Error("host option is required");this.channels={},this.options.debug&&n.debug(!0,!0,!0),this.connect(),e(window).on("beforeunload",t.bind(function(){this.session.close()},this))};return l.prototype={connect:function(){if(!this.session){var e=this.options.secure?"wss":"ws",i=e+"://"+this.options.host+":"+this.options.port;n.connect(i,t.bind(r,this),t.bind(a,this),this.options)}},subscribe:function(e,t){t=s(t),(this.channels[e]=this.channels[e]||[]).push(t),this.session&&this.session.subscribe(e,t)},unsubscribe:function(e,i){var n=this.channels[e];if(n&&(i&&(i=t.findWhere(n,{origCallback:i}),n=this.channels[e]=t.without(n,i)),n.length&&i||delete this.channels[e],this.session))try{this.session.unsubscribe(e,i)}catch(o){}}},t.extend(l.prototype,i.Events),l}),define("orotag/js/model",["backbone"],function(e){return e.Model.extend({defaults:{owner:!1,notSaved:!1,moreOwners:!1,url:"",name:""}})}),define("orotag/js/collection",["backbone","./model"],function(e,t){var i=e.Collection.extend({model:t,getFilteredCollection:function(e){var t=this.filter(function(t){return"owner"===e?t.get("owner"):!0});return new i(t)},addItem:function(e){var t=this.where({name:e.name});return t.length&&0==t[0].get("owner")?(t[0].set("owner",!0),this.trigger("add"),void 0):(this.add(new this.model({id:e.id,name:e.name,owner:!0,notSaved:!0})),void 0)},removeItem:function(e,t){var i=this.where({id:e});if(i.length){if(i=i[0],"owner"===t&&i.get("owner")===!0&&i.get("moreOwners")===!0)return i.set("owner",!1),this.trigger("remove"),void 0;this.remove(i)}}});return i}),define("orotag/js/view",["underscore","backbone","orotranslation/js/translator","./collection"],function(e,t,i,n){var o=t.$;return t.View.extend({options:{filter:null},template:e.template('<ul class="inline tag-list"><% _.each(models, function(tag, i) { %><li data-id="<%= tag.get("id") %>"><% if (tag.get("url").length > 0) { %><a href="<%= tag.get("url") %>"><%} %><span class="label label-info"><%- tag.get("name") %></span><% if (tag.get("url").length > 0) { %></a><%} %></li><%}) %><% if (models.length == 0) { %><%= _.__("Not tagged") %><%} %></ul>'),initialize:function(t){this.options=e.defaults(t||{},this.options),this.collection=new n,this.listenTo(this.getCollection(),"reset",this.render),this.listenTo(this,"filter",this.render),this.$tagsHolder=this.$(".tags-holder"),this.$(".tag-sort-actions a").click(e.bind(this.filter,this))},filter:function(e){var t=o(e.target);return t.parents("ul").find("a.active").removeClass("active"),t.addClass("active"),this.options.filter=t.data("type"),this.trigger("filter"),this},getCollection:function(){return this.collection},render:function(){return this.$tagsHolder.html(this.template(this.getCollection().getFilteredCollection(this.options.filter))),this}})}),define("orotag/js/update-view",["jquery","underscore","./view","json"],function(e,t,i){return i.extend({tagsOverlayTemplate:t.template('<div class="controls"><div class="well well-small"><div class="tags-holder"></div></div></div>'),options:t.extend({},i.prototype.options,{autocompleteFieldId:null,fieldId:null,ownFieldId:null,unassign:!1,unassignGlobal:!1,tagOverlayId:null}),initialize:function(n){if(n=n||{},this.options=t.defaults(n,this.options),!n.autocompleteFieldId)throw new TypeError("'autocompleteFieldId' is required");if(!n.fieldId)throw new TypeError("'fieldId' is required");if(!n.ownFieldId)throw new TypeError("'ownFieldId' is required");this.$tagOverlayId=e(this.options.tagOverlayId),this._renderOverlay(),i.prototype.initialize.apply(this,arguments),this._prepareCollections();var o=t.bind(function(){this.render(),this._updateHiddenInputs()},this);this.listenTo(this.getCollection(),"add",o),this.listenTo(this.getCollection(),"remove",o),e(this.options.autocompleteFieldId).on("change",t.bind(this._addItem,this))},render:function(){i.prototype.render.apply(this,arguments);var n=this;("owner"===this.options.filter&&this.options.unassign||"owner"!==this.options.filter&&this.options.unassignGlobal)&&this.$tagsHolder.find("span.label").each(function(i,o){var s=e(o),r=e('<span class="select2-search-choice-close"/>');r.click(t.bind(n._removeItem,n)),s.append(r),s.addClass("with-button")})},_addItem:function(i){i.preventDefault();var n=i.added;t.isUndefined(n)||this.getCollection().addItem(n),e(i.target).select2("val","")},_removeItem:function(i){i.preventDefault(),i.stopImmediatePropagation();var n=e(i.currentTarget).parents("li"),o=e(n).data("id");return t.isUndefined(o)||this.getCollection().removeItem(o,this.options.filter),this},_renderOverlay:function(){return this.$tagOverlayId.append(this.tagsOverlayTemplate()),this},_prepareCollections:function(){var i=e.parseJSON(e(this.options.fieldId).val());return t.isArray(i)||(i=[]),this.getCollection().reset(i),this},_updateHiddenInputs:function(){e(this.options.fieldId).val(JSON.stringify(this.getCollection())),e(this.options.ownFieldId).val(JSON.stringify(this.getCollection().getFilteredCollection("owner")))}})}),define("orotranslation/js/translation/config-action",["backbone","underscore","routing","orotranslation/js/translator","oroui/js/mediator","oroui/js/messenger"],function(e,t,i,n,o,s){var r=e.$;return e.View.extend({options:{STATUS_NEW:1,STATUS_DOWNLOADED:2,STATUS_ENABLED:3},route:"oro_translation_download",buttonsSelector:".available-translation-widget-container .btn",buttonTemplate:t.template('<button class="btn btn-mini" data-lang="<%= code %>" data-action="<%= action %>"><%= label %></button>'),initialize:function(){if("INPUT"!==this.el.tagName)throw new TypeError("Configuration field el should be set");r(this.buttonsSelector).on("click",t.bind(this.clickHandler,this))},clickHandler:function(e){e.preventDefault();var i=r(e.currentTarget),n=i.data("action"),o=i.data("lang");if(t.isUndefined(n))throw new TypeError('Attribute "data-action" should be set for action button');if(-1===t.indexOf(["enable","disable","download","update"],n))throw new TypeError("Unknown action");if(t.isUndefined(o))throw new TypeError('Attribute "data-lang" should be set for action button');var s={el:i,action:n,code:o};this.performAction(s)},performAction:function(e){if("download"==e.action||"update"==e.action){o.execute("showLoading");var a=i.generate(this.route,{code:e.code});r.getJSON(a,t.bind(function(t){!0===t.success&&(this.markAsUpToDate(e),this.postAction(e))},this)).always(t.bind(function(i,r){var a;o.execute("hideLoading"),"success"!==r||i.success!==!0?(i=i.responseJSON?i.responseJSON:i||{},a=t.isUndefined(i.message)?n("unknown"):n(i.message),a=n("Could not download translations, error: ")+a):a="download"==e.action?n("Download finished."):n("Update finished."),s.notificationFlashMessage("success"!==r?"error":"success",a)},this))}else this.postAction(e)},postAction:function(e){var i,o=e.action,s=e.code,a=this.$el.val(),l=JSON.parse(a?a:"{}");"download"==o||"disable"==o?(i=r(this.buttonTemplate({code:s,action:"enable",label:n("Enable")})),l[s]=this.options.STATUS_DOWNLOADED):"enable"==o&&(i=r(this.buttonTemplate({code:s,action:"disable",label:n("Disable")})),l[s]=this.options.STATUS_ENABLED),r(i).on("click",t.bind(this.clickHandler,this)),e.el.replaceWith(i),this.$el.val(JSON.stringify(l)),("enable"==o||"disable"==o)&&this.$el.parents("form").submit()},markAsUpToDate:function(e){var t=e.el.parents("tr");"update"==e.action&&e.el.remove(),t.find(".translation-status").html(r('<span class="status-up-to-date">'+n("Up to date")+"</span>"))}})}),define("orowindows/js/dialog/state/collection",["backbone","./model"],function(e,t){return e.Collection.extend({model:t,url:function(){return this.model.prototype.urlRoot}})}),define("oroworkflow/js/transition-executor",["jquery","oroui/js/messenger","orotranslation/js/translator","oroui/js/mediator"],function(e,t,i,n){return function(o,s){e.getJSON(o.data("transition-url"),s?{data:s}:null).done(function(e){function t(e){n.execute("redirectTo",{url:e})}function i(){n.execute("refreshPage")}o.one("transitions_success",function(e,i){i.workflowItem&&i.workflowItem.result&&i.workflowItem.result.redirectUrl&&(e.stopImmediatePropagation(),t(i.workflowItem.result.redirectUrl))}),o.one("transitions_success",i),o.trigger("transitions_success",[e])}).fail(function(e,n,s){o.one("transitions_failure",function(){t.notificationFlashMessage("error",i("Could not perform transition"))}),o.trigger("transitions_failure",[e,n,s])})}}),define("oroworkflow/js/transition-handler",["jquery","underscore","oroui/js/modal","oroworkflow/js/transition-executor"],function(e,t,i,n){return function(){var o=e(this);if(!o.data("_in-progress")){o.data("_in-progress",!0);var s=function(){o.data("_in-progress",!1)};if(o.one("transitions_success",s),o.one("transitions_failure",s),o.data("dialog-url"))require(["oro/dialog-widget"],function(e){var i={title:o.data("transition-label")||o.html(),url:o.data("dialog-url"),stateEnabled:!1,incrementalPosition:!1,loadingMaskEnabled:!0,dialogOptions:{modal:!0,resizable:!1,width:475,autoResize:!0}},r=o.data("dialog-options");r&&(void 0!==r.dialogOptions&&(r.dialogOptions=t.extend(i.dialogOptions,r.dialogOptions)),i=t.extend(i,r));var a=new e(i);a.on("widgetRemove",s),a.on("formSave",function(e){a.remove(),n(o,e)}),a.render()});else{var r=o.data("message");if(r){var a=new i({title:o.data("transition-label"),content:r});a.on("ok",function(){n(o)}),a.on("cancel",function(){s()}),a.open()}else n(o)}}}}),define("oroworkflow/js/save-and-transit-handler",["jquery","oroui/js/mediator","routing","oro/buttons-widget"],function(e,t,i,n){return function(){var o=e(this),s=o.closest("form"),r=s.find('input[name="input_action"]');r.val("save_and_stay");var a=s.prop("id");t.once("page:update",function(){var t=e(".alert-error, .validation-error").length>0;if(!t){var s=/update\/(\d+).*/,r=e("#"+a),l=s.exec(r.prop("action"));if(l.length>1){var c=e('<div class="hidden invisible"/>');e("body").append(c);var d=new n({el:c,elementFirst:!1,url:i.generate("oro_workflow_widget_buttons",{entityId:l[1],entityClass:o.data("entity-class")})});d.on("renderComplete",function(e){var t=e.find("#transition-"+o.data("workflow")+"-"+o.data("transition"));t.length&&t.on("transitionHandlerInitialized",function(){t.data("executor").call(),c.remove()})}),d.render()}}}),s.submit()}}),define("oroworkflow/js/reset-handler",["jquery","underscore","orotranslation/js/translator","oroui/js/modal","oroui/js/mediator","oroui/js/messenger"],function(e,t,i,n,o,s){return function(){function t(){r.data("_in-progress",!1)}var r,a;r=e(this),r.data("_in-progress")||(r.data("_in-progress",!0),a=new n({title:i("Workflow reset"),content:i("Attention: This action will reset workflow data for this record."),okText:i("Yes, Reset")}),a.on("ok",function(){e.ajax({url:r.data("url"),type:"DELETE",success:function(){o.execute("refreshPage")},error:function(){s.notificationFlashMessage("error",i("Cannot reset workflow item data.")),t()}})}),a.on("cancel",function(){t()}),a.open())}}),define("oroworkflow/js/activation-handler",["jquery","orotranslation/js/translator","oroui/js/modal","oroui/js/messenger","oroui/js/error"],function(e,t,i,n,o){return function(s,r){var a=this,l=new i({title:t("Workflow reset"),content:t("Attention: This action will reset all workflow data for this entity."),okText:t("Yes, Reset")});l.on("ok",function(){a.trigger("activation_start"),e.ajax({url:s,type:"GET",success:function(e){e.message&&!r&&n.notificationFlashMessage("success",e.message),a.trigger("activation_success",[e])},error:function(e,t,i){o.handle({},e,{enforce:!0}),a.trigger("activation_error",[e,t,i])}})}),l.open()}}),define("oroworkflow/js/workflow-management/transition/view/row-short",["underscore","backbone"],function(e,t){var i=t.$;return t.View.extend({tagName:"li",events:{"click .edit-transition":"triggerEditTransition","click .clone-transition":"triggerCloneTransition","click .delete-transition":"deleteTransition"},options:{workflow:null,template:null,stepFrom:null},initialize:function(t){this.options=e.defaults(t||{},this.options);var n=this.options.template||i("#transition-row-short-template").html();this.template=e.template(n),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},deleteTransition:function(e){e.preventDefault(),this.options.workflow.trigger("requestRemoveTransition",this.model)},triggerEditTransition:function(e){e.preventDefault(),this.options.workflow.trigger("requestEditTransition",this.model,this.options.stepFrom)},triggerCloneTransition:function(e){e.preventDefault(),this.options.workflow.trigger("requestCloneTransition",this.model,this.options.stepFrom)},render:function(){var e=this.model.toJSON(),t=this.options.workflow.getStepByName(e.step_to);return e.stepToLabel=t?t.get("label"):"",this.$el.html(this.template(e)),this}})}),define("oroworkflow/js/workflow-management/transition/view/list-short",["underscore","backbone","oroworkflow/js/workflow-management/transition/view/row-short"],function(e,t,i){return t.View.extend({tagName:"ul",attributes:{"class":"transitions-list-short"},options:{collection:null,workflow:null,stepFrom:null},initialize:function(t){this.options=e.defaults(t||{},this.options),this.rowViews=[],this.listenTo(this.getCollection(),"add",this.addItem),this.listenTo(this.getCollection(),"reset",this.addAllItems)},addItem:function(e){var t=new i({model:e,workflow:this.options.workflow,stepFrom:this.options.stepFrom});this.rowViews.push(t),this.$el.append(t.render().$el)},addAllItems:function(t){e.each(t,this.addItem,this)},getCollection:function(){return this.options.collection},remove:function(){this.resetView(),t.View.prototype.remove.call(this)},resetView:function(){e.each(this.rowViews,function(e){e.remove()})},render:function(){return this.addAllItems(this.getCollection().models),this}})}),define("oroworkflow/js/workflow-management/step/view/row",["underscore","backbone","oroworkflow/js/workflow-management/transition/view/list-short"],function(e,t,i){var n=t.$;return t.View.extend({tagName:"tr",events:{"click .edit-step":"triggerEditStep","click .delete-step":"triggerRemoveStep","click .clone-step":"triggerCloneStep","click .add-step-transition":"triggerAddStepTransition"},options:{workflow:null,template:null},initialize:function(t){this.options=e.defaults(t||{},this.options);var i=this.options.template||n("#step-row-template").html();this.template=e.template(i),this.transitionsListView=null,this.listenTo(this.model,"destroy",this.remove)},triggerEditStep:function(e){e.preventDefault(),this.options.workflow.trigger("requestEditStep",this.model)},triggerRemoveStep:function(e){e.preventDefault(),this.options.workflow.trigger("requestRemoveStep",this.model)},triggerCloneStep:function(e){e.preventDefault(),this.options.workflow.trigger("requestCloneStep",this.model)},triggerAddStepTransition:function(e){e.preventDefault(),this.options.workflow.trigger("requestAddTransition",this.model)},remove:function(){this.transitionsListView&&this.transitionsListView.remove(),t.View.prototype.remove.call(this)},render:function(){this.transitionsListView=new i({collection:this.model.getAllowedTransitions(this.options.workflow),workflow:this.options.workflow,stepFrom:this.model});var e=n(this.template(this.model.toJSON())),t=this.transitionsListView.render().$el;return e.filter(".step-transitions").append(t),this.$el.append(e),this}})}),define("oroworkflow/js/workflow-management/step/view/list",["underscore","backbone","oroworkflow/js/workflow-management/step/view/row"],function(e,t,i){var n=t.$;return t.View.extend({options:{listElBodyEl:"tbody",template:null,workflow:null},initialize:function(t){this.options=e.defaults(t||{},this.options);var i=this.options.template||n("#step-list-template").html();this.template=e.template(i),this.rowViews=[],this.$listEl=n(this.template()),this.$listElBody=this.$listEl.find(this.options.listElBodyEl),this.$el.html(this.$listEl),this.listenTo(this.getCollection(),"change",this.render),this.listenTo(this.getCollection(),"add",this.render),this.listenTo(this.getCollection(),"reset",this.addAllItems)},addItem:function(e){var t=new i({model:e,workflow:this.options.workflow});this.rowViews.push(t),this.$listElBody.append(t.render().$el)},addAllItems:function(t){e.each(t,this.addItem,this)},getCollection:function(){return this.options.workflow.get("steps")},remove:function(){this.resetView(),t.View.prototype.remove.call(this)},resetView:function(){e.each(this.rowViews,function(e){e.remove()}),this.rowViews=[]},render:function(){return this.getCollection().sort(),this.resetView(),this.addAllItems(this.getCollection().models),this
}})}),define("oroworkflow/js/workflow-management/transition/model",["underscore","backbone"],function(e,t){return t.Model.extend({defaults:{name:null,label:null,display_type:"dialog",step_to:null,is_start:!1,form_options:null,message:null,is_unavailable_hidden:!0,transition_definition:null,_is_clone:!1},initialize:function(){this.workflow=null,e.isEmpty(this.get("form_options"))&&this.set("form_options",{attribute_fields:{}}),e.isEmpty(this.get("form_options").attribute_fields)&&(this.get("form_options").attribute_fields={})},setWorkflow:function(e){this.workflow=e},getTransitionDefinition:function(){return this.workflow?this.workflow.getTransitionDefinitionByName(this.get("transition_definition")):null},destroy:function(e){var i=this.getTransitionDefinition();i&&i.destroy(),t.Model.prototype.destroy.call(this,e)}})}),define("oroworkflow/js/workflow-management/transition/collection",["backbone","oroworkflow/js/workflow-management/transition/model"],function(e,t){return e.Collection.extend({model:t})}),define("oroworkflow/js/workflow-management/step/model",["underscore","backbone","oroworkflow/js/workflow-management/transition/collection"],function(e,t,i){return t.Model.extend({defaults:{name:null,label:null,is_final:!1,order:0,allowed_transitions:null,_is_start:!1,_is_clone:!1},initialize:function(){this.workflow=null,this.allowedTransitions=null,null===this.get("allowed_transitions")&&this.set("allowed_transitions",[])},setWorkflow:function(e){this.workflow=e},getAllowedTransitions:function(t){if(null===this.allowedTransitions){var n=this.get("allowed_transitions");this.allowedTransitions=new i,e.isArray(n)&&e.each(n,function(e){this.allowedTransitions.add(t.getTransitionByName(e))},this);var o=e.bind(function(t){var i=t.get("name");-1===e.indexOf(n,i)&&this.get("allowed_transitions").push(i)},this);this.listenTo(this.allowedTransitions,"add",o),this.listenTo(this.allowedTransitions,"reset",e.bind(function(t){this.set("allowed_transitions",[]),e.each(t.models,o)},this)),this.listenTo(this.allowedTransitions,"remove",e.bind(function(t){var i=t.get("name");this.set("allowed_transitions",e.without(this.get("allowed_transitions"),i))},this))}return this.allowedTransitions},destroy:function(e){if(this.workflow){var i=function(e){if(e.length)for(var t=e.length-1;t>-1;t--)e[t].destroy()};i(this.getAllowedTransitions(this.workflow).models),i(this.workflow.get("transitions").where({step_to:this.get("name")}))}t.Model.prototype.destroy.call(this,e)}})}),define("oroworkflow/js/workflow-management/helper",[],function(){return{getNameByString:function(e,t){return e=(t||"")+e,e=e.toLowerCase().replace(/[^A-Za-z\s_-]+/g,"").replace(/\s+|\-+/g,"_").replace(/__+/g,"_"),e+"_"+this.getRandomId()},getRandomId:function(){return Math.random().toString(16).slice(2)},getFormData:function(e){for(var t=e.serializeArray(),i={},n=0;n<t.length;n++){var o=t[n],s=o.name,r=s.match(/\[(\w+)\]$/);r&&(s=r[1]),i[s]=o.value}return i},deepClone:function(e){var t=_.clone(e);for(var i in e)e.hasOwnProperty(i)&&_.isObject(e[i])&&(e[i]=this.deepClone(e[i]));return t}}}),define("oroworkflow/js/workflow-management/transition/view/row",["underscore","backbone"],function(e,t){var i=t.$;return t.View.extend({tagName:"tr",events:{"click .delete-transition":"triggerRemoveTransition"},options:{workflow:null,template:null,stepFrom:null},initialize:function(t){this.options=e.defaults(t||{},this.options);var n=this.options.template||i("#transition-row-template").html();this.template=e.template(n),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},triggerRemoveTransition:function(e){e.preventDefault(),this.options.workflow.trigger("requestRemoveTransition",this.model)},render:function(){var e=this.model.toJSON(),t=this.options.workflow.getStepByName(e.step_to);return e.stepToLabel=t?t.get("label"):"",this.$el.html(this.template(e)),this}})}),define("oroworkflow/js/workflow-management/transition/view/list",["underscore","backbone","oroworkflow/js/workflow-management/transition/view/row"],function(e,t,i){var n=t.$;return t.View.extend({options:{listElBodyEl:"tbody",template:null,workflow:null,collection:null,stepFrom:null},initialize:function(t){this.options=e.defaults(t||{},this.options);var i=this.options.template||n("#transition-list-template").html();this.template=e.template(i),this.rowViews=[],this.$listEl=n(this.template()),this.$listElBody=this.$listEl.find(this.options.listElBodyEl),this.$emptyMessage=this.$listElBody.find(".no-rows-message"),this.$el.html(this.$listEl),this.listenTo(this.getCollection(),"change",this.render),this.listenTo(this.getCollection(),"add",this.render),this.listenTo(this.getCollection(),"remove",this.render),this.listenTo(this.getCollection(),"reset",this.addAllItems)},addItem:function(e){var t=new i({model:e,workflow:this.options.workflow,stepFrom:this.options.stepFrom});this.rowViews.push(t),this.$listElBody.append(t.render().$el)},addAllItems:function(t){e.each(t,this.addItem,this)},getCollection:function(){return this.options.collection},remove:function(){this.resetView(),t.View.prototype.remove.call(this)},resetView:function(){e.each(this.rowViews,function(e){e.remove()}),this.rowViews=[]},render:function(){return this.getCollection().models.length?(this.$emptyMessage.hide(),this.resetView(),this.addAllItems(this.getCollection().models)):this.$emptyMessage.show(),this}})}),define("oroworkflow/js/workflow-management/step/view/edit",["underscore","orotranslation/js/translator","backbone","oroui/js/messenger","oro/dialog-widget","oroworkflow/js/workflow-management/helper","oroui/js/mediator","oroworkflow/js/workflow-management/transition/view/list","jquery.validate"],function(e,t,i,n,o,s,r,a){var l=i.$;return i.View.extend({attributes:{"class":"widget-content"},options:{template:null,transitionListContainerEl:".transitions-list-container",workflow:null},initialize:function(t){this.options=e.defaults(t||{},this.options),this.listenTo(this.model,"destroy",this.remove);var i=this.options.template||l("#step-form-template").html();this.template=e.template(i),this.widget=null},onStepAdd:function(){var e=s.getFormData(this.widget.form),t=parseInt(e.order);this.model.get("name")||this.model.set("name",s.getNameByString(e.label,"step_")),this.model.set("order",t>0?t:0),this.model.set("is_final",e.hasOwnProperty("is_final")),this.model.set("label",e.label),this.model.set("_is_clone",!1),this.trigger("stepAdd",this.model),this.widget.remove()},onCancel:function(){this.model.get("_is_clone")?this.model.destroy():this.remove()},remove:function(){this.transitionsListView&&this.transitionsListView.remove(),i.View.prototype.remove.call(this)},renderTransitions:function(){this.transitionsListView=new a({el:this.$el.find(this.options.transitionListContainerEl),workflow:this.options.workflow,collection:this.model.getAllowedTransitions(this.options.workflow),stepFrom:this.model}),this.transitionsListView.render()},renderWidget:function(){if(this.widget)this.widget._adoptWidgetActions();else{var i=this.model.get("name")?t("Edit step"):t("Add new step");this.model.get("_is_clone")&&(i=t("Clone step")),this.widget=new o({title:i,el:this.$el,stateEnabled:!1,incrementalPosition:!1,dialogOptions:{close:e.bind(this.onCancel,this),width:800,modal:!0}}),this.listenTo(this.widget,"renderComplete",function(e){r.execute("layout:init",e)}),this.widget.render()}this.widget.form.off("submit"),this.widget.form.validate({submitHandler:e.bind(this.onStepAdd,this),ignore:'[type="hidden"]',highlight:function(e){var t=l(e).closest(".tab-pane");t.is(":hidden")&&t.closest(".oro-tabs").find('[href="#'+t.prop("id")+'"]').click()}})},render:function(){var e=this.model.toJSON();return e.transitionsAllowed=this.options.workflow.get("steps").length>1&&this.model.get("name"),this.$el.html(this.template(e)),e.transitionsAllowed&&this.renderTransitions(),this.renderWidget(),this}})}),define("oroworkflow/js/workflow-management/attribute/form-option-view/edit",["underscore","backbone","oroworkflow/js/workflow-management/helper","orotranslation/js/translator","oroentity/js/field-choice","jquery.validate"],function(e,t,i,n){var o=t.$;return t.View.extend({attributes:{"class":"widget-content"},options:{template:null,data:{label:"",property_path:"",property_path_text:"",required:!1},entity_field_template:null,entity_select_el:null,workflow:null},initialize:function(t){this.options=e.defaults(t||{},this.options);var i=this.options.template||o("#attribute-form-option-edit-template").html();this.template=e.template(i),this.entity_field_template=this.options.entity_field_template||o("#entity-column-chain-template").html(),this.editViewId=null},getFieldSelector:function(){return this.entityFieldSelectEl},onAdd:function(){var e=i.getFormData(this.form);e.property_path=this.options.workflow.getPropertyPathByFieldId(e.property_path),e.required=e.hasOwnProperty("required"),e.view_id=this.editViewId,this.resetForm(),this.trigger("formOptionAdd",e)},resetForm:function(){this.editViewId=null,this.entityFieldSelectEl.select2("val",""),this.form.get(0).reset(),this.submitBtn.html('<i class="icon-plus"></i> '+n("Add")),this.resetBtn.addClass("hide")},initFieldChoice:function(e){this.entityFieldSelectEl=e.find('[name="property_path"]'),this.entityFieldSelectEl.fieldChoice({fieldsLoaderSelector:this.options.entity_select_el,select2:{placeholder:n("Choose field...")}})},editRow:function(e){this.editViewId=e.view_id,this.fieldSelectorEl.select2("val",this.options.workflow.getFieldIdByPropertyPath(e.property_path)),this.labelEl.val(e.isSystemLabel?"":e.label),this.requiredEl.get(0).checked=e.required,this.submitBtn.html('<i class="icon-edit"></i> '+n("Update")),this.resetBtn.removeClass("hide")},render:function(){return this.form=o(this.template(this.options.data)).filter("form"),this.form.validate({submitHandler:e.bind(this.onAdd,this)}),this.form.on("submit",function(e){e.preventDefault()}),this.initFieldChoice(this.form),this.submitBtn=this.form.find("[type=submit]"),this.resetBtn=this.form.find("[type=reset]"),this.fieldSelectorEl=this.form.find("[name=property_path]"),this.labelEl=this.form.find("[name=label]"),this.requiredEl=this.form.find("[name=required]"),this.resetBtn.click(e.bind(this.resetForm,this)),this.$el.append(this.form),this}})}),define("oroworkflow/js/workflow-management/attribute/form-option-view/row",["underscore","orotranslation/js/translator","backbone","oroui/js/delete-confirmation"],function(e,t,i,n){var o=i.$;return i.View.extend({tagName:"tr",events:{"click .delete-form-option":"triggerRemove","click .edit-form-option":"triggerEdit"},options:{workflow:null,template:null,data:{label:null,property_path:null,required:!1}},initialize:function(t){this.options=e.defaults(t||{},this.options);var i=this.options.template||o("#attribute-form-option-row-template").html();this.template=e.template(i),this.options.data.view_id=this.cid},triggerEdit:function(e){e.preventDefault(),this.trigger("editFormOption",this.options.data)},triggerRemove:function(i){i.preventDefault();var o=new n({content:t("Are you sure you want to delete this field?")});o.on("ok",e.bind(function(){this.trigger("removeFormOption",this.options.data),this.remove()},this)),o.open()},render:function(){var e=o(this.template(this.options.data));return this.$el.html(e),this}})}),define("oroworkflow/js/workflow-management/attribute/form-option-view/list",["underscore","backbone","oroworkflow/js/workflow-management/attribute/form-option-view/row"],function(e,t,i){var n=t.$;return t.View.extend({options:{listElBodyEl:"tbody",template:null,fields_selector_el:null,workflow:null,collection:[],entity_field_template:null},initialize:function(t){this.options=e.defaults(t||{},this.options);var i=this.options.template||n("#attribute-form-option-list-template").html();this.template=e.template(i),this.rowViews={},this.rowViewsByAttribute={},this.$listElBody=null,this.entityFieldTemplate=e.template(this.options.entity_field_template||n("#entity-column-chain-template").html()),this.listenTo(this.options.workflow,"pathMappingInit",this.render),this.options.workflow.entityFieldsInitialized&&this.render()},addAllItems:function(t){e.each(t,this.addItem,this)},initList:function(){if(!this.$listElBody){var e=n(this.template());this.$listElBody=e.find(this.options.listElBodyEl),this.$el.html(e)}},addItem:function(t){-1==e.indexOf(this.getCollection(),t)&&this.getCollection().push(t);var n=this.options.workflow.getFieldIdByPropertyPath(t.property_path),o=this.options.fields_selector_el;if(t.isSystemLabel=!t.label,n)t.label||(t.label=e.last(o.fieldChoice("splitFieldId",n)).field.label),t.entityField=o.fieldChoice("formatChoice",n,this.entityFieldTemplate);else{if(!t.label&&t.attribute_name){var s=this.options.workflow.getAttributeByName(t.attribute_name);t.label=s.get("translated_label")}t.entityField=t.property_path||t.attribute_name}var r=t.view_id||(this.rowViewsByAttribute.hasOwnProperty(t.attribute_name)?this.rowViewsByAttribute[t.attribute_name]:null);if(r)this.rowViews[r].options.data=t,this.rowViews[r].render();else{var a=new i({data:t,workflow:this.options.workflow});a.on("editFormOption",function(e){this.trigger("editFormOption",e)},this),a.on("removeFormOption",function(e){for(var t=this.getCollection(),i=t.length-1;i>=0;)t[i].attribute_name==e.attribute_name&&(this.rowViewsByAttribute.hasOwnProperty(e.attribute_name)&&delete this.rowViewsByAttribute[e.attribute_name],t.splice(i,1)),i--;this.getCollection().length||this.render(),this.trigger("removeFormOption",e)},this),this.rowViews[a.cid]=a,this.rowViewsByAttribute[t.attribute_name]=a.cid,this.initList(),this.$listElBody.append(a.render().$el)}},getCollection:function(){return this.options.collection},remove:function(){this.resetView(),t.View.prototype.remove.call(this)},resetView:function(){e.each(this.rowViews,function(e){e.remove()}),this.rowViews={}},render:function(){return this.resetView(),this.getCollection().length?(this.initList(),this.addAllItems(this.getCollection())):(this.$el.empty(),this.$listElBody=null),this}})}),define("oroworkflow/js/workflow-management/transition/view/edit",["underscore","orotranslation/js/translator","backbone","oro/dialog-widget","oroworkflow/js/workflow-management/helper","oroworkflow/js/workflow-management/attribute/form-option-view/edit","oroworkflow/js/workflow-management/attribute/form-option-view/list","oroui/js/mediator","jquery.validate"],function(e,t,i,n,o,s,r,a){var l=i.$;return i.View.extend({attributes:{"class":"widget-content"},events:{"change [name=label]":"updateExampleView",'change [name$="[transition_prototype_icon]"]':"updateExampleView","change [name=button_color]":"updateExampleView"},options:{template:null,workflow:null,step_from:null,entity_select_el:null,button_example_template:'<button type="button" class="btn <%= button_color %>"><% if (transition_prototype_icon) { %><i class="<%= transition_prototype_icon %>"/> <% } %><%= label %></button>',allowed_button_styles:[{label:t("Gray button"),name:""},{label:t("Navy blue button"),name:"btn-primary"},{label:t("Blue button"),name:"btn-info"},{label:t("Green button"),name:"btn-success"},{label:t("Yellow button"),name:"btn-warning"},{label:t("Red button"),name:"btn-danger"},{label:t("Black button"),name:"btn-inverse"},{label:t("Link"),name:"btn-link"}]},initialize:function(t){this.options=e.defaults(t||{},this.options),this.listenTo(this.model,"destroy",this.remove);var i=this.options.template||l("#transition-form-template").html();this.template=e.template(i),this.button_example_template=e.template(this.options.button_example_template),this.widget=null},updateExampleView:function(){var e=o.getFormData(this.widget.form);e.transition_prototype_icon=e.transition_prototype_icon||this._getFrontendOption("icon"),(e.transition_prototype_icon||e.label)&&this.$exampleBtnContainer.html(this.button_example_template(e))},onTransitionAdd:function(){var t=o.getFormData(this.widget.form);this.model.get("name")||this.model.set("name",o.getNameByString(t.label,"transition_")),this.model.set("label",t.label),this.model.set("step_to",t.step_to),this.model.set("display_type",t.display_type),this.model.set("message",t.message);var i=this.model.get("frontend_options");i=e.extend({},i,{icon:t.transition_prototype_icon,"class":t.button_color}),this.model.set("frontend_options",i),this.model.set("_is_clone",!1);var n=t.step_from?t.step_from:this.options.step_from;this.trigger("transitionAdd",this.model,n),this.widget.remove()},_getFrontendOption:function(e){var t="",i=this.model.get("frontend_options");return i&&i.hasOwnProperty(e)&&(t=i[e]),t},renderAddAttributeForm:function(e){this.attributesFormView=new s({el:e.find(".transition-attributes-form-container"),workflow:this.options.workflow,entity_select_el:this.options.entity_select_el}),this.attributesFormView.on("formOptionAdd",this.addFormOption,this),this.attributesFormView.render()},addFormOption:function(t){var i=this.options.workflow.getOrAddAttributeByPropertyPath(t.property_path),n=i.get("name"),o=this.model.get("form_options");o.attribute_fields=o.attribute_fields||{};var s=o.attribute_fields.hasOwnProperty(n)?o.attribute_fields[n]:{};s||!t.required&&!t.label||(s={}),t.required&&(s=e.extend({},{options:{required:!0}})),t.label&&(s.label=t.label),o.attribute_fields[n]=s,t.attribute_name=n,t.is_entity_attribute=!0,this.attributesList.addItem(t)},renderAttributesList:function(e){this.attributesList=new r({el:e.find(".transition-attributes-list-container"),collection:this.getFormOptions(),fields_selector_el:this.attributesFormView.getFieldSelector(),workflow:this.options.workflow}),this.listenTo(this.attributesList,"removeFormOption",this.removeFormOption),this.listenTo(this.attributesList,"editFormOption",this.editFormOption)},editFormOption:function(e){this.attributesFormView.editRow(e)},removeFormOption:function(e){delete this.model.get("form_options").attribute_fields[e.attribute_name]},getFormOptions:function(){var t=[];return e.each(this.model.get("form_options").attribute_fields,function(e,i){e=e||{};var n=this.options.workflow.getAttributeByName(i),o=n.get("property_path")||i,s=e.hasOwnProperty("options")?e.options:{},r=s.hasOwnProperty("required")?s.required:!1,a=e.hasOwnProperty("label")?e.label:null;!a&&s.hasOwnProperty("label")&&(a=s.label),t.push({is_entity_attribute:n.get("property_path"),attribute_name:i,property_path:o,required:r,label:a})},this),t},onCancel:function(){this.model.get("_is_clone")?this.model.destroy():this.remove()},remove:function(){this.attributesFormView&&this.attributesFormView.remove(),this.attributesList&&this.attributesList.remove(),i.View.prototype.remove.call(this)},renderWidget:function(){if(this.widget)this.widget._adoptWidgetActions();else{var i=this.model.get("name")?t("Edit transition"):t("Add new transition");this.model.get("_is_clone")&&(i=t("Clone transition")),this.widget=new n({title:i,el:this.$el,stateEnabled:!1,incrementalPosition:!1,dialogOptions:{close:e.bind(this.onCancel,this),width:800,modal:!0}}),this.listenTo(this.widget,"renderComplete",function(e){a.execute("layout:init",e)}),this.widget.render()}this.widget.form.off("submit"),this.widget.form.validate({submitHandler:e.bind(this.onTransitionAdd,this),ignore:'[type="hidden"]',highlight:function(e){var t=l(e).closest(".tab-pane");t.is(":hidden")&&t.closest(".oro-tabs").find('[href="#'+t.prop("id")+'"]').click()}})},render:function(){var t=this.model.toJSON(),i=this.options.workflow.get("steps").models;t.stepFrom=this.options.step_from,t.allowedButtonStyles=e.sortBy(this.options.allowed_button_styles,"label"),t.buttonIcon=this._getFrontendOption("icon"),t.buttonStyle=this._getFrontendOption("class"),t.allowedStepsFrom=i,t.allowedStepsTo=i.slice(1);var n=l(this.template(t));return this.renderAddAttributeForm(n),this.options.workflow.entityFieldsInitialized?this.renderAttributesList(n):this.listenTo(this.options.workflow,"entityFieldsInitialize",e.bind(function(){this.renderAttributesList(n)},this)),this.$el.append(n),this.renderWidget(),this.$exampleContainer=this.$(".transition-example-container"),this.$exampleBtnContainer=this.$exampleContainer.find(".transition-btn-example"),this.updateExampleView(),this}})}),define("oroworkflow/js/workflow-management",["underscore","backbone","routing","oroui/js/messenger","orotranslation/js/translator","oroworkflow/js/workflow-management/step/view/list","oroworkflow/js/workflow-management/step/model","oroworkflow/js/workflow-management/transition/model","oroworkflow/js/workflow-management/step/view/edit","oroworkflow/js/workflow-management/transition/view/edit","oroworkflow/js/workflow-management/helper","oroui/js/tools","oroui/js/mediator","oroui/js/delete-confirmation","oroentity/js/fields-loader"],function(e,t,i,n,o,s,r,a,l,c,d,h,u,p){var f=t.$;return t.View.extend({events:{"click .add-step-btn":"addNewStep","click .add-transition-btn":"addNewTransition"},options:{stepsEl:null,model:null,entities:[]},initialize:function(t){this.options=e.defaults(t||{},this.options),this.saveAndClose=!1,e.each(this.model.get("steps").models,this.setWorkflow,this),e.each(this.model.get("transitions").models,this.setWorkflow,this),this.listenTo(this.model.get("steps"),"add",this.setWorkflow),this.listenTo(this.model.get("transitions"),"add",this.setWorkflow),this.addStartingPoint(),this.initStartStepSelector(),this.stepListView=new s({el:this.$(this.options.stepsEl),collection:this.model.get("steps"),workflow:this.model}),this.$entitySelectEl=this.$('[name$="[related_entity]"]'),this.initEntityFieldsLoader(),this.initForm(),this.listenTo(this.model,"requestAddTransition",this.addNewStepTransition),this.listenTo(this.model,"requestEditStep",this.openManageStepForm),this.listenTo(this.model,"requestCloneStep",this.cloneStep),this.listenTo(this.model,"requestRemoveStep",this.removeStep),this.listenTo(this.model.get("steps"),"destroy",this.onStepRemove),this.listenTo(this.model,"requestRemoveTransition",this.removeTransition),this.listenTo(this.model,"requestCloneTransition",this.cloneTransition),this.listenTo(this.model,"requestEditTransition",this.openManageTransitionForm),this.listenTo(this.model,"change:entity",this.resetWorkflow)},initForm:function(){this.$el.on("submit",e.bind(this.saveConfiguration,this)),this.model.url=this.$el.attr("action"),this.$('[type="submit"]').on("click",e.bind(function(){this.saveAndClose=!0},this)),this.$('[data-action="save_and_stay"]').on("click",e.bind(function(){this.saveAndClose=!1},this))},setWorkflow:function(e){e.setWorkflow(this.model)},initStartStepSelector:function(){var t=e.bind(function(t){var i=[];e.each(this.model.get("steps").models,function(n){var o=n.get("label");n.get("_is_start")||t.term&&t.term!=o&&-1===e.indexOf(o,t.term)||i.push({id:n.get("name"),text:n.get("label")})},this),t.callback({results:i})},this);this.$startStepEl=this.$('[name="start_step"]');var i={allowClear:!0,query:t,placeholder:o("Choose step..."),initSelection:e.bind(function(e,t){var i=this.model.getStepByName(e.val());t({id:i.get("name"),text:i.get("label")})},this)};this.$startStepEl.select2(i)},initEntityFieldsLoader:function(){var t=new p({title:o("Change Entity Confirmation"),okText:o("Yes"),content:o("oro.workflow.change_entity_confirmation")});t.on("ok",e.bind(function(){this.model.set("entity",this.$entitySelectEl.val())},this)),t.on("cancel",e.bind(function(){this.$entitySelectEl.select2("val",this.model.get("entity"))},this)),this.$entitySelectEl.fieldsLoader({router:"oro_workflow_api_rest_entity_get",routingParams:{},confirm:t,requireConfirm:e.bind(function(){return this.model.get("steps").length>1&&this.model.get("transitions").length+this.model.get("transition_definitions").length+this.model.get("attributes").length>0},this)}),this.$entitySelectEl.on("change",e.bind(function(){this.model.get("entity")||this.model.set("entity",this.$entitySelectEl.val())},this)),this.$entitySelectEl.on("fieldsloadercomplete",e.bind(function(e){this.initEntityFieldsData(f(e.target).data("fields"))},this)),this._preloadEntityFieldsData()},_preloadEntityFieldsData:function(){if(this.$entitySelectEl.val()){var e=this.$entitySelectEl.fieldsLoader("getFieldsData");e.length?this.initEntityFieldsData(e):this.$entitySelectEl.fieldsLoader("loadFields")}},addStartingPoint:function(){this.model.get("steps").add(this._createStartingPoint())},resetWorkflow:function(){var e=function(e){if(e.length)for(var t=e.length-1;t>-1;t--)e.at(t).destroy()};this.model.set("start_step",null),e(this.model.get("attributes")),e(this.model.get("steps")),e(this.model.get("transition_definitions")),e(this.model.get("transitions")),this.addStartingPoint()},initEntityFieldsData:function(e){this.model.setEntityFieldsData(e)},saveConfiguration:function(t){if(t.preventDefault(),this.$el.valid()){var s=d.getFormData(this.$el);s.steps_display_ordered=s.hasOwnProperty("steps_display_ordered"),this.model.get("name")||this.model.set("name",d.getNameByString(s.label,"workflow_")),this.model.set("label",s.label),this.model.set("steps_display_ordered",s.steps_display_ordered),this.model.set("entity",s.related_entity),this.model.set("start_step",s.start_step),this.validateConfiguration()&&(u.execute("showLoading"),this.model.save(null,{success:e.bind(function(){u.execute("hideLoading");var e="",t=this.model.get("name");e=this.saveAndClose?i.generate("oro_workflow_definition_view",{name:t}):i.generate("oro_workflow_definition_update",{name:t}),u.once("page:afterChange",function(){n.notificationFlashMessage("success",o("Workflow saved."))}),u.execute("redirectTo",{url:e})},this),error:function(t,i){u.execute("hideLoading");var s=i.responseJSON||{};!h.debug||e.isUndefined(console)||e.isUndefined(s.error)||console.error(s.error),n.notificationFlashMessage("error",o("Could not save workflow."))}}))}},validateConfiguration:function(){return this.model.get("label")?this.model.get("entity")?this.model.get("steps").length<=1||0==this.model.get("transitions").length?(n.notificationFlashMessage("error",o("Could not save workflow. Please add at least one step and one transition.")),!1):!this.model.get("start_step")&&e.isEmpty(this._getStartingPoint().get("allowed_transitions"))?(n.notificationFlashMessage("error",o("Could not save workflow. Please either set default step or add transitions to starting point.")),!1):!0:(n.notificationFlashMessage("error",o("Could not save workflow. Please set related entity.")),!1):(n.notificationFlashMessage("error",o("Could not save workflow. Please set workflow name.")),!1)},_createStartingPoint:function(){var e=new r({name:"step:starting_point",label:o("(Start)"),order:-1,_is_start:!0});return e.getAllowedTransitions(this.model).reset(this.model.getStartTransitions()),e},_getStartingPoint:function(){return this.model.getStepByName("step:starting_point")},renderSteps:function(){this.stepListView.render()},addNewStep:function(){var e=new r;this.openManageStepForm(e)},addNewTransition:function(){this.addNewStepTransition(null)},cloneTransition:function(e,t){var i=this.model.cloneTransition(e,!0);this.openManageTransitionForm(i,t)},removeTransition:function(e){this._removeHandler(e,o("Are you sure you want to delete this transition?"))},_removeHandler:function(e,t){var i=new p({content:t});i.on("ok",function(){e.destroy()}),i.open()},addNewStepTransition:function(e){var t=new a;this.openManageTransitionForm(t,e)},_showModalMessage:function(e,t,i){var n=new p({title:t||"",content:e,okText:i||o("Ok"),allowCancel:!1});n.open()},openManageTransitionForm:function(e,t){if(1==this.model.get("steps").length)return this._showModalMessage(o("At least one step should be added to add transition."),o("Warning")),void 0;if(!this.$entitySelectEl.val())return this._showModalMessage(o("Related entity must be selected to add transition."),o("Warning")),void 0;var i=new c({model:e,workflow:this.model,step_from:t,entity_select_el:this.$entitySelectEl,entities:this.options.entities,workflowContainer:this.$el});i.on("transitionAdd",this.addTransition,this),i.render()},addTransition:function(t,i){this.model.get("transitions").get(t.cid)||(e.isString(i)&&(i=this.model.getStepByName(i)),t.set("is_start",i.get("_is_start")),this.model.get("transitions").add(t),i.getAllowedTransitions(this.model).add(t))},openManageStepForm:function(e){if(!this.$entitySelectEl.val())return this._showModalMessage(o("Related entity must be selected to add step."),o("Warning")),void 0;var t=new l({model:e,workflow:this.model,workflowContainer:this.$el});t.on("stepAdd",this.addStep,this),t.render()},cloneStep:function(e){var t=this.model.cloneStep(e,!0);this.openManageStepForm(t)},addStep:function(e){this.model.get("steps").get(e.cid)||this.model.get("steps").add(e)},removeStep:function(e){this._removeHandler(e,o("Are you sure you want to delete this step?"))},onStepRemove:function(e){this.$startStepEl.val()==e.get("name")&&this.$startStepEl.select2("val","")},render:function(){return this.renderSteps(),this}})}),define("oroworkflow/js/workflow-management/step/collection",["backbone","oroworkflow/js/workflow-management/step/model"],function(e,t){return e.Collection.extend({model:t,comparator:"order"})}),define("oroworkflow/js/workflow-management/transition-definition/model",["backbone"],function(e){return e.Model.extend({defaults:{name:null,pre_conditions:null,conditions:null,post_actions:null},initialize:function(){null===this.get("pre_conditions")&&this.set("pre_conditions",{}),null===this.get("conditions")&&this.set("conditions",{}),null===this.get("post_actions")&&this.set("post_actions",[])}})}),define("oroworkflow/js/workflow-management/transition-definition/collection",["backbone","oroworkflow/js/workflow-management/transition-definition/model"],function(e,t){return e.Collection.extend({model:t})}),define("oroworkflow/js/workflow-management/attribute/model",["backbone"],function(e){return e.Model.extend({defaults:{name:null,label:null,translated_label:null,type:null,property_path:null,options:null},initialize:function(){null===this.get("options")&&this.set("options",{})}})}),define("oroworkflow/js/workflow-management/attribute/collection",["backbone","oroworkflow/js/workflow-management/attribute/model"],function(e,t){return e.Collection.extend({model:t})}),define("oroworkflow/js/workflow-management/workflow/model",["underscore","jquery","backbone","oroworkflow/js/workflow-management/helper","orotranslation/js/translator","oroworkflow/js/workflow-management/step/collection","oroworkflow/js/workflow-management/transition/collection","oroworkflow/js/workflow-management/transition-definition/collection","oroworkflow/js/workflow-management/attribute/collection","oroworkflow/js/workflow-management/step/model","oroworkflow/js/workflow-management/transition/model","oroworkflow/js/workflow-management/transition-definition/model","oroworkflow/js/workflow-management/attribute/model","oroentity/js/entity-fields-util"],function(e,t,i,n,o,s,r,a,l,c,d,h,u,p){return i.Model.extend({defaults:{name:"",label:"",entity:"",entity_attribute:"entity",start_step:null,steps_display_ordered:!1,steps:null,transitions:null,transition_definitions:null,attributes:null},entityFieldUtil:null,entityFieldsInitialized:!1,initialize:function(){null===this.get("steps")&&this.set("steps",new s),null===this.get("transitions")&&this.set("transitions",new r),null===this.get("transition_definitions")&&this.set("transition_definitions",new a),null===this.get("attributes")&&this.set("attributes",new l)},cloneTransitionDefinition:function(t){e.isString(t)&&(t=this.getTransitionDefinitionByName(t));var i=this._getClonedItem(t),n=new h(i);return this.get("transition_definitions").add(n),n},cloneTransition:function(t,i){e.isString(t)&&(t=this.getTransitionByName(t));var s=this._getClonedItem(t);if(t.get("transition_definition")){var r=this.cloneTransitionDefinition(t.get("transition_definition"));s.transition_definition=r.get("name")}s.frontend_options=n.deepClone(s.frontend_options),s.form_options=n.deepClone(s.form_options),s.label=o("Copy of")+" "+s.label,i&&(s._is_clone=!0);
var a=new d(s);return a.setWorkflow(this),i||this.get("transitions").add(a),a},cloneStep:function(t,i){e.isString(t)&&(t=this.getStepByName(t));var n=this._getClonedItem(t),s=[];e.each(t.getAllowedTransitions(this).models,function(e){var t=this.cloneTransition(e);s.push(t.get("name"))},this),n.allowed_transitions=s,n.label=o("Copy of")+" "+n.label,i&&(n._is_clone=!0);var r=new c(n);return r.setWorkflow(this),i||this.get("steps").add(r),r},_getClonedItem:function(t){var i=e.clone(t.toJSON());return i.name+="_clone_"+n.getRandomId(),i},setEntityFieldsData:function(e){this.entityFieldsInitialized=!0,this.entityFieldUtil=new p(this.get("entity"),e),this.trigger("entityFieldsInitialize")},getFieldIdByPropertyPath:function(e){var t=e.split(".");return t.length>1&&t[0]==this.get("entity_attribute")?(t.splice(0,1),this.entityFieldUtil.getPathByPropertyPath(t)):null},getPropertyPathByFieldId:function(e){return this.get("entity_attribute")+"."+this.entityFieldUtil.getPropertyPathByPath(e)},getSystemEntities:function(){return this.systemEntities},setSystemEntities:function(e){this.systemEntities=e},getOrAddAttributeByPropertyPath:function(t){var i=e.first(this.get("attributes").where({property_path:t}));return i||(i=new u({name:t.replace(/\./g,"_"),property_path:t}),this.get("attributes").add(i)),i},getAttributeByPropertyPath:function(t){return e.first(this.get("attributes").where({property_path:t}))},getAttributeByName:function(e){return this._getByName("attributes",e)},getStepByName:function(e){return this._getByName("steps",e)},getTransitionByName:function(e){return this._getByName("transitions",e)},getTransitionDefinitionByName:function(e){return this._getByName("transition_definitions",e)},getStartTransitions:function(){return this.get("transitions").where({is_start:!0})},_getByName:function(t,i){return e.first(this.get(t).where({name:i}))}})}),define("oro/datagrid/action/workflow-activate-action",["oro/datagrid/action/model-action","oroworkflow/js/activation-handler"],function(e,t){var i;return i=e.extend({execute:function(){var e=this.datagrid;this.on("activation_start",function(){e.showLoading()}),this.on("activation_success",function(){e.hideLoading(),e.collection.fetch({reset:!0})}),this.on("activation_error",function(){e.hideLoading()}),t.call(this,this.getLink())}})});var Url=function(){var e={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},t=function(t,i){var o=document,s=o.createElement("a"),i=i||o.location.href,r=i.match(/\/\/(.*?)(?::(.*?))?@/)||[];s.href=i;for(var a in e)t[a]=s[e[a]]||"";t.protocol=t.protocol.replace(/:$/,""),t.query=t.query.replace(/^\?/,""),t.hash=t.hash.replace(/^#/,""),t.user=r[1]||"",t.pass=r[2]||"",n(t)},i=function(e){return e=e.replace(/\+/g," "),e=e.replace(/%([EF][0-9A-F])%([89AB][0-9A-F])%([89AB][0-9A-F])/g,function(e,t,i,n){var o=parseInt(t,16)-224,s=parseInt(i,16)-128;if(0==o&&32>s)return e;var r=parseInt(n,16)-128,a=(o<<12)+(s<<6)+r;return a>65535?e:String.fromCharCode(a)}),e=e.replace(/%([CD][0-9A-F])%([89AB][0-9A-F])/g,function(e,t,i){var n=parseInt(t,16)-192;if(2>n)return e;var o=parseInt(i,16)-128;return String.fromCharCode((n<<6)+o)}),e=e.replace(/%([0-7][0-9A-F])/g,function(e,t){return String.fromCharCode(parseInt(t,16))})},n=function(e){var t=e.query;e.query=new function(e){for(var t,n=/([^=&]+)(=([^&]*))?/g;t=n.exec(e);){var o=decodeURIComponent(t[1].replace(/\+/g," ")),s=t[3]?i(t[3]):"";void 0!==this[o]?(this[o]instanceof Array||(this[o]=[this[o]]),this[o].push(s)):this[o]=s}this.toString=function(){var e="",t=encodeURIComponent;for(var i in this)if(!(this[i]instanceof Function))if(this[i]instanceof Array){var n=this[i].length;if(n)for(var o=0;n>o;o++)e+=e?"&":"",e+=t(i)+"="+t(this[i][o]);else e+=(e?"&":"")+t(i)+"="}else e+=e?"&":"",e+=t(i)+"="+t(this[i]);return e}}(t)};return function(e){this.toString=function(){return(this.protocol&&this.protocol+"://")+(this.user&&this.user+(this.pass&&":"+this.pass)+"@")+(this.host&&this.host)+(this.port&&":"+this.port)+(this.path&&this.path)+(this.query.toString()&&"?"+this.query)+(this.hash&&"#"+this.hash)},t(this,e)}}();define("url",function(e){return function(){var t;return t||e.Url}}(this)),define("oronavigation/js/content-manager",["underscore","chaplin","orosync/js/sync","oroui/js/mediator","oroui/js/messenger","orotranslation/js/translator"],function(e,t,i,n,o,s){function r(t,i){var n;n=f[t]||{},e.extend(n,{path:t,query:i,tags:[]}),e.defaults(n,{page:null,state:{}}),null==m.path&&(e.extend(n.state,m.state),n.tags=m.tags),m=n}function a(e){var t=u.get(e),i=t?"<b>"+t.titleShort+"</b>":"the";p&&p.close(),p=o.notificationMessage("warning",s("navigation.message.content.outdated",{title:i}))}function l(t){return t=e.reject(JSON.parse(t),function(e){return(e.username||null)===g}),e.pluck(t,"tagname")}function c(t,i){t===m.path&&e.each(i,function(e){e(t)})}function d(t){var i;t=l(t),i=[m].concat(e.values(f)),e.each(i,function(i){var o,s,r,l;return l=[],s=i.tags,r=i.path,e.each(s,function(i){e.intersection(i.tags,t).length&&l.push(i.callback||a)}),l.length?(l=e.uniq(l),r===m.path?e.each(l,function(e){e(r)}):v[r]||(o=e.partial(c,r,l),v[r]=o,n.on("page:update",o)),n.trigger("content-manager:content-outdated",{path:r,isCurrentPage:r===m.path}),void 0):!1})}function h(e){var t;return t=e.split("?"),n.execute("retrievePath",t[0])}var u,p,f={},m={tags:[],state:{}},g=null,v={};return n.on("page:request",function(e){var t,i;t=null!=e.route.path?e.route.path:m.path,i=null!=e.route.query?e.route.query:m.query,r(t,i),p&&p.close()}),n.on("page:update",function(e,t){var i;m.page=e,i=t.options,(i.cache===!0||i.force===!0&&u.get())&&u.add()}),i.subscribe("oro/data/update",d),u={init:function(e,t,i){r(e,t),g=i},tagContent:function(t,i){var o={tags:e.isArray(t)?t:[t]};i&&(o.callback=i),m.tags.push(o),n.trigger("content-manager:content-tagged",{current:m.tags,added:o})},remove:function(t){t=e.isUndefined(t)?m.path:h(t),delete f[t],v[t]&&(n.off("page:update",v[t]),delete v[t])},add:function(){var e;e=m.path,f[e]=m},get:function(t){return t=e.isUndefined(t)?m.path:h(t),f[t]||void 0},saveState:function(t,i,o){null!==i?m.state[t]=i:delete m.state[t],e.isUndefined(o)||(this.changeUrlParam(t,o),n.trigger("pagestate:change"))},changeUrl:function(t,i){var o,s;i=i||{},s=t.split("?"),m.path=s[0],m.query=s[1]||"",o=e.pick(m,["path","query"]),n.execute("changeRoute",o,i)},changeUrlParam:function(i,o){var s,r;r=t.utils.queryParams.parse(m.query),r[i]===o||null==r[i]&&null==o||(null!==o?r[i]=o:delete r[i],r=t.utils.queryParams.stringify(r),m.query=r,s=e.pick(m,["path","query"]),n.execute("changeRoute",s,{replace:!0}))},fetchState:function(e){return m.state[e]},checkState:function(e,i){var n;return n=t.utils.queryParams.parse(m.query),n[e]==i},compareUrl:function(e,t){return null==t&&(t=m.path),h(t)===h(e)},currentUrl:function(){var e;return e=n.execute("combineRouteUrl",m)},cacheIgnore:function(){n.once("page:beforeChange",function(e){u.remove(e.path)})}}}),define("oronavigation/js/content/grid-builder",["underscore","../content-manager"],function(e,t){var i={initHandler:function(i,n){n.options&&e.isArray(n.options.contentTags)&&t.tagContent(n.options.contentTags)}};return{allowedTracking:[],allowTracking:function(t){-1===e.indexOf(this.allowedTracking,t)&&this.allowedTracking.push(t)},init:function(t,n){-1!==e.indexOf(this.allowedTracking,n.gridName)&&i.initHandler(t,n.metadata),t.resolve()}}}),define("oronavigation/js/shortcuts/view",["jquery","underscore","backbone","routing","bootstrap"],function(e,t,i,n){return i.View.extend({options:{el:".shortcuts .input-large",source:null},events:{change:"onChange"},data:{},cache:{},initialize:function(e){this.options=t.defaults(e||{},this.options),this.$el.val(""),this.$el.typeahead({source:t.bind(this.source,this)}),this.$form=this.$el.closest("form")},source:function(i,o){if(t.isArray(this.options.source))o(this.options.source);else if(t.isUndefined(this.cache[i])){var s=n.generate(this.options.source,{query:i});e.get(s,t.bind(function(e){this.data=e;var n=[];t.each(e,function(e,t){n.push(t)}),this.cache[i]=n,o(n)},this))}else o(this.cache[i])},onChange:function(){var e,i=this.$el.val();this.$el.val(""),t.isUndefined(this.data[i])||(e=this.data[i],this.$form.attr("action",e.url).submit())}})}),define("oronavigation/js/app/components/base/bookmark-component",["jquery","underscore","oroui/js/mediator","oroui/js/app/components/base/component","oroui/js/error"],function(e,t,i,n,o){var s;return s=n.extend({_options:{},listen:{"toAdd collection":"toAdd","toRemove collection":"toRemove","pagestate:change mediator":"onPageStateChange","page:beforeChange mediator":"onPageChange"},initialize:function(i){var n,o,r;r=e(i.dataSource),n=r.data("data"),o=r.data("options"),r.remove(),this._options=t.defaults({},i||{},o),s.__super__.initialize.call(this,i),this.collection.reset(n),this._createSubViews()},_createSubViews:function(){},toRemove:function(e){e.destroy({wait:!0,error:function(e,t){404!==t.status||i.execute("retrieveOption","debug")?o.handle({},t,{enforce:!0}):e.unset("id").destroy()}})},toAdd:function(e){var t;t=this.collection,this.actualizeAttributes(e),e.save(null,{success:function(){var i;i=t.find(function(t){return t.get("url")===e.get("url")}),i?e.destroy():t.unshift(e)}})},actualizeAttributes:function(){},onPageStateChange:function(){var e,t;e=this.collection.getCurrentModel(),e&&(t=i.execute("currentUrl"),e.set("url",t),e.save())},onPageChange:function(e,t){var n,o;t&&""===t.query&&(n=this.collection.find(function(e){return i.execute("compareUrl",e.get("url"),t.path)}),n&&(o=n.get("url").split("?"),t.query=o[1]||""))}})}),define("oronavigation/js/app/views/bookmark-button-view",["oroui/js/mediator","oroui/js/app/views/base/page-region-view"],function(e,t){var i,n;return n=window.document,i=t.extend({pageItems:["showPinButton","titleShort","titleSerialized"],events:{click:"onToggle"},listen:{"add collection":"updateState","remove collection":"updateState","reset collection":"updateState"},render:function(){var e,t,i;this.updateState(),e=this.getTemplateData(),e&&(e.showPinButton?(i=e.titleShort,this.$el.show(),e.titleSerialized&&(t=JSON.parse(e.titleSerialized),this.$el.data("title",t)),this.$el.data("title-rendered-short",i)):this.$el.hide())},updateState:function(){var e;e=this.collection.getCurrentModel(),this.$el.toggleClass("gold-icon",null!=e)},onToggle:function(){var e,t,i;e=this.collection.getCurrentModel(),e?this.collection.trigger("toRemove",e):(i=this.collection.model,t=this.getItemAttrs(),e=new i(t),this.collection.trigger("toAdd",e))},getItemAttrs:function(){var t,i;return i=this.$el.data("title"),t={url:e.execute("currentUrl"),title_rendered:n.title,title_rendered_short:this.$el.data("title-rendered-short")||n.title,title:i?JSON.stringify(i):'{"template": "'+n.title+'"}'}}})}),define("oronavigation/js/app/views/bookmark-item-view",["jquery","underscore","oroui/js/app/views/base/view","oroui/js/mediator"],function(e,t,i,n){var o;return o=i.extend({tagName:"li",events:{"click .btn-close":"toRemove","click .close":"toRemove"},listen:{"change:url model":"render","page:afterChange mediator":"onPageUpdated"},onPageUpdated:function(){this.setActiveItem()},toRemove:function(){this.model.collection.trigger("toRemove",this.model)},checkCurrentUrl:function(){var e;return e=this.model.get("url"),n.execute("compareUrl",e)},setActiveItem:function(){this.$el.toggleClass("active",this.checkCurrentUrl())},getTemplateData:function(){var e=o.__super__.getTemplateData.call(this);return e.url=("/"!==e.url[0]?"/":"")+e.url,e}})}),define("oronavigation/js/app/components/favorite-component",["underscore","./base/bookmark-component","../views/bookmark-button-view","oroui/js/app/views/base/collection-view","../views/bookmark-item-view"],function(e,t,i,n,o){var s;return s=t.extend({_createSubViews:function(){this._createButtonView(),this._createTabView()},_createButtonView:function(){var t,n;t=this._options.buttonOptions||{},n=this.collection,e.extend(t,{autoRender:!0,collection:n}),this.button=new i(t)},_createTabView:function(){var t,i,s;t=this._options.tabOptions||{},i=this.collection,s=o.extend({template:this._options.tabItemTemplate}),e.extend(t,{autoRender:!0,collection:i,itemView:s}),this.tabs=new n(t)},actualizeAttributes:function(e){e.set("type","favorite"),e.set("position",this.collection.length)}})}),define("oronavigation/js/app/views/pin-bar-view",["underscore","oroui/js/app/views/base/collection-view"],function(e,t){var i;return i=t.extend({isVisibleItem:function(e){var t=this.subview("itemView:"+e.cid);return this.isVisibleView(t)},isVisibleView:function(e){return e&&0===e.el.offsetTop},getLastVisibleView:function(){var e,t,i;for(i=this.collection.models,t=i.length-1;t>=0&&(e=this.subview("itemView:"+i[t].cid),!this.isVisibleView(e));t-=1)e=null;return e}})}),define("oronavigation/js/app/views/pin-dropdown-view",["underscore","chaplin","oroui/js/app/views/base/collection-view"],function(e,t,i){var n,o;return o=t.utils,n=i.extend({listen:{visibilityChange:"updateVisibility","add collection":"updateDropdown","remove collection":"updateDropdown"},initialize:function(t){e.extend(this,e.pick(t,["position"])),n.__super__.initialize.apply(this,arguments),$(window).on("resize."+this.cid,e.debounce(e.bind(this.updateDropdown,this),40))},dispose:function(){$(window).off("."+this.cid),n.__super__.dispose.call(this)},render:function(){return n.__super__.render.call(this),this.positionUpdate(),this},updateDropdown:function(){this.recheckItems(),this.positionUpdate()},positionUpdate:function(){var t=e.result(this,"position");t&&this.$el.css("left",t.left)},recheckItems:function(){var e;this.collection.each(function(t,i){var n,s,r;n=this.subview("itemView:"+t.cid),s=this.filterer(t,i),this.filterCallback(n,s),r=o.indexOf(this.visibleItems,t),s&&-1===r?(this.visibleItems.push(t),e=!0):s||-1===r||(this.visibleItems.splice(r,1),e=!0)},this),e&&this.trigger("visibilityChange",this.visibleItems)},filterCallback:function(e,t){e.$el.css("display",t?"":"none")},renderAllItems:function(){n.__super__.renderAllItems.apply(this,arguments),this.updateVisibility()},updateVisibility:function(){this.$el[this.visibleItems.length>0?"show":"hide"]()}})}),define("oronavigation/js/app/views/pin-item-view",["orotranslation/js/translator","oroui/js/mediator","./bookmark-item-view"],function(e,t,i){var n;return n=i.extend({remove:function(){t.off("content-manager:content-outdated",this.outdatedContentHandler,this),n.__super__.remove.call(this)},render:function(){n.__super__.render.call(this),t.on("content-manager:content-outdated",this.outdatedContentHandler,this),this.setActiveItem()},outdatedContentHandler:function(e){var i,n,o,s,r;n=this,i=this.$el,o=this.model.get("url"),s=function(){n.checkCurrentUrl()&&(r=i.find(".pin-status.outdated"),n.markNormal(r),t.off("page:afterRefresh",s))},!e.isCurrentPage&&t.execute("compareUrl",o,e.path)&&(r=i.find(".pin-status"),r.is(".outdated")||(this.markOutdated(r),t.on("page:afterRefresh",s)))},markOutdated:function(t){t.addClass("outdated").attr("title",e("Content of pinned page is outdated"))},markNormal:function(e){e.removeClass("outdated").removeAttr("title")}})}),define("oronavigation/js/app/components/pin-component",["underscore","oroui/js/mediator","./base/bookmark-component","../views/bookmark-button-view","../views/pin-bar-view","../views/pin-dropdown-view","../views/pin-item-view"],function(e,t,i,n,o,s,r){var a;return a=i.extend({listen:{"add collection":"onAdd","remove collection":"onRemove"},_createSubViews:function(){this._createButtonView(),this._createBarView(),this._createDropdownView()},_createButtonView:function(){var t,i;t=this._options.buttonOptions||{},i=this.collection,e.extend(t,{autoRender:!0,collection:i}),this.button=new n(t)},_createBarView:function(){var t,i,n;t=this._options.barOptions||{},i=this.collection,n=r.extend({template:this._options.barItemTemplate}),e.extend(t,{autoRender:!0,collection:i,itemView:n}),this.pinBar=new o(t)},_createDropdownView:function(){var t,i,n,o;t=this._options.dropdownOptions||{},i=this.collection,n=this.pinBar,o=r.extend({template:this._options.dropdownItemTemplate}),e.extend(t,{autoRender:!0,collection:i,itemView:o,filterer:function(e){return!n.isVisibleItem(e)},position:function(){var e,t={};return e=n.getLastVisibleView(),e&&(t.left=e.el.getBoundingClientRect().right),t}}),this.dropdown=new s(t)},actualizeAttributes:function(e){e.set("type","pinbar"),e.set("position",0)},onAdd:function(e){t.execute({name:"pageCache:add",silent:!0}),e.get("url")!==t.execute("currentUrl")&&t.execute("changeUrl",e.get("url"),{replace:!0})},onRemove:function(e){var i;i=e.get("url"),t.execute({name:"pageCache:remove",silent:!0},i),t.execute("compareUrl",e.get("url"))&&t.execute("changeUrlParam","restore",null)}})}),require(["oroui/js/app/controllers/base/controller"],function(e){e.loadBeforeAction(["oronavigation/js/app/views/history-view"],function(t){e.addToReuse("history",t,{el:"#history-content"})}),e.loadBeforeAction(["oronavigation/js/app/views/most-viewed-view"],function(t){e.addToReuse("mostViewed",t,{el:"#mostviewed-content"})}),e.loadBeforeAction(["jquery","oronavigation/js/app/components/favorite-component","oronavigation/js/app/models/base/model","oronavigation/js/app/models/base/collection"],function(t,i,n,o){var s;s=new o([],{model:n}),e.addToReuse("favoritePage",i,{dataSource:"#favorite-content [data-data]",buttonOptions:{el:"#pin-button-div .favorite-button"},tabItemTemplate:t("#template-dot-menu-item").html(),tabOptions:{el:"#favorite-content",listSelector:".extra-list",fallbackSelector:".dot-menu-empty-message"},collection:s})}),e.loadBeforeAction(["jquery","oronavigation/js/app/components/pin-component","oronavigation/js/app/models/base/model","oronavigation/js/app/models/base/collection","oronavigation/js/app/views/page-state-view","oronavigation/js/app/models/page-state-model"],function(t,i,n,o,s,r){var a,l,c;c=t("#template-list-pin-item").html(),a=new o([],{model:n}),e.addToReuse("pagePin",i,{dataSource:"#pinbar [data-data]",buttonOptions:{el:"#pin-button-div .minimize-button"},dropdownItemTemplate:c,dropdownOptions:{el:"#pinbar .show-more",listSelector:".dropdown-menu ul"},barItemTemplate:c,barOptions:{el:"#pinbar .list-bar",listSelector:"ul",fallbackSelector:".pin-bar-empty"},collection:a}),l=new r,e.addToReuse("pageState",s,{el:"#container",keepElement:!0,model:l,collection:a})})}),define("oronavigation/js/app/modules/views",function(){}),require(["oroui/js/mediator","oroui/js/app/controllers/base/controller"],function(e,t){t.loadBeforeAction(["oronavigation/js/content-manager"],function(t){e.setHandler("pageCache:init",t.init,t),e.setHandler("pageCache:add",t.add,t),e.setHandler("pageCache:get",t.get,t),e.setHandler("pageCache:remove",t.remove,t),e.setHandler("pageCache:state:save",t.saveState,t),e.setHandler("pageCache:state:fetch",t.fetchState,t),e.setHandler("pageCache:state:check",t.checkState,t),e.setHandler("compareUrl",t.compareUrl,t),e.setHandler("currentUrl",t.currentUrl,t),e.setHandler("changeUrl",t.changeUrl,t),e.setHandler("changeUrlParam",t.changeUrlParam,t)})}),define("oronavigation/js/app/modules/content-manager",function(){}),define("oronavigation/js/app/models/base/collection",["oroui/js/mediator","oroui/js/app/models/base/collection"],function(e,t){var i;return i=t.extend({getCurrentModel:function(){var t=this.find(function(t){return e.execute("compareUrl",t.get("url"))});return t}})}),define("oronavigation/js/app/models/base/model",["underscore","routing","oroui/js/app/models/base/model"],function(e,t,i){var n;return n=i.extend({defaults:{title:"",title_rendered:"",url:null,position:null,type:null},url:function(){var i=e.result(this,"urlRoot")||e.result(this.collection,"url");return i&&-1===i.indexOf(this.get("type"))?i+=("/"===i.charAt(i.length-1)?"":"/")+this.get("type"):i||(i=t.generate("oro_api_get_navigationitems",{type:this.get("type")})),this.isNew()?i:i+("/"===i.charAt(i.length-1)?"":"/")+"ids/"+encodeURIComponent(this.id)}})}),define("oronavigation/js/app/models/page-state-model",["oroui/js/app/models/base/model","routing"],function(e,t){var i;return i=e.extend({defaults:{pageId:"",data:"",pagestate:{pageId:"",data:""}},url:function(){var e=["oro_api_post_pagestate"];return this.id&&(e=["oro_api_put_pagestate",{id:this.id}]),t.generate.apply(t,e)}})}),define("oronavigation/js/app/views/page-state-view",["jquery","underscore","routing","orotranslation/js/translator","oroui/js/mediator","oroui/js/modal","oroui/js/app/views/base/view","base64"],function(e,t,i,n,o,s,r){var a;return a=r.extend({listen:{"change:data model":"_saveModel","change model":"_updateCache","page:request mediator":"onPageRequest","page:update mediator":"onPageUpdate","page:afterChange mediator":"afterPageChange","page:beforeRefresh mediator":"beforePageRefresh","add collection":"toggleStateTrace","remove collection":"toggleStateTrace"},initialize:function(){var e;this._initialData=null,this._resetChanges=!1,e=new s({title:n("Refresh Confirmation"),content:n("Your local changes will be lost. Are you sure you want to refresh the page?"),okText:n("Ok, got it."),className:"modal modal-primary",okButtonClass:"btn-primary btn-large",cancelText:n("Cancel")}),this.subview("confirmModal",e)},beforePageRefresh:function(t){var i,n,o;null!==this._initialData&&this.model.get("data")!==this._initialData&&(o=this,n=this.subview("confirmModal"),i=e.Deferred(),i.always(function(){o.stopListening(n)}),this.listenTo(n,"ok",function(){i.resolve({resetChanges:!0})}),this.listenTo(n,"cancel",function(){i.reject()}),t.push(i),n.open())},onPageRequest:function(){this._initialData=null,this._resetChanges=!1,this._switchOffTrace()},onPageUpdate:function(e,t){var i;i=(t||{}).options,this._resetChanges=Boolean(i&&i.resetChanges)},afterPageChange:function(){var e;this._hasForm()&&this._isStateTraceRequired()&&(this._resetChanges&&(o.execute("pageCache:state:save","form",null),e={initial:!0}),this._switchOnTrace(e))},toggleStateTrace:function(){var e=this._isStateTraceRequired();e?this._switchOnTrace({initial:!0}):this._switchOffTrace()},_switchOnTrace:function(e){var t;t=o.execute("pageCache:state:fetch","form"),t&&t.id?this._initStateTracer(t,e):this._loadState(e)},_switchOffTrace:function(){this.$el.off("change.page-state"),this.model.clear({silent:!0})},_loadState:function(t){var n,o;o=this,n=i.generate("oro_api_get_pagestate_checkid",{pageId:this._combinePageId()}),e.get(n).done(function(e){var i;i={pageId:e.pagestate.pageId||o._combinePageId(),data:o._resetChanges?"":e.pagestate.data,pagestate:e.pagestate},e.id&&(i.id=e.id),o._initStateTracer(i,t)})},_initStateTracer:function(e,i){i=i||{},this._initialData=this._collectFormsData(),(!e.data||i.initial)&&(e.data=this._initialData),this.model.set(e),e.data!==this._initialData&&this._restoreState(),this.$el.on("change.page-state",t.bind(this._collectState,this))},_updateCache:function(){var e;e={},t.extend(e,this.model.getAttributes()),o.execute("pageCache:state:save","form",e)},_hasForm:function(){return Boolean(e("form[data-collect=true]").length)},_saveModel:function(){this.model.get("pagestate").data!==this.model.get("data")&&this.model.save({pagestate:{pageId:this.model.get("pageId"),data:this.model.get("data")}})},_collectState:function(){var e,t;e=this._combinePageId(),e&&(t=this._collectFormsData(),t!==this.model.get("data")&&this.model.set({pageId:e,data:t}))},_collectFormsData:function(){var i;return i=[],e("form[data-collect=true]").each(function(n,o){var s=e(o).find("input, textarea, select").not(':input[type=button],   :input[type=submit], :input[type=reset], :input[type=password], :input[type=file],   :input[name$="[_token]"], .select2[type=hidden]');i[n]=s.serializeArray(),s=e(o).find(".select2[type=hidden], .select2[type=select]"),t.each(s,function(o){var s,r,a;s=e(o),r={name:o.name,value:s.val()},s.data("select2")&&(a=s.select2("data")),!t.isEmpty(a)&&e.isPlainObject(a)&&(r.selectedData=[a]),i[n].push(r)})}),i=JSON.stringify(i)},_restoreState:function(){var e;e=this.model.get("data"),e&&(this._restoreForms(e),o.trigger("pagestate_restored"))},_restoreForms:function(t){t=JSON.parse(t),e.each(t,function(t,i){var n=e("form[data-collect=true]").eq(t);e.each(i,function(e,t){var i=n.find('[name="'+t.name+'"]');switch(i.prop("type")){case"checkbox":i.filter('[value="'+t.value+'"]').prop("checked",!0);break;case"select-multiple":i.find("option").prop("selected",!1).end().find('option[value="'+t.value+'"]').prop("selected",!0);break;default:t.selectedData&&i.data("selected-data",t.selectedData),t.value!==i.val()&&i.val(t.value).trigger("change")}})})},_combinePageId:function(){var e;return e=this._parseCurrentURL(),base64_encode(e.path)},_parseCurrentURL:function(){var e,t;return e=o.execute("currentUrl"),t=e.split("?"),e={path:t[0],query:t[1]||""}},_isStateTraceRequired:function(){return Boolean(this.collection.getCurrentModel())}})}),define("oronavigation/js/app/views/history-view",["oroui/js/app/views/base/page-region-view"],function(e){var t;return t=e.extend({template:function(e){return e.history},pageItems:["history"],render:function(){this.actionArgs&&this.actionArgs.options.fromCache!==!0&&t.__super__.render.call(this)}})}),define("oronavigation/js/app/views/most-viewed-view",["oroui/js/app/views/base/page-region-view"],function(e){var t;return t=e.extend({template:function(e){return e.mostviewed},pageItems:["mostviewed"],render:function(){this.actionArgs&&this.actionArgs.options.fromCache!==!0&&t.__super__.render.call(this)}})}),define("orocrm/contactphone/model",["backbone"],function(e){return e.Model.extend({defaults:{id:null,owner:null,phone:null,primary:!1}})}),define("orocrm/contactphone/collection",["backbone","routing","orocrm/contactphone/model"],function(e,t,i){return e.Collection.extend({route:"oro_api_get_contact_phones",url:null,model:i,setContactId:function(e){this.url=t.generate(this.route,{contactId:e})}})}),define("orocrm/contactphone/view",["jquery","underscore","backbone","orocrm/contactphone/collection","jquery.select2"],function(e,t,i,n){return i.View.extend({collection:null,contact:null,phoneSelector:null,phonePlain:null,phonesSelectorTemplate:t.template('<% _.each(contactPhones, function(phone) { %><option <% if (phone.get("primary")) { %> selected="selected" <% } %> value=<%= phone.get("id") %>><%= _.escape(phone.get("phone")) %></option><% }); %>'),initialize:function(e){if(!e.contact)throw new Error("Contact must be specified");if(this.contact=e.contact,!e.phoneSelector)throw new Error("Phone selector must be specified");if(this.phoneSelector=e.phoneSelector,!e.phonePlain)throw new Error("Phone text field must be specified");this.phonePlain=e.phonePlain,this.initializeCollection(),this.phoneSelector.closest(".controls").append(this.phonePlain),this.phonePlain.css("margin-top","12px"),this.contact.on("change",t.bind(this.contactChanged,this)),this.phoneSelector.on("change",t.bind(this.redrawPhonePlain,this)),this.listenTo(this.collection,"reset",this.render),this.render()},initializeCollection:function(){var e=[];t.each(this.phoneSelector.find("option"),function(t){t.value&&e.push({id:t.value,phone:t.label,primary:t.selected})},this),this.collection=new n(e)},isShowPhonePlain:function(){return 0==this.collection.models.length||""==this.phoneSelector.val()},redrawPhonePlain:function(){this.isShowPhonePlain()?this.phonePlain.show():(this.phonePlain.hide(),this.phonePlain.val(""))},contactChanged:function(){var e=this.contact.val();e?(this.collection.setContactId(e),this.collection.fetch({reset:!0})):this.collection.reset()},syncPhoneSelector:function(){this.phoneSelector.find('option[value!=""]').remove(),this.phoneSelector.append(this.phonesSelectorTemplate({contactPhones:this.collection.models})),this.phoneSelector.trigger("change")},render:function(){this.syncPhoneSelector(),this.redrawPhonePlain()}})}),define("orocrm/contact/widgets/account-contacts-widget",["jquery"],function(e){return{boxClickHandler:function(t){e(t.target).hasClass("contact-box-link")||e(this).find(".contact-box-name-link").click()},init:function(){e(".contact-box").click(this.boxClickHandler)}}}),define("orocrmmarketinglist/js/app/components/grid-linker",["require","underscore","oroui/js/mediator"],function(e){var t=e("underscore"),i=e("oroui/js/mediator");return function(e){t.each(e,function(e){i.on("datagrid:afterRemoveRow:"+e.main,function(){i.trigger("datagrid:doRefresh:"+e.secondary)})})}}),define("orocrmmarketinglist/js/app/components/columns-component",["require","jquery","underscore","oroui/js/mediator","routing"],function(e){var t,i,n,o=e("jquery"),s=e("underscore"),r=e("oroui/js/mediator"),a=e("routing");t={};var l=function(e){s.each(e,function(e){t[e.name]=e.contact_information_type})},c=function(e){var t=o("<ul/>");s.each(e,function(e){t.append(o("<li/>").html(e.label))}),n.html(t)},d=function(e){c(e),l(e)},h=function(e){e&&o.ajax({url:a.generate("orocrm_api_entity_marketinglist_contact_information_fields"),data:{entity:e},success:d})},u=function(e,t,i){var n;if(i){"phone"==i?n="icon-phone":"email"==i&&(n="icon-envelope");var s=t.find('[data-cid="'+e.cid+'"] .name-cell');s.hasClass("has-icon")||s.addClass("has-icon").prepend(o("<i/>").addClass(n))}},p=function(e,n){var s=e.get("name");t.hasOwnProperty(s)?u(e,n,t[s]):s.indexOf(":")>-1&&o.ajax({url:a.generate("orocrm_api_contact_marketinglist_information_field_type"),data:{entity:i.select2("val"),field:s},success:function(i){t[s]=i,u(e,n,t[s])}})};return function(e){i=o(e.entityChoiceSelector),n=o(e.fieldsChoiceSelector),s.isEmpty(e.contactInformationFields)||d(e.contactInformationFields),i.on("change",function(e){h(e.val)}),r.on("items-manager:table:add:item-container",function(e,t,i){p(t,i)})}}),define("ororeminder/js/reminder-handler",["jquery","orosync/js/sync","oroui/js/messenger","routing","underscore","oroui/js/mediator"],function(e,t,i,n,o,s){return{removeDates:{},reminders:{},init:function(e,t){var i=this;s.on("page-rendered page:afterChange",function(){i.showReminders()}),t&&this.initWamp(e)},initWamp:function(e){var i=this;t.subscribe("oro/reminder/remind_user_"+e,function(e){var t=JSON.parse(e);i.addReminders(t),i.showReminders()})},setReminders:function(e){var t=this;this.reminders={},o.each(e,function(e){t.addReminder(e)})},addReminders:function(e){var t=this;o.each(e,function(e){t.addReminder(e)})},addReminder:function(e){var t=e.uniqueId,i=e.id,n=this.reminders[t];if(n)n.id!=i&&(n.duplicateIds=n.duplicateIds||[],o.indexOf(n.duplicateIds,i)&&n.duplicateIds.push(i));else{var s=this.removeDates[t],r=new Date;if(s&&r.getTime()-s.getTime()<6e4)return;this.reminders[t]=e}},removeReminder:function(t){var i=this.reminders[t];if(i){var o=n.generate("oro_api_post_reminder_shown"),s=i.duplicateIds||[];s.push(i.id),e.post(o,{ids:s}),this.removeDates[t]=new Date,delete this.reminders[t]}},showReminders:function(){var t=this;e(".alert-reminder").remove(),o.each(this.reminders,function(n,o){var s=this.getReminderMessage(n);s+='(<a class="reminder-dismiss-link" data-id="'+n.id+'" data-unique-id="'+n.uniqueId+'" href="javascript:void(0);">dismiss</a>)';var r=i.notificationFlashMessage("reminder",s,{delay:!1,flash:!1}),a={actions:r,uniqueId:o};e('.reminder-dismiss-link[data-id="'+n.id+'"]').bind("click",a,function(e){t.removeReminder(e.data.uniqueId),e.data.actions.close()})},this),e(".alert-reminder .close").unbind("click").bind("click",function(){e(this).parents(".alert-reminder").find(".reminders_dismiss_link").click()}),e(".alert-reminder .hash-navigation-link").unbind("click").bind("click",function(t){t.preventDefault();var i=e(this).attr("href");s.execute("redirectTo",{url:i})})},getReminderMessage:function(t){var i="";try{i='<i class="icon-bell"></i>';var n=e('.reminder_templates[data-identifier="'+t.templateId+'"]').html();""==e.trim(n)&&(n=e('.reminder_templates[data-identifier="default"]').html()),i+=o.template(n,t)}catch(s){console&&"function"==typeof console.log&&console.log("Exception occurred when compiling reminder template",s)
}return i}}}),define("orocrmcampaign/js/app/components/email-campaign-form",["require","underscore","jquery","oroui/js/mediator"],function(e){var t=e("underscore"),i=e("jquery"),n=e("oroui/js/mediator");return function(e){var o=e._sourceElement.find(e.scheduleEl),s=e._sourceElement.find(e.scheduledForEl),r=e._sourceElement.find(e.transportEl),a=s.find("label"),l=e.hideOn||[],c=e.showOn||[];r.on("change",function(){n.execute("showLoading");var e=r.closest("form"),t=e.serializeArray(),o=e.attr("action");t.push({name:"formUpdateMarker",value:1});var s={formEl:e,data:t,reloadManually:!0};n.trigger("integrationFormReload:before",s),s.reloadManually&&n.execute("submitPage",{url:o,type:e.attr("method"),data:i.param(t)})}),o.on("change",function(){t.contains(l,i(this).val())&&(s.addClass("hide").data("validation-ignore",!0),a.hasClass("required")&&a.removeClass("required").find("em").remove()),t.contains(c,i(this).val())&&(s.removeClass("hide").removeData("validation-ignore"),a.hasClass("required")||a.addClass("required").append("<em>*</em>"))})}}),define("text!orocrmchannel/js/app/components/template/integration-widget-link.html",[],function(){return'<div class="integration-widget-link-container">\n    <% if (name) {%>\n        <%= name %> (<a href="javascript: void(0);" class="no-hash form-element-text" data-purpose="open-form-widget"><%= title %></a>)\n        <a href="javascript: void(0);" class="no-hash"><i class="icon-remove" data-purpose="remove-integration-data"></i></a>\n    <% } else { %>\n        <a href="javascript: void(0);" class="no-hash form-element-text" data-purpose="open-form-widget"><%= title %></a>\n    <% } %>\n</div>\n'}),define("orocrmchannel/js/app/components/integration-widget",["underscore","backbone","orotranslation/js/translator","routing","oro/dialog-widget","oroui/js/delete-confirmation","text!./template/integration-widget-link.html"],function(e,t,i,n,o,s,r){var a=t.$,l=t.View.extend({$dataEl:null,$idEl:null,$typeEl:null,$nameEl:null,$channelNameEl:null,linkTemplate:e.template(r),events:{'click [data-purpose="open-form-widget"]':"openDialog",'click [data-purpose="remove-integration-data"]':"onRemoveIntegrationData"},initialize:function(e){if(!(e.dataEl&&e.idEl&&e.typeEl&&e.nameEl))throw new TypeError("Missing required options for IntegrationWidgetHandlerView");this.$dataEl=a(e.dataEl),this.$idEl=a(e.idEl),this.$typeEl=a(e.typeEl),this.$nameEl=a(e.nameEl),this.$channelNameEl=a(e.channelNameEl)},openDialog:function(t){t.preventDefault();var i=new o({url:this._getUrl(),title:this._getTitle(),stateEnabled:!1,incrementalPosition:!1,dialogOptions:{modal:!0,resizable:!0,autoResize:!0,width:700,height:550}}),n=function(t){t=e.omit(t,["_token"]),this._setValue("name",t.name||""),this._setValue("data",t),i.remove(),this.render()};i.on("formSave",e.bind(n,this)),i.render()},onRemoveIntegrationData:function(){var t=new s({content:i("orocrm.channel.confirmation.delete_confirmation")});t.on("ok",e.bind(this.removeIntegrationData,this)),t.open()},removeIntegrationData:function(){this.$dataEl.val(null),this.$idEl.val(null),this.$nameEl.val(null),this.render()},render:function(){var e=this._getValue("name"),t={name:e,title:e?i("edit"):i("Configure integration")};this.$el.find(".integration-widget-link-container").remove().end().append(this.linkTemplate(t))},_getUrl:function(){var e=this._getValue("id"),t=this._getValue("data"),i=e?"orocrm_channel_integration_update":"orocrm_channel_integration_create",o=this._getValue("type"),s={};return s.channelName=encodeURIComponent(this._getValue("channelName")),t&&(s.data=t),e?s.id=e:o&&(s.type=encodeURIComponent(o)),n.generate(i,s)},_getTitle:function(){var e=this._getValue("name");return e?e:i("Configure integration")},_getValue:function(e){this._assertAllowedValueKey(e);var t,i=this[["$",e,"El"].join("")].val();switch(e){case"data":t=""!==i?JSON.parse(i):{};break;default:t=i}return t},_setValue:function(e,t){var i;switch(this._assertAllowedValueKey(e),e){case"data":i=JSON.stringify(t);break;default:i=t}this[["$",e,"El"].join("")].val(i)},_assertAllowedValueKey:function(e){if(-1===["id","data","type","name","channelName"].indexOf(e))throw new TypeError("Unknown option: "+e)}});return function(e){var t=new l(e);return t.render(),e._sourceElement.remove(),t}}),define("orocrmchannel/js/entity-management/model",["backbone"],function(e){return e.Model.extend({defaults:{icon:null,name:null,label:null,actions:[]}})}),define("text!orocrmchannel/js/entity-management/templates/component.html",[],function(){return'<div class="span6 entities-component">\n    <div class="form-container clearfix" data-validation-ignore></div>\n    <div class="grid-container">\n        <table class="grid table-hover table table-bordered table-condensed" style="display: table;">\n            <thead>\n            <tr>\n                <th class="name-column"><span><%= __(\'Entity\') %></span></th>\n                <th class="action-column"><span><%= __(\'Actions\') %></span></th>\n            </tr>\n            </thead>\n            <tbody></tbody>\n        </table>\n    </div>\n    <div class="no-data">\n        <span><%= __(\'There is no entities selected\') %></span>\n    </div>\n</div>\n'}),define("text!orocrmchannel/js/entity-management/templates/entity-item.html",[],function(){return'<tr data-cid="<%- cid %>">\n    <td class="name-cell"><i class="<%= icon %> hide-text"></i>&nbsp;<%- label %></td>\n    <td class="action-cell">\n        <% _.each(actions, function(action) { %>\n            <a href="<%= action.url ? action.url: \'javascript: void(0);\' %>"\n                class="action <% if (!action.url) { %>no-hash<% } %>"\n                <% if (!action.url && action.collectionAction) { %>\n                    data-collection-action="<%= action.collectionAction %>""\n                <% } %> title="<%- __(action.title) %>">\n\n                <% if (action.icon) { %>\n                    <i class="<%= action.icon %> hide-text"></i>\n                <% } else { %>\n                    <%- __(action.title) %>\n                <% } %>\n            </a>\n        <% }) %>\n    </td>\n</tr>\n'}),define("text!orocrmchannel/js/entity-management/templates/form.html",[],function(){return'<div class="query-designer-form entities-form-container">\n    <div class="control-group">\n        <div class="controls">\n            <input type="text" data-purpose="entity-selector" name="name" data-validation=\'{"NotBlank":null}\'>\n        </div>\n    </div>\n    <div class="pull-left entities-form-action-container">\n        <div class="pull-left btn-group icons-holder">\n            <a href="#" class="btn no-hash btn-primary add-button" title="<%= __(\'Add\') %>"><%= __(\'Add\') %></a>\n        </div>\n        <div class="pull-left btn-group icons-holder">\n            <a href="#" class="btn no-hash cancel-button" title="<%= __(\'Cancel\') %>"><%= __(\'Cancel\') %></a>\n        </div>\n    </div>\n</div>\n'}),define("text!orocrmchannel/js/entity-management/templates/select2/result.html",[],function(){return'<% if (icon) { %><i class="<%= icon %> hide-text"></i><% } %>&nbsp;<%= highlight(_.escape(text)) %>\n'}),define("text!orocrmchannel/js/entity-management/templates/select2/selection.html",[],function(){return'<% if (icon) { %><i class="<%= icon %> hide-text"></i><% } %>&nbsp;<%= highlight(_.escape(text)) %>\n'}),define("orocrmchannel/js/entity-management/entity-component-view",["require","backbone","underscore","orotranslation/js/translator","./model","text!./templates/component.html","text!./templates/entity-item.html","text!./templates/form.html","text!./templates/select2/result.html","text!./templates/select2/selection.html","oroform/js/select2-config","oroui/js/items-manager/editor","oroui/js/items-manager/table"],function(e){var t=e("backbone"),i=e("underscore"),n=e("orotranslation/js/translator"),o=e("./model"),s=e("text!./templates/component.html"),r=e("text!./templates/entity-item.html"),a=e("text!./templates/form.html"),l=e("text!./templates/select2/result.html"),c=e("text!./templates/select2/selection.html"),d=e("oroform/js/select2-config");e("oroui/js/items-manager/editor"),e("oroui/js/items-manager/table");var h={VIEW_MODE:1,EDIT_MODE:2};return t.View.extend({MODES:i.clone(h),template:i.template(s),itemTemplate:i.template(r),formTemplate:i.template(a),options:{data:[],mode:h.VIEW_MODE,entityModel:o,metadata:null,lockedEntities:[]},collection:null,$formContainer:null,$listContainer:null,$noDataContainer:null,initialize:function(e){if(this.options=i.defaults(e||{},this.options),!this.options.metadata)throw new Error('Missing "metadata" options for entity selection compoment');var n=this.options.data.length>0?i.map(this.options.data,i.bind(this._createModel,this)):[];this.collection=this.collection||new t.Collection(n,{model:o}),this.listenTo(this.collection,"add remove reset",this._onCollectionChange),this.listenTo(this.collection,"add",this._onItemAdded)},render:function(){var e={__:n};this.$el.html(this.template(i.extend({},e))),this.$formContainer=this.$el.find(".form-container"),this.$listContainer=this.$el.find(".grid-container"),this.$noDataContainer=this.$el.find(".no-data"),this.options.mode===h.EDIT_MODE&&(this.$formContainer.html(this.formTemplate(i.extend({},e))),i.defer(i.bind(this._initializeForm,this))),i.defer(i.bind(this._initializeList,this))},_initializeForm:function(){var e=new d({placeholder:n("orocrm.channel.form.entity"),result_template:l,selection_template:c,data:i.bind(function(){var e=i.omit(this.options.metadata,this.collection.pluck("name")),t=i.map(e,function(e){return{id:e.name,text:e.label,icon:e.icon,type:e.type}}),o=i.groupBy(t,function(e){return e.type}),s=[];return i.each(i.keys(o).sort().reverse(),function(e){s.push({text:n("orocrm.channel.entity_owner."+e),icon:null,children:o[e]})}),{results:s}},this)});this.$formContainer.find('[data-purpose="entity-selector"]').select2(e.getConfig()).trigger("select2-init").end().itemsManagerEditor({collection:this.collection})},_initializeList:function(){this.$listContainer.find("tbody").itemsManagerTable({collection:this.collection,itemTemplate:this.itemTemplate,itemRender:function(e,t){var o=i.extend({__:n},t);return e(o)},deleteHandler:i.partial(function(e,t){e.remove(t)},this.collection),sorting:!1}),this._onCollectionChange()},_onCollectionChange:function(){this.collection.isEmpty()?(this.$listContainer.hide(),this.$noDataContainer.show()):(this.$listContainer.show(),this.$noDataContainer.hide())},_onItemAdded:function(e){e.set(this._prepareModelAttributes(e))},_prepareModelAttributes:function(e){var t=e.get("name"),n=this.options.metadata[t]||{},o=[],s=this.options.lockedEntities;return-1===t.indexOf(s)&&this.options.mode===h.EDIT_MODE?o.push({collectionAction:"delete",title:"Delete",icon:"icon-trash"}):this.options.mode===h.VIEW_MODE&&(o.push({title:"View",icon:"icon-eye-open",url:n.view_link}),o.push({title:"Edit",icon:"icon-edit",url:n.edit_link})),i.defaults(n,{name:t,label:t,actions:o})},_createModel:function(e){var t=new o({name:e});return t.set(this._prepareModelAttributes(t)),t}})}),define("orocrmchannel/js/app/components/channel",["underscore","orotranslation/js/translator","jquery","oroui/js/mediator","oroui/js/delete-confirmation","../../entity-management/entity-component-view","jquery.select2"],function(e,t,i,n,o,s){function r(e,t,n){var o=i(e),r=o.val(),a=r?JSON.parse(r):[],c=new s({data:a,mode:s.prototype.MODES.EDIT_MODE,metadata:t,lockedEntities:n});c.render(),o.after(c.$el),l=c.collection,l.on("add remove reset",function(){o.val(JSON.stringify(l.pluck("name")))})}function a(s,r){var a=i(s),l=a.parents("form"),d=function(){a.attr("disabled",!0);var e=l.serialize();return a.attr("disabled",!1),e},h=d(),u=function(){var t,o,s=a.parents("form"),l=e.map(r,function(e){return i(e).attr("name")});t=e.filter(s.serializeArray(),function(t){return-1!==e.indexOf(l,t.name)}),t.push({name:c,value:1}),o={formEl:s,data:t,reloadManually:!0},n.trigger("channelFormReload:before",o),o.reloadManually&&n.execute("submitPage",{url:s.attr("action"),type:s.attr("method"),data:i.param(t)})};a.on("change",function(e){var i=e.removed,n=new o({title:t("orocrm.channel.confirmation.title"),okText:t("orocrm.channel.confirmation.agree"),content:t("orocrm.channel.confirmation.text")});n.on("ok",u),n.on("cancel",function(){a.select2("val",i.id)}),d()!=h?n.open():u()})}var l,c="formUpdateMarker";return function(t){var i=[];i=e.isArray(t.customerIdentity)?t.customerIdentity:[t.customerIdentity],r(t.channelEntitiesEl,t.entitiesMetadata,i),a(t.channelTypeEl,t.fields),t._sourceElement.remove()}}),define("orocrm/sidebar/widget/assigned_tasks",["jquery","underscore","backbone","routing","oroui/js/mediator","oroui/js/loading-mask"],function(e,t,i,n,o,s){return{ContentView:i.View.extend({defaultPerPage:5,template:t.template('<div class="tasks-list-wrapper"><%= content %></div>'),events:{"click .task-widget-row":"onClickTask"},initialize:function(){this.off("refresh",this.reloadTasks),this.on("refresh",this.reloadTasks),i.View.prototype.initialize.apply(this,arguments)},render:function(){return this.reloadTasks(),this},onClickTask:function(t){var i=e(t.currentTarget).data("url");o.execute("redirectTo",{url:i})},reloadTasks:function(){var t=this,i=this.model.get("settings");i.perPage=i.perPage||this.defaultPerPage;var o={perPage:i.perPage,r:Math.random()},r=n.generate("orocrm_task_widget_sidebar_tasks",o),a=new s;t.$el.html('<div class="widget-mask-wrapper"></div>'),t.$el.find(".widget-mask-wrapper").append(a.render().$el),a.show(),e.get(r,function(e){t.$el.html(t.template({content:e})),a.hide()})}}),SetupView:i.View.extend({template:t.template('<h3><%= _.__("orocrm.task.assigned_tasks_widget.settings") %></h3><label for="perPage"><%= _.__("orocrm.task.assigned_tasks_widget.number_of_tasks") %></label><input type="text" name="perPage" value="<%= settings.perPage %>"/>'),events:{"keyup input":function(e){13===e.which&&this.onSubmit(e)}},initialize:function(){this.off("ok"),this.on("ok",this.onSubmit),i.View.prototype.initialize.apply(this,arguments)},render:function(){var e=this;return e.$el.html(e.template(e.model.toJSON())),e},onSubmit:function(){var e=this.model,i=e.get("settings"),n=this.$el.find('[name="perPage"]'),o=parseInt(n.val());return t.isNaN(o)||0>=o?(n.val(i.perPage||this.defaultPerPage),n.focus(),void 0):(i.perPage!=o&&(i.perPage=o,e.set({settings:i},{silent:!0}),e.trigger("change")),this.trigger("close"),void 0)}})}}),define("orocrm/magento/soap-checker",["jquery","underscore","routing","backbone","orotranslation/js/translator","oroui/js/mediator","oroui/js/messenger"],function(e,t,i,n,o,s,r){return n.View.extend({events:{click:"processClick"},route:"orocrm_magento_soap_check",url:null,id:null,requiredOptions:["websiteSelectEl","websitesListEl","isExtensionInstalledEl","connectorsEl","adminUrlEl"],resultTemplate:t.template('<div class="alert alert-<%= type %> connection-status"><%= message %></div>'),connectorTemplate:t.template('<div class="oro-clearfix"><input type="checkbox" id="oro_integration_channel_form_connectors_<%= i %>" name="oro_integration_channel_form[connectors][]" value="<%= name %>" <%= checked %>><label for="oro_integration_channel_form_connectors_<%= i %>"><%= label %></label></div>'),initialize:function(e){this.options=t.defaults(e||{},this.options),this.id=e.transportEntityId||null,this.url=this.getUrl();var i=this.requiredOptions.filter(function(i){return t.isUndefined(e[i])});if(i.length)throw new TypeError("Missing required option(s): "+i.join(","))},getUrl:function(e){var t={id:this.id};return void 0!==e&&(t.type=e),i.generate(this.route,t)},processClick:function(){var i=this.$el.parents("form").serializeArray(),n=t.filter(i,function(e){return-1!==e.name.indexOf("[type]")});n.length&&(n=n[0].value),i=t.filter(i,function(e){return-1!==e.name.indexOf("[transport]")}),i=t.map(i,function(e){return e.name=e.name.replace(/.+\[(.+)\]$/,"soap-check[$1]"),e}),s.execute("showLoading"),e.post(this.getUrl(n),i,t.bind(this.responseHandler,this),"json").always(t.bind(function(e,t){s.execute("hideLoading"),"success"!==t&&this.renderResult("error",o("orocrm.magento.error"))},this))},responseHandler:function(i){var n=i.success||!1,s=n?o("orocrm.magento.success"):o("orocrm.magento.not_valid_parameters");if(n&&this.options.websitesModificationAllowed!==!1&&i.websites){var r=e(this.options.websitesListEl),a=e(this.options.websiteSelectEl);r.val(JSON.stringify(i.websites)),a.empty(),t.each(i.websites,function(t){a.append(e("<option />").val(t.id).text(t.label))}),a.trigger("change")}if(n){var l=e(this.options.isExtensionInstalledEl),c=e(this.options.adminUrlEl);l.val(i.isExtensionInstalled?1:0),c.val(i.adminUrl?i.adminUrl:"")}if(n&&i.connectors){var d=i.connectors,h=this.$el.parents("form"),u=h.find(this.options.connectorsEl),p=0,f=u.find(":checked"),m={};t.each(f,function(t){m[e(t).val()]="checked"}),u.empty();for(var g in d)d.hasOwnProperty(g)&&(u.append(this.connectorTemplate({name:g,label:d[g],checked:m[g]||"",i:p})),p++)}this.renderResult(n?"success":"error",s)},renderResult:function(e,t){r.notificationFlashMessage(e,t,{container:this.$el.parent(),template:this.resultTemplate})}})});